var __BUNDLE_START_TIME__=globalThis.nativePerformanceNow?nativePerformanceNow():Date.now(),__DEV__=false,process=globalThis.process||{},__METRO_GLOBAL_PREFIX__='';
!(function(e){"use strict";e.__r=i,e[`${__METRO_GLOBAL_PREFIX__}__d`]=function(e,n,o){if(t.has(n))return;const i={dependencyMap:o,factory:e,hasError:!1,importedAll:r,importedDefault:r,isInitialized:!1,publicModule:{exports:{}}};t.set(n,i)},e.__c=o,e.__registerSegment=function(e,r,n){p[e]=r,n&&n.forEach((r=>{t.has(r)||h.has(r)||h.set(r,e)}))};var t=o();const r={},{hasOwnProperty:n}={};function o(){return t=new Map}function i(e){const r=e,n=t.get(r);return n&&n.isInitialized?n.publicModule.exports:d(r,n)}function l(e){const n=e,o=t.get(n);if(o&&o.importedDefault!==r)return o.importedDefault;const l=i(n),u=l&&l.__esModule?l.default:l;return t.get(n).importedDefault=u}function u(e){const o=e,l=t.get(o);if(l&&l.importedAll!==r)return l.importedAll;const u=i(o);let c;if(u&&u.__esModule)c=u;else{if(c={},u)for(const e in u)n.call(u,e)&&(c[e]=u[e]);c.default=u}return t.get(o).importedAll=c}i.importDefault=l,i.importAll=u,i.context=function(){throw new Error("The experimental Metro feature `require.context` is not enabled in your project.")},i.resolveWeak=function(){throw new Error("require.resolveWeak cannot be called dynamically.")};let c=!1;function d(t,r){if(!c&&e.ErrorUtils){let n;c=!0;try{n=g(t,r)}catch(t){e.ErrorUtils.reportFatalError(t)}return c=!1,n}return g(t,r)}const a=16,s=65535;function f(e){return{segmentId:e>>>a,localId:e&s}}i.unpackModuleId=f,i.packModuleId=function(e){return(e.segmentId<<a)+e.localId};const p=[],h=new Map;function g(r,n){if(!n&&p.length>0){const e=h.get(r)??0,o=p[e];null!=o&&(o(r),n=t.get(r),h.delete(r))}const o=e.nativeRequire;if(!n&&o){const{segmentId:e,localId:i}=f(r);o(i,e),n=t.get(r)}if(!n)throw _(r);if(n.hasError)throw n.error;n.isInitialized=!0;const{factory:c,dependencyMap:d}=n;try{const t=n.publicModule;return t.id=r,c(e,i,l,u,t,t.exports,d),n.factory=void 0,n.dependencyMap=void 0,t.exports}catch(e){throw n.hasError=!0,n.error=e,n.isInitialized=!1,n.publicModule.exports=void 0,e}}function _(e){return Error('Requiring unknown module "'+e+'".')}})('undefined'!=typeof globalThis?globalThis:'undefined'!=typeof global?global:'undefined'!=typeof window?window:this);
!(function(e){e.$$require_external=require})('undefined'!=typeof globalThis?globalThis:'undefined'!=typeof global?global:'undefined'!=typeof window?window:this);
'undefined'!=typeof globalThis?globalThis:'undefined'!=typeof global?global:'undefined'!=typeof window&&window;
!(function(r){let l=0,n=!0===r.RN$useAlwaysAvailableJSErrorHandling?r.RN$handleException:(r,l)=>{throw r};const t={setGlobalHandler(r){n=r},getGlobalHandler:()=>n,reportError(r){n&&n(r,!1)},reportFatalError(r){n&&n(r,!0)},applyWithGuard(r,n,e,a,o){try{return l++,r.apply(n,e)}catch(r){t.reportError(r)}finally{l--}return null},applyWithGuardIfNeeded:(r,l,n)=>t.inGuard()?r.apply(l,n):(t.applyWithGuard(r,l,n),null),inGuard:()=>!!l,guard(r,l,n){if('function'!=typeof r)return console.warn('A function must be passed to ErrorUtils.guard, got ',r),null;const e=l??r.name??'<generated guard>';return function(...l){return t.applyWithGuard(r,n??this,l,null,e)}}};r.ErrorUtils=t})('undefined'!=typeof globalThis?globalThis:'undefined'!=typeof global?global:'undefined'!=typeof window?window:this);
__d((function(g,r,i,a,m,_e,d){m.exports=function(e){return e&&e.__esModule?e:{default:e}},m.exports.__esModule=!0,m.exports.default=m.exports}),16,[]);
__d((function(g,r,i,a,m,e,d){m.exports=$$require_external('node:util')}),467,[]);
__d((function(g,r,i,a,m,e,d){m.exports=$$require_external('node:crypto')}),468,[]);
__d((function(g,r,i,a,m,e,d){m.exports=$$require_external('node:stream')}),470,[]);
__d((function(g,_r,i,_a3,_m,_e2,d){Object.defineProperty(_e2,"__esModule",{value:!0}),_e2.betterFetch=_e2.applySchemaPlugin=_e2.ValidationError=_e2.BetterFetchError=void 0,_e2.bodyParser=function(t,e){if("json"===e)return JSON.parse(t);return t},_e2.createFetch=void 0,_e2.createRetryStrategy=y,_e2.createSchema=void 0,_e2.detectContentType=j,_e2.detectResponseType=b,_e2.getBody=E,_e2.getFetch=T,_e2.getHeaders=P,_e2.getMethod=x,_e2.getTimeout=U,_e2.getURL=function(t,e){if(t.startsWith("@")){const e=t.toString().split("@")[1].split("/")[0];A.includes(e)&&(t=t.replace(`@${e}/`,"/"))}let o;try{if(t.startsWith("http"))o=t;else{let n=null==e?void 0:e.baseURL;n&&!(null==n?void 0:n.endsWith("/"))&&(n+="/"),o=t.startsWith("/")?new URL(t.substring(1),n):new URL(t,null==e?void 0:e.baseURL)}}catch(o){if(o instanceof TypeError){if(!(null==e?void 0:e.baseURL))throw TypeError(`Invalid URL ${t}. Are you passing in a relative url but not setting the baseURL?`);throw TypeError(`Invalid URL ${t}. Please validate that you are passing the correct input.`)}throw o}if(null==e?void 0:e.params)if(Array.isArray(null==e?void 0:e.params)){const t=(null==e?void 0:e.params)?Array.isArray(e.params)?`/${e.params.join("/")}`:`/${Object.values(e.params).join("/")}`:"";o=o.toString().split("/:")[0],o=`${o.toString()}${t}`}else for(const[t,n]of Object.entries(null==e?void 0:e.params))o=o.toString().replace(`:${t}`,String(n));const n=new URL(o),r=null==e?void 0:e.query;if(r)for(const[t,e]of Object.entries(r))n.searchParams.append(t,String(e));return n},_e2.initializePlugins=void 0,_e2.isFunction=O,_e2.isJSONParsable=w,_e2.isJSONSerializable=R,_e2.isPayloadMethod=function(t){if(!t)return!1;return["POST","PUT","PATCH","DELETE"].includes(t.toUpperCase())},_e2.isRouteMethod=function(t){if(!t)return!1;return["GET","POST","PUT","PATCH","DELETE"].includes(t.toUpperCase())},_e2.jsonParse=S,_e2.methods=void 0,_e2.parseStandardSchema=L;var t=Object.defineProperty,e=Object.defineProperties,o=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,a=(e,o,n)=>o in e?t(e,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[o]=n,l=(t,e)=>{for(var o in e||(e={}))r.call(e,o)&&a(t,o,e[o]);if(n)for(var o of n(e))s.call(e,o)&&a(t,o,e[o]);return t},u=(t,n)=>e(t,o(n)),c=class extends Error{constructor(t,e,o){super(e||t.toString(),{cause:o}),this.status=t,this.statusText=e,this.error=o}};_e2.BetterFetchError=c;var p=async(t,e)=>{var o,n,r,s,a,l;let u=e||{};const c={onRequest:[null==e?void 0:e.onRequest],onResponse:[null==e?void 0:e.onResponse],onSuccess:[null==e?void 0:e.onSuccess],onError:[null==e?void 0:e.onError],onRetry:[null==e?void 0:e.onRetry]};if(!e||!(null==e?void 0:e.plugins))return{url:t,options:u,hooks:c};for(const p of(null==e?void 0:e.plugins)||[]){if(p.init){const n=await(null==(o=p.init)?void 0:o.call(p,t.toString(),e));u=n.options||u,t=n.url}c.onRequest.push(null==(n=p.hooks)?void 0:n.onRequest),c.onResponse.push(null==(r=p.hooks)?void 0:r.onResponse),c.onSuccess.push(null==(s=p.hooks)?void 0:s.onSuccess),c.onError.push(null==(a=p.hooks)?void 0:a.onError),c.onRetry.push(null==(l=p.hooks)?void 0:l.onRetry)}return{url:t,options:u,hooks:c}};_e2.initializePlugins=p;var f=class{constructor(t){this.options=t}shouldAttemptRetry(t,e){return this.options.shouldRetry?Promise.resolve(t<this.options.attempts&&this.options.shouldRetry(e)):Promise.resolve(t<this.options.attempts)}getDelay(){return this.options.delay}},h=class{constructor(t){this.options=t}shouldAttemptRetry(t,e){return this.options.shouldRetry?Promise.resolve(t<this.options.attempts&&this.options.shouldRetry(e)):Promise.resolve(t<this.options.attempts)}getDelay(t){return Math.min(this.options.maxDelay,this.options.baseDelay*2**t)}};function y(t){if("number"==typeof t)return new f({type:"linear",attempts:t,delay:1e3});switch(t.type){case"linear":return new f(t);case"exponential":return new h(t);default:throw new Error("Invalid retry strategy")}}var v=async t=>{const e={},o=async t=>"function"==typeof t?await t():t;if(null==t?void 0:t.auth)if("Bearer"===t.auth.type){const n=await o(t.auth.token);if(!n)return e;e.authorization=`Bearer ${n}`}else if("Basic"===t.auth.type){const n=o(t.auth.username),r=o(t.auth.password);if(!n||!r)return e;e.authorization=`Basic ${btoa(`${n}:${r}`)}`}else if("Custom"===t.auth.type){const n=o(t.auth.value);if(!n)return e;e.authorization=`${o(t.auth.prefix)} ${n}`}return e},m=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function b(t){const e=t.headers.get("content-type"),o=new Set(["image/svg","application/xml","application/xhtml","application/html"]);if(!e)return"json";const n=e.split(";").shift()||"";return m.test(n)?"json":o.has(n)||n.startsWith("text/")?"text":"blob"}function w(t){try{return JSON.parse(t),!0}catch(t){return!1}}function R(t){if(void 0===t)return!1;const e=typeof t;return"string"===e||"number"===e||"boolean"===e||null===e||"object"===e&&(!!Array.isArray(t)||!t.buffer&&(t.constructor&&"Object"===t.constructor.name||"function"==typeof t.toJSON))}function S(t){try{return JSON.parse(t)}catch(e){return t}}function O(t){return"function"==typeof t}function T(t){if(null==t?void 0:t.customFetchImpl)return t.customFetchImpl;if("undefined"!=typeof globalThis&&O(globalThis.fetch))return globalThis.fetch;throw new Error("No fetch implementation found")}async function P(t){const e=new Headers(null==t?void 0:t.headers),o=await v(t);for(const[t,n]of Object.entries(o||{}))e.set(t,n);if(!e.has("content-type")){const o=j(null==t?void 0:t.body);o&&e.set("content-type",o)}return e}function j(t){return R(t)?"application/json":null}function E(t){if(!(null==t?void 0:t.body))return null;const e=new Headers(null==t?void 0:t.headers);if(R(t.body)&&!e.has("content-type")){for(const[e,o]of Object.entries(null==t?void 0:t.body))o instanceof Date&&(t.body[e]=o.toISOString());return JSON.stringify(t.body)}return t.body}function x(t,e){var o;if(null==e?void 0:e.method)return e.method.toUpperCase();if(t.startsWith("@")){const n=null==(o=t.split("@")[1])?void 0:o.split("/")[0];return A.includes(n)?n.toUpperCase():(null==e?void 0:e.body)?"POST":"GET"}return(null==e?void 0:e.body)?"POST":"GET"}function U(t,e){let o;return!(null==t?void 0:t.signal)&&(null==t?void 0:t.timeout)&&(o=setTimeout((()=>null==e?void 0:e.abort()),null==t?void 0:t.timeout)),{abortTimeout:o,clearTimeout:()=>{o&&clearTimeout(o)}}}var $=_e2.ValidationError=class t extends Error{constructor(e,o){super(o||JSON.stringify(e,null,2)),this.issues=e,Object.setPrototypeOf(this,t.prototype)}};async function L(t,e){let o=await t["~standard"].validate(e);if(o.issues)throw new $(o.issues);return o.value}var A=_e2.methods=["get","post","put","patch","delete"];_e2.createSchema=(t,e)=>({schema:t,config:e});var q=t=>({id:"apply-schema",name:"Apply Schema",version:"1.0.0",async init(e,o){var n,r,s,a;const c=(null==(r=null==(n=t.plugins)?void 0:n.find((t=>{var o;return!!(null==(o=t.schema)?void 0:o.config)&&(e.startsWith(t.schema.config.baseURL||"")||e.startsWith(t.schema.config.prefix||""))})))?void 0:r.schema)||t.schema;if(c){let t=e;(null==(s=c.config)?void 0:s.prefix)&&t.startsWith(c.config.prefix)&&(t=t.replace(c.config.prefix,""),c.config.baseURL&&(e=e.replace(c.config.prefix,c.config.baseURL))),(null==(a=c.config)?void 0:a.baseURL)&&t.startsWith(c.config.baseURL)&&(t=t.replace(c.config.baseURL,""));const n=c.schema[t];if(n){let t=u(l({},o),{method:n.method,output:n.output});return(null==o?void 0:o.disableValidation)||(t=u(l({},t),{body:n.input?await L(n.input,null==o?void 0:o.body):null==o?void 0:o.body,params:n.params?await L(n.params,null==o?void 0:o.params):null==o?void 0:o.params,query:n.query?await L(n.query,null==o?void 0:o.query):null==o?void 0:o.query})),{url:e,options:t}}}return{url:e,options:o}}});_e2.applySchemaPlugin=q;function W(t,e){let{baseURL:o,params:n,query:r}=e||{query:{},params:{},baseURL:""},s=t.startsWith("http")?t.split("/").slice(0,3).join("/"):o||"";if(t.startsWith("@")){const e=t.toString().split("@")[1].split("/")[0];A.includes(e)&&(t=t.replace(`@${e}/`,"/"))}s.endsWith("/")||(s+="/");let[a,l]=t.replace(s,"").split("?");const u=new URLSearchParams(l);for(const[t,e]of Object.entries(r||{}))null!=e&&u.set(t,String(e));if(n)if(Array.isArray(n)){const t=a.split("/").filter((t=>t.startsWith(":")));for(const[e,o]of t.entries()){const t=n[e];a=a.replace(o,t)}}else for(const[t,e]of Object.entries(n))a=a.replace(`:${t}`,String(e));a=a.split("/").map(encodeURIComponent).join("/"),a.startsWith("/")&&(a=a.slice(1));let c=u.toString();if(c=c.length>0?`?${c}`.replace(/\+/g,"%20"):"",!s.startsWith("http"))return`${s}${a}${c}`;return new URL(`${a}${c}`,s)}_e2.createFetch=t=>async function(e,o){const n=u(l(l({},t),o),{plugins:[...(null==t?void 0:t.plugins)||[],q(t||{})]});if(null==t?void 0:t.catchAllError)try{return await k(e,n)}catch(t){return{data:null,error:{status:500,statusText:"Fetch Error",message:"Fetch related error. Captured by catchAllError option. See error property for more details.",error:t}}}return await k(e,n)};var k=async(t,e)=>{var o,n,r,s,a,f,h,v;const{hooks:m,url:R,options:O}=await p(t,e),j=T(O),$=new AbortController,A=null!=(o=O.signal)?o:$.signal,q=W(R,O),F=E(O),C=await P(O),D=x(R,O);let N=u(l({},O),{url:q,headers:C,body:F,method:D,signal:A});for(const t of m.onRequest)if(t){const e=await t(N);e instanceof Object&&(N=e)}("pipeTo"in N&&"function"==typeof N.pipeTo||"function"==typeof(null==(n=null==e?void 0:e.body)?void 0:n.pipe))&&("duplex"in N||(N.duplex="half"));const{clearTimeout:I}=U(O,$);let J=await j(N.url,N);I();const B={response:J,request:N};for(const t of m.onResponse)if(t){const o=await t(u(l({},B),{response:(null==(r=null==e?void 0:e.hookOptions)?void 0:r.cloneResponse)?J.clone():J}));o instanceof Response?J=o:o instanceof Object&&(J=o.response)}if(J.ok){if(!("HEAD"!==N.method))return{data:"",error:null};const t=b(J),o={data:"",response:J,request:N};if("json"===t||"text"===t){const t=await J.text(),e=null!=(s=N.jsonParser)?s:S,n=await e(t);o.data=n}else o.data=await J[t]();(null==N?void 0:N.output)&&N.output&&!N.disableValidation&&(o.data=await L(N.output,o.data));for(const t of m.onSuccess)t&&await t(u(l({},o),{response:(null==(a=null==e?void 0:e.hookOptions)?void 0:a.cloneResponse)?J.clone():J}));return(null==e?void 0:e.throw)?o.data:{data:o.data,error:null}}const z=null!=(f=null==e?void 0:e.jsonParser)?f:S,H=await J.text(),M=w(H),V=M?await z(H):null,_={response:J,responseText:H,request:N,error:u(l({},V),{status:J.status,statusText:J.statusText})};for(const t of m.onError)t&&await t(u(l({},_),{response:(null==(h=null==e?void 0:e.hookOptions)?void 0:h.cloneResponse)?J.clone():J}));if(null==e?void 0:e.retry){const o=y(e.retry),n=null!=(v=e.retryAttempt)?v:0;if(await o.shouldAttemptRetry(n,J)){for(const t of m.onRetry)t&&await t(B);const r=o.getDelay(n);return await new Promise((t=>setTimeout(t,r))),await k(t,u(l({},e),{retryAttempt:n+1}))}}if(null==e?void 0:e.throw)throw new c(J.status,J.statusText,M?V:H);return{data:null,error:u(l({},V),{status:J.status,statusText:J.statusText})}};_e2.betterFetch=k}),908,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.a=function(o,c,_){if(o)return u(o,c);const L=t.e.BETTER_AUTH_URL||t.e.NEXT_PUBLIC_BETTER_AUTH_URL||t.e.PUBLIC_BETTER_AUTH_URL||t.e.NUXT_PUBLIC_BETTER_AUTH_URL||t.e.NUXT_PUBLIC_AUTH_URL||("/"!==t.e.BASE_URL?t.e.BASE_URL:void 0);if(L)return u(L,c);const R=_?.headers.get("x-forwarded-host"),f=_?.headers.get("x-forwarded-proto");if(R&&f)return u(`${f}://${R}`,c);if(_){const t=U(_.url);if(!t)throw new n.B("Could not get origin from request. Please provide a valid base URL.");return u(t,c)}return},e.b=function(t){try{return new URL(t).host}catch(n){return t}},e.c=function(t){try{return new URL(t).protocol}catch(t){return null}},e.g=U;var t=r(d[0]),n=r(d[1]);function o(t){try{return"/"!==new URL(t).pathname}catch(o){throw new n.B(`Invalid base URL: ${t}. Please provide a valid base URL.`)}}function u(t,n="/api/auth"){return o(t)?t:(n=n.startsWith("/")?n:`/${n}`,`${t.replace(/\/+$/,"")}${n}`)}function U(t){try{return new URL(t).origin}catch(t){return null}}}),909,[910,911]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.i=e.e=e.b=e.a=void 0;const o=Object.create(null),t=t=>globalThis.process?.env||globalThis.Deno?.env.toObject()||globalThis.__env__||(t?o:globalThis),n=e.e=new Proxy(o,{get:(n,s)=>t()[s]??o[s],has:(n,s)=>s in t()||s in o,set:(o,n,s)=>(t(!0)[n]=s,!0),deleteProperty(o,n){if(!n)return!1;return delete t(!0)[n],!0},ownKeys(){const o=t(!0);return Object.keys(o)}});const s="undefined"!=typeof process&&process.env?"production":"";e.a="production"===s,e.b="dev"===s||"development"===s,e.i="test"===s||!!(l=n.TEST)&&"false"!==l;var l}),910,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.M=e.B=void 0;class s extends Error{constructor(s,t){super(s),this.name="BetterAuthError",this.message=s,this.cause=t,this.stack=""}}e.B=s;e.M=class extends s{constructor(s){super(`The package "${s}" is required. Make sure it is installed.`,s)}}}),911,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.p=function(t,n={strict:!0}){return p(t,n)};const t={proto:/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,constructor:/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,protoShort:/"__proto__"\s*:/,constructorShort:/"constructor"\s*:/},n=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/,o={true:!0,false:!1,null:null,undefined:void 0,nan:Number.NaN,infinity:Number.POSITIVE_INFINITY,"-infinity":Number.NEGATIVE_INFINITY},s=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{1,7}))?(?:Z|([+-])(\d{2}):(\d{2}))$/;function u(t){return t instanceof Date&&!isNaN(t.getTime())}function c(t){const n=s.exec(t);if(!n)return null;const[,o,c,p,f,l,I,_,N,y,b]=n;let w=new Date(Date.UTC(parseInt(o,10),parseInt(c,10)-1,parseInt(p,10),parseInt(f,10),parseInt(l,10),parseInt(I,10),_?parseInt(_.padEnd(3,"0"),10):0));if(N){const t=(60*parseInt(y,10)+parseInt(b,10))*("+"===N?-1:1);w.setUTCMinutes(w.getUTCMinutes()+t)}return u(w)?w:null}function p(s,u={}){const{strict:p=!1,warnings:f=!1,reviver:l,parseDates:I=!0}=u;if("string"!=typeof s)return s;const _=s.trim();if('"'===_[0]&&_.endsWith('"')&&!_.slice(1,-1).includes('"'))return _.slice(1,-1);const N=_.toLowerCase();if(N.length<=9&&N in o)return o[N];if(!n.test(_)){if(p)throw new SyntaxError("[better-json] Invalid JSON");return s}if(Object.entries(t).some((([t,n])=>{const o=n.test(_);return o&&f&&console.warn(`[better-json] Detected potential prototype pollution attempt using ${t} pattern`),o}))&&p)throw new Error("[better-json] Potential prototype pollution attempt detected");try{const t=(t,n)=>{if(!("__proto__"===t||"constructor"===t&&n&&"object"==typeof n&&"prototype"in n)){if(I&&"string"==typeof n){const t=c(n);if(t)return t}return l?l(t,n):n}f&&console.warn(`[better-json] Dropping "${t}" key to prevent prototype pollution`)};return JSON.parse(_,t)}catch(t){if(p)throw t;return s}}}),925,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ownerAc=e.memberAc=e.defaultStatements=e.defaultRoles=e.defaultAc=e.adminAc=void 0;var t=r(d[0]);r(d[1]);const n=e.defaultStatements={organization:["update","delete"],member:["create","update","delete"],invitation:["create","cancel"],team:["create","update","delete"]},c=e.defaultAc=(0,t.createAccessControl)(n),o=e.adminAc=c.newRole({organization:["update"],invitation:["create","cancel"],member:["create","update","delete"],team:["create","update","delete"]}),l=e.ownerAc=c.newRole({organization:["update","delete"],member:["create","update","delete"],invitation:["create","cancel"],team:["create","update","delete"]}),u=e.memberAc=c.newRole({organization:[],member:[],invitation:[],team:[]});e.defaultRoles={admin:o,owner:l,member:u}}),927,[928,911]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.createAccessControl=function(s){return{newRole:s=>t(s),statements:s}},e.role=t;var s=r(d[0]);function t(t){return{authorize(c,o="AND"){let n=!1;for(const[u,l]of Object.entries(c)){const c=t[u];if(!c)return{success:!1,error:`You are not allowed to access resource: ${u}`};if(Array.isArray(l))n=l.every((s=>c.includes(s)));else{if("object"!=typeof l)throw new s.B("Invalid access control request");{const s=l;n="OR"===s.connector?s.actions.some((s=>c.includes(s))):s.actions.every((s=>c.includes(s)))}}if(n&&"OR"===o)return{success:n};if(!n&&"AND"===o)return{success:!1,error:`unauthorized to access resource "${u}"`}}return n?{success:n}:{success:!1,error:"Not authorized"}},statements:t}}}),928,[911]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.h=void 0;var s=r(d[0]);e.h=o=>{if(!o.permissions&&!o.permission)return!1;const n=o.role.split(","),t=o.options.roles||s.defaultRoles;for(const s of n){const n=t[s],u=n?.authorize(o.permissions??o.permission);if(u?.success)return!0}return!1}}),929,[927]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.t=void 0;e.t=t=>({id:"two-factor",$InferServerPlugin:{},atomListeners:[{matcher:t=>t.startsWith("/two-factor/"),signal:"$sessionSignal"}],pathMethods:{"/two-factor/disable":"POST","/two-factor/enable":"POST","/two-factor/send-otp":"POST","/two-factor/generate-backup-codes":"POST"},fetchPlugins:[{id:"two-factor",name:"two-factor",hooks:{async onSuccess(o){o.data?.twoFactorRedirect&&t?.onTwoFactorRedirect&&await t.onTwoFactorRedirect()}}}]})}),946,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.userAc=e.defaultStatements=e.defaultRoles=e.defaultAc=e.adminAc=void 0;var s=r(d[0]);r(d[1]);const t=e.defaultStatements={user:["create","list","set-role","ban","impersonate","delete","set-password"],session:["list","revoke","delete"]},l=e.defaultAc=(0,s.createAccessControl)(t),o=e.adminAc=l.newRole({user:["create","list","set-role","ban","impersonate","delete","set-password"],session:["list","revoke","delete"]}),n=e.userAc=l.newRole({user:[],session:[]});e.defaultRoles={admin:o,user:n}}),947,[928,911]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.h=void 0;var s=r(d[0]);e.h=o=>{if(o.userId&&o.options?.adminUserIds?.includes(o.userId))return!0;if(!o.permissions&&!o.permission)return!1;const n=(o.role||o.options?.defaultRole||"user").split(","),t=o.options?.roles||s.defaultRoles;for(const s of n){const n=t[s],u=n?.authorize(o.permission??o.permissions);if(u?.success)return!0}return!1}}),948,[947]);
__d((function(g,r,i,a,m,e,d){m.exports=$$require_external('node:buffer')}),1621,[]);
__d((function(g,r,i,a,m,_e,d){m.exports=function(e,t){if(!{}.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e},m.exports.__esModule=!0,m.exports.default=m.exports}),3270,[]);
__d((function(g,r,i,a,m,_e,d){var e=0;m.exports=function(t){return"__private_"+e+++"_"+t},m.exports.__esModule=!0,m.exports.default=m.exports}),3271,[]);
__d((function(g,r,i,a,m,e,d){function n(n,t){return t(n)}function t(n,t){let o=null;const u=()=>{o?.unsubscribe(),o=null,t.removeEventListener('abort',u)};return new ReadableStream({start(s){o=n.subscribe({next(n){s.enqueue({ok:!0,value:n})},error(n){s.enqueue({ok:!1,error:n}),s.close()},complete(){s.close()}}),t.aborted?u():t.addEventListener('abort',u,{once:!0})},cancel(){u()}})}Object.defineProperty(e,"__esModule",{value:!0}),e.isObservable=function(n){return'object'==typeof n&&null!==n&&'subscribe'in n},e.observable=function(t){const o={subscribe(n){let o=null,u=!1,s=!1,c=!1;function l(){null!==o?s||(s=!0,'function'==typeof o?o():o&&o.unsubscribe()):c=!0}return o=t({next(t){u||n.next?.(t)},error(t){u||(u=!0,n.error?.(t),l())},complete(){u||(u=!0,n.complete?.(),l())}}),c&&l(),{unsubscribe:l}},pipe:(...t)=>t.reduce(n,o)};return o},e.observableToAsyncIterable=function(n,o){const u=t(n,o),s=u.getReader(),c={async next(){const n=await s.read();if(n.done)return{value:void 0,done:!0};const{value:t}=n;if(!t.ok)throw t.error;return{value:t.value,done:!1}},return:async()=>(await s.cancel(),{value:void 0,done:!0})};return{[Symbol.asyncIterator]:()=>c}},e.observableToPromise=function(n){const t=new AbortController,o=new Promise(((o,u)=>{let s=!1;function c(){s||(s=!0,l.unsubscribe())}t.signal.addEventListener('abort',(()=>{u(t.signal.reason)}));const l=n.subscribe({next(n){s=!0,o(n),c()},error(n){u(n)},complete(){t.abort(),c()}})}));return o}}),3320,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.createRecursiveProxy=e.createFlatProxy=void 0;const t=()=>{},n=t=>{Object.freeze&&Object.freeze(t)};function c(l,o,s){var u,p;const y=o.join('.');return(u=s)[p=y]??(u[p]=new Proxy(t,{get(t,n){if('string'==typeof n&&'then'!==n)return c(l,[...o,n],s)},apply(t,c,s){const u=o[o.length-1];let p={args:s,path:o};return'call'===u?p={args:s.length>=2?[s[1]]:[],path:o.slice(0,-1)}:'apply'===u&&(p={args:s.length>=2?s[1]:[],path:o.slice(0,-1)}),n(p.args),n(p.path),l(p)}})),s[y]}e.createRecursiveProxy=t=>c(t,[],Object.create(null));e.createFlatProxy=n=>new Proxy(t,{get(t,c){if('then'!==c)return n(c)}})}),3326,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultFormatter=void 0;e.defaultFormatter=({shape:t})=>t}),3327,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getErrorShape=function(s){const{path:c,error:n,config:p}=s,{code:_}=s.error,u={message:n.message,code:o.TRPC_ERROR_CODES_BY_KEY[_],data:{code:_,httpStatus:(0,t.getHTTPStatusCodeFromError)(n)}};p.isDev&&'string'==typeof s.error.stack&&(u.data.stack=s.error.stack);'string'==typeof c&&(u.data.path=c);return p.errorFormatter({...s,shape:u})};var t=r(d[0]),o=r(d[1])}),3328,[3329,3330]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.JSONRPC2_TO_HTTP_CODE=e.HTTP_CODE_TO_JSONRPC2=void 0,e.getHTTPStatusCode=function(O){const _=Array.isArray(O)?O:[O],N=new Set(_.map((O=>{if('error'in O&&(0,T.isObject)(O.error.data)){if('number'==typeof O.error.data?.httpStatus)return O.error.data.httpStatus;return R(E.TRPC_ERROR_CODES_BY_NUMBER[O.error.code])}return 200})));if(1!==N.size)return 207;return N.values().next().value},e.getHTTPStatusCodeFromError=function(E){return R(E.code)},e.getStatusCodeFromKey=R,e.getStatusKeyFromCode=function(E){return _[E]??'INTERNAL_SERVER_ERROR'};var E=r(d[0]),T=r(d[1]);const O=e.JSONRPC2_TO_HTTP_CODE={PARSE_ERROR:400,BAD_REQUEST:400,UNAUTHORIZED:401,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_SUPPORTED:405,TIMEOUT:408,CONFLICT:409,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,UNSUPPORTED_MEDIA_TYPE:415,UNPROCESSABLE_CONTENT:422,TOO_MANY_REQUESTS:429,CLIENT_CLOSED_REQUEST:499,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504},_=e.HTTP_CODE_TO_JSONRPC2={400:'BAD_REQUEST',401:'UNAUTHORIZED',403:'FORBIDDEN',404:'NOT_FOUND',405:'METHOD_NOT_SUPPORTED',408:'TIMEOUT',409:'CONFLICT',412:'PRECONDITION_FAILED',413:'PAYLOAD_TOO_LARGE',415:'UNSUPPORTED_MEDIA_TYPE',422:'UNPROCESSABLE_CONTENT',429:'TOO_MANY_REQUESTS',499:'CLIENT_CLOSED_REQUEST',500:'INTERNAL_SERVER_ERROR',501:'NOT_IMPLEMENTED',502:'BAD_GATEWAY',503:'SERVICE_UNAVAILABLE',504:'GATEWAY_TIMEOUT'};function R(E){return O[E]??500}}),3329,[3330,3331]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.TRPC_ERROR_CODES_BY_NUMBER=e.TRPC_ERROR_CODES_BY_KEY=void 0;e.TRPC_ERROR_CODES_BY_KEY={PARSE_ERROR:-32700,BAD_REQUEST:-32600,INTERNAL_SERVER_ERROR:-32603,NOT_IMPLEMENTED:-32603,BAD_GATEWAY:-32603,SERVICE_UNAVAILABLE:-32603,GATEWAY_TIMEOUT:-32603,UNAUTHORIZED:-32001,FORBIDDEN:-32003,NOT_FOUND:-32004,METHOD_NOT_SUPPORTED:-32005,TIMEOUT:-32008,CONFLICT:-32009,PRECONDITION_FAILED:-32012,PAYLOAD_TOO_LARGE:-32013,UNSUPPORTED_MEDIA_TYPE:-32015,UNPROCESSABLE_CONTENT:-32022,TOO_MANY_REQUESTS:-32029,CLIENT_CLOSED_REQUEST:-32099},e.TRPC_ERROR_CODES_BY_NUMBER={[-32700]:'PARSE_ERROR',[-32600]:'BAD_REQUEST',[-32603]:'INTERNAL_SERVER_ERROR',[-32001]:'UNAUTHORIZED',[-32003]:'FORBIDDEN',[-32004]:'NOT_FOUND',[-32005]:'METHOD_NOT_SUPPORTED',[-32008]:'TIMEOUT',[-32009]:'CONFLICT',[-32012]:'PRECONDITION_FAILED',[-32013]:'PAYLOAD_TOO_LARGE',[-32015]:'UNSUPPORTED_MEDIA_TYPE',[-32022]:'UNPROCESSABLE_CONTENT',[-32029]:'TOO_MANY_REQUESTS',[-32099]:'CLIENT_CLOSED_REQUEST'}}),3330,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.abortSignalsAnyPonyfill=function(n){if('function'==typeof AbortSignal.any)return AbortSignal.any(n);const t=new AbortController;for(const t of n){if(t.aborted){o();break}t.addEventListener('abort',o,{once:!0})}return t.signal;function o(){t.abort();for(const t of n)t.removeEventListener('abort',o)}},e.assert=function(n,t="no additional info"){if(!n)throw new Error(`AssertionError: ${t}`)},e.identity=function(n){return n},e.isAsyncIterable=function(o){return t&&n(o)&&Symbol.asyncIterator in o},e.isFunction=function(n){return'function'==typeof n},e.isObject=n,e.mergeWithoutOverrides=function(n,...t){const o=Object.assign(Object.create(null),n);for(const n of t)for(const t in n){if(t in o&&o[t]!==n[t])throw new Error(`Duplicate key ${t}`);o[t]=n[t]}return o},e.noop=function(){},e.omitPrototype=function(n){return Object.assign(Object.create(null),n)},e.run=void 0,e.sleep=function(n=0){return new Promise((t=>setTimeout(t,n)))},e.unsetMarker=void 0;e.unsetMarker=Symbol();function n(n){return!!n&&!Array.isArray(n)&&'object'==typeof n}const t='function'==typeof Symbol&&!!Symbol.asyncIterator;e.run=n=>n()}),3331,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.TRPCError=void 0,e.getCauseFromUnknown=s,e.getTRPCErrorFromUnknown=function(n){if(n instanceof c)return n;if(n instanceof Error&&'TRPCError'===n.name)return n;const o=new c({code:'INTERNAL_SERVER_ERROR',cause:n});n instanceof Error&&n.stack&&(o.stack=n.stack);return o};var n=r(d[0]);function o(n,o,t){return o in n?Object.defineProperty(n,o,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[o]=t,n}class t extends Error{}function s(o){if(o instanceof Error)return o;const s=typeof o;if('undefined'!==s&&'function'!==s&&null!==o){if('object'!==s)return new Error(String(o));if((0,n.isObject)(o)){const n=new t;for(const t in o)n[t]=o[t];return n}}}class c extends Error{constructor(n){const t=s(n.cause);super(n.message??t?.message??n.code,{cause:t}),o(this,"cause",void 0),o(this,"code",void 0),this.code=n.code,this.name='TRPCError',this.cause||(this.cause=t)}}e.TRPCError=c}),3332,[3331]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getRequestInfo=async function(t){const n=p(t.req);return await n.parse(t)};var t=r(d[0]),n=r(d[1]),s=r(d[2]),o=r(d[3]);function c(n){let o=null,c=s.unsetMarker;return{read:async()=>(c!==s.unsetMarker||(null===o&&(o=n().catch((n=>{if(n instanceof t.TRPCError)throw n;throw new t.TRPCError({code:'BAD_REQUEST',message:n instanceof Error?n.message:'Invalid input',cause:n})}))),c=await o,o=null),c),result:()=>c!==s.unsetMarker?c:void 0}}const u={isMatch:t=>!!t.headers.get('content-type')?.startsWith('application/json'),async parse(u){const{req:l}=u,p='1'===u.searchParams.get('batch'),h=p?u.path.split(','):[u.path],f=c((async()=>{let n;if('GET'===l.method){const t=u.searchParams.get('input');t&&(n=JSON.parse(t))}else n=await l.json();if(void 0===n)return{};if(!p)return{0:u.router._def._config.transformer.input.deserialize(n)};if(!(0,s.isObject)(n))throw new t.TRPCError({code:'BAD_REQUEST',message:'"input" needs to be an object when doing a batch call'});const o={};for(const t of h.keys()){const s=n[t];void 0!==s&&(o[t]=u.router._def._config.transformer.input.deserialize(s))}return o})),P=await Promise.all(h.map((async(t,o)=>{const c=await(0,n.getProcedureAtPath)(u.router,t);return{path:t,procedure:c,getRawInput:async()=>{let t=(await f.read())[o];if('subscription'===c?._def.type){const n=u.headers.get('last-event-id')??u.searchParams.get('lastEventId')??u.searchParams.get('Last-Event-Id');n&&((0,s.isObject)(t)?t={...t,lastEventId:n}:t??(t={lastEventId:n}))}return t},result:()=>f.result()?.[o]}}))),y=new Set(P.map((t=>t.procedure?._def.type)).filter(Boolean));
/* istanbul ignore if -- @preserve */
if(y.size>1)throw new t.TRPCError({code:'BAD_REQUEST',message:`Cannot mix procedure types in call: ${Array.from(y).join(', ')}`});const w=y.values().next().value??'unknown',E=u.searchParams.get('connectionParams');return{isBatchCall:p,accept:l.headers.get('trpc-accept'),calls:P,type:w,connectionParams:null===E?null:(0,o.parseConnectionParamsFromString)(E),signal:l.signal,url:u.url}}},l=[u,{isMatch:t=>!!t.headers.get('content-type')?.startsWith('multipart/form-data'),async parse(s){const{req:o}=s;if('POST'!==o.method)throw new t.TRPCError({code:'METHOD_NOT_SUPPORTED',message:'Only POST requests are supported for multipart/form-data requests'});const u=c((async()=>await o.formData())),l=await(0,n.getProcedureAtPath)(s.router,s.path);return{accept:null,calls:[{path:s.path,getRawInput:u.read,result:u.result,procedure:l}],isBatchCall:!1,type:'mutation',connectionParams:null,signal:o.signal,url:s.url}}},{isMatch:t=>!!t.headers.get('content-type')?.startsWith('application/octet-stream'),async parse(s){const{req:o}=s;if('POST'!==o.method)throw new t.TRPCError({code:'METHOD_NOT_SUPPORTED',message:'Only POST requests are supported for application/octet-stream requests'});const u=c((async()=>o.body));return{calls:[{path:s.path,getRawInput:u.read,result:u.result,procedure:await(0,n.getProcedureAtPath)(s.router,s.path)}],isBatchCall:!1,accept:null,type:'mutation',connectionParams:null,signal:o.signal,url:s.url}}}];function p(n){const s=l.find((t=>t.isMatch(n)));if(s)return s;if(!s&&'GET'===n.method)return u;throw new t.TRPCError({code:'UNSUPPORTED_MEDIA_TYPE',message:n.headers.has('content-type')?`Unsupported content-type "${n.headers.get('content-type')}`:'Missing content-type header'})}}),3333,[3332,3334,3331,3336]);
__d((function(g,_r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.callProcedure=async function(r){const{type:t,path:n}=r,f=await h(r.router,n);if(!f||!w(f)||f._def.type!==t&&!r.allowMethodOverride)throw new o.TRPCError({code:'NOT_FOUND',message:`No "${t}"-procedure on path "${n}"`});
/* istanbul ignore if -- @preserve */if(f._def.type!==t&&r.allowMethodOverride&&'subscription'===f._def.type)throw new o.TRPCError({code:'METHOD_NOT_SUPPORTED',message:"Method override is not supported for subscriptions"});return f(r)},e.createCallerFactory=v,e.createRouterFactory=p,e.getProcedureAtPath=h,e.lazy=function(r){async function t(){const t=await r();if(l(t))return t;const o=Object.values(t);if(1!==o.length||!l(o[0]))throw new Error("Invalid router module - either define exactly 1 export or return the router directly.\nExample: `lazy(() => import('./slow.js').then((m) => m.slowRouter))`");return o[0]}return t[c]=!0,t},e.mergeRouters=function(...r){const o=(0,f.mergeWithoutOverrides)({},...r.map((r=>r._def.record))),c=r.reduce(((r,o)=>{if(o._def._config.errorFormatter&&o._def._config.errorFormatter!==t.defaultFormatter){if(r!==t.defaultFormatter&&r!==o._def._config.errorFormatter)throw new Error('You seem to have several error formatters');return o._def._config.errorFormatter}return r}),t.defaultFormatter),s=r.reduce(((r,t)=>{if(t._def._config.transformer&&t._def._config.transformer!==n.defaultTransformer){if(r!==n.defaultTransformer&&r!==t._def._config.transformer)throw new Error('You seem to have several transformers');return t._def._config.transformer}return r}),n.defaultTransformer);return p({errorFormatter:c,transformer:s,isDev:r.every((r=>r._def._config.isDev)),allowOutsideOfServer:r.every((r=>r._def._config.allowOutsideOfServer)),isServer:r.every((r=>r._def._config.isServer)),$types:r[0]?._def._config.$types})(o)};var r=_r(d[0]),t=_r(d[1]),o=_r(d[2]),n=_r(d[3]),f=_r(d[4]);const c=Symbol('lazy');function s(r){const t=Symbol();let o=t;return()=>(o===t&&(o=r()),o)}function u(r){return'function'==typeof r&&c in r}function l(r){return(0,f.isObject)(r)&&(0,f.isObject)(r._def)&&'router'in r._def}const _={_ctx:null,_errorShape:null,_meta:null,queries:{},mutations:{},subscriptions:{},errorFormatter:t.defaultFormatter,transformer:n.defaultTransformer},y=['then','call','apply'];function p(r){return function(t){const o=new Set(Object.keys(t).filter((r=>y.includes(r))));if(o.size>0)throw new Error('Reserved words used in `router({})` call: '+Array.from(o).join(', '));const n=(0,f.omitPrototype)({}),c=(0,f.omitPrototype)({});function p(r){return{ref:r.ref,load:s((async()=>{const t=await r.ref(),o=[...r.path,r.key],n=o.join('.');r.aggregate[r.key]=h(t._def.record,o),delete c[n];for(const[n,f]of Object.entries(t._def.lazy)){const t=[...o,n].join('.');c[t]=p({ref:f.ref,path:o,key:n,aggregate:r.aggregate[r.key]})}}))}}function h(r,t=[]){const o=(0,f.omitPrototype)({});for(const[f,s]of Object.entries(r??{})){if(u(s)){c[[...t,f].join('.')]=p({path:t,ref:s,key:f,aggregate:o});continue}if(l(s)){o[f]=h(s._def.record,[...t,f]);continue}if(!w(s)){o[f]=h(s,[...t,f]);continue}const r=[...t,f].join('.');if(n[r])throw new Error(`Duplicate key: ${r}`);n[r]=s,o[f]=s}return o}const O=h(t),F={_config:r,router:!0,procedures:n,lazy:c,..._,record:O};return{...O,_def:F,createCaller:v()({_def:F})}}}function w(r){return'function'==typeof r}async function h(r,t){const{_def:o}=r;let n=o.procedures[t];for(;!n;){const r=Object.keys(o.lazy).find((r=>t.startsWith(r)));if(!r)return null;const f=o.lazy[r];await f.load(),n=o.procedures[t]}return n}function v(){return function(t){const{_def:n}=t;return function(c,s){return(0,r.createRecursiveProxy)((async({path:r,args:u})=>{const l=r.join('.');if(1===r.length&&'_def'===r[0])return n;const _=await h(t,l);let y;try{if(!_)throw new o.TRPCError({code:'NOT_FOUND',message:`No procedure found on path "${r}"`});return y=(0,f.isFunction)(c)?await Promise.resolve(c()):c,await _({path:l,getRawInput:async()=>u[0],ctx:y,type:_._def.type,signal:s?.signal})}catch(r){throw s?.onError?.({ctx:y,error:(0,o.getTRPCErrorFromUnknown)(r),input:u[0],path:l,type:_?._def.type??'unknown'}),r}}))}}}}),3334,[3326,3327,3332,3335,3331]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.defaultTransformer=void 0,e.getDataTransformer=function(t){if('input'in t)return t;return{input:t,output:t}},e.transformResult=function(o,u){let l;try{l=n(o,u)}catch{throw new s}if(!(l.ok||(0,t.isObject)(l.error.error)&&'number'==typeof l.error.error.code))throw new s;if(l.ok&&!(0,t.isObject)(l.result))throw new s;return l},e.transformTRPCResponse=function(t,n){return Array.isArray(n)?n.map((n=>o(t,n))):o(t,n)};var t=r(d[0]);e.defaultTransformer={input:{serialize:t=>t,deserialize:t=>t},output:{serialize:t=>t,deserialize:t=>t}};function o(t,o){return'error'in o?{...o,error:t.transformer.output.serialize(o.error)}:'data'in o.result?{...o,result:{...o.result,data:t.transformer.output.serialize(o.result.data)}}:o}function n(t,o){if('error'in t){const n=o.deserialize(t.error);return{ok:!1,error:{...t,error:n}}}return{ok:!0,result:{...t.result,...(!t.result.type||'data'===t.result.type)&&{type:'data',data:o.deserialize(t.result.data)}}}}class s extends Error{constructor(){super('Unable to transform response from server')}}}),3335,[3331]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.parseConnectionParamsFromString=function(t){let c;try{c=JSON.parse(t)}catch(t){throw new n.TRPCError({code:'PARSE_ERROR',message:'Not JSON-parsable query params',cause:t})}return o(c)},e.parseConnectionParamsFromUnknown=o;var n=r(d[0]),t=r(d[1]);function o(o){try{if(null===o)return null;if(!(0,t.isObject)(o))throw new Error('Expected object');const n=Object.entries(o).filter((([n,t])=>'string'!=typeof t));if(n.length>0)throw new Error(`Expected connectionParams to be string values. Got ${n.map((([n,t])=>`${n}: ${typeof t}`)).join(', ')}`);return o}catch(t){throw new n.TRPCError({code:'PARSE_ERROR',message:'Invalid connection params shape',cause:t})}}}),3336,[3332,3331]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.isAbortError=function(t){return(0,o.isObject)(t)&&'AbortError'===t.name},e.throwAbortError=function(o="AbortError"){throw new DOMException(o,'AbortError')};var o=r(d[0])}),3339,[3331]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.resolveResponse=async function(f){const{router:T,req:P}=f,b=new Headers([['vary','trpc-accept']]),v=T._def._config,S=new URL(P.url);if('HEAD'===P.method)return new Response(null,{status:204});const U=f.allowBatching??f.batching?.enabled??!0,_=(f.allowMethodOverride??!1)&&'POST'===P.method,C=await(0,p.run)((async()=>{try{return[void 0,await(0,l.getRequestInfo)({req:P,path:decodeURIComponent(f.path),router:T,searchParams:S.searchParams,headers:f.req.headers,url:S})]}catch(t){return[(0,o.getTRPCErrorFromUnknown)(t),void 0]}})),x=(0,p.run)((()=>{let t;return{valueOrUndefined:()=>{if(t)return t[1]},value:()=>{const[n,o]=t;if(n)throw n;return o},create:async n=>{if(t)throw new Error('This should only be called once - report a bug in tRPC');try{const o=await f.createContext({info:n});t=[void 0,o]}catch(n){t=[(0,o.getTRPCErrorFromUnknown)(n),void 0]}}}})),q=_?w:y,k='application/jsonl'===P.headers.get('trpc-accept'),N=v.sse?.enabled??!0;try{const[l,y]=C;if(l)throw l;if(y.isBatchCall&&!U)throw new o.TRPCError({code:'BAD_REQUEST',message:"Batching is not enabled on the server"});
/* istanbul ignore if -- @preserve */if(k&&!y.isBatchCall)throw new o.TRPCError({message:"Streaming requests must be batched (you can do a batch of 1)",code:'BAD_REQUEST'});await x.create(y);const w=y.calls.map((async t=>{const n=t.procedure;try{if(f.error)throw f.error;if(!n)throw new o.TRPCError({code:'NOT_FOUND',message:`No procedure found on path "${t.path}"`});if(!q[n._def.type].includes(P.method))throw new o.TRPCError({code:'METHOD_NOT_SUPPORTED',message:`Unsupported ${P.method}-request to ${n._def.type} procedure at path "${t.path}"`});if('subscription'===n._def.type&&y.isBatchCall)throw new o.TRPCError({code:'BAD_REQUEST',message:"Cannot batch subscription calls"});return[void 0,{data:await n({path:t.path,getRawInput:t.getRawInput,ctx:x.value(),type:n._def.type,signal:f.req.signal})}]}catch(n){const s=(0,o.getTRPCErrorFromUnknown)(n),c=t.result();return f.onError?.({error:s,path:t.path,input:c,ctx:x.valueOrUndefined(),type:t.procedure?._def.type??'unknown',req:f.req}),[s,void 0]}}));if(!y.isBatchCall){const[s]=y.calls,[l,O]=await w[0];switch(y.type){case'unknown':case'mutation':case'query':{if(b.set('content-type','application/json'),R(O?.data))throw new o.TRPCError({code:'UNSUPPORTED_MEDIA_TYPE',message:'Cannot use stream-like response in non-streaming request - use httpBatchStreamLink'});const t=l?{error:(0,n.getErrorShape)({config:v,ctx:x.valueOrUndefined(),error:l,input:s.result(),path:s.path,type:y.type})}:{result:{data:O.data}},c=E({ctx:x.valueOrUndefined(),info:y,responseMeta:f.responseMeta,errors:l?[l]:[],headers:b,untransformedJSON:[t]});return new Response(JSON.stringify((0,u.transformTRPCResponse)(v,t)),{status:c.status,headers:b})}case'subscription':{const u=(0,p.run)((()=>{if(l)return h(l);if(!N)return h(new o.TRPCError({code:'METHOD_NOT_SUPPORTED',message:'Missing experimental flag "sseSubscriptions"'}));if(!(0,t.isObservable)(O.data)&&!(0,p.isAsyncIterable)(O.data))return h(new o.TRPCError({message:`Subscription ${s.path} did not return an observable or a AsyncGenerator`,code:'INTERNAL_SERVER_ERROR'}));return(0,t.isObservable)(O.data)?(0,t.observableToAsyncIterable)(O.data,f.req.signal):O.data})),w=(0,c.sseStreamProducer)({...v.sse,data:u,serialize:t=>v.transformer.output.serialize(t),formatError(t){const c=(0,o.getTRPCErrorFromUnknown)(t.error),u=s?.result(),p=s?.path,l=s?.procedure?._def.type??'unknown';f.onError?.({error:c,path:p,input:u,ctx:x.valueOrUndefined(),req:f.req,type:l});return(0,n.getErrorShape)({config:v,ctx:x.valueOrUndefined(),error:c,input:u,path:p,type:l})}});for(const[t,n]of Object.entries(c.sseHeaders))b.set(t,n);const R=E({ctx:x.valueOrUndefined(),info:y,responseMeta:f.responseMeta,errors:[],headers:b,untransformedJSON:null});return new Response(w,{headers:b,status:R.status})}}}if('application/jsonl'===y.accept){b.set('content-type','application/json'),b.set('transfer-encoding','chunked');const c=E({ctx:x.valueOrUndefined(),info:y,responseMeta:f.responseMeta,errors:[],headers:b,untransformedJSON:null}),u=(0,s.jsonlStreamProducer)({...v.jsonl,maxDepth:1/0,data:w.map((async o=>{const[s,c]=await o,u=y.calls[0];if(s)return{error:(0,n.getErrorShape)({config:v,ctx:x.valueOrUndefined(),error:s,input:u.result(),path:u.path,type:u.procedure?._def.type??'unknown'})};const p=(0,t.isObservable)(c.data)?(0,t.observableToAsyncIterable)(c.data,f.req.signal):Promise.resolve(c.data);return{result:Promise.resolve({data:p})}})),serialize:v.transformer.output.serialize,onError:t=>{f.onError?.({error:(0,o.getTRPCErrorFromUnknown)(t),path:void 0,input:void 0,ctx:x.valueOrUndefined(),req:f.req,type:y?.type??'unknown'})},formatError(t){const s=y?.calls[t.path[0]],c=(0,o.getTRPCErrorFromUnknown)(t.error),u=s?.result(),p=s?.path,l=s?.procedure?._def.type??'unknown';return(0,n.getErrorShape)({config:v,ctx:x.valueOrUndefined(),error:c,input:u,path:p,type:l})}});return new Response(u,{headers:b,status:c.status})}b.set('content-type','application/json');const O=(await Promise.all(w)).map((t=>{const[n,s]=t;return n?t:R(s.data)?[new o.TRPCError({code:'UNSUPPORTED_MEDIA_TYPE',message:'Cannot use stream-like response in non-streaming request - use httpBatchStreamLink'}),void 0]:t})),T=O.map((([t,o],s)=>{const c=y.calls[s];return t?{error:(0,n.getErrorShape)({config:v,ctx:x.valueOrUndefined(),error:t,input:c.result(),path:c.path,type:c.procedure?._def.type??'unknown'})}:{result:{data:o.data}}})),S=O.map((([t])=>t)).filter(Boolean),_=E({ctx:x.valueOrUndefined(),info:y,responseMeta:f.responseMeta,untransformedJSON:T,errors:S,headers:b});return new Response(JSON.stringify((0,u.transformTRPCResponse)(v,T)),{status:_.status,headers:b})}catch(t){const[n,o]=C,s=x.valueOrUndefined(),{error:c,untransformedJSON:u,body:p}=O(t,{opts:f,ctx:x.valueOrUndefined(),type:o?.type??'unknown'}),l=E({ctx:s,info:o,responseMeta:f.responseMeta,untransformedJSON:u,errors:[c],headers:b});return new Response(p,{status:l.status,headers:b})}};var t=r(d[0]),n=r(d[1]),o=r(d[2]),s=r(d[3]),c=r(d[4]),u=r(d[5]),p=r(d[6]),l=r(d[7]),f=r(d[8]);function h(t){return(0,p.run)((async function*(){throw t}))}const y={mutation:['POST'],query:['GET'],subscription:['GET']},w={mutation:['POST'],query:['GET','POST'],subscription:['GET','POST']};function E(t){const{ctx:n,info:o,responseMeta:s,untransformedJSON:c,errors:u=[],headers:p}=t;let l=c?(0,f.getHTTPStatusCode)(c):200;const h=!c,y=h?[]:Array.isArray(c)?c:[c],w=s?.({ctx:n,info:o,paths:o?.calls.map((t=>t.path)),data:y,errors:u,eagerGeneration:h,type:o?.calls.find((t=>t.procedure?._def.type))?.procedure?._def.type??'unknown'})??{};if(w.headers)if(w.headers instanceof Headers)for(const[t,n]of w.headers.entries())p.append(t,n);else for(const[t,n]of Object.entries(w.headers))if(Array.isArray(n))for(const o of n)p.append(t,o);else'string'==typeof n&&p.set(t,n);return w.status&&(l=w.status),{status:l}}function O(t,s){const{router:c,req:p,onError:l}=s.opts,f=(0,o.getTRPCErrorFromUnknown)(t);l?.({error:f,path:s.path,input:s.input,ctx:s.ctx,type:s.type,req:p});const h={error:(0,n.getErrorShape)({config:c._def._config,error:f,type:s.type,path:s.path,input:s.input,ctx:s.ctx})},y=(0,u.transformTRPCResponse)(c._def._config,h);return{error:f,untransformedJSON:h,body:JSON.stringify(y)}}function R(t){return!!(0,p.isObject)(t)&&(!!(0,p.isAsyncIterable)(t)||(Object.values(t).some(s.isPromise)||Object.values(t).some(p.isAsyncIterable)))}}),3340,[3320,3328,3332,3341,3350,3335,3331,3333,3329]);
__d((function(g,_r,i,a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.isPromise=j,_e.jsonlStreamConsumer=async function(e){const{deserialize:o=r=>r}=e;let n=x(e.from);o&&(n=n.pipeThrough(new TransformStream({transform(r,e){e.enqueue(o(r))}})));let s=(0,t.createDeferred)();const c=k(e.abortController);function u(t){const[o,n,s]=t,u=c.getOrCreate(s);switch(n){case h:return(0,r.run)((async()=>{const r={stack:[],error:void 0,hasError:!1};try{const t=l(r,u.getReaderResource(),!1),{value:o}=await t.read(),[n,s,c]=o;switch(s){case w:return p(c);case b:throw e.formatError?.({error:c})??new O(c)}}catch(e){r.error=e,r.hasError=!0}finally{f(r)}}));case y:return(0,r.run)((async function*(){const r={stack:[],error:void 0,hasError:!1};try{const t=l(r,u.getReaderResource(),!1);for(;;){const{value:r}=await t.read(),[o,n,s]=r;switch(n){case E:yield p(s);break;case v:return p(s);case S:throw e.formatError?.({error:s})??new O(s)}}}catch(e){r.error=e,r.hasError=!0}finally{f(r)}}))}}function p(r){const[[e],...t]=r;for(const r of t){const[t]=r,o=u(r);if(null===t)return o;e[t]=o}return e}const j=r=>{s?.reject(r),c.cancelAll(r)};return n.pipeTo(new WritableStream({write(r){if(s){const e=r;for(const[t,o]of Object.entries(r)){const r=p(o);e[t]=r}return s.resolve(e),void(s=null)}const e=r,[t]=e;c.getOrCreate(t).enqueue(e)},close:()=>j(new Error('Stream closed')),abort:j}),{signal:e.abortController.signal}).catch((r=>{e.onError?.({error:r}),j(r)})),[await s.promise,c]},_e.jsonlStreamProducer=function(r){let e=(0,s.readableStreamFrom)(T(r));const{serialize:t}=r;t&&(e=e.pipeThrough(new TransformStream({transform(r,e){r===c.PING_SYM?e.enqueue(c.PING_SYM):e.enqueue(t(r))}})));return e.pipeThrough(new TransformStream({transform(r,e){r===c.PING_SYM?e.enqueue(' '):e.enqueue(JSON.stringify(r)+'\n')}})).pipeThrough(new TextEncoderStream)};var r=_r(d[0]),e=_r(d[1]),t=_r(d[2]),o=_r(d[3]),n=_r(d[4]),s=_r(d[5]),c=_r(d[6]);function u(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function l(r,e,t){if(null!=e){if("object"!=typeof e&&"function"!=typeof e)throw new TypeError("Object expected.");var o,n;if(t){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");o=e[Symbol.asyncDispose]}if(void 0===o){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");o=e[Symbol.dispose],t&&(n=o)}if("function"!=typeof o)throw new TypeError("Object not disposable.");n&&(o=function(){try{n.call(this)}catch(r){return Promise.reject(r)}}),r.stack.push({value:e,dispose:o,async:t})}else t&&r.stack.push({async:!0});return e}function f(r){var e="function"==typeof SuppressedError?SuppressedError:function(r,e,t){var o=new Error(t);return o.name="SuppressedError",o.error=r,o.suppressed=e,o};return(f=function(r){function t(t){r.error=r.hasError?new e(t,r.error,"An error was suppressed during disposal."):t,r.hasError=!0}var o,n=0;return(function e(){for(;o=r.stack.pop();)try{if(!o.async&&1===n)return n=0,r.stack.push(o),Promise.resolve().then(e);if(o.dispose){var s=o.dispose.call(o.value);if(o.async)return n|=2,Promise.resolve(s).then(e,(function(r){return t(r),e()}))}else n|=1}catch(r){t(r)}if(1===n)return r.hasError?Promise.reject(r.error):Promise.resolve();if(r.hasError)throw r.error})()})(r)}function p(r){return'[object Object]'===Object.prototype.toString.call(r)}const h=0,y=1,w=0,b=1,v=0,E=1,S=2;function j(e){return((0,r.isObject)(e)||(0,r.isFunction)(e))&&'function'==typeof e?.then&&'function'==typeof e?.catch}class R extends Error{constructor(r){super('Max depth reached at path: '+r.join('.')),u(this,"path",void 0),this.path=r}}async function*T(t){const{data:o}=t;let s=0;const u=(0,n.mergeAsyncIterables)();function T(r){const e=s++,t=r(e);return u.add(t),e}function O(r,e){return T((async function*(o){const n=P(e);n&&(r.catch((r=>{t.onError?.({error:r,path:e})})),r=Promise.reject(n));try{const t=await r;yield[o,w,k(t,e)]}catch(r){t.onError?.({error:r,path:e}),yield[o,b,t.formatError?.({error:r,path:e})]}}))}function q(r,o){return T((async function*(n){const s={stack:[],error:void 0,hasError:!1};try{const c=P(o);if(c)throw c;const u=l(s,(0,e.iteratorResource)(r),!0);try{for(;;){const r=await u.next();if(r.done){yield[n,v,k(r.value,o)];break}yield[n,E,k(r.value,o)]}}catch(r){t.onError?.({error:r,path:o}),yield[n,S,t.formatError?.({error:r,path:o})]}}catch(r){s.error=r,s.hasError=!0}finally{const r=f(s);r&&await r}}))}function P(r){return t.maxDepth&&r.length>t.maxDepth?new R(r):null}function x(e,o){if(j(e))return[h,O(e,o)];if((0,r.isAsyncIterable)(e)){if(t.maxDepth&&o.length>=t.maxDepth)throw new Error('Max depth reached');return[y,q(e,o)]}return null}function k(r,e){if(void 0===r)return[[]];const t=x(r,e);if(t)return[[0],[null,...t]];if(!p(r))return[[r]];const o={},n=[];for(const[t,s]of Object.entries(r)){const r=x(s,[...e,t]);r?(o[t]=0,n.push([t,...r])):o[t]=s}return[[o],...n]}const D={};for(const[r,e]of Object.entries(o))D[r]=k(e,[r]);yield D;let M=u;t.pingMs&&(M=(0,c.withPing)(u,t.pingMs));for await(const r of M)yield r}class O extends Error{constructor(r){super('Received error from server'),u(this,"data",void 0),this.data=r}}const q=r=>({getReader:()=>new ReadableStream({start(e){r.on('data',(r=>{e.enqueue(r)})),r.on('end',(()=>{e.close()})),r.on('error',(r=>{e.error(r)}))}}).getReader()});function P(r){const e='getReader'in r?r.getReader():q(r).getReader();let t='';return new ReadableStream({async pull(r){const{done:t,value:o}=await e.read();t?r.close():r.enqueue(o)},cancel:()=>e.cancel()}).pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({transform(r,e){t+=r;const o=t.split('\n');t=o.pop()??'';for(const r of o)e.enqueue(r)}}))}function x(r){const e=P(r);let t=!1;return e.pipeThrough(new TransformStream({transform(r,e){if(t){const t=JSON.parse(r);e.enqueue(t)}else{const o=JSON.parse(r);e.enqueue(o),t=!0}}}))}function k(r){const e=new Map;function t(){return Array.from(e.values()).every((r=>r.closed))}function n(){let e;const n=new ReadableStream({start(r){e=r}}),s={enqueue:r=>e.enqueue(r),close:()=>{e.close(),c(),t()&&r.abort()},closed:!1,getReaderResource:()=>{const r=n.getReader();return(0,o.makeResource)(r,(()=>{r.releaseLock(),s.close()}))},error:r=>{e.error(r),c()}};function c(){Object.assign(s,{closed:!0,close:()=>{},enqueue:()=>{},getReaderResource:null,error:()=>{}})}return s}return{getOrCreate:function(r){let t=e.get(r);return t||(t=n(),e.set(r,t)),t},isEmpty:t,cancelAll:function(r){for(const t of e.values())t.error(r)}}}}),3341,[3331,3342,3346,3344,3347,3348,3349]);
__d((function(g,_r,i,a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.iteratorResource=c,_e.takeWithGrace=async function*(o,u){const l={stack:[],error:void 0,hasError:!1};try{const n=t(l,c(o),!0);let f;const p=t(l,(0,s.timerResource)(u.gracePeriodMs),!1);let y=u.count,h=new Promise((()=>{}));for(;;){if(f=await r.Unpromise.race([n.next(),h]),f===s.disposablePromiseTimerResult&&(0,e.throwAbortError)(),f.done)return f.value;yield f.value,0==--y&&(h=p.start()),f=null}}catch(r){l.error=r,l.hasError=!0}finally{const r=n(l);r&&await r}},_e.withMaxDuration=async function*(o,u){const l={stack:[],error:void 0,hasError:!1};try{const n=t(l,c(o),!0),f=t(l,(0,s.timerResource)(u.maxDurationMs),!1).start();let p;for(;;){if(p=await r.Unpromise.race([n.next(),f]),p===s.disposablePromiseTimerResult&&(0,e.throwAbortError)(),p.done)return p;yield p.value,p=null}}catch(r){l.error=r,l.hasError=!0}finally{const r=n(l);r&&await r}};var r=_r(d[0]),e=_r(d[1]),o=_r(d[2]),s=_r(d[3]);function t(r,e,o){if(null!=e){if("object"!=typeof e&&"function"!=typeof e)throw new TypeError("Object expected.");var s,t;if(o){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=e[Symbol.asyncDispose]}if(void 0===s){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=e[Symbol.dispose],o&&(t=s)}if("function"!=typeof s)throw new TypeError("Object not disposable.");t&&(s=function(){try{t.call(this)}catch(r){return Promise.reject(r)}}),r.stack.push({value:e,dispose:s,async:o})}else o&&r.stack.push({async:!0});return e}function n(r){var e="function"==typeof SuppressedError?SuppressedError:function(r,e,o){var s=new Error(o);return s.name="SuppressedError",s.error=r,s.suppressed=e,s};return(n=function(r){function o(o){r.error=r.hasError?new e(o,r.error,"An error was suppressed during disposal."):o,r.hasError=!0}var s,t=0;return(function e(){for(;s=r.stack.pop();)try{if(!s.async&&1===t)return t=0,r.stack.push(s),Promise.resolve().then(e);if(s.dispose){var n=s.dispose.call(s.value);if(s.async)return t|=2,Promise.resolve(n).then(e,(function(r){return o(r),e()}))}else t|=1}catch(r){o(r)}if(1===t)return r.hasError?Promise.reject(r.error):Promise.resolve();if(r.hasError)throw r.error})()})(r)}function c(r){const e=r[Symbol.asyncIterator]();return(0,o.makeAsyncResource)(e,(async()=>{await(e.return?.())}))}}),3342,[3343,3339,3344,3345]);
__d((function(g,r,i,a,m,e,d){function s(s,t,n){return t in s?Object.defineProperty(s,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[t]=n,s}Object.defineProperty(e,"__esModule",{value:!0}),e.Unpromise=void 0,e.resolveSelfTuple=o;const t=new WeakMap,n=()=>{};let c=Symbol.toStringTag;class u{subscribe(){let s,t;const{settlement:c}=this;if(null===c){if(null===this.subscribers)throw new Error("Unpromise settled but still has subscribers");const n=b();this.subscribers=(u=this.subscribers,o=n,[...u,o]),s=n.promise,t=()=>{null!==this.subscribers&&(this.subscribers=h(this.subscribers,n))}}else{const{status:u}=c;s="fulfilled"===u?Promise.resolve(c.value):Promise.reject(c.reason),t=n}var u,o;return Object.assign(s,{unsubscribe:t})}then(s,t){const n=this.subscribe(),{unsubscribe:c}=n;return Object.assign(n.then(s,t),{unsubscribe:c})}catch(s){const t=this.subscribe(),{unsubscribe:n}=t;return Object.assign(t.catch(s),{unsubscribe:n})}finally(s){const t=this.subscribe(),{unsubscribe:n}=t;return Object.assign(t.finally(s),{unsubscribe:n})}static proxy(s){const t=u.getSubscribablePromise(s);return void 0!==t?t:u.createSubscribablePromise(s)}static createSubscribablePromise(s){const n=new u(s);return t.set(s,n),t.set(n,n),n}static getSubscribablePromise(s){return t.get(s)}static resolve(s){const t="object"==typeof s&&null!==s&&"then"in s&&"function"==typeof s.then?s:Promise.resolve(s);return u.proxy(t).subscribe()}static async any(s){const t=(Array.isArray(s)?s:[...s]).map(u.resolve);try{return await Promise.any(t)}finally{t.forEach((({unsubscribe:s})=>{s()}))}}static async race(s){const t=(Array.isArray(s)?s:[...s]).map(u.resolve);try{return await Promise.race(t)}finally{t.forEach((({unsubscribe:s})=>{s()}))}}static async raceReferences(s){const t=s.map(o);try{return await Promise.race(t)}finally{for(const s of t)s.unsubscribe()}}constructor(t){s(this,"promise",void 0),s(this,"subscribers",[]),s(this,"settlement",null),s(this,c,"Unpromise"),this.promise="function"==typeof t?new Promise(t):t;const n=this.promise.then((s=>{const{subscribers:t}=this;this.subscribers=null,this.settlement={status:"fulfilled",value:s},t?.forEach((({resolve:t})=>{t(s)}))}));"catch"in n&&n.catch((s=>{const{subscribers:t}=this;this.subscribers=null,this.settlement={status:"rejected",reason:s},t?.forEach((({reject:t})=>{t(s)}))}))}}function o(s){return u.proxy(s).then((()=>[s]))}function b(){let s,t;return{promise:new Promise(((n,c)=>{s=n,t=c})),resolve:s,reject:t}}function l(s,t){return[...s.slice(0,t),...s.slice(t+1)]}function h(s,t){const n=s.indexOf(t);return-1!==n?l(s,n):s}e.Unpromise=u}),3343,[]);
__d((function(g,r,i,a,m,e,d){var s,o;Object.defineProperty(e,"__esModule",{value:!0}),e.makeAsyncResource=function(s,o){const n=s,y=n[Symbol.asyncDispose];return n[Symbol.asyncDispose]=async()=>{await o(),await(y?.())},n},e.makeResource=function(s,o){const n=s,y=n[Symbol.dispose];return n[Symbol.dispose]=()=>{o(),y?.()},n},(s=Symbol).dispose??(s.dispose=Symbol()),(o=Symbol).asyncDispose??(o.asyncDispose=Symbol())}),3344,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.disposablePromiseTimerResult=void 0,e.timerResource=function(s){let u=null;return(0,t.makeResource)({start(){if(u)throw new Error('Timer already started');return new Promise((t=>{u=setTimeout((()=>t(o)),s)}))}},(()=>{u&&clearTimeout(u)}))};var t=r(d[0]);const o=e.disposablePromiseTimerResult=Symbol()}),3345,[3344]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.createDeferred=function(){let t,n;return{promise:new Promise(((o,c)=>{t=o,n=c})),resolve:t,reject:n}}}),3346,[]);
__d((function(g,_r,i,a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.mergeAsyncIterables=function(){let n='idle',c=(0,e.createDeferred)();const u=[],l=new Set,f=[];function p(e){if('pending'!==n)return;const r=s(e,(e=>{if('pending'===n){switch(e.status){case'yield':f.push([r,e]);break;case'return':l.delete(r);break;case'error':f.push([r,e]),l.delete(r)}c.resolve()}}));l.add(r),r.pull()}return{add(e){switch(n){case'idle':u.push(e);break;case'pending':p(e)}},async*[Symbol.asyncIterator](){const s={stack:[],error:void 0,hasError:!1};try{if('idle'!==n)throw new Error('Cannot iterate twice');n='pending';t(s,(0,r.makeAsyncResource)({},(async()=>{n='done';const e=[];if(await Promise.all(Array.from(l.values()).map((async r=>{try{await r.destroy()}catch(r){e.push(r)}}))),f.length=0,l.clear(),c.resolve(),e.length>0)throw new AggregateError(e)})),!0);for(;u.length>0;)p(u.shift());for(;l.size>0;){for(await c.promise;f.length>0;){const[e,r]=f.shift();switch(r.status){case'yield':yield r.value,e.pull();break;case'error':throw r.error}}c=(0,e.createDeferred)()}}catch(e){s.error=e,s.hasError=!0}finally{const e=o(s);e&&await e}}}};var e=_r(d[0]),r=_r(d[1]);function t(e,r,t){if(null!=r){if("object"!=typeof r&&"function"!=typeof r)throw new TypeError("Object expected.");var o,s;if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");if(void 0===(o=r[Symbol.asyncDispose])){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");o=r[Symbol.dispose],s=o}if("function"!=typeof o)throw new TypeError("Object not disposable.");s&&(o=function(){try{s.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:r,dispose:o,async:t})}else e.stack.push({async:!0});return r}function o(e){var r="function"==typeof SuppressedError?SuppressedError:function(e,r,t){var o=new Error(t);return o.name="SuppressedError",o.error=e,o.suppressed=r,o};return(o=function(e){function t(t){e.error=e.hasError?new r(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var o,s=0;return(function r(){for(;o=e.stack.pop();)try{if(!o.async&&1===s)return s=0,e.stack.push(o),Promise.resolve().then(r);if(o.dispose){var n=o.dispose.call(o.value);if(o.async)return s|=2,Promise.resolve(n).then(r,(function(e){return t(e),r()}))}else s|=1}catch(e){t(e)}if(1===s)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error})()})(e)}function s(e,r){const t=e[Symbol.asyncIterator]();let o='idle';function s(){o='done',r=()=>{}}return{pull:function(){if('idle'!==o)return;o='pending',t.next().then((e=>{if(e.done)return o='done',r({status:'return',value:e.value}),void s();o='idle',r({status:'yield',value:e.value})})).catch((e=>{r({status:'error',error:e}),s()}))},destroy:async()=>{s(),await(t.return?.())}}}}),3347,[3346,3344]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.readableStreamFrom=function(n){const t=n[Symbol.asyncIterator]();return new ReadableStream({async cancel(){await(t.return?.())},async pull(n){const c=await t.next();c.done?n.close():n.enqueue(c.value)}})}}),3348,[]);
__d((function(g,_r,i,a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.PING_SYM=void 0,_e.withPing=async function*(c,u){const p={stack:[],error:void 0,hasError:!1};try{const f=s(p,(0,e.iteratorResource)(c),!0);let l,y=f.next();for(;;){const e={stack:[],error:void 0,hasError:!1};try{const n=s(e,(0,o.timerResource)(u),!1);if(l=await r.Unpromise.race([y,n.start()]),l===o.disposablePromiseTimerResult){yield t;continue}if(l.done)return l.value;y=f.next(),yield l.value,l=null}catch(r){e.error=r,e.hasError=!0}finally{n(e)}}}catch(r){p.error=r,p.hasError=!0}finally{const r=n(p);r&&await r}};var r=_r(d[0]),e=_r(d[1]),o=_r(d[2]);function s(r,e,o){if(null!=e){if("object"!=typeof e&&"function"!=typeof e)throw new TypeError("Object expected.");var s,n;if(o){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");s=e[Symbol.asyncDispose]}if(void 0===s){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");s=e[Symbol.dispose],o&&(n=s)}if("function"!=typeof s)throw new TypeError("Object not disposable.");n&&(s=function(){try{n.call(this)}catch(r){return Promise.reject(r)}}),r.stack.push({value:e,dispose:s,async:o})}else o&&r.stack.push({async:!0});return e}function n(r){var e="function"==typeof SuppressedError?SuppressedError:function(r,e,o){var s=new Error(o);return s.name="SuppressedError",s.error=r,s.suppressed=e,s};return(n=function(r){function o(o){r.error=r.hasError?new e(o,r.error,"An error was suppressed during disposal."):o,r.hasError=!0}var s,n=0;return(function e(){for(;s=r.stack.pop();)try{if(!s.async&&1===n)return n=0,r.stack.push(s),Promise.resolve().then(e);if(s.dispose){var t=s.dispose.call(s.value);if(s.async)return n|=2,Promise.resolve(t).then(e,(function(r){return o(r),e()}))}else n|=1}catch(r){o(r)}if(1===n)return r.hasError?Promise.reject(r.error):Promise.resolve();if(r.hasError)throw r.error})()})(r)}const t=_e.PING_SYM=Symbol('ping')}),3349,[3343,3342,3345]);
__d((function(g,_r,i,a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.sseHeaders=void 0,_e.sseStreamConsumer=function(e){const{deserialize:r=e=>e}=e;let n={};const o=e.signal;let s=null;const u=()=>new ReadableStream({async start(t){const[c,u]=await Promise.all([e.url(),e.init()]),l=s=new e.EventSource(c,u);t.enqueue({type:'connecting',eventSource:s,event:null}),l.addEventListener(E,(e=>{const r=e,o=JSON.parse(r.data);n=o,t.enqueue({type:'connected',options:o,eventSource:l})})),l.addEventListener(h,(e=>{const n=e;t.enqueue({type:'serialized-error',error:r(JSON.parse(n.data)),eventSource:l})})),l.addEventListener(f,(()=>{t.enqueue({type:'ping',eventSource:l})})),l.addEventListener(S,(()=>{l.close(),t.close(),s=null})),l.addEventListener('error',(e=>{l.readyState===EventSource.CLOSED?t.error(e):t.enqueue({type:'connecting',eventSource:l,event:e})})),l.addEventListener('message',(e=>{const n=e,o={data:r(JSON.parse(n.data))};n.lastEventId&&(o.id=n.lastEventId),t.enqueue({type:'data',data:o,eventSource:l})}));const y=()=>{try{l.close(),t.close()}catch{}};o.aborted?y():o.addEventListener('abort',y)},cancel(){s?.close()}}),l=()=>{let e=u(),r=e.getReader();async function n(){await r.cancel(),s=null}return(0,c.makeAsyncResource)({read:()=>r.read(),async recreate(){await n(),e=u(),r=e.getReader()}},n)};return(0,t.run)((async function*(){const e={stack:[],error:void 0,hasError:!1};try{const r=v(e,l(),!0);for(;;){let e=r.read();const t=n.reconnectAfterInactivityMs;t&&(e=w({promise:e,timeoutMs:t,onTimeout:async()=>{const e={value:{type:'timeout',ms:t,eventSource:s},done:!1};return await r.recreate(),e}}));const o=await e;if(o.done)return o.value;yield o.value}}catch(r){e.error=r,e.hasError=!0}finally{const r=p(e);r&&await r}}))},_e.sseStreamProducer=function(e){const{serialize:c=t.identity}=e,l={enabled:e.ping?.enabled??!1,intervalMs:e.ping?.intervalMs??1e3},v=e.client??{};if(l.enabled&&v.reconnectAfterInactivityMs&&l.intervalMs>v.reconnectAfterInactivityMs)throw new Error(`Ping interval must be less than client reconnect interval to prevent unnecessary reconnection - ping.intervalMs: ${l.intervalMs} client.reconnectAfterInactivityMs: ${v.reconnectAfterInactivityMs}`);async function*p(){yield{event:E,data:JSON.stringify(v)};let r,n,t=e.data;for await(r of(e.emitAndEndImmediately&&(t=(0,s.takeWithGrace)(t,{count:1,gracePeriodMs:1})),e.maxDurationMs&&e.maxDurationMs>0&&e.maxDurationMs!==1/0&&(t=(0,s.withMaxDuration)(t,{maxDurationMs:e.maxDurationMs})),l.enabled&&l.intervalMs!==1/0&&l.intervalMs>0&&(t=(0,y.withPing)(t,l.intervalMs)),t))r!==y.PING_SYM?(n=(0,o.isTrackedEnvelope)(r)?{id:r[0],data:r[1]}:{data:r},n.data=JSON.stringify(c(n.data)),yield n,r=null,n=null):yield{event:f,data:''}}return(0,u.readableStreamFrom)((async function*(){try{yield*p(),yield{event:S,data:''}}catch(t){if((0,n.isAbortError)(t))return;const o=(0,r.getTRPCErrorFromUnknown)(t),s=e.formatError?.({error:o})??null;yield{event:h,data:JSON.stringify(c(s))}}})()).pipeThrough(new TransformStream({transform(e,r){'event'in e&&r.enqueue(`event: ${e.event}\n`),'data'in e&&r.enqueue(`data: ${e.data}\n`),'id'in e&&r.enqueue(`id: ${e.id}\n`),'comment'in e&&r.enqueue(`: ${e.comment}\n`),r.enqueue('\n\n')}})).pipeThrough(new TextEncoderStream)};var e=_r(d[0]),r=_r(d[1]),n=_r(d[2]),t=_r(d[3]),o=_r(d[4]),s=_r(d[5]),c=_r(d[6]),u=_r(d[7]),l=_r(d[8]),y=_r(d[9]);function v(e,r,n){if(null!=r){if("object"!=typeof r&&"function"!=typeof r)throw new TypeError("Object expected.");var t,o;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");t=r[Symbol.asyncDispose]}if(void 0===t){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");t=r[Symbol.dispose],n&&(o=t)}if("function"!=typeof t)throw new TypeError("Object not disposable.");o&&(t=function(){try{o.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:r,dispose:t,async:n})}else n&&e.stack.push({async:!0});return r}function p(e){var r="function"==typeof SuppressedError?SuppressedError:function(e,r,n){var t=new Error(n);return t.name="SuppressedError",t.error=e,t.suppressed=r,t};return(p=function(e){function n(n){e.error=e.hasError?new r(n,e.error,"An error was suppressed during disposal."):n,e.hasError=!0}var t,o=0;return(function r(){for(;t=e.stack.pop();)try{if(!t.async&&1===o)return o=0,e.stack.push(t),Promise.resolve().then(r);if(t.dispose){var s=t.dispose.call(t.value);if(t.async)return o|=2,Promise.resolve(s).then(r,(function(e){return n(e),r()}))}else o|=1}catch(e){n(e)}if(1===o)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error})()})(e)}const f='ping',h='serialized-error',E='connected',S='return';async function w(r){const n={stack:[],error:void 0,hasError:!1};try{const t=v(n,(0,l.timerResource)(r.timeoutMs),!1),o=await e.Unpromise.race([r.promise,t.start()]);return o===l.disposablePromiseTimerResult?await r.onTimeout():o}catch(e){n.error=e,n.hasError=!0}finally{p(n)}}_e.sseHeaders={'Content-Type':'text/event-stream','Cache-Control':'no-cache, no-transform','X-Accel-Buffering':'no',Connection:'keep-alive'}}),3350,[3343,3332,3339,3331,3351,3342,3344,3348,3345,3349]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.isTrackedEnvelope=function(n){return Array.isArray(n)&&n[2]===t},e.sse=function(t){return n(t.id,t.data)},e.tracked=n;const t=Symbol();function n(n,s){if(''===n)throw new Error('`id` must not be an empty string as empty string is the same as not setting the id at all');return[n,s,t]}}),3351,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.initTRPC=void 0;var t=r(d[0]),o=r(d[1]),n=r(d[2]),s=r(d[3]),l=r(d[4]),u=r(d[5]);class c{context(){return new c}meta(){return new c}create(c){const f={...c,transformer:(0,u.getDataTransformer)(c?.transformer??u.defaultTransformer),isDev:c?.isDev??'production'!==globalThis.process?.env.NODE_ENV,allowOutsideOfServer:c?.allowOutsideOfServer??!1,errorFormatter:c?.errorFormatter??t.defaultFormatter,isServer:c?.isServer??s.isServerDefault,$types:null};if(!(c?.isServer??s.isServerDefault)&&!0!==c?.allowOutsideOfServer)throw new Error("You're trying to use @trpc/server in a non-server environment. This is not supported by default.");return{_config:f,procedure:(0,n.createBuilder)({meta:c?.defaultMeta}),middleware:(0,o.createMiddlewareFactory)(),router:(0,l.createRouterFactory)(f),mergeRouters:l.mergeRouters,createCallerFactory:(0,l.createCallerFactory)()}}}e.initTRPC=new c}),3352,[3327,3353,3354,3357,3334,3335]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.createInputMiddleware=function(u){const c=async function(c){let o;const s=await c.getRawInput();try{o=await u(s)}catch(n){throw new t.TRPCError({code:'BAD_REQUEST',cause:n})}const l=(0,n.isObject)(c.input)&&(0,n.isObject)(o)?{...c.input,...o}:o;return c.next({input:l})};return c._type='input',c},e.createMiddlewareFactory=u,e.createOutputMiddleware=function(n){const u=async function({next:u}){const c=await u();if(!c.ok)return c;try{const t=await n(c.data);return{...c,data:t}}catch(n){throw new t.TRPCError({message:'Output validation failed',code:'INTERNAL_SERVER_ERROR',cause:n})}};return u._type='output',u},e.middlewareMarker=e.experimental_standaloneMiddleware=void 0;var t=r(d[0]),n=r(d[1]);e.middlewareMarker='middlewareMarker';function u(){function t(n){return{_middlewares:n,unstable_pipe(u){const c='_middlewares'in u?u._middlewares:[u];return t([...n,...c])}}}return function(n){return t([n])}}e.experimental_standaloneMiddleware=()=>({create:u()})}),3353,[3332,3331]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.createBuilder=c;var t=r(d[0]),n=r(d[1]),u=r(d[2]),o=r(d[3]);function s(t,n){const{middlewares:u=[],inputs:s,meta:l,...p}=n;return c({...(0,o.mergeWithoutOverrides)(t,p),inputs:[...t.inputs,...s??[]],middlewares:[...t.middlewares,...u],meta:t.meta&&l?{...t.meta,...l}:l??t.meta})}function c(t={}){const o={procedure:!0,inputs:[],middlewares:[],...t};return{_def:o,input(t){const c=(0,u.getParseFn)(t);return s(o,{inputs:[t],middlewares:[(0,n.createInputMiddleware)(c)]})},output(t){const c=(0,u.getParseFn)(t);return s(o,{output:t,middlewares:[(0,n.createOutputMiddleware)(c)]})},meta:t=>s(o,{meta:t}),use(t){const n='_middlewares'in t?t._middlewares:[t];return s(o,{middlewares:n})},unstable_concat:t=>s(o,t._def),concat:t=>s(o,t._def),query:t=>l({...o,type:'query'},t),mutation:t=>l({...o,type:'mutation'},t),subscription:t=>l({...o,type:'subscription'},t),experimental_caller:t=>s(o,{caller:t})}}function l(t,u){const o=s(t,{resolver:u,middlewares:[async function(t){const o=await u(t);return{marker:n.middlewareMarker,ok:!0,data:o,ctx:t.ctx}}]}),c={...o._def,type:t.type,experimental_caller:Boolean(o._def.caller),meta:o._def.meta,$types:null},l=f(o._def),p=o._def.caller;if(!p)return l;const w=async(...t)=>await p({args:t,invoke:l,_def:c});return w._def=c,w}const p="\nThis is a client-only function.\nIf you want to call this function on the server, see https://trpc.io/docs/v11/server/server-side-calls\n".trim();async function w(u,o,s){try{const t=o.middlewares[u];return await t({...s,meta:o.meta,input:s.input,next(t){const n=t;return w(u+1,o,{...s,ctx:n?.ctx?{...s.ctx,...n.ctx}:s.ctx,input:n&&'input'in n?n.input:s.input,getRawInput:n?.getRawInput??s.getRawInput})}})}catch(u){return{ok:!1,error:(0,t.getTRPCErrorFromUnknown)(u),marker:n.middlewareMarker}}}function f(n){async function u(u){if(!u||!('getRawInput'in u))throw new Error(p);const o=await w(0,n,u);if(!o)throw new t.TRPCError({code:'INTERNAL_SERVER_ERROR',message:'No result from middlewares - did you forget to `return next()`?'});if(!o.ok)throw o.error;return o.data}return u._def=n,u.procedure=!0,u}}),3354,[3332,3353,3355,3331]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getParseFn=function(t){const f=t,o='~standard'in f;if('function'==typeof f&&'function'==typeof f.assert)return f.assert.bind(f);if('function'==typeof f&&!o)return f;if('function'==typeof f.parseAsync)return f.parseAsync.bind(f);if('function'==typeof f.parse)return f.parse.bind(f);if('function'==typeof f.validateSync)return f.validateSync.bind(f);if('function'==typeof f.create)return f.create.bind(f);if('function'==typeof f.assert)return n=>(f.assert(n),n);if(o)return async t=>{const o=await f['~standard'].validate(t);if(o.issues)throw new n.StandardSchemaV1Error(o.issues);return o.value};throw new Error('Could not find a validator fn')};var n=r(d[0])}),3355,[3356]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.StandardSchemaV1Error=void 0;class s extends Error{constructor(s){var t,o,n;super(s[0]?.message),n=void 0,(o="issues")in(t=this)?Object.defineProperty(t,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[o]=n,this.name='SchemaError',this.issues=s}}e.StandardSchemaV1Error=s}),3356,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.isServerDefault=void 0;e.isServerDefault=!0}),3357,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"StandardSchemaV1Error",{enumerable:!0,get:function(){return b.StandardSchemaV1Error}}),Object.defineProperty(e,"TRPCError",{enumerable:!0,get:function(){return o.TRPCError}}),Object.defineProperty(e,"callTRPCProcedure",{enumerable:!0,get:function(){return u.callProcedure}}),Object.defineProperty(e,"createTRPCFlatProxy",{enumerable:!0,get:function(){return n.createFlatProxy}}),Object.defineProperty(e,"createTRPCRecursiveProxy",{enumerable:!0,get:function(){return n.createRecursiveProxy}}),Object.defineProperty(e,"experimental_lazy",{enumerable:!0,get:function(){return u.lazy}}),Object.defineProperty(e,"experimental_standaloneMiddleware",{enumerable:!0,get:function(){return P.experimental_standaloneMiddleware}}),Object.defineProperty(e,"experimental_trpcMiddleware",{enumerable:!0,get:function(){return P.experimental_standaloneMiddleware}}),Object.defineProperty(e,"getErrorShape",{enumerable:!0,get:function(){return t.getErrorShape}}),Object.defineProperty(e,"getTRPCErrorFromUnknown",{enumerable:!0,get:function(){return o.getTRPCErrorFromUnknown}}),Object.defineProperty(e,"initTRPC",{enumerable:!0,get:function(){return f.initTRPC}}),Object.defineProperty(e,"isTrackedEnvelope",{enumerable:!0,get:function(){return c.isTrackedEnvelope}}),Object.defineProperty(e,"lazy",{enumerable:!0,get:function(){return u.lazy}}),Object.defineProperty(e,"sse",{enumerable:!0,get:function(){return c.sse}}),Object.defineProperty(e,"tracked",{enumerable:!0,get:function(){return c.tracked}}),Object.defineProperty(e,"transformTRPCResponse",{enumerable:!0,get:function(){return l.transformTRPCResponse}});var n=r(d[0]),t=r(d[1]),o=r(d[2]),u=r(d[3]);r(d[4]),r(d[5]);var c=r(d[6]),l=r(d[7]),f=r(d[8]),P=r(d[9]),b=r(d[10]);r(d[11])}),3387,[3326,3328,3332,3334,3343,3344,3351,3335,3352,3353,3356,3357]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.stringify=e.serialize=e.registerSymbol=e.registerCustom=e.registerClass=e.parse=e.deserialize=e.default=e.allowErrorProps=e.SuperJSON=void 0;var s=r(d[0]),t=r(d[1]),n=r(d[2]),l=r(d[3]),o=r(d[4]);class u{constructor({dedupe:l=!1}={}){this.classRegistry=new s.ClassRegistry,this.symbolRegistry=new t.Registry((s=>s.description??'')),this.customTransformerRegistry=new n.CustomTransformerRegistry,this.allowedErrorProps=[],this.dedupe=l}serialize(s){const t=new Map,n=(0,l.walker)(s,t,this,this.dedupe),o={json:n.transformedValue};n.annotations&&(o.meta={...o.meta,values:n.annotations});const u=(0,l.generateReferentialEqualityAnnotations)(t,this.dedupe);return u&&(o.meta={...o.meta,referentialEqualities:u}),o}deserialize(s){const{json:t,meta:n}=s;let u=(0,o.copy)(t);return n?.values&&(u=(0,l.applyValueAnnotations)(u,n.values,this)),n?.referentialEqualities&&(u=(0,l.applyReferentialEqualityAnnotations)(u,n.referentialEqualities)),u}stringify(s){return JSON.stringify(this.serialize(s))}parse(s){return this.deserialize(JSON.parse(s))}registerClass(s,t){this.classRegistry.register(s,t)}registerSymbol(s,t){this.symbolRegistry.register(s,t)}registerCustom(s,t){this.customTransformerRegistry.register({name:t,...s})}allowErrorProps(...s){this.allowedErrorProps.push(...s)}}e.SuperJSON=e.default=u,u.defaultInstance=new u,u.serialize=u.defaultInstance.serialize.bind(u.defaultInstance),u.deserialize=u.defaultInstance.deserialize.bind(u.defaultInstance),u.stringify=u.defaultInstance.stringify.bind(u.defaultInstance),u.parse=u.defaultInstance.parse.bind(u.defaultInstance),u.registerClass=u.defaultInstance.registerClass.bind(u.defaultInstance),u.registerSymbol=u.defaultInstance.registerSymbol.bind(u.defaultInstance),u.registerCustom=u.defaultInstance.registerCustom.bind(u.defaultInstance),u.allowErrorProps=u.defaultInstance.allowErrorProps.bind(u.defaultInstance);e.serialize=u.serialize,e.deserialize=u.deserialize,e.stringify=u.stringify,e.parse=u.parse,e.registerClass=u.registerClass,e.registerCustom=u.registerCustom,e.registerSymbol=u.registerSymbol,e.allowErrorProps=u.allowErrorProps}),3393,[3394,3395,3397,3399,3404]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ClassRegistry=void 0;var s=r(d[0]);class o extends s.Registry{constructor(){super((s=>s.name)),this.classToAllowedProps=new Map}register(s,o){'object'==typeof o?(o.allowProps&&this.classToAllowedProps.set(s,o.allowProps),super.register(s,o.identifier)):super.register(s,o)}getAllowedProps(s){return this.classToAllowedProps.get(s)}}e.ClassRegistry=o}),3394,[3395]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.Registry=void 0;var t=r(d[0]);e.Registry=class{constructor(s){this.generateIdentifier=s,this.kv=new t.DoubleIndexedKV}register(t,s){this.kv.getByValue(t)||(s||(s=this.generateIdentifier(t)),this.kv.set(s,t))}clear(){this.kv.clear()}getIdentifier(t){return this.kv.getByValue(t)}getValue(t){return this.kv.getByKey(t)}}}),3395,[3396]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.DoubleIndexedKV=void 0;e.DoubleIndexedKV=class{constructor(){this.keyToValue=new Map,this.valueToKey=new Map}set(t,l){this.keyToValue.set(t,l),this.valueToKey.set(l,t)}getByKey(t){return this.keyToValue.get(t)}getByValue(t){return this.valueToKey.get(t)}clear(){this.keyToValue.clear(),this.valueToKey.clear()}}}),3396,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.CustomTransformerRegistry=void 0;var s=r(d[0]);e.CustomTransformerRegistry=class{constructor(){this.transfomers={}}register(s){this.transfomers[s.name]=s}findApplicable(t){return(0,s.find)(this.transfomers,(s=>s.isApplicable(t)))}findByName(s){return this.transfomers[s]}}}),3397,[3398]);
__d((function(g,r,_i,a,m,e,d){function n(n){if('values'in Object)return Object.values(n);const t=[];for(const f in n)n.hasOwnProperty(f)&&t.push(n[f]);return t}Object.defineProperty(e,"__esModule",{value:!0}),e.find=function(t,f){const i=n(t);if('find'in i)return i.find(f);const o=i;for(let n=0;n<o.length;n++){const t=o[n];if(f(t))return t}return},e.findArr=function(n,t){for(let f=0;f<n.length;f++){const i=n[f];if(t(i))return i}return},e.forEach=function(n,t){Object.entries(n).forEach((([n,f])=>t(f,n)))},e.includes=function(n,t){return-1!==n.indexOf(t)}}),3398,[]);
__d((function(g,r,i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.applyReferentialEqualityAnnotations=function(a,c){function f(t,o){const c=(0,s.getDeep)(a,(0,n.parsePath)(o));t.map(n.parsePath).forEach((t=>{a=(0,s.setDeep)(a,t,(()=>c))}))}if((0,t.isArray)(c)){const[t,u]=c;t.forEach((t=>{a=(0,s.setDeep)(a,(0,n.parsePath)(t),(()=>a))})),u&&(0,o.forEach)(u,f)}else(0,o.forEach)(c,f);return a},e.applyValueAnnotations=function(t,n,o){return c(n,((n,c)=>{t=(0,s.setDeep)(t,c,(t=>(0,a.untransformValue)(t,n,o)))})),t},e.generateReferentialEqualityAnnotations=function(a,o){const s={};let c;return a.forEach((t=>{if(t.length<=1)return;o||(t=t.map((t=>t.map(String))).sort(((t,n)=>t.length-n.length)));const[a,...f]=t;0===a.length?c=f.map(n.stringifyPath):s[(0,n.stringifyPath)(a)]=f.map(n.stringifyPath)})),c?(0,t.isEmptyObject)(s)?[c]:[c,s]:(0,t.isEmptyObject)(s)?void 0:s},e.walker=void 0;var t=r(d[0]),n=r(d[1]),a=r(d[2]),o=r(d[3]),s=r(d[4]);function c(a,s,f=[]){if(!a)return;if(!(0,t.isArray)(a))return void(0,o.forEach)(a,((t,a)=>c(t,s,[...f,...(0,n.parsePath)(a)])));const[u,l]=a;l&&(0,o.forEach)(l,((t,a)=>{c(t,s,[...f,...(0,n.parsePath)(a)])})),s(u,f)}const f=(n,o)=>(0,t.isPlainObject)(n)||(0,t.isArray)(n)||(0,t.isMap)(n)||(0,t.isSet)(n)||(0,a.isInstanceOfRegisteredClass)(n,o);function u(t,n,a){const o=a.get(t);o?o.push(n):a.set(t,[n])}const l=(s,c,p,h,y=[],E=[],P=new Map)=>{const V=(0,t.isPrimitive)(s);if(!V){u(s,y,c);const t=P.get(s);if(t)return h?{transformedValue:null}:t}if(!f(s,p)){const t=(0,a.transformValue)(s,p),n=t?{transformedValue:t.value,annotations:[t.type]}:{transformedValue:s};return V||P.set(s,n),n}if((0,o.includes)(E,s))return{transformedValue:null};const v=(0,a.transformValue)(s,p),A=v?.value??s,_=(0,t.isArray)(A)?[]:{},b={};(0,o.forEach)(A,((a,f)=>{if('__proto__'===f||'constructor'===f||'prototype'===f)throw new Error(`Detected property ${f}. This is a prototype pollution risk, please remove it from your object.`);const u=l(a,c,p,h,[...y,f],[...E,s],P);_[f]=u.transformedValue,(0,t.isArray)(u.annotations)?b[f]=u.annotations:(0,t.isPlainObject)(u.annotations)&&(0,o.forEach)(u.annotations,((t,a)=>{b[(0,n.escapeKey)(f)+'.'+a]=t}))}));const j=(0,t.isEmptyObject)(b)?{transformedValue:_,annotations:v?[v.type]:void 0}:{transformedValue:_,annotations:v?[v.type,b]:b};return V||P.set(s,j),j};e.walker=l}),3399,[3400,3401,3402,3398,3403]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.isUndefined=e.isURL=e.isTypedArray=e.isSymbol=e.isString=e.isSet=e.isRegExp=e.isPrimitive=e.isPlainObject=e.isNumber=e.isNull=e.isNaNValue=e.isMap=e.isInfinite=e.isError=e.isEmptyObject=e.isDate=e.isBoolean=e.isBigint=e.isArray=void 0;const t=t=>Object.prototype.toString.call(t).slice(8,-1),s=t=>void 0===t;e.isUndefined=s;const n=t=>null===t;e.isNull=n;const o=t=>'object'==typeof t&&null!==t&&(t!==Object.prototype&&(null===Object.getPrototypeOf(t)||Object.getPrototypeOf(t)===Object.prototype));e.isPlainObject=o;e.isEmptyObject=t=>o(t)&&0===Object.keys(t).length;e.isArray=t=>Array.isArray(t);const c=t=>'string'==typeof t;e.isString=c;const l=t=>'number'==typeof t&&!isNaN(t);e.isNumber=l;const y=t=>'boolean'==typeof t;e.isBoolean=y;e.isRegExp=t=>t instanceof RegExp;e.isMap=t=>t instanceof Map;e.isSet=t=>t instanceof Set;const p=s=>'Symbol'===t(s);e.isSymbol=p;e.isDate=t=>t instanceof Date&&!isNaN(t.valueOf());e.isError=t=>t instanceof Error;e.isNaNValue=t=>'number'==typeof t&&isNaN(t);e.isPrimitive=t=>y(t)||n(t)||s(t)||l(t)||c(t)||p(t);e.isBigint=t=>'bigint'==typeof t;e.isInfinite=t=>t===1/0||t===-1/0;e.isTypedArray=t=>ArrayBuffer.isView(t)&&!(t instanceof DataView);e.isURL=t=>t instanceof URL}),3400,[]);
__d((function(g,r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.stringifyPath=e.parsePath=e.escapeKey=void 0;const t=t=>t.replace(/\./g,'\\.');e.escapeKey=t;e.stringifyPath=n=>n.map(String).map(t).join('.');e.parsePath=t=>{const n=[];let s='';for(let c=0;c<t.length;c++){let i=t.charAt(c);if('\\'===i&&'.'===t.charAt(c+1)){s+='.',c++;continue}'.'===i?(n.push(s),s=''):s+=i}const c=s;return n.push(c),n}}),3401,[]);
__d((function(g,r,i,_a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.isInstanceOfRegisteredClass=l,_e.untransformValue=_e.transformValue=void 0;var n=r(d[0]),e=r(d[1]);function t(n,e,t,s){return{isApplicable:n,annotation:e,transform:t,untransform:s}}const s=[t(n.isUndefined,'undefined',(()=>null),(()=>{})),t(n.isBigint,'bigint',(n=>n.toString()),(n=>'undefined'!=typeof BigInt?BigInt(n):(console.error('Please add a BigInt polyfill.'),n))),t(n.isDate,'Date',(n=>n.toISOString()),(n=>new Date(n))),t(n.isError,'Error',((n,e)=>{const t={name:n.name,message:n.message};return e.allowedErrorProps.forEach((e=>{t[e]=n[e]})),t}),((n,e)=>{const t=new Error(n.message);return t.name=n.name,t.stack=n.stack,e.allowedErrorProps.forEach((e=>{t[e]=n[e]})),t})),t(n.isRegExp,'regexp',(n=>''+n),(n=>{const e=n.slice(1,n.lastIndexOf('/')),t=n.slice(n.lastIndexOf('/')+1);return new RegExp(e,t)})),t(n.isSet,'set',(n=>[...n.values()]),(n=>new Set(n))),t(n.isMap,'map',(n=>[...n.entries()]),(n=>new Map(n))),t((e=>(0,n.isNaNValue)(e)||(0,n.isInfinite)(e)),'number',(e=>(0,n.isNaNValue)(e)?'NaN':e>0?'Infinity':'-Infinity'),Number),t((n=>0===n&&1/n==-1/0),'number',(()=>'-0'),Number),t(n.isURL,'URL',(n=>n.toString()),(n=>new URL(n)))];function o(n,e,t,s){return{isApplicable:n,annotation:e,transform:t,untransform:s}}const a=o(((e,t)=>{if((0,n.isSymbol)(e)){return!!t.symbolRegistry.getIdentifier(e)}return!1}),((n,e)=>['symbol',e.symbolRegistry.getIdentifier(n)]),(n=>n.description),((n,e,t)=>{const s=t.symbolRegistry.getValue(e[1]);if(!s)throw new Error('Trying to deserialize unknown symbol');return s})),u=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,Uint8ClampedArray].reduce(((n,e)=>(n[e.name]=e,n)),{}),c=o(n.isTypedArray,(n=>['typed-array',n.constructor.name]),(n=>[...n]),((n,e)=>{const t=u[e[1]];if(!t)throw new Error('Trying to deserialize unknown typed array');return new t(n)}));function l(n,e){if(n?.constructor){return!!e.classRegistry.getIdentifier(n.constructor)}return!1}const f=o(l,((n,e)=>['class',e.classRegistry.getIdentifier(n.constructor)]),((n,e)=>{const t=e.classRegistry.getAllowedProps(n.constructor);if(!t)return{...n};const s={};return t.forEach((e=>{s[e]=n[e]})),s}),((n,e,t)=>{const s=t.classRegistry.getValue(e[1]);if(!s)throw new Error(`Trying to deserialize unknown class '${e[1]}' - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564`);return Object.assign(Object.create(s.prototype),n)})),y=o(((n,e)=>!!e.customTransformerRegistry.findApplicable(n)),((n,e)=>['custom',e.customTransformerRegistry.findApplicable(n).name]),((n,e)=>e.customTransformerRegistry.findApplicable(n).serialize(n)),((n,e,t)=>{const s=t.customTransformerRegistry.findByName(e[1]);if(!s)throw new Error('Trying to deserialize unknown custom value');return s.deserialize(n)})),p=[f,a,y,c];_e.transformValue=(n,t)=>{const o=(0,e.findArr)(p,(e=>e.isApplicable(n,t)));if(o)return{value:o.transform(n,t),type:o.annotation(n,t)};const a=(0,e.findArr)(s,(e=>e.isApplicable(n,t)));return a?{value:a.transform(n,t),type:a.annotation}:void 0};const w={};s.forEach((n=>{w[n.annotation]=n}));_e.untransformValue=(e,t,s)=>{if(!(0,n.isArray)(t)){const n=w[t];if(!n)throw new Error('Unknown transformation: '+t);return n.untransform(e,s)}switch(t[0]){case'symbol':return a.untransform(e,t,s);case'class':return f.untransform(e,t,s);case'custom':return y.untransform(e,t,s);case'typed-array':return c.untransform(e,t,s);default:throw new Error('Unknown transformation: '+t)}}}),3402,[3400,3398]);
__d((function(g,r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.setDeep=e.getDeep=void 0;var t=r(d[0]),s=r(d[1]);const o=(t,s)=>{if(s>t.size)throw new Error('index out of bounds');const o=t.keys();for(;s>0;)o.next(),s--;return o.next().value};function n(t){if((0,s.includes)(t,'__proto__'))throw new Error('__proto__ is not allowed as a property');if((0,s.includes)(t,'prototype'))throw new Error('prototype is not allowed as a property');if((0,s.includes)(t,'constructor'))throw new Error('constructor is not allowed as a property')}e.getDeep=(s,i)=>{n(i);for(let n=0;n<i.length;n++){const l=i[n];if((0,t.isSet)(s))s=o(s,+l);else if((0,t.isMap)(s)){const t=+l,c=0==+i[++n]?'key':'value',u=o(s,t);switch(c){case'key':s=u;break;case'value':s=s.get(u)}}else s=s[l]}return s};e.setDeep=(s,i,l)=>{if(n(i),0===i.length)return l(s);let c=s;for(let s=0;s<i.length-1;s++){const n=i[s];if((0,t.isArray)(c)){c=c[+n]}else if((0,t.isPlainObject)(c))c=c[n];else if((0,t.isSet)(c)){c=o(c,+n)}else if((0,t.isMap)(c)){if(s===i.length-2)break;const t=+n,l=0==+i[++s]?'key':'value',u=o(c,t);switch(l){case'key':c=u;break;case'value':c=c.get(u)}}}const u=i[i.length-1];if((0,t.isArray)(c)?c[+u]=l(c[+u]):(0,t.isPlainObject)(c)&&(c[u]=l(c[u])),(0,t.isSet)(c)){const t=o(c,+u),s=l(t);t!==s&&(c.delete(t),c.add(s))}if((0,t.isMap)(c)){const t=+i[i.length-2],s=o(c,t);switch(0==+u?'key':'value'){case'key':{const t=l(s);c.set(t,c.get(s)),t!==s&&c.delete(s);break}case'value':c.set(s,l(c.get(s)))}}return s}}),3403,[3400,3398]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.copy=function u(o,l={}){if((0,n.isArray)(o))return o.map((n=>u(n,l)));if(!(0,n.isPlainObject)(o))return o;const c=Object.getOwnPropertyNames(o),b=Object.getOwnPropertySymbols(o);return[...c,...b].reduce(((c,b)=>{if((0,n.isArray)(l.props)&&!l.props.includes(b))return c;const s=o[b];return t(c,b,u(s,l),o,l.nonenumerable),c}),{})};var n=r(d[0]);function t(n,t,u,o,l){const c={}.propertyIsEnumerable.call(o,t)?"enumerable":"nonenumerable";"enumerable"===c&&(n[t]=u),l&&"nonenumerable"===c&&Object.defineProperty(n,t,{value:u,enumerable:!1,writable:!0,configurable:!0})}}),3404,[3405]);
__d((function(g,r,i,_a,m,_e,_d){function n(n){return Object.prototype.toString.call(n).slice(8,-1)}function t(t){return"Object"===n(t)}function e(t){return"Array"===n(t)}function u(t){return"Boolean"===n(t)}function o(t){if("Object"!==n(t))return!1;const e=Object.getPrototypeOf(t);return!!e&&e.constructor===Object&&e===Object.prototype}function c(t){return"String"===n(t)}function f(t,e){if(!(e instanceof Function))throw new TypeError("Type must be a function");if(!Object.prototype.hasOwnProperty.call(e,"prototype"))throw new TypeError("Type is not a class");const u=e.name;return n(t)===u||Boolean(t&&t.constructor===e)}function s(t){return"Number"===n(t)&&!isNaN(t)}function l(t){return"Null"===n(t)}function a(n,t,e,u,o){return c=>n(c)||t(c)||!!e&&e(c)||!!u&&u(c)||!!o&&o(c)}function p(t){return"Undefined"===n(t)}Object.defineProperty(_e,"__esModule",{value:!0}),_e.getType=n,_e.isAnyObject=t,_e.isArray=e,_e.isBlob=function(t){return"Blob"===n(t)},_e.isBoolean=u,_e.isDate=function(t){return"Date"===n(t)&&!isNaN(t)},_e.isEmptyArray=function(n){return e(n)&&0===n.length},_e.isEmptyObject=function(n){return o(n)&&0===Object.keys(n).length},_e.isEmptyString=function(n){return""===n},_e.isError=function(t){return"Error"===n(t)||t instanceof Error},_e.isFile=function(t){return"File"===n(t)},_e.isFullArray=function(n){return e(n)&&n.length>0},_e.isFullObject=function(n){return o(n)&&Object.keys(n).length>0},_e.isFullString=function(n){return c(n)&&""!==n},_e.isFunction=function(n){return"function"==typeof n},_e.isInstanceOf=function(t,e){if("function"==typeof e){for(let n=t;n;n=Object.getPrototypeOf(n))if(f(n,e))return!0;return!1}for(let u=t;u;u=Object.getPrototypeOf(u))if(n(u)===e)return!0;return!1},_e.isMap=function(t){return"Map"===n(t)},_e.isNaNValue=function(t){return"Number"===n(t)&&isNaN(t)},_e.isNegativeNumber=function(n){return s(n)&&n<0},_e.isNull=l,_e.isNullOrUndefined=void 0,_e.isNumber=s,_e.isObject=function(n){return o(n)},_e.isObjectLike=function(n){return t(n)},_e.isOneOf=a,_e.isPlainObject=o,_e.isPositiveNumber=function(n){return s(n)&&n>0},_e.isPrimitive=function(n){return u(n)||l(n)||p(n)||s(n)||c(n)||y(n)},_e.isPromise=function(t){return"Promise"===n(t)},_e.isRegExp=function(t){return"RegExp"===n(t)},_e.isSet=function(t){return"Set"===n(t)},_e.isString=c,_e.isSymbol=y,_e.isType=f,_e.isUndefined=p,_e.isWeakMap=function(t){return"WeakMap"===n(t)},_e.isWeakSet=function(t){return"WeakSet"===n(t)};_e.isNullOrUndefined=a(l,p);function y(t){return"Symbol"===n(t)}}),3405,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0});var n=r(d[0]);Object.keys(n).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===n[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}}))}));var t=r(d[1]);Object.keys(t).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===t[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}}))}));var u=r(d[2]);Object.keys(u).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===u[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return u[n]}}))}));var o=r(d[3]);Object.keys(o).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===o[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return o[n]}}))}));var c=r(d[4]);Object.keys(c).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===c[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return c[n]}}))}));var f=r(d[5]);Object.keys(f).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===f[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return f[n]}}))}));var l=r(d[6]);Object.keys(l).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===l[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return l[n]}}))}));var b=r(d[7]);Object.keys(b).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===b[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return b[n]}}))}));var _=r(d[8]);Object.keys(_).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===_[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return _[n]}}))}));var j=r(d[9]);Object.keys(j).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===j[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return j[n]}}))}));var s=r(d[10]);Object.keys(s).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===s[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return s[n]}}))}));var y=r(d[11]);Object.keys(y).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===y[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return y[n]}}))}));var O=r(d[12]);Object.keys(O).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===O[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return O[n]}}))}));var p=r(d[13]);Object.keys(p).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===p[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return p[n]}}))}));var v=r(d[14]);Object.keys(v).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===v[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return v[n]}}))}));var M=r(d[15]);Object.keys(M).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===M[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return M[n]}}))}));var P=r(d[16]);Object.keys(P).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===P[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return P[n]}}))}));var h=r(d[17]);Object.keys(h).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===h[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return h[n]}}))}));var k=r(d[18]);Object.keys(k).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===k[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return k[n]}}))}));var E=r(d[19]);Object.keys(E).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===E[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return E[n]}}))}));var q=r(d[20]);Object.keys(q).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===q[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return q[n]}}))}));var w=r(d[21]);Object.keys(w).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===w[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return w[n]}}))}));var x=r(d[22]);Object.keys(x).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===x[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return x[n]}}))}));var z=r(d[23]);Object.keys(z).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===z[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return z[n]}}))}));var A=r(d[24]);Object.keys(A).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===A[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return A[n]}}))}));var B=r(d[25]);Object.keys(B).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===B[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return B[n]}}))}));var C=r(d[26]);Object.keys(C).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===C[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return C[n]}}))}));var D=r(d[27]);Object.keys(D).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===D[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return D[n]}}))}));var F=r(d[28]);Object.keys(F).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===F[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return F[n]}}))}));var G=r(d[29]);Object.keys(G).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===G[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return G[n]}}))}));var H=r(d[30]);Object.keys(H).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===H[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return H[n]}}))}));var I=r(d[31]);Object.keys(I).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===I[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return I[n]}}))}));var J=r(d[32]);Object.keys(J).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===J[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return J[n]}}))}));var K=r(d[33]);Object.keys(K).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===K[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return K[n]}}))}));var L=r(d[34]);Object.keys(L).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===L[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return L[n]}}))}));var N=r(d[35]);Object.keys(N).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===N[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return N[n]}}))}));var Q=r(d[36]);Object.keys(Q).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Q[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Q[n]}}))}));var R=r(d[37]);Object.keys(R).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===R[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return R[n]}}))}));var S=r(d[38]);Object.keys(S).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===S[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return S[n]}}))}));var T=r(d[39]);Object.keys(T).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===T[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return T[n]}}))}));var U=r(d[40]);Object.keys(U).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===U[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return U[n]}}))}));var V=r(d[41]);Object.keys(V).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===V[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return V[n]}}))}));var W=r(d[42]);Object.keys(W).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===W[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return W[n]}}))}));var X=r(d[43]);Object.keys(X).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===X[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return X[n]}}))}));var Y=r(d[44]);Object.keys(Y).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Y[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Y[n]}}))}));var Z=r(d[45]);Object.keys(Z).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Z[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Z[n]}}))}));var $=r(d[46]);Object.keys($).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===$[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return $[n]}}))}));var ee=r(d[47]);Object.keys(ee).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===ee[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ee[n]}}))}));var ne=r(d[48]);Object.keys(ne).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===ne[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ne[n]}}))}));var te=r(d[49]);Object.keys(te).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===te[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return te[n]}}))}));var re=r(d[50]);Object.keys(re).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===re[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return re[n]}}))}));var ue=r(d[51]);Object.keys(ue).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===ue[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ue[n]}}))}));var oe=r(d[52]);Object.keys(oe).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===oe[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return oe[n]}}))}));var ce=r(d[53]);Object.keys(ce).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===ce[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ce[n]}}))}));var fe=r(d[54]);Object.keys(fe).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===fe[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return fe[n]}}))}));var ie=r(d[55]);Object.keys(ie).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===ie[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ie[n]}}))}));var ae=r(d[56]);Object.keys(ae).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===ae[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ae[n]}}))}));var de=r(d[57]);Object.keys(de).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===de[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return de[n]}}))}));var le=r(d[58]);Object.keys(le).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===le[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return le[n]}}))}));var be=r(d[59]);Object.keys(be).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===be[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return be[n]}}))}));var _e=r(d[60]);Object.keys(_e).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===_e[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return _e[n]}}))}));var je=r(d[61]);Object.keys(je).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===je[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return je[n]}}))}));var se=r(d[62]);Object.keys(se).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===se[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return se[n]}}))}));var ye=r(d[63]);Object.keys(ye).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===ye[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ye[n]}}))}));var Oe=r(d[64]);Object.keys(Oe).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Oe[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Oe[n]}}))}));var pe=r(d[65]);Object.keys(pe).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===pe[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return pe[n]}}))}));var ve=r(d[66]);Object.keys(ve).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===ve[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ve[n]}}))}));var Me=r(d[67]);Object.keys(Me).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Me[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Me[n]}}))}));var Pe=r(d[68]);Object.keys(Pe).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Pe[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Pe[n]}}))}));var ge=r(d[69]);Object.keys(ge).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===ge[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ge[n]}}))}));var he=r(d[70]);Object.keys(he).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===he[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return he[n]}}))}));var ke=r(d[71]);Object.keys(ke).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===ke[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ke[n]}}))}));var me=r(d[72]);Object.keys(me).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===me[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return me[n]}}))}));var Ee=r(d[73]);Object.keys(Ee).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Ee[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ee[n]}}))}));var qe=r(d[74]);Object.keys(qe).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===qe[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return qe[n]}}))}));var we=r(d[75]);Object.keys(we).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===we[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return we[n]}}))}));var xe=r(d[76]);Object.keys(xe).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===xe[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return xe[n]}}))}));var ze=r(d[77]);Object.keys(ze).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===ze[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ze[n]}}))}));var Ae=r(d[78]);Object.keys(Ae).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Ae[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ae[n]}}))}));var Be=r(d[79]);Object.keys(Be).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Be[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Be[n]}}))}));var Ce=r(d[80]);Object.keys(Ce).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Ce[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ce[n]}}))}));var De=r(d[81]);Object.keys(De).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===De[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return De[n]}}))}));var Fe=r(d[82]);Object.keys(Fe).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Fe[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Fe[n]}}))}));var Ge=r(d[83]);Object.keys(Ge).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Ge[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ge[n]}}))}));var He=r(d[84]);Object.keys(He).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===He[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return He[n]}}))}));var Ie=r(d[85]);Object.keys(Ie).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Ie[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ie[n]}}))}));var Je=r(d[86]);Object.keys(Je).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Je[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Je[n]}}))}));var Ke=r(d[87]);Object.keys(Ke).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Ke[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ke[n]}}))}));var Le=r(d[88]);Object.keys(Le).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Le[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Le[n]}}))}));var Ne=r(d[89]);Object.keys(Ne).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Ne[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ne[n]}}))}));var Qe=r(d[90]);Object.keys(Qe).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Qe[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Qe[n]}}))}));var Re=r(d[91]);Object.keys(Re).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Re[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Re[n]}}))}));var Se=r(d[92]);Object.keys(Se).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Se[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Se[n]}}))}));var Te=r(d[93]);Object.keys(Te).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Te[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Te[n]}}))}));var Ue=r(d[94]);Object.keys(Ue).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Ue[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ue[n]}}))}));var Ve=r(d[95]);Object.keys(Ve).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Ve[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ve[n]}}))}));var We=r(d[96]);Object.keys(We).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===We[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return We[n]}}))}));var Xe=r(d[97]);Object.keys(Xe).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Xe[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Xe[n]}}))}));var Ye=r(d[98]);Object.keys(Ye).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Ye[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ye[n]}}))}));var Ze=r(d[99]);Object.keys(Ze).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Ze[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ze[n]}}))}));var $e=r(d[100]);Object.keys($e).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===$e[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return $e[n]}}))}));var en=r(d[101]);Object.keys(en).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===en[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return en[n]}}))}));var nn=r(d[102]);Object.keys(nn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===nn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return nn[n]}}))}));var tn=r(d[103]);Object.keys(tn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===tn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return tn[n]}}))}));var rn=r(d[104]);Object.keys(rn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===rn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return rn[n]}}))}));var un=r(d[105]);Object.keys(un).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===un[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return un[n]}}))}));var on=r(d[106]);Object.keys(on).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===on[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return on[n]}}))}));var cn=r(d[107]);Object.keys(cn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===cn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return cn[n]}}))}));var fn=r(d[108]);Object.keys(fn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===fn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return fn[n]}}))}));var an=r(d[109]);Object.keys(an).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===an[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return an[n]}}))}));var dn=r(d[110]);Object.keys(dn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===dn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return dn[n]}}))}));var ln=r(d[111]);Object.keys(ln).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===ln[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ln[n]}}))}));var bn=r(d[112]);Object.keys(bn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===bn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return bn[n]}}))}));var _n=r(d[113]);Object.keys(_n).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===_n[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return _n[n]}}))}));var jn=r(d[114]);Object.keys(jn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===jn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return jn[n]}}))}));var sn=r(d[115]);Object.keys(sn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===sn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return sn[n]}}))}));var yn=r(d[116]);Object.keys(yn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===yn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return yn[n]}}))}));var On=r(d[117]);Object.keys(On).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===On[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return On[n]}}))}));var pn=r(d[118]);Object.keys(pn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===pn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return pn[n]}}))}));var vn=r(d[119]);Object.keys(vn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===vn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return vn[n]}}))}));var Mn=r(d[120]);Object.keys(Mn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Mn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Mn[n]}}))}));var Pn=r(d[121]);Object.keys(Pn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Pn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Pn[n]}}))}));var gn=r(d[122]);Object.keys(gn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===gn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return gn[n]}}))}));var hn=r(d[123]);Object.keys(hn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===hn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return hn[n]}}))}));var kn=r(d[124]);Object.keys(kn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===kn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return kn[n]}}))}));var mn=r(d[125]);Object.keys(mn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===mn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return mn[n]}}))}));var En=r(d[126]);Object.keys(En).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===En[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return En[n]}}))}));var qn=r(d[127]);Object.keys(qn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===qn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return qn[n]}}))}));var wn=r(d[128]);Object.keys(wn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===wn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return wn[n]}}))}));var xn=r(d[129]);Object.keys(xn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===xn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return xn[n]}}))}));var zn=r(d[130]);Object.keys(zn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===zn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return zn[n]}}))}));var An=r(d[131]);Object.keys(An).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===An[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return An[n]}}))}));var Bn=r(d[132]);Object.keys(Bn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Bn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Bn[n]}}))}));var Cn=r(d[133]);Object.keys(Cn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Cn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Cn[n]}}))}));var Dn=r(d[134]);Object.keys(Dn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Dn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Dn[n]}}))}));var Fn=r(d[135]);Object.keys(Fn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Fn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Fn[n]}}))}));var Gn=r(d[136]);Object.keys(Gn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Gn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Gn[n]}}))}));var Hn=r(d[137]);Object.keys(Hn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Hn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Hn[n]}}))}));var In=r(d[138]);Object.keys(In).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===In[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return In[n]}}))}));var Jn=r(d[139]);Object.keys(Jn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Jn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Jn[n]}}))}));var Kn=r(d[140]);Object.keys(Kn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Kn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Kn[n]}}))}));var Ln=r(d[141]);Object.keys(Ln).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Ln[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ln[n]}}))}));var Nn=r(d[142]);Object.keys(Nn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Nn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Nn[n]}}))}));var Qn=r(d[143]);Object.keys(Qn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Qn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Qn[n]}}))}));var Rn=r(d[144]);Object.keys(Rn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Rn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Rn[n]}}))}));var Sn=r(d[145]);Object.keys(Sn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Sn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Sn[n]}}))}));var Tn=r(d[146]);Object.keys(Tn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Tn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Tn[n]}}))}));var Un=r(d[147]);Object.keys(Un).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Un[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Un[n]}}))}));var Vn=r(d[148]);Object.keys(Vn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Vn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Vn[n]}}))}));var Wn=r(d[149]);Object.keys(Wn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Wn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Wn[n]}}))}));var Xn=r(d[150]);Object.keys(Xn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Xn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Xn[n]}}))}));var Yn=r(d[151]);Object.keys(Yn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Yn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Yn[n]}}))}));var Zn=r(d[152]);Object.keys(Zn).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Zn[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Zn[n]}}))}));var $n=r(d[153]);Object.keys($n).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===$n[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return $n[n]}}))}));var et=r(d[154]);Object.keys(et).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===et[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return et[n]}}))}));var nt=r(d[155]);Object.keys(nt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===nt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return nt[n]}}))}));var tt=r(d[156]);Object.keys(tt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===tt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return tt[n]}}))}));var rt=r(d[157]);Object.keys(rt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===rt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return rt[n]}}))}));var ut=r(d[158]);Object.keys(ut).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===ut[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ut[n]}}))}));var ot=r(d[159]);Object.keys(ot).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===ot[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ot[n]}}))}));var ct=r(d[160]);Object.keys(ct).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===ct[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ct[n]}}))}));var ft=r(d[161]);Object.keys(ft).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===ft[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ft[n]}}))}));var it=r(d[162]);Object.keys(it).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===it[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return it[n]}}))}));var at=r(d[163]);Object.keys(at).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===at[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return at[n]}}))}));var dt=r(d[164]);Object.keys(dt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===dt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return dt[n]}}))}));var lt=r(d[165]);Object.keys(lt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===lt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return lt[n]}}))}));var bt=r(d[166]);Object.keys(bt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===bt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return bt[n]}}))}));var _t=r(d[167]);Object.keys(_t).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===_t[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return _t[n]}}))}));var jt=r(d[168]);Object.keys(jt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===jt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return jt[n]}}))}));var st=r(d[169]);Object.keys(st).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===st[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return st[n]}}))}));var yt=r(d[170]);Object.keys(yt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===yt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return yt[n]}}))}));var Ot=r(d[171]);Object.keys(Ot).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Ot[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ot[n]}}))}));var pt=r(d[172]);Object.keys(pt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===pt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return pt[n]}}))}));var vt=r(d[173]);Object.keys(vt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===vt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return vt[n]}}))}));var Mt=r(d[174]);Object.keys(Mt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Mt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Mt[n]}}))}));var Pt=r(d[175]);Object.keys(Pt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Pt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Pt[n]}}))}));var gt=r(d[176]);Object.keys(gt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===gt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return gt[n]}}))}));var ht=r(d[177]);Object.keys(ht).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===ht[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ht[n]}}))}));var kt=r(d[178]);Object.keys(kt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===kt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return kt[n]}}))}));var mt=r(d[179]);Object.keys(mt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===mt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return mt[n]}}))}));var Et=r(d[180]);Object.keys(Et).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Et[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Et[n]}}))}));var qt=r(d[181]);Object.keys(qt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===qt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return qt[n]}}))}));var wt=r(d[182]);Object.keys(wt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===wt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return wt[n]}}))}));var xt=r(d[183]);Object.keys(xt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===xt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return xt[n]}}))}));var zt=r(d[184]);Object.keys(zt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===zt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return zt[n]}}))}));var At=r(d[185]);Object.keys(At).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===At[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return At[n]}}))}));var Bt=r(d[186]);Object.keys(Bt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Bt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Bt[n]}}))}));var Ct=r(d[187]);Object.keys(Ct).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Ct[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ct[n]}}))}));var Dt=r(d[188]);Object.keys(Dt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Dt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Dt[n]}}))}));var Ft=r(d[189]);Object.keys(Ft).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Ft[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ft[n]}}))}));var Gt=r(d[190]);Object.keys(Gt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Gt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Gt[n]}}))}));var Ht=r(d[191]);Object.keys(Ht).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Ht[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ht[n]}}))}));var It=r(d[192]);Object.keys(It).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===It[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return It[n]}}))}));var Jt=r(d[193]);Object.keys(Jt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Jt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Jt[n]}}))}));var Kt=r(d[194]);Object.keys(Kt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Kt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Kt[n]}}))}));var Lt=r(d[195]);Object.keys(Lt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Lt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Lt[n]}}))}));var Nt=r(d[196]);Object.keys(Nt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Nt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Nt[n]}}))}));var Qt=r(d[197]);Object.keys(Qt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Qt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Qt[n]}}))}));var Rt=r(d[198]);Object.keys(Rt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Rt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Rt[n]}}))}));var St=r(d[199]);Object.keys(St).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===St[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return St[n]}}))}));var Tt=r(d[200]);Object.keys(Tt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Tt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Tt[n]}}))}));var Ut=r(d[201]);Object.keys(Ut).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Ut[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ut[n]}}))}));var Vt=r(d[202]);Object.keys(Vt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Vt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Vt[n]}}))}));var Wt=r(d[203]);Object.keys(Wt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Wt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Wt[n]}}))}));var Xt=r(d[204]);Object.keys(Xt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Xt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Xt[n]}}))}));var Yt=r(d[205]);Object.keys(Yt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Yt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Yt[n]}}))}));var Zt=r(d[206]);Object.keys(Zt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Zt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Zt[n]}}))}));var $t=r(d[207]);Object.keys($t).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===$t[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return $t[n]}}))}));var er=r(d[208]);Object.keys(er).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===er[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return er[n]}}))}));var nr=r(d[209]);Object.keys(nr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===nr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return nr[n]}}))}));var tr=r(d[210]);Object.keys(tr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===tr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return tr[n]}}))}));var rr=r(d[211]);Object.keys(rr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===rr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return rr[n]}}))}));var ur=r(d[212]);Object.keys(ur).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===ur[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ur[n]}}))}));var or=r(d[213]);Object.keys(or).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===or[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return or[n]}}))}));var cr=r(d[214]);Object.keys(cr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===cr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return cr[n]}}))}));var fr=r(d[215]);Object.keys(fr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===fr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return fr[n]}}))}));var ir=r(d[216]);Object.keys(ir).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===ir[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ir[n]}}))}));var ar=r(d[217]);Object.keys(ar).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===ar[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ar[n]}}))}));var dr=r(d[218]);Object.keys(dr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===dr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return dr[n]}}))}));var lr=r(d[219]);Object.keys(lr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===lr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return lr[n]}}))}));var br=r(d[220]);Object.keys(br).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===br[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return br[n]}}))}));var _r=r(d[221]);Object.keys(_r).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===_r[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return _r[n]}}))}));var jr=r(d[222]);Object.keys(jr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===jr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return jr[n]}}))}));var sr=r(d[223]);Object.keys(sr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===sr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return sr[n]}}))}));var yr=r(d[224]);Object.keys(yr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===yr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return yr[n]}}))}));var Or=r(d[225]);Object.keys(Or).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Or[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Or[n]}}))}));var pr=r(d[226]);Object.keys(pr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===pr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return pr[n]}}))}));var vr=r(d[227]);Object.keys(vr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===vr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return vr[n]}}))}));var Mr=r(d[228]);Object.keys(Mr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Mr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Mr[n]}}))}));var Pr=r(d[229]);Object.keys(Pr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Pr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Pr[n]}}))}));var gr=r(d[230]);Object.keys(gr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===gr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return gr[n]}}))}));var hr=r(d[231]);Object.keys(hr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===hr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return hr[n]}}))}));var kr=r(d[232]);Object.keys(kr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===kr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return kr[n]}}))}));var mr=r(d[233]);Object.keys(mr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===mr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return mr[n]}}))}));var Er=r(d[234]);Object.keys(Er).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Er[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Er[n]}}))}));var qr=r(d[235]);Object.keys(qr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===qr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return qr[n]}}))}));var wr=r(d[236]);Object.keys(wr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===wr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return wr[n]}}))}));var xr=r(d[237]);Object.keys(xr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===xr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return xr[n]}}))}));var zr=r(d[238]);Object.keys(zr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===zr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return zr[n]}}))}));var Ar=r(d[239]);Object.keys(Ar).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Ar[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ar[n]}}))}));var Br=r(d[240]);Object.keys(Br).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Br[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Br[n]}}))}));var Cr=r(d[241]);Object.keys(Cr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Cr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Cr[n]}}))}));var Dr=r(d[242]);Object.keys(Dr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Dr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Dr[n]}}))}));var Fr=r(d[243]);Object.keys(Fr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Fr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Fr[n]}}))}));var Gr=r(d[244]);Object.keys(Gr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===Gr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Gr[n]}}))}))}),3420,[3421,3427,3422,3431,3433,3432,3444,3426,3445,3446,3447,3448,3449,3450,3453,3454,3455,3456,3423,3457,3458,3459,3439,3463,3464,3465,3466,3468,3469,3470,3471,3473,3475,3476,3477,3481,3482,3483,3484,3485,3487,3488,3489,3490,3492,3493,3494,3496,3499,3479,3500,3501,3502,3504,3505,3480,3506,3507,3508,3509,3503,3497,3510,3511,3533,3534,3535,3536,3537,3538,3539,3540,3541,3542,3543,3544,3545,3546,3524,3547,3548,3550,3551,3552,3553,3525,3434,3554,3555,3556,3557,3558,3467,3559,3560,3561,3526,3562,3528,3563,3565,3566,3567,3568,3569,3570,3571,3572,3573,3574,3462,3575,3576,3577,3578,3579,3478,3549,3580,3623,3624,3460,3625,3627,3629,3630,3632,3633,3634,3628,3636,3428,3429,3637,3638,3639,3640,3641,3642,3643,3644,3645,3646,3647,3648,3461,3649,3430,3650,3651,3653,3654,3656,3564,3657,3655,3658,3659,3451,3660,3661,3662,3663,3452,3664,3665,3666,3667,3668,3669,3670,3671,3672,3673,3674,3675,3676,3581,3677,3678,3679,3680,3681,3682,3683,3684,3685,3686,3687,3688,3689,3690,3691,3692,3693,3694,3696,3604,3697,3698,3699,3608,3600,3438,3700,3701,3695,3702,3703,3598,3704,3705,3442,3706,3626,3435,3443,3631,3495,3491,3635,3707,3708,3436,3527,3498,3709,3710,3712,3652,3713,3474,3714,3715,3711,3716,3717,3718,3719,3425,3583,3720,3721,3722,3723]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.add=u,e.default=void 0;var t=r(d[0]),n=r(d[1]),o=r(d[2]),s=r(d[3]);function u(u,c,f){const{years:l=0,months:y=0,weeks:_=0,days:h=0,hours:v=0,minutes:D=0,seconds:M=0}=c,b=(0,s.toDate)(u,f?.in),j=y||l?(0,n.addMonths)(b,y+12*l):b,k=h||_?(0,t.addDays)(j,h+7*_):j,p=1e3*(M+60*(D+60*v));return(0,o.constructFrom)(f?.in||u,+k+p)}e.default=u}),3421,[3422,3426,3423,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.addDays=o,e.default=void 0;var t=r(d[0]),n=r(d[1]);function o(o,u,c){const s=(0,n.toDate)(o,c?.in);return isNaN(u)?(0,t.constructFrom)(c?.in||o,NaN):u?(s.setDate(s.getDate()+u),s):s}e.default=o}),3422,[3423,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.constructFrom=o,e.default=void 0;var t=r(d[0]);function o(o,n){return"function"==typeof o?o(n):o&&"object"==typeof o&&t.constructFromSymbol in o?o[t.constructFromSymbol](n):o instanceof Date?new o.constructor(n):new Date(n)}e.default=o}),3423,[3424]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.secondsInYear=e.secondsInWeek=e.secondsInQuarter=e.secondsInMonth=e.secondsInMinute=e.secondsInHour=e.secondsInDay=e.quartersInYear=e.monthsInYear=e.monthsInQuarter=e.minutesInYear=e.minutesInMonth=e.minutesInHour=e.minutesInDay=e.minTime=e.millisecondsInWeek=e.millisecondsInSecond=e.millisecondsInMinute=e.millisecondsInHour=e.millisecondsInDay=e.maxTime=e.daysInYear=e.daysInWeek=e.constructFromSymbol=void 0;e.daysInWeek=7;const n=e.daysInYear=365.2425,s=e.maxTime=24*Math.pow(10,8)*60*60*1e3,o=(e.minTime=-s,e.millisecondsInWeek=6048e5,e.millisecondsInDay=864e5,e.millisecondsInMinute=6e4,e.millisecondsInHour=36e5,e.millisecondsInSecond=1e3,e.minutesInYear=525600,e.minutesInMonth=43200,e.minutesInDay=1440,e.minutesInHour=60,e.monthsInQuarter=3,e.monthsInYear=12,e.quartersInYear=4,e.secondsInHour=3600),I=(e.secondsInMinute=60,e.secondsInDay=24*o),t=(e.secondsInWeek=7*I,e.secondsInYear=I*n),c=e.secondsInMonth=t/12;e.secondsInQuarter=3*c,e.constructFromSymbol=Symbol.for("constructDateFrom")}),3424,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.toDate=o;var t=r(d[0]);function o(o,u){return(0,t.constructFrom)(u||o,o)}e.default=o}),3425,[3423]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.addMonths=o,e.default=void 0;var t=r(d[0]),n=r(d[1]);function o(o,u,c){const s=(0,n.toDate)(o,c?.in);if(isNaN(u))return(0,t.constructFrom)(c?.in||o,NaN);if(!u)return s;const l=s.getDate(),f=(0,t.constructFrom)(c?.in||o,s.getTime());f.setMonth(s.getMonth()+u+1,0);return l>=f.getDate()?f:(s.setFullYear(f.getFullYear(),f.getMonth(),l),s)}e.default=o}),3426,[3423,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.addBusinessDays=D,e.default=void 0;var t=r(d[0]),s=r(d[1]),n=r(d[2]),u=r(d[3]),o=r(d[4]);function D(D,c,f){const l=(0,o.toDate)(D,f?.in),y=(0,u.isWeekend)(l,f);if(isNaN(c))return(0,t.constructFrom)(f?.in,NaN);const N=l.getHours(),_=c<0?-1:1,k=Math.trunc(c/5);l.setDate(l.getDate()+7*k);let v=Math.abs(c%5);for(;v>0;)l.setDate(l.getDate()+_),(0,u.isWeekend)(l,f)||(v-=1);return y&&(0,u.isWeekend)(l,f)&&0!==c&&((0,s.isSaturday)(l,f)&&l.setDate(l.getDate()+(_<0?2:-1)),(0,n.isSunday)(l,f)&&l.setDate(l.getDate()+(_<0?1:-2))),l.setHours(N),l}e.default=D}),3427,[3423,3428,3429,3430,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isSaturday=u;var t=r(d[0]);function u(u,n){return 6===(0,t.toDate)(u,n?.in).getDay()}e.default=u}),3428,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isSunday=n;var t=r(d[0]);function n(n,u){return 0===(0,t.toDate)(n,u?.in).getDay()}e.default=n}),3429,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isWeekend=n;var t=r(d[0]);function n(n,o){const u=(0,t.toDate)(n,o?.in).getDay();return 0===u||6===u}e.default=n}),3430,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.addHours=u,e.default=void 0;var n=r(d[0]),o=r(d[1]);function u(u,l,t){return(0,n.addMilliseconds)(u,l*o.millisecondsInHour,t)}e.default=u}),3431,[3432,3424]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.addMilliseconds=o,e.default=void 0;var t=r(d[0]),n=r(d[1]);function o(o,u,c){return(0,t.constructFrom)(c?.in||o,+(0,n.toDate)(o)+u)}e.default=o}),3432,[3423,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.addISOWeekYears=n,e.default=void 0;var t=r(d[0]),u=r(d[1]);function n(n,f,o){return(0,u.setISOWeekYear)(n,(0,t.getISOWeekYear)(n,o)+f,o)}e.default=n}),3433,[3434,3438]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.getISOWeekYear=u;var t=r(d[0]),o=r(d[1]),s=r(d[2]);function u(u,n){const c=(0,s.toDate)(u,n?.in),l=c.getFullYear(),f=(0,t.constructFrom)(c,0);f.setFullYear(l+1,0,4),f.setHours(0,0,0,0);const O=(0,o.startOfISOWeek)(f),F=(0,t.constructFrom)(c,0);F.setFullYear(l,0,4),F.setHours(0,0,0,0);const T=(0,o.startOfISOWeek)(F);return c.getTime()>=O.getTime()?l+1:c.getTime()>=T.getTime()?l:l-1}e.default=u}),3434,[3423,3435,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.startOfISOWeek=f;var t=r(d[0]);function f(f,n){return(0,t.startOfWeek)(f,{...n,weekStartsOn:1})}e.default=f}),3435,[3436]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.startOfWeek=o;var t=r(d[0]),n=r(d[1]);function o(o,s){const l=(0,t.getDefaultOptions)(),u=s?.weekStartsOn??s?.locale?.options?.weekStartsOn??l.weekStartsOn??l.locale?.options?.weekStartsOn??0,f=(0,n.toDate)(o,s?.in),O=f.getDay(),c=(O<u?7:0)+O-u;return f.setDate(f.getDate()-c),f.setHours(0,0,0,0),f}e.default=o}),3436,[3437,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getDefaultOptions=function(){return t},e.setDefaultOptions=function(n){t=n};let t={}}),3437,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.setISOWeekYear=u;var t=r(d[0]),n=r(d[1]),s=r(d[2]),o=r(d[3]);function u(u,f,l){let c=(0,o.toDate)(u,l?.in);const O=(0,n.differenceInCalendarDays)(c,(0,s.startOfISOWeekYear)(c,l)),D=(0,t.constructFrom)(l?.in||u,0);return D.setFullYear(f,0,4),D.setHours(0,0,0,0),c=(0,s.startOfISOWeekYear)(D),c.setDate(c.getDate()+O),c}e.default=u}),3438,[3423,3439,3443,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.differenceInCalendarDays=o;var n=r(d[0]),t=r(d[1]),s=r(d[2]),f=r(d[3]);function o(o,l,c){const[u,y]=(0,t.normalizeDates)(c?.in,o,l),D=(0,f.startOfDay)(u),O=(0,f.startOfDay)(y),I=+D-(0,n.getTimezoneOffsetInMilliseconds)(D),M=+O-(0,n.getTimezoneOffsetInMilliseconds)(O);return Math.round((I-M)/s.millisecondsInDay)}e.default=o}),3439,[3440,3441,3424,3442]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getTimezoneOffsetInMilliseconds=function(n){const l=(0,t.toDate)(n),o=new Date(Date.UTC(l.getFullYear(),l.getMonth(),l.getDate(),l.getHours(),l.getMinutes(),l.getSeconds(),l.getMilliseconds()));return o.setUTCFullYear(l.getFullYear()),+n-+o};var t=r(d[0])}),3440,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.normalizeDates=function(t,...o){const c=n.constructFrom.bind(null,t||o.find((n=>"object"==typeof n)));return o.map(c)};var n=r(d[0])}),3441,[3423]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.startOfDay=n;var t=r(d[0]);function n(n,o){const u=(0,t.toDate)(n,o?.in);return u.setHours(0,0,0,0),u}e.default=n}),3442,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.startOfISOWeekYear=o;var t=r(d[0]),u=r(d[1]),n=r(d[2]);function o(o,s){const f=(0,u.getISOWeekYear)(o,s),c=(0,t.constructFrom)(s?.in||o,0);return c.setFullYear(f,0,4),c.setHours(0,0,0,0),(0,n.startOfISOWeek)(c)}e.default=o}),3443,[3423,3434,3435]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.addMinutes=u,e.default=void 0;var t=r(d[0]),n=r(d[1]);function u(u,o,l){const s=(0,n.toDate)(u,l?.in);return s.setTime(s.getTime()+o*t.millisecondsInMinute),s}e.default=u}),3444,[3424,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.addQuarters=u,e.default=void 0;var t=r(d[0]);function u(u,n,o){return(0,t.addMonths)(u,3*n,o)}e.default=u}),3445,[3426]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.addSeconds=o,e.default=void 0;var n=r(d[0]);function o(o,t,u){return(0,n.addMilliseconds)(o,1e3*t,u)}e.default=o}),3446,[3432]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.addWeeks=u,e.default=void 0;var t=r(d[0]);function u(u,n,f){return(0,t.addDays)(u,7*n,f)}e.default=u}),3447,[3422]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.addYears=n,e.default=void 0;var t=r(d[0]);function n(n,u,o){return(0,t.addMonths)(n,12*u,o)}e.default=n}),3448,[3426]);
__d((function(g,r,i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.areIntervalsOverlapping=n,e.default=void 0;var t=r(d[0]);function n(n,a,o){const[s,u]=[+(0,t.toDate)(n.start,o?.in),+(0,t.toDate)(n.end,o?.in)].sort(((t,n)=>t-n)),[l,v]=[+(0,t.toDate)(a.start,o?.in),+(0,t.toDate)(a.end,o?.in)].sort(((t,n)=>t-n));return o?.inclusive?s<=v&&l<=u:s<v&&l<u}e.default=n}),3449,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.clamp=u,e.default=void 0;var n=r(d[0]),t=r(d[1]),o=r(d[2]);function u(u,l,c){const[f,s,_]=(0,n.normalizeDates)(c?.in,u,l.start,l.end);return(0,o.min)([(0,t.max)([f,s],c),_],c)}e.default=u}),3450,[3441,3451,3452]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.max=n;var t=r(d[0]),o=r(d[1]);function n(n,c){let u,f=c?.in;return n.forEach((n=>{f||"object"!=typeof n||(f=t.constructFrom.bind(null,n));const c=(0,o.toDate)(n,f);(!u||u<c||isNaN(+c))&&(u=c)})),(0,t.constructFrom)(f,u||NaN)}e.default=n}),3451,[3423,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.min=n;var t=r(d[0]),o=r(d[1]);function n(n,c){let u,f=c?.in;return n.forEach((n=>{f||"object"!=typeof n||(f=t.constructFrom.bind(null,n));const c=(0,o.toDate)(n,f);(!u||u>c||isNaN(+c))&&(u=c)})),(0,t.constructFrom)(f,u||NaN)}e.default=n}),3452,[3423,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.closestIndexTo=o,e.default=void 0;var t=r(d[0]);function o(o,n){const u=+(0,t.toDate)(o);if(isNaN(u))return NaN;let N,s;return n.forEach(((o,n)=>{const c=(0,t.toDate)(o);if(isNaN(+c))return N=NaN,void(s=NaN);const f=Math.abs(u-+c);(null==N||f<s)&&(N=n,s=f)})),N}e.default=o}),3453,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.closestTo=s,e.default=void 0;var o=r(d[0]),t=r(d[1]),n=r(d[2]);function s(s,u,c){const[l,...f]=(0,o.normalizeDates)(c?.in,s,...u),v=(0,t.closestIndexTo)(l,f);return"number"==typeof v&&isNaN(v)?(0,n.constructFrom)(l,NaN):void 0!==v?f[v]:void 0}e.default=s}),3454,[3441,3453,3423]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.compareAsc=o,e.default=void 0;var t=r(d[0]);function o(o,n){const u=+(0,t.toDate)(o)-+(0,t.toDate)(n);return u<0?-1:u>0?1:u}e.default=o}),3455,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.compareDesc=o,e.default=void 0;var t=r(d[0]);function o(o,n){const u=+(0,t.toDate)(o)-+(0,t.toDate)(n);return u>0?-1:u<0?1:u}e.default=o}),3456,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.constructNow=o,e.default=void 0;var t=r(d[0]);function o(o){return(0,t.constructFrom)(o,Date.now())}e.default=o}),3457,[3423]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.daysToWeeks=n,e.default=void 0;var t=r(d[0]);function n(n){const u=Math.trunc(n/t.daysInWeek);return 0===u?0:u}e.default=n}),3458,[3424]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.differenceInBusinessDays=o;var n=r(d[0]),s=r(d[1]),t=r(d[2]),f=r(d[3]),u=r(d[4]),l=r(d[5]);function o(o,c,y){const[D,_]=(0,n.normalizeDates)(y?.in,o,c);if(!(0,u.isValid)(D)||!(0,u.isValid)(_))return NaN;const v=(0,t.differenceInCalendarDays)(D,_),I=v<0?-1:1,M=Math.trunc(v/7);let N=5*M,V=(0,s.addDays)(_,7*M);for(;!(0,f.isSameDay)(D,V);)N+=(0,l.isWeekend)(V,y)?0:I,V=(0,s.addDays)(V,I);return 0===N?0:N}e.default=o}),3459,[3441,3422,3439,3460,3461,3430]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isSameDay=f;var t=r(d[0]),n=r(d[1]);function f(f,o,u){const[s,l]=(0,t.normalizeDates)(u?.in,f,o);return+(0,n.startOfDay)(s)==+(0,n.startOfDay)(l)}e.default=f}),3460,[3441,3442]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isValid=n;var t=r(d[0]),u=r(d[1]);function n(n){return!(!(0,t.isDate)(n)&&"number"!=typeof n||isNaN(+(0,u.toDate)(n)))}e.default=n}),3461,[3462,3425]);
__d((function(g,r,i,a,m,e,d){function t(t){return t instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isDate=t;e.default=t}),3462,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.differenceInCalendarISOWeekYears=f;var n=r(d[0]),t=r(d[1]);function f(f,o,u){const[l,c]=(0,n.normalizeDates)(u?.in,f,o);return(0,t.getISOWeekYear)(l,u)-(0,t.getISOWeekYear)(c,u)}e.default=f}),3463,[3441,3434]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.differenceInCalendarISOWeeks=o;var n=r(d[0]),t=r(d[1]),s=r(d[2]),f=r(d[3]);function o(o,l,c){const[u,O]=(0,t.normalizeDates)(c?.in,o,l),I=(0,f.startOfISOWeek)(u),k=(0,f.startOfISOWeek)(O),M=+I-(0,n.getTimezoneOffsetInMilliseconds)(I),W=+k-(0,n.getTimezoneOffsetInMilliseconds)(k);return Math.round((M-W)/s.millisecondsInWeek)}e.default=o}),3464,[3440,3441,3424,3435]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.differenceInCalendarMonths=n;var t=r(d[0]);function n(n,l,o){const[u,f]=(0,t.normalizeDates)(o?.in,n,l);return 12*(u.getFullYear()-f.getFullYear())+(u.getMonth()-f.getMonth())}e.default=n}),3465,[3441]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.differenceInCalendarQuarters=u;var t=r(d[0]),n=r(d[1]);function u(u,l,f){const[o,c]=(0,t.normalizeDates)(f?.in,u,l);return 4*(o.getFullYear()-c.getFullYear())+((0,n.getQuarter)(o)-(0,n.getQuarter)(c))}e.default=u}),3466,[3441,3467]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.getQuarter=n;var t=r(d[0]);function n(n,u){const o=(0,t.toDate)(n,u?.in);return Math.trunc(o.getMonth()/3)+1}e.default=n}),3467,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.differenceInCalendarWeeks=o;var n=r(d[0]),t=r(d[1]),s=r(d[2]),f=r(d[3]);function o(o,l,c){const[u,O]=(0,t.normalizeDates)(c?.in,o,l),k=(0,f.startOfWeek)(u,c),I=(0,f.startOfWeek)(O,c),M=+k-(0,n.getTimezoneOffsetInMilliseconds)(k),W=+I-(0,n.getTimezoneOffsetInMilliseconds)(I);return Math.round((M-W)/s.millisecondsInWeek)}e.default=o}),3468,[3440,3441,3424,3436]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.differenceInCalendarYears=t;var n=r(d[0]);function t(t,l,u){const[f,o]=(0,n.normalizeDates)(u?.in,t,l);return f.getFullYear()-o.getFullYear()}e.default=t}),3469,[3441]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.differenceInDays=s;var t=r(d[0]),n=r(d[1]);function s(s,u,l){const[c,f]=(0,t.normalizeDates)(l?.in,s,u),M=o(c,f),D=Math.abs((0,n.differenceInCalendarDays)(c,f));c.setDate(c.getDate()-M*D);const _=M*(D-Number(o(c,f)===-M));return 0===_?0:_}function o(t,n){const s=t.getFullYear()-n.getFullYear()||t.getMonth()-n.getMonth()||t.getDate()-n.getDate()||t.getHours()-n.getHours()||t.getMinutes()-n.getMinutes()||t.getSeconds()-n.getSeconds()||t.getMilliseconds()-n.getMilliseconds();return s<0?-1:s>0?1:s}e.default=s}),3470,[3441,3439]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.differenceInHours=u;var n=r(d[0]),o=r(d[1]),t=r(d[2]);function u(u,f,l){const[c,s]=(0,o.normalizeDates)(l?.in,u,f),_=(+c-+s)/t.millisecondsInHour;return(0,n.getRoundingMethod)(l?.roundingMethod)(_)}e.default=u}),3471,[3472,3441,3424]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getRoundingMethod=function(t){return n=>{const u=(t?Math[t]:Math.trunc)(n);return 0===u?0:u}}}),3472,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.differenceInISOWeekYears=f;var n=r(d[0]),c=r(d[1]),s=r(d[2]),t=r(d[3]);function f(f,o,u){const[l,I]=(0,n.normalizeDates)(u?.in,f,o),b=(0,c.compareAsc)(l,I),O=Math.abs((0,s.differenceInCalendarISOWeekYears)(l,I,u)),_=(0,t.subISOWeekYears)(l,b*O,u),k=b*(O-Number((0,c.compareAsc)(_,I)===-b));return 0===k?0:k}e.default=f}),3473,[3441,3455,3463,3474]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.subISOWeekYears=t;var u=r(d[0]);function t(t,n,f){return(0,u.addISOWeekYears)(t,-n,f)}e.default=t}),3474,[3433]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.differenceInMilliseconds=n;var t=r(d[0]);function n(n,o){return+(0,t.toDate)(n)-+(0,t.toDate)(o)}e.default=n}),3475,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.differenceInMinutes=u;var n=r(d[0]),t=r(d[1]),o=r(d[2]);function u(u,f,c){const l=(0,o.differenceInMilliseconds)(u,f)/t.millisecondsInMinute;return(0,n.getRoundingMethod)(c?.roundingMethod)(l)}e.default=u}),3476,[3472,3424,3475]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.differenceInMonths=c;var t=r(d[0]),n=r(d[1]),o=r(d[2]),s=r(d[3]);function c(c,f,u){const[M,h,l]=(0,t.normalizeDates)(u?.in,c,c,f),p=(0,n.compareAsc)(h,l),D=Math.abs((0,o.differenceInCalendarMonths)(h,l));if(D<1)return 0;1===h.getMonth()&&h.getDate()>27&&h.setDate(30),h.setMonth(h.getMonth()-p*D);let _=(0,n.compareAsc)(h,l)===-p;(0,s.isLastDayOfMonth)(M)&&1===D&&1===(0,n.compareAsc)(M,l)&&(_=!1);const v=p*(D-+_);return 0===v?0:v}e.default=c}),3477,[3441,3455,3465,3478]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isLastDayOfMonth=f;var t=r(d[0]),n=r(d[1]),o=r(d[2]);function f(f,u){const c=(0,o.toDate)(f,u?.in);return+(0,t.endOfDay)(c,u)==+(0,n.endOfMonth)(c,u)}e.default=f}),3478,[3479,3480,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.endOfDay=n;var t=r(d[0]);function n(n,o){const u=(0,t.toDate)(n,o?.in);return u.setHours(23,59,59,999),u}e.default=n}),3479,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.endOfMonth=n;var t=r(d[0]);function n(n,o){const u=(0,t.toDate)(n,o?.in),l=u.getMonth();return u.setFullYear(u.getFullYear(),l+1,0),u.setHours(23,59,59,999),u}e.default=n}),3480,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.differenceInQuarters=o;var n=r(d[0]),t=r(d[1]);function o(o,u,f){const c=(0,t.differenceInMonths)(o,u,f)/3;return(0,n.getRoundingMethod)(f?.roundingMethod)(c)}e.default=o}),3481,[3472,3477]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.differenceInSeconds=t;var n=r(d[0]),o=r(d[1]);function t(t,f,u){const c=(0,o.differenceInMilliseconds)(t,f)/1e3;return(0,n.getRoundingMethod)(u?.roundingMethod)(c)}e.default=t}),3482,[3472,3475]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.differenceInWeeks=o;var n=r(d[0]),t=r(d[1]);function o(o,f,u){const c=(0,t.differenceInDays)(o,f,u)/7;return(0,n.getRoundingMethod)(u?.roundingMethod)(c)}e.default=o}),3483,[3472,3470]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.differenceInYears=s;var n=r(d[0]),t=r(d[1]),c=r(d[2]);function s(s,l,o){const[f,u]=(0,n.normalizeDates)(o?.in,s,l),Y=(0,t.compareAsc)(f,u),_=Math.abs((0,c.differenceInCalendarYears)(f,u));f.setFullYear(1584),u.setFullYear(1584);const p=Y*(_-+((0,t.compareAsc)(f,u)===-Y));return 0===p?0:p}e.default=s}),3484,[3441,3455,3469]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.eachDayOfInterval=o;var t=r(d[0]),n=r(d[1]);function o(o,s){const{start:u,end:c}=(0,t.normalizeInterval)(s?.in,o);let l=+u>+c;const f=l?+u:+c,v=l?c:u;v.setHours(0,0,0,0);let _=s?.step??1;if(!_)return[];_<0&&(_=-_,l=!l);const p=[];for(;+v<=f;)p.push((0,n.constructFrom)(u,v)),v.setDate(v.getDate()+_),v.setHours(0,0,0,0);return l?p.reverse():p}e.default=o}),3485,[3486,3423]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.normalizeInterval=function(t,o){const[l,s]=(0,n.normalizeDates)(t,o.start,o.end);return{start:l,end:s}};var n=r(d[0])}),3486,[3441]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.eachHourOfInterval=o;var t=r(d[0]),n=r(d[1]);function o(o,s){const{start:u,end:c}=(0,t.normalizeInterval)(s?.in,o);let l=+u>+c;const f=l?+u:+c,v=l?c:u;v.setMinutes(0,0,0);let _=s?.step??1;if(!_)return[];_<0&&(_=-_,l=!l);const p=[];for(;+v<=f;)p.push((0,n.constructFrom)(u,v)),v.setHours(v.getHours()+_);return l?p.reverse():p}e.default=o}),3487,[3486,3423]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.eachMinuteOfInterval=s;var t=r(d[0]),n=r(d[1]),o=r(d[2]);function s(s,u){const{start:c,end:l}=(0,t.normalizeInterval)(u?.in,s);c.setSeconds(0,0);let f=+c>+l;const v=f?+c:+l;let _=f?l:c,p=u?.step??1;if(!p)return[];p<0&&(p=-p,f=!f);const M=[];for(;+_<=v;)M.push((0,o.constructFrom)(c,_)),_=(0,n.addMinutes)(_,p);return f?M.reverse():M}e.default=s}),3488,[3486,3444,3423]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.eachMonthOfInterval=o;var t=r(d[0]),n=r(d[1]);function o(o,s){const{start:u,end:c}=(0,t.normalizeInterval)(s?.in,o);let l=+u>+c;const f=l?+u:+c,v=l?c:u;v.setHours(0,0,0,0),v.setDate(1);let h=s?.step??1;if(!h)return[];h<0&&(h=-h,l=!l);const M=[];for(;+v<=f;)M.push((0,n.constructFrom)(u,v)),v.setMonth(v.getMonth()+h);return l?M.reverse():M}e.default=o}),3489,[3486,3423]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.eachQuarterOfInterval=f;var t=r(d[0]),n=r(d[1]),u=r(d[2]),s=r(d[3]);function f(f,o){const{start:c,end:l}=(0,t.normalizeInterval)(o?.in,f);let v=+c>+l;const O=v?+(0,s.startOfQuarter)(c):+(0,s.startOfQuarter)(l);let Q=v?(0,s.startOfQuarter)(l):(0,s.startOfQuarter)(c),_=o?.step??1;if(!_)return[];_<0&&(_=-_,v=!v);const p=[];for(;+Q<=O;)p.push((0,u.constructFrom)(c,Q)),Q=(0,n.addQuarters)(Q,_);return v?p.reverse():p}e.default=f}),3490,[3486,3445,3423,3491]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.startOfQuarter=n;var t=r(d[0]);function n(n,o){const u=(0,t.toDate)(n,o?.in),f=u.getMonth(),s=f-f%3;return u.setMonth(s,1),u.setHours(0,0,0,0),u}e.default=n}),3491,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.eachWeekOfInterval=u;var t=r(d[0]),s=r(d[1]),n=r(d[2]),o=r(d[3]);function u(u,f){const{start:c,end:l}=(0,t.normalizeInterval)(f?.in,u);let k=+c>+l;const v=k?(0,o.startOfWeek)(l,f):(0,o.startOfWeek)(c,f),O=k?(0,o.startOfWeek)(c,f):(0,o.startOfWeek)(l,f);v.setHours(15),O.setHours(15);const W=+O.getTime();let H=v,_=f?.step??1;if(!_)return[];_<0&&(_=-_,k=!k);const p=[];for(;+H<=W;)H.setHours(0),p.push((0,n.constructFrom)(c,H)),H=(0,s.addWeeks)(H,_),H.setHours(15);return k?p.reverse():p}e.default=u}),3492,[3486,3447,3423,3436]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.eachWeekendOfInterval=c;var t=r(d[0]),n=r(d[1]),o=r(d[2]),l=r(d[3]);function c(c,u){const{start:f,end:s}=(0,t.normalizeInterval)(u?.in,c),v=(0,o.eachDayOfInterval)({start:f,end:s},u),h=[];let _=0;for(;_<v.length;){const t=v[_++];(0,l.isWeekend)(t)&&h.push((0,n.constructFrom)(f,t))}return h}e.default=c}),3493,[3486,3423,3485,3430]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.eachWeekendOfMonth=o;var t=r(d[0]),n=r(d[1]),f=r(d[2]);function o(o,u){const c=(0,f.startOfMonth)(o,u),h=(0,n.endOfMonth)(o,u);return(0,t.eachWeekendOfInterval)({start:c,end:h},u)}e.default=o}),3494,[3493,3480,3495]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.startOfMonth=n;var t=r(d[0]);function n(n,o){const u=(0,t.toDate)(n,o?.in);return u.setDate(1),u.setHours(0,0,0,0),u}e.default=n}),3495,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.eachWeekendOfYear=u;var t=r(d[0]),n=r(d[1]),f=r(d[2]);function u(u,c){const o=(0,f.startOfYear)(u,c),l=(0,n.endOfYear)(u,c);return(0,t.eachWeekendOfInterval)({start:o,end:l},c)}e.default=u}),3496,[3493,3497,3498]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.endOfYear=u;var t=r(d[0]);function u(u,n){const l=(0,t.toDate)(u,n?.in),o=l.getFullYear();return l.setFullYear(o+1,0,0),l.setHours(23,59,59,999),l}e.default=u}),3497,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.startOfYear=u;var t=r(d[0]);function u(u,l){const n=(0,t.toDate)(u,l?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}e.default=u}),3498,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.eachYearOfInterval=o;var t=r(d[0]),n=r(d[1]);function o(o,l){const{start:s,end:u}=(0,t.normalizeInterval)(l?.in,o);let c=+s>+u;const f=c?+s:+u,v=c?u:s;v.setHours(0,0,0,0),v.setMonth(0,1);let _=l?.step??1;if(!_)return[];_<0&&(_=-_,c=!c);const h=[];for(;+v<=f;)h.push((0,n.constructFrom)(s,v)),v.setFullYear(v.getFullYear()+_);return c?h.reverse():h}e.default=o}),3499,[3486,3423]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.endOfDecade=o;var t=r(d[0]);function o(o,u){const l=(0,t.toDate)(o,u?.in),n=l.getFullYear(),f=9+10*Math.floor(n/10);return l.setFullYear(f,11,31),l.setHours(23,59,59,999),l}e.default=o}),3500,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.endOfHour=n;var t=r(d[0]);function n(n,u){const o=(0,t.toDate)(n,u?.in);return o.setMinutes(59,59,999),o}e.default=n}),3501,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.endOfISOWeek=t;var n=r(d[0]);function t(t,f){return(0,n.endOfWeek)(t,{...f,weekStartsOn:1})}e.default=t}),3502,[3503]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.endOfWeek=o;var t=r(d[0]),n=r(d[1]);function o(o,s){const l=(0,t.getDefaultOptions)(),u=s?.weekStartsOn??s?.locale?.options?.weekStartsOn??l.weekStartsOn??l.locale?.options?.weekStartsOn??0,f=(0,n.toDate)(o,s?.in),O=f.getDay(),c=6+(O<u?-7:0)-(O-u);return f.setDate(f.getDate()+c),f.setHours(23,59,59,999),f}e.default=o}),3503,[3437,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.endOfISOWeekYear=o;var t=r(d[0]),n=r(d[1]),s=r(d[2]);function o(o,l){const u=(0,n.getISOWeekYear)(o,l),c=(0,t.constructFrom)(l?.in||o,0);c.setFullYear(u+1,0,4),c.setHours(0,0,0,0);const f=(0,s.startOfISOWeek)(c,l);return f.setMilliseconds(f.getMilliseconds()-1),f}e.default=o}),3504,[3423,3434,3435]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.endOfMinute=n;var t=r(d[0]);function n(n,o){const u=(0,t.toDate)(n,o?.in);return u.setSeconds(59,999),u}e.default=n}),3505,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.endOfQuarter=n;var t=r(d[0]);function n(n,o){const u=(0,t.toDate)(n,o?.in),f=u.getMonth(),s=f-f%3+3;return u.setMonth(s,0),u.setHours(23,59,59,999),u}e.default=n}),3506,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.endOfSecond=t;var n=r(d[0]);function t(t,o){const u=(0,n.toDate)(t,o?.in);return u.setMilliseconds(999),u}e.default=t}),3507,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.endOfToday=t;var n=r(d[0]);function t(t){return(0,n.endOfDay)(Date.now(),t)}e.default=t}),3508,[3479]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.endOfTomorrow=n;var t=r(d[0]);function n(n){const o=(0,t.constructNow)(n?.in),u=o.getFullYear(),c=o.getMonth(),l=o.getDate(),s=(0,t.constructNow)(n?.in);return s.setFullYear(u,c,l+1),s.setHours(23,59,59,999),n?.in?n.in(s):s}e.default=n}),3509,[3457]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.endOfYesterday=o;var t=r(d[0]),n=r(d[1]);function o(o){const u=(0,n.constructNow)(o?.in),c=(0,t.constructFrom)(o?.in,0);return c.setFullYear(u.getFullYear(),u.getMonth(),u.getDate()-1),c.setHours(23,59,59,999),c}e.default=o}),3510,[3423,3457]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.format=e.formatDate=v,Object.defineProperty(e,"formatters",{enumerable:!0,get:function(){return n.formatters}}),Object.defineProperty(e,"longFormatters",{enumerable:!0,get:function(){return s.longFormatters}});var t=r(d[0]),o=r(d[1]),n=r(d[2]),s=r(d[3]),l=r(d[4]),c=r(d[5]),u=r(d[6]);const f=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,k=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,p=/^'([^]*?)'?$/,w=/''/g,O=/[a-zA-Z]/;function v(p,w,v){const h=(0,o.getDefaultOptions)(),T=v?.locale??h.locale??t.defaultLocale,P=v?.firstWeekContainsDate??v?.locale?.options?.firstWeekContainsDate??h.firstWeekContainsDate??h.locale?.options?.firstWeekContainsDate??1,W=v?.weekStartsOn??v?.locale?.options?.weekStartsOn??h.weekStartsOn??h.locale?.options?.weekStartsOn??0,b=(0,u.toDate)(p,v?.in);if(!(0,c.isValid)(b))throw new RangeError("Invalid time value");let y=w.match(k).map((t=>{const o=t[0];if("p"===o||"P"===o){return(0,s.longFormatters[o])(t,T.formatLong)}return t})).join("").match(f).map((t=>{if("''"===t)return{isToken:!1,value:"'"};const o=t[0];if("'"===o)return{isToken:!1,value:D(t)};if(n.formatters[o])return{isToken:!0,value:t};if(o.match(O))throw new RangeError("Format string contains an unescaped latin alphabet character `"+o+"`");return{isToken:!1,value:t}}));T.localize.preprocessor&&(y=T.localize.preprocessor(b,y));const S={firstWeekContainsDate:P,weekStartsOn:W,locale:T};return y.map((t=>{if(!t.isToken)return t.value;const o=t.value;(!v?.useAdditionalWeekYearTokens&&(0,l.isProtectedWeekYearToken)(o)||!v?.useAdditionalDayOfYearTokens&&(0,l.isProtectedDayOfYearToken)(o))&&(0,l.warnOrThrowProtectedError)(o,w,String(p));return(0,n.formatters[o[0]])(b,o,T.localize,S)})).join("")}function D(t){const o=t.match(p);return o?o[1].replace(w,"'"):t}e.default=v}),3511,[3512,3437,3523,3531,3532,3461,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"defaultLocale",{enumerable:!0,get:function(){return n.enUS}});var n=r(d[0])}),3512,[3513]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.enUS=e.default=void 0;var t=r(d[0]),o=r(d[1]),n=r(d[2]),f=r(d[3]),c=r(d[4]);const l=e.enUS={code:"en-US",formatDistance:t.formatDistance,formatLong:o.formatLong,formatRelative:n.formatRelative,localize:f.localize,match:c.match,options:{weekStartsOn:0,firstWeekContainsDate:1}};e.default=l}),3513,[3514,3515,3517,3518,3520]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.formatDistance=void 0;const o={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};e.formatDistance=(t,n,s)=>{let u;const h=o[t];return u="string"==typeof h?h:1===n?h.one:h.other.replace("{{count}}",n.toString()),s?.addSuffix?s.comparison&&s.comparison>0?"in "+u:u+" ago":u}}),3514,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.formatLong=void 0;var t=r(d[0]);e.formatLong={date:(0,t.buildFormatLongFn)({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:(0,t.buildFormatLongFn)({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:(0,t.buildFormatLongFn)({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})}}),3515,[3516]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.buildFormatLongFn=function(t){return(n={})=>{const o=n.width?String(n.width):t.defaultWidth;return t.formats[o]||t.formats[t.defaultWidth]}}}),3516,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.formatRelative=void 0;const t={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};e.formatRelative=(o,y,l,p)=>t[o]}),3517,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.localize=void 0;var n=r(d[0]);e.localize={ordinalNumber:(n,t)=>{const o=Number(n),u=o%100;if(u>20||u<10)switch(u%10){case 1:return o+"st";case 2:return o+"nd";case 3:return o+"rd"}return o+"th"},era:(0,n.buildLocalizeFn)({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:(0,n.buildLocalizeFn)({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:n=>n-1}),month:(0,n.buildLocalizeFn)({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:(0,n.buildLocalizeFn)({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:(0,n.buildLocalizeFn)({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})}}),3518,[3519]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.buildLocalizeFn=function(t){return(n,l)=>{let u;if("formatting"===(l?.context?String(l.context):"standalone")&&t.formattingValues){const n=t.defaultFormattingWidth||t.defaultWidth,o=l?.width?String(l.width):n;u=t.formattingValues[o]||t.formattingValues[n]}else{const n=t.defaultWidth,o=l?.width?String(l.width):t.defaultWidth;u=t.values[o]||t.values[n]}return u[t.argumentCallback?t.argumentCallback(n):n]}}}),3519,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.match=void 0;var t=r(d[0]),n=r(d[1]);e.match={ordinalNumber:(0,n.buildMatchPatternFn)({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:t=>parseInt(t,10)}),era:(0,t.buildMatchFn)({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:(0,t.buildMatchFn)({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:t=>t+1}),month:(0,t.buildMatchFn)({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:(0,t.buildMatchFn)({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:(0,t.buildMatchFn)({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})}}),3520,[3521,3522]);
__d((function(g,r,i,a,m,e,d){function t(t,l){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&l(t[n]))return n}function l(t,l){for(let n=0;n<t.length;n++)if(l(t[n]))return n}Object.defineProperty(e,"__esModule",{value:!0}),e.buildMatchFn=function(n){return(c,u={})=>{const s=u.width,o=s&&n.matchPatterns[s]||n.matchPatterns[n.defaultMatchWidth],f=c.match(o);if(!f)return null;const h=f[0],b=s&&n.parsePatterns[s]||n.parsePatterns[n.defaultParseWidth],P=Array.isArray(b)?l(b,(t=>t.test(h))):t(b,(t=>t.test(h)));let p;p=n.valueCallback?n.valueCallback(P):P,p=u.valueCallback?u.valueCallback(p):p;return{value:p,rest:c.slice(h.length)}}}}),3521,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.buildMatchPatternFn=function(l){return(t,n={})=>{const u=t.match(l.matchPattern);if(!u)return null;const c=u[0],b=t.match(l.parsePattern);if(!b)return null;let o=l.valueCallback?l.valueCallback(b[0]):b[0];o=n.valueCallback?n.valueCallback(o):o;return{value:o,rest:t.slice(c.length)}}}}),3522,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.formatters=void 0;var t=r(d[0]),n=r(d[1]),o=r(d[2]),c=r(d[3]),u=r(d[4]),s=r(d[5]),h=r(d[6]);const f="midnight",w="noon",l="morning",b="afternoon",x="evening",y="night";e.formatters={G:function(t,n,o){const c=t.getFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return o.era(c,{width:"abbreviated"});case"GGGGG":return o.era(c,{width:"narrow"});default:return o.era(c,{width:"wide"})}},y:function(t,n,o){if("yo"===n){const n=t.getFullYear(),c=n>0?n:1-n;return o.ordinalNumber(c,{unit:"year"})}return h.lightFormatters.y(t,n)},Y:function(t,n,o,c){const h=(0,u.getWeekYear)(t,c),f=h>0?h:1-h;if("YY"===n){const t=f%100;return(0,s.addLeadingZeros)(t,2)}return"Yo"===n?o.ordinalNumber(f,{unit:"year"}):(0,s.addLeadingZeros)(f,n.length)},R:function(t,n){const c=(0,o.getISOWeekYear)(t);return(0,s.addLeadingZeros)(c,n.length)},u:function(t,n){const o=t.getFullYear();return(0,s.addLeadingZeros)(o,n.length)},Q:function(t,n,o){const c=Math.ceil((t.getMonth()+1)/3);switch(n){case"Q":return String(c);case"QQ":return(0,s.addLeadingZeros)(c,2);case"Qo":return o.ordinalNumber(c,{unit:"quarter"});case"QQQ":return o.quarter(c,{width:"abbreviated",context:"formatting"});case"QQQQQ":return o.quarter(c,{width:"narrow",context:"formatting"});default:return o.quarter(c,{width:"wide",context:"formatting"})}},q:function(t,n,o){const c=Math.ceil((t.getMonth()+1)/3);switch(n){case"q":return String(c);case"qq":return(0,s.addLeadingZeros)(c,2);case"qo":return o.ordinalNumber(c,{unit:"quarter"});case"qqq":return o.quarter(c,{width:"abbreviated",context:"standalone"});case"qqqqq":return o.quarter(c,{width:"narrow",context:"standalone"});default:return o.quarter(c,{width:"wide",context:"standalone"})}},M:function(t,n,o){const c=t.getMonth();switch(n){case"M":case"MM":return h.lightFormatters.M(t,n);case"Mo":return o.ordinalNumber(c+1,{unit:"month"});case"MMM":return o.month(c,{width:"abbreviated",context:"formatting"});case"MMMMM":return o.month(c,{width:"narrow",context:"formatting"});default:return o.month(c,{width:"wide",context:"formatting"})}},L:function(t,n,o){const c=t.getMonth();switch(n){case"L":return String(c+1);case"LL":return(0,s.addLeadingZeros)(c+1,2);case"Lo":return o.ordinalNumber(c+1,{unit:"month"});case"LLL":return o.month(c,{width:"abbreviated",context:"standalone"});case"LLLLL":return o.month(c,{width:"narrow",context:"standalone"});default:return o.month(c,{width:"wide",context:"standalone"})}},w:function(t,n,o,u){const h=(0,c.getWeek)(t,u);return"wo"===n?o.ordinalNumber(h,{unit:"week"}):(0,s.addLeadingZeros)(h,n.length)},I:function(t,o,c){const u=(0,n.getISOWeek)(t);return"Io"===o?c.ordinalNumber(u,{unit:"week"}):(0,s.addLeadingZeros)(u,o.length)},d:function(t,n,o){return"do"===n?o.ordinalNumber(t.getDate(),{unit:"date"}):h.lightFormatters.d(t,n)},D:function(n,o,c){const u=(0,t.getDayOfYear)(n);return"Do"===o?c.ordinalNumber(u,{unit:"dayOfYear"}):(0,s.addLeadingZeros)(u,o.length)},E:function(t,n,o){const c=t.getDay();switch(n){case"E":case"EE":case"EEE":return o.day(c,{width:"abbreviated",context:"formatting"});case"EEEEE":return o.day(c,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(c,{width:"short",context:"formatting"});default:return o.day(c,{width:"wide",context:"formatting"})}},e:function(t,n,o,c){const u=t.getDay(),h=(u-c.weekStartsOn+8)%7||7;switch(n){case"e":return String(h);case"ee":return(0,s.addLeadingZeros)(h,2);case"eo":return o.ordinalNumber(h,{unit:"day"});case"eee":return o.day(u,{width:"abbreviated",context:"formatting"});case"eeeee":return o.day(u,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(u,{width:"short",context:"formatting"});default:return o.day(u,{width:"wide",context:"formatting"})}},c:function(t,n,o,c){const u=t.getDay(),h=(u-c.weekStartsOn+8)%7||7;switch(n){case"c":return String(h);case"cc":return(0,s.addLeadingZeros)(h,n.length);case"co":return o.ordinalNumber(h,{unit:"day"});case"ccc":return o.day(u,{width:"abbreviated",context:"standalone"});case"ccccc":return o.day(u,{width:"narrow",context:"standalone"});case"cccccc":return o.day(u,{width:"short",context:"standalone"});default:return o.day(u,{width:"wide",context:"standalone"})}},i:function(t,n,o){const c=t.getDay(),u=0===c?7:c;switch(n){case"i":return String(u);case"ii":return(0,s.addLeadingZeros)(u,n.length);case"io":return o.ordinalNumber(u,{unit:"day"});case"iii":return o.day(c,{width:"abbreviated",context:"formatting"});case"iiiii":return o.day(c,{width:"narrow",context:"formatting"});case"iiiiii":return o.day(c,{width:"short",context:"formatting"});default:return o.day(c,{width:"wide",context:"formatting"})}},a:function(t,n,o){const c=t.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return o.dayPeriod(c,{width:"abbreviated",context:"formatting"});case"aaa":return o.dayPeriod(c,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return o.dayPeriod(c,{width:"narrow",context:"formatting"});default:return o.dayPeriod(c,{width:"wide",context:"formatting"})}},b:function(t,n,o){const c=t.getHours();let u;switch(u=12===c?w:0===c?f:c/12>=1?"pm":"am",n){case"b":case"bb":return o.dayPeriod(u,{width:"abbreviated",context:"formatting"});case"bbb":return o.dayPeriod(u,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return o.dayPeriod(u,{width:"narrow",context:"formatting"});default:return o.dayPeriod(u,{width:"wide",context:"formatting"})}},B:function(t,n,o){const c=t.getHours();let u;switch(u=c>=17?x:c>=12?b:c>=4?l:y,n){case"B":case"BB":case"BBB":return o.dayPeriod(u,{width:"abbreviated",context:"formatting"});case"BBBBB":return o.dayPeriod(u,{width:"narrow",context:"formatting"});default:return o.dayPeriod(u,{width:"wide",context:"formatting"})}},h:function(t,n,o){if("ho"===n){let n=t.getHours()%12;return 0===n&&(n=12),o.ordinalNumber(n,{unit:"hour"})}return h.lightFormatters.h(t,n)},H:function(t,n,o){return"Ho"===n?o.ordinalNumber(t.getHours(),{unit:"hour"}):h.lightFormatters.H(t,n)},K:function(t,n,o){const c=t.getHours()%12;return"Ko"===n?o.ordinalNumber(c,{unit:"hour"}):(0,s.addLeadingZeros)(c,n.length)},k:function(t,n,o){let c=t.getHours();return 0===c&&(c=24),"ko"===n?o.ordinalNumber(c,{unit:"hour"}):(0,s.addLeadingZeros)(c,n.length)},m:function(t,n,o){return"mo"===n?o.ordinalNumber(t.getMinutes(),{unit:"minute"}):h.lightFormatters.m(t,n)},s:function(t,n,o){return"so"===n?o.ordinalNumber(t.getSeconds(),{unit:"second"}):h.lightFormatters.s(t,n)},S:function(t,n){return h.lightFormatters.S(t,n)},X:function(t,n,o){const c=t.getTimezoneOffset();if(0===c)return"Z";switch(n){case"X":return M(c);case"XXXX":case"XX":return Z(c);default:return Z(c,":")}},x:function(t,n,o){const c=t.getTimezoneOffset();switch(n){case"x":return M(c);case"xxxx":case"xx":return Z(c);default:return Z(c,":")}},O:function(t,n,o){const c=t.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+L(c,":");default:return"GMT"+Z(c,":")}},z:function(t,n,o){const c=t.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+L(c,":");default:return"GMT"+Z(c,":")}},t:function(t,n,o){const c=Math.trunc(+t/1e3);return(0,s.addLeadingZeros)(c,n.length)},T:function(t,n,o){return(0,s.addLeadingZeros)(+t,n.length)}};function L(t,n=""){const o=t>0?"-":"+",c=Math.abs(t),u=Math.trunc(c/60),h=c%60;return 0===h?o+String(u):o+String(u)+n+(0,s.addLeadingZeros)(h,2)}function M(t,n){if(t%60==0){return(t>0?"-":"+")+(0,s.addLeadingZeros)(Math.abs(t)/60,2)}return Z(t,n)}function Z(t,n=""){const o=t>0?"-":"+",c=Math.abs(t);return o+(0,s.addLeadingZeros)(Math.trunc(c/60),2)+n+(0,s.addLeadingZeros)(c%60,2)}}),3523,[3524,3525,3434,3526,3528,3529,3530]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.getDayOfYear=o;var t=r(d[0]),n=r(d[1]),f=r(d[2]);function o(o,u){const c=(0,f.toDate)(o,u?.in);return(0,t.differenceInCalendarDays)(c,(0,n.startOfYear)(c))+1}e.default=o}),3524,[3439,3498,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.getISOWeek=f;var t=r(d[0]),n=r(d[1]),o=r(d[2]),u=r(d[3]);function f(f,l){const s=(0,u.toDate)(f,l?.in),O=+(0,n.startOfISOWeek)(s)-+(0,o.startOfISOWeekYear)(s);return Math.round(O/t.millisecondsInWeek)+1}e.default=f}),3525,[3424,3435,3443,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.getWeek=f;var t=r(d[0]),n=r(d[1]),o=r(d[2]),u=r(d[3]);function f(f,l){const s=(0,u.toDate)(f,l?.in),c=+(0,n.startOfWeek)(s,l)-+(0,o.startOfWeekYear)(s,l);return Math.round(c/t.millisecondsInWeek)+1}e.default=f}),3526,[3424,3436,3527,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.startOfWeekYear=f;var t=r(d[0]),n=r(d[1]),o=r(d[2]),s=r(d[3]);function f(f,l){const u=(0,t.getDefaultOptions)(),c=l?.firstWeekContainsDate??l?.locale?.options?.firstWeekContainsDate??u.firstWeekContainsDate??u.locale?.options?.firstWeekContainsDate??1,k=(0,o.getWeekYear)(f,l),W=(0,n.constructFrom)(l?.in||f,0);W.setFullYear(k,0,c),W.setHours(0,0,0,0);return(0,s.startOfWeek)(W,l)}e.default=f}),3527,[3437,3423,3528,3436]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.getWeekYear=l;var t=r(d[0]),o=r(d[1]),n=r(d[2]),s=r(d[3]);function l(l,u){const c=(0,s.toDate)(l,u?.in),f=c.getFullYear(),k=(0,t.getDefaultOptions)(),W=u?.firstWeekContainsDate??u?.locale?.options?.firstWeekContainsDate??k.firstWeekContainsDate??k.locale?.options?.firstWeekContainsDate??1,D=(0,o.constructFrom)(u?.in||l,0);D.setFullYear(f+1,0,W),D.setHours(0,0,0,0);const F=(0,n.startOfWeek)(D,u),p=(0,o.constructFrom)(u?.in||l,0);p.setFullYear(f,0,W),p.setHours(0,0,0,0);const C=(0,n.startOfWeek)(p,u);return+c>=+F?f+1:+c>=+C?f:f-1}e.default=l}),3528,[3437,3423,3436,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.addLeadingZeros=function(t,n){const o=t<0?"-":"",u=Math.abs(t).toString().padStart(n,"0");return o+u}}),3529,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.lightFormatters=void 0;var t=r(d[0]);e.lightFormatters={y(n,s){const o=n.getFullYear(),l=o>0?o:1-o;return(0,t.addLeadingZeros)("yy"===s?l%100:l,s.length)},M(n,s){const o=n.getMonth();return"M"===s?String(o+1):(0,t.addLeadingZeros)(o+1,2)},d:(n,s)=>(0,t.addLeadingZeros)(n.getDate(),s.length),a(t,n){const s=t.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];default:return"am"===s?"a.m.":"p.m."}},h:(n,s)=>(0,t.addLeadingZeros)(n.getHours()%12||12,s.length),H:(n,s)=>(0,t.addLeadingZeros)(n.getHours(),s.length),m:(n,s)=>(0,t.addLeadingZeros)(n.getMinutes(),s.length),s:(n,s)=>(0,t.addLeadingZeros)(n.getSeconds(),s.length),S(n,s){const o=s.length,l=n.getMilliseconds(),u=Math.trunc(l*Math.pow(10,o-3));return(0,t.addLeadingZeros)(u,s.length)}}}),3530,[3529]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.longFormatters=void 0;const t=(t,u)=>{switch(t){case"P":return u.date({width:"short"});case"PP":return u.date({width:"medium"});case"PPP":return u.date({width:"long"});default:return u.date({width:"full"})}},u=(t,u)=>{switch(t){case"p":return u.time({width:"short"});case"pp":return u.time({width:"medium"});case"ppp":return u.time({width:"long"});default:return u.time({width:"full"})}};e.longFormatters={p:u,P:(n,s)=>{const c=n.match(/(P+)(p+)?/)||[],h=c[1],l=c[2];if(!l)return t(n,s);let o;switch(h){case"P":o=s.dateTime({width:"short"});break;case"PP":o=s.dateTime({width:"medium"});break;case"PPP":o=s.dateTime({width:"long"});break;default:o=s.dateTime({width:"full"})}return o.replace("{{date}}",t(h,s)).replace("{{time}}",u(l,s))}}}),3531,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.isProtectedDayOfYearToken=function(n){return t.test(n)},e.isProtectedWeekYearToken=function(t){return n.test(t)},e.warnOrThrowProtectedError=function(t,n,c){const f=s(t,n,c);if(console.warn(f),o.includes(t))throw new RangeError(f)};const t=/^D+$/,n=/^Y+$/,o=["D","DD","YY","YYYY"];function s(t,n,o){const s="Y"===t[0]?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${n}\`) for formatting ${s} to the input \`${o}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}}),3532,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.formatDistance=D;var t=r(d[0]),n=r(d[1]),s=r(d[2]),o=r(d[3]),f=r(d[4]),c=r(d[5]),u=r(d[6]),l=r(d[7]);function D(D,M,h){const I=(0,n.getDefaultOptions)(),X=h?.locale??I.locale??t.defaultLocale,x=(0,f.compareAsc)(D,M);if(isNaN(x))throw new RangeError("Invalid time value");const S=Object.assign({},h,{addSuffix:h?.addSuffix,comparison:x}),[T,b]=(0,o.normalizeDates)(h?.in,...x>0?[M,D]:[D,M]),v=(0,l.differenceInSeconds)(b,T),y=((0,s.getTimezoneOffsetInMilliseconds)(b)-(0,s.getTimezoneOffsetInMilliseconds)(T))/1e3,O=Math.round((v-y)/60);let p;if(O<2)return h?.includeSeconds?v<5?X.formatDistance("lessThanXSeconds",5,S):v<10?X.formatDistance("lessThanXSeconds",10,S):v<20?X.formatDistance("lessThanXSeconds",20,S):v<40?X.formatDistance("halfAMinute",0,S):v<60?X.formatDistance("lessThanXMinutes",1,S):X.formatDistance("xMinutes",1,S):0===O?X.formatDistance("lessThanXMinutes",1,S):X.formatDistance("xMinutes",O,S);if(O<45)return X.formatDistance("xMinutes",O,S);if(O<90)return X.formatDistance("aboutXHours",1,S);if(O<c.minutesInDay){const t=Math.round(O/60);return X.formatDistance("aboutXHours",t,S)}if(O<2520)return X.formatDistance("xDays",1,S);if(O<c.minutesInMonth){const t=Math.round(O/c.minutesInDay);return X.formatDistance("xDays",t,S)}if(O<2*c.minutesInMonth)return p=Math.round(O/c.minutesInMonth),X.formatDistance("aboutXMonths",p,S);if(p=(0,u.differenceInMonths)(b,T),p<12){const t=Math.round(O/c.minutesInMonth);return X.formatDistance("xMonths",t,S)}{const t=p%12,n=Math.trunc(p/12);return t<3?X.formatDistance("aboutXYears",n,S):t<9?X.formatDistance("overXYears",n,S):X.formatDistance("almostXYears",n+1,S)}}e.default=D}),3533,[3512,3437,3440,3441,3455,3424,3477,3482]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.formatDistanceStrict=l;var n=r(d[0]),t=r(d[1]),o=r(d[2]),s=r(d[3]),u=r(d[4]),c=r(d[5]),f=r(d[6]);function l(l,D,h){const I=(0,t.getDefaultOptions)(),M=h?.locale??I.locale??n.defaultLocale,x=(0,c.compareAsc)(l,D);if(isNaN(x))throw new RangeError("Invalid time value");const y=Object.assign({},h,{addSuffix:h?.addSuffix,comparison:x}),[v,O]=(0,u.normalizeDates)(h?.in,...x>0?[D,l]:[l,D]),p=(0,o.getRoundingMethod)(h?.roundingMethod??"round"),S=O.getTime()-v.getTime(),T=S/f.millisecondsInMinute,Y=(S-((0,s.getTimezoneOffsetInMilliseconds)(O)-(0,s.getTimezoneOffsetInMilliseconds)(v)))/f.millisecondsInMinute,_=h?.unit;let z;if(z=_||(T<1?"second":T<60?"minute":T<f.minutesInDay?"hour":Y<f.minutesInMonth?"day":Y<f.minutesInYear?"month":"year"),"second"===z){const n=p(S/1e3);return M.formatDistance("xSeconds",n,y)}if("minute"===z){const n=p(T);return M.formatDistance("xMinutes",n,y)}if("hour"===z){const n=p(T/60);return M.formatDistance("xHours",n,y)}if("day"===z){const n=p(Y/f.minutesInDay);return M.formatDistance("xDays",n,y)}if("month"===z){const n=p(Y/f.minutesInMonth);return 12===n&&"month"!==_?M.formatDistance("xYears",1,y):M.formatDistance("xMonths",n,y)}{const n=p(Y/f.minutesInYear);return M.formatDistance("xYears",n,y)}}e.default=l}),3534,[3512,3437,3472,3440,3441,3455,3424]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.formatDistanceToNow=n;var t=r(d[0]),o=r(d[1]);function n(n,u){return(0,o.formatDistance)(n,(0,t.constructNow)(n),u)}e.default=n}),3535,[3457,3533]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.formatDistanceToNowStrict=c;var t=r(d[0]),o=r(d[1]);function c(c,n){return(0,o.formatDistanceStrict)(c,(0,t.constructNow)(c),n)}e.default=c}),3536,[3457,3534]);
__d((function(g,r,i,a,_m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.formatDuration=c;var t=r(d[0]),o=r(d[1]);const n=["years","months","weeks","days","hours","minutes","seconds"];function c(c,s){const u=(0,o.getDefaultOptions)(),l=s?.locale??u.locale??t.defaultLocale,f=s?.format??n,m=s?.zero??!1,p=s?.delimiter??" ";if(!l.formatDistance)return"";return f.reduce(((t,o)=>{const n=`x${o.replace(/(^.)/,(t=>t.toUpperCase()))}`,s=c[o];return void 0!==s&&(m||c[o])?t.concat(l.formatDistance(n,s)):t}),[]).join(p)}e.default=c}),3537,[3512,3437]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.formatISO=o;var t=r(d[0]),n=r(d[1]);function o(o,s){const f=(0,n.toDate)(o,s?.in);if(isNaN(+f))throw new RangeError("Invalid time value");const c=s?.format??"extended",u=s?.representation??"complete";let $="",l="";const Z="extended"===c?"-":"",L="extended"===c?":":"";if("time"!==u){const n=(0,t.addLeadingZeros)(f.getDate(),2),o=(0,t.addLeadingZeros)(f.getMonth()+1,2);$=`${(0,t.addLeadingZeros)(f.getFullYear(),4)}${Z}${o}${Z}${n}`}if("date"!==u){const n=f.getTimezoneOffset();if(0!==n){const o=Math.abs(n);l=`${n<0?"+":"-"}${(0,t.addLeadingZeros)(Math.trunc(o/60),2)}:${(0,t.addLeadingZeros)(o%60,2)}`}else l="Z";$=`${$}${""===$?"":"T"}${[(0,t.addLeadingZeros)(f.getHours(),2),(0,t.addLeadingZeros)(f.getMinutes(),2),(0,t.addLeadingZeros)(f.getSeconds(),2)].join(L)}${l}`}return $}e.default=o}),3538,[3529,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.formatISO9075=s;var t=r(d[0]),n=r(d[1]),o=r(d[2]);function s(s,$){const l=(0,o.toDate)(s,$?.in);if(!(0,n.isValid)(l))throw new RangeError("Invalid time value");const u=$?.format??"extended",f=$?.representation??"complete";let c="";const L="extended"===u?"-":"",Z="extended"===u?":":"";if("time"!==f){const n=(0,t.addLeadingZeros)(l.getDate(),2),o=(0,t.addLeadingZeros)(l.getMonth()+1,2);c=`${(0,t.addLeadingZeros)(l.getFullYear(),4)}${L}${o}${L}${n}`}if("date"!==f){c=`${c}${""===c?"":" "}${(0,t.addLeadingZeros)(l.getHours(),2)}${Z}${(0,t.addLeadingZeros)(l.getMinutes(),2)}${Z}${(0,t.addLeadingZeros)(l.getSeconds(),2)}`}return c}e.default=s}),3539,[3529,3461,3425]);
__d((function(g,r,i,a,m,e,d){function t(t){const{years:n=0,months:o=0,days:u=0,hours:s=0,minutes:f=0,seconds:$=0}=t;return`P${n}Y${o}M${u}DT${s}H${f}M${$}S`}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.formatISODuration=t;e.default=t}),3540,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.formatRFC3339=s;var t=r(d[0]),n=r(d[1]),o=r(d[2]);function s(s,l){const c=(0,o.toDate)(s,l?.in);if(!(0,n.isValid)(c))throw new RangeError("Invalid time value");const u=l?.fractionDigits??0,f=(0,t.addLeadingZeros)(c.getDate(),2),$=(0,t.addLeadingZeros)(c.getMonth()+1,2),Z=c.getFullYear(),L=(0,t.addLeadingZeros)(c.getHours(),2),M=(0,t.addLeadingZeros)(c.getMinutes(),2),h=(0,t.addLeadingZeros)(c.getSeconds(),2);let v="";if(u>0){const n=c.getMilliseconds(),o=Math.trunc(n*Math.pow(10,u-3));v="."+(0,t.addLeadingZeros)(o,u)}let _="";const w=c.getTimezoneOffset();if(0!==w){const n=Math.abs(w);_=`${w<0?"+":"-"}${(0,t.addLeadingZeros)(Math.trunc(n/60),2)}:${(0,t.addLeadingZeros)(n%60,2)}`}else _="Z";return`${Z}-${$}-${f}T${L}:${M}:${h}${v}${_}`}e.default=s}),3541,[3529,3461,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.formatRFC7231=l;var t=r(d[0]),n=r(d[1]),o=r(d[2]);const u=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function l(l){const T=(0,o.toDate)(l);if(!(0,n.isValid)(T))throw new RangeError("Invalid time value");return`${u[T.getUTCDay()]}, ${(0,t.addLeadingZeros)(T.getUTCDate(),2)} ${s[T.getUTCMonth()]} ${T.getUTCFullYear()} ${(0,t.addLeadingZeros)(T.getUTCHours(),2)}:${(0,t.addLeadingZeros)(T.getUTCMinutes(),2)}:${(0,t.addLeadingZeros)(T.getUTCSeconds(),2)} GMT`}e.default=l}),3542,[3529,3461,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.formatRelative=c;var t=r(d[0]),o=r(d[1]),l=r(d[2]),n=r(d[3]),s=r(d[4]);function c(c,f,u){const[w,k]=(0,l.normalizeDates)(u?.in,c,f),O=(0,o.getDefaultOptions)(),v=u?.locale??O.locale??t.defaultLocale,S=u?.weekStartsOn??u?.locale?.options?.weekStartsOn??O.weekStartsOn??O.locale?.options?.weekStartsOn??0,y=(0,n.differenceInCalendarDays)(w,k);if(isNaN(y))throw new RangeError("Invalid time value");let p;p=y<-6?"other":y<-1?"lastWeek":y<0?"yesterday":y<1?"today":y<2?"tomorrow":y<7?"nextWeek":"other";const _=v.formatRelative(p,w,k,{locale:v,weekStartsOn:S});return(0,s.format)(w,_,{locale:v,weekStartsOn:S})}e.default=c}),3543,[3512,3437,3441,3439,3511]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.fromUnixTime=n;var t=r(d[0]);function n(n,o){return(0,t.toDate)(1e3*n,o?.in)}e.default=n}),3544,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.getDate=n;var t=r(d[0]);function n(n,u){return(0,t.toDate)(n,u?.in).getDate()}e.default=n}),3545,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.getDay=n;var t=r(d[0]);function n(n,u){return(0,t.toDate)(n,u?.in).getDay()}e.default=n}),3546,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.getDaysInMonth=o;var t=r(d[0]),n=r(d[1]);function o(o,u){const l=(0,n.toDate)(o,u?.in),s=l.getFullYear(),c=l.getMonth(),f=(0,t.constructFrom)(l,0);return f.setFullYear(s,c+1,0),f.setHours(0,0,0,0),f.getDate()}e.default=o}),3547,[3423,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.getDaysInYear=u;var t=r(d[0]),n=r(d[1]);function u(u,o){const f=(0,n.toDate)(u,o?.in);return Number.isNaN(+f)?NaN:(0,t.isLeapYear)(f)?366:365}e.default=u}),3548,[3549,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isLeapYear=n;var t=r(d[0]);function n(n,u){const o=(0,t.toDate)(n,u?.in).getFullYear();return o%400==0||o%4==0&&o%100!=0}e.default=n}),3549,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.getDecade=o;var t=r(d[0]);function o(o,n){const u=(0,t.toDate)(o,n?.in).getFullYear();return 10*Math.floor(u/10)}e.default=o}),3550,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.getDefaultOptions=n;var t=r(d[0]);function n(){return Object.assign({},(0,t.getDefaultOptions)())}e.default=n}),3551,[3437]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.getHours=u;var t=r(d[0]);function u(u,o){return(0,t.toDate)(u,o?.in).getHours()}e.default=u}),3552,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.getISODay=n;var t=r(d[0]);function n(n,o){const u=(0,t.toDate)(n,o?.in).getDay();return 0===u?7:u}e.default=n}),3553,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.getISOWeeksInYear=s;var t=r(d[0]),n=r(d[1]),o=r(d[2]);function s(s,u){const f=(0,o.startOfISOWeekYear)(s,u),l=+(0,o.startOfISOWeekYear)((0,t.addWeeks)(f,60))-+f;return Math.round(l/n.millisecondsInWeek)}e.default=s}),3554,[3447,3424,3443]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.getMilliseconds=l;var t=r(d[0]);function l(l){return(0,t.toDate)(l).getMilliseconds()}e.default=l}),3555,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.getMinutes=n;var t=r(d[0]);function n(n,u){return(0,t.toDate)(n,u?.in).getMinutes()}e.default=n}),3556,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.getMonth=n;var t=r(d[0]);function n(n,o){return(0,t.toDate)(n,o?.in).getMonth()}e.default=n}),3557,[3425]);
__d((function(g,r,i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.getOverlappingDaysInIntervals=s;var t=r(d[0]),n=r(d[1]),o=r(d[2]);function s(s,a){const[l,f]=[+(0,o.toDate)(s.start),+(0,o.toDate)(s.end)].sort(((t,n)=>t-n)),[c,u]=[+(0,o.toDate)(a.start),+(0,o.toDate)(a.end)].sort(((t,n)=>t-n));if(!(l<u&&c<f))return 0;const D=c<l?l:c,v=D-(0,t.getTimezoneOffsetInMilliseconds)(D),I=u>f?f:u,M=I-(0,t.getTimezoneOffsetInMilliseconds)(I);return Math.ceil((M-v)/n.millisecondsInDay)}e.default=s}),3558,[3440,3424,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.getSeconds=n;var t=r(d[0]);function n(n){return(0,t.toDate)(n).getSeconds()}e.default=n}),3559,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.getTime=u;var t=r(d[0]);function u(u){return+(0,t.toDate)(u)}e.default=u}),3560,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.getUnixTime=n;var t=r(d[0]);function n(n){return Math.trunc(+(0,t.toDate)(n)/1e3)}e.default=n}),3561,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.getWeekOfMonth=f;var t=r(d[0]),n=r(d[1]),o=r(d[2]),s=r(d[3]),l=r(d[4]);function f(f,u){const c=(0,t.getDefaultOptions)(),O=u?.weekStartsOn??u?.locale?.options?.weekStartsOn??c.weekStartsOn??c.locale?.options?.weekStartsOn??0,k=(0,n.getDate)((0,l.toDate)(f,u?.in));if(isNaN(k))return NaN;let p=O-(0,o.getDay)((0,s.startOfMonth)(f,u));p<=0&&(p+=7);const w=k-p;return Math.ceil(w/7)+1}e.default=f}),3562,[3437,3545,3546,3495,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.getWeeksInMonth=u;var t=r(d[0]),n=r(d[1]),o=r(d[2]),f=r(d[3]);function u(u,l){const s=(0,f.toDate)(u,l?.in);return(0,t.differenceInCalendarWeeks)((0,n.lastDayOfMonth)(s,l),(0,o.startOfMonth)(s,l),l)+1}e.default=u}),3563,[3468,3564,3495,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.lastDayOfMonth=n;var t=r(d[0]);function n(n,o){const u=(0,t.toDate)(n,o?.in),l=u.getMonth();return u.setFullYear(u.getFullYear(),l+1,0),u.setHours(0,0,0,0),(0,t.toDate)(u,o?.in)}e.default=n}),3564,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.getYear=u;var t=r(d[0]);function u(u,n){return(0,t.toDate)(u,n?.in).getFullYear()}e.default=u}),3565,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.hoursToMilliseconds=o;var n=r(d[0]);function o(o){return Math.trunc(o*n.millisecondsInHour)}e.default=o}),3566,[3424]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.hoursToMinutes=t;var u=r(d[0]);function t(t){return Math.trunc(t*u.minutesInHour)}e.default=t}),3567,[3424]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.hoursToSeconds=o;var n=r(d[0]);function o(o){return Math.trunc(o*n.secondsInHour)}e.default=o}),3568,[3424]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.interval=n;var t=r(d[0]);function n(n,o,s){const[f,l]=(0,t.normalizeDates)(s?.in,n,o);if(isNaN(+f))throw new TypeError("Start date is invalid");if(isNaN(+l))throw new TypeError("End date is invalid");if(s?.assertPositive&&+f>+l)throw new TypeError("End date must be after start date");return{start:f,end:l}}e.default=n}),3569,[3441]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.intervalToDuration=h;var n=r(d[0]),s=r(d[1]),t=r(d[2]),o=r(d[3]),c=r(d[4]),f=r(d[5]),u=r(d[6]),y=r(d[7]);function h(h,l){const{start:I,end:v}=(0,n.normalizeInterval)(l?.in,h),_={},M=(0,y.differenceInYears)(v,I);M&&(_.years=M);const D=(0,s.add)(I,{years:_.years}),b=(0,f.differenceInMonths)(v,D);b&&(_.months=b);const j=(0,s.add)(D,{months:_.months}),p=(0,t.differenceInDays)(v,j);p&&(_.days=p);const z=(0,s.add)(j,{days:_.days}),H=(0,o.differenceInHours)(v,z);H&&(_.hours=H);const O=(0,s.add)(z,{hours:_.hours}),P=(0,c.differenceInMinutes)(v,O);P&&(_.minutes=P);const S=(0,s.add)(O,{minutes:_.minutes}),T=(0,u.differenceInSeconds)(v,S);return T&&(_.seconds=T),_}e.default=h}),3570,[3486,3421,3470,3471,3476,3477,3482,3484]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.intlFormat=o;var t=r(d[0]);function o(o,l,n){let u;var f;return void 0===(f=l)||"locale"in f?n=l:u=l,new Intl.DateTimeFormat(n?.locale,u).format((0,t.toDate)(o))}e.default=o}),3571,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.intlFormatDistance=M;var n=r(d[0]),s=r(d[1]),t=r(d[2]),f=r(d[3]),c=r(d[4]),o=r(d[5]),u=r(d[6]),I=r(d[7]),l=r(d[8]),h=r(d[9]);function M(M,C,b){let y,D=0;const[k,v]=(0,n.normalizeDates)(b?.in,M,C);if(b?.unit)y=b?.unit,"second"===y?D=(0,h.differenceInSeconds)(k,v):"minute"===y?D=(0,l.differenceInMinutes)(k,v):"hour"===y?D=(0,I.differenceInHours)(k,v):"day"===y?D=(0,t.differenceInCalendarDays)(k,v):"week"===y?D=(0,o.differenceInCalendarWeeks)(k,v):"month"===y?D=(0,f.differenceInCalendarMonths)(k,v):"quarter"===y?D=(0,c.differenceInCalendarQuarters)(k,v):"year"===y&&(D=(0,u.differenceInCalendarYears)(k,v));else{const n=(0,h.differenceInSeconds)(k,v);Math.abs(n)<s.secondsInMinute?(D=(0,h.differenceInSeconds)(k,v),y="second"):Math.abs(n)<s.secondsInHour?(D=(0,l.differenceInMinutes)(k,v),y="minute"):Math.abs(n)<s.secondsInDay&&Math.abs((0,t.differenceInCalendarDays)(k,v))<1?(D=(0,I.differenceInHours)(k,v),y="hour"):Math.abs(n)<s.secondsInWeek&&(D=(0,t.differenceInCalendarDays)(k,v))&&Math.abs(D)<7?y="day":Math.abs(n)<s.secondsInMonth?(D=(0,o.differenceInCalendarWeeks)(k,v),y="week"):Math.abs(n)<s.secondsInQuarter?(D=(0,f.differenceInCalendarMonths)(k,v),y="month"):Math.abs(n)<s.secondsInYear&&(0,c.differenceInCalendarQuarters)(k,v)<4?(D=(0,c.differenceInCalendarQuarters)(k,v),y="quarter"):(D=(0,u.differenceInCalendarYears)(k,v),y="year")}return new Intl.RelativeTimeFormat(b?.locale,{numeric:"auto",...b}).format(D,y)}e.default=M}),3572,[3441,3424,3439,3465,3466,3468,3469,3471,3476,3482]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isAfter=o;var t=r(d[0]);function o(o,u){return+(0,t.toDate)(o)>+(0,t.toDate)(u)}e.default=o}),3573,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isBefore=o;var t=r(d[0]);function o(o,u){return+(0,t.toDate)(o)<+(0,t.toDate)(u)}e.default=o}),3574,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isEqual=u;var t=r(d[0]);function u(u,o){return+(0,t.toDate)(u)==+(0,t.toDate)(o)}e.default=u}),3575,[3425]);
__d((function(g,r,i,a,m,e,d){function t(t,n,u){const o=new Date(t,n,u);return o.getFullYear()===t&&o.getMonth()===n&&o.getDate()===u}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isExists=t;e.default=t}),3576,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isFirstDayOfMonth=n;var t=r(d[0]);function n(n,o){return 1===(0,t.toDate)(n,o?.in).getDate()}e.default=n}),3577,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isFriday=n;var t=r(d[0]);function n(n,u){return 5===(0,t.toDate)(n,u?.in).getDay()}e.default=n}),3578,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isFuture=u;var t=r(d[0]);function u(u){return+(0,t.toDate)(u)>Date.now()}e.default=u}),3579,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isMatch=u;var t=r(d[0]),n=r(d[1]);function u(u,f,l){return(0,t.isValid)((0,n.parse)(u,f,new Date,l))}e.default=u}),3580,[3461,3581]);
__d((function(g,r,i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,Object.defineProperty(e,"longFormatters",{enumerable:!0,get:function(){return n.longFormatters}}),e.parse=y,Object.defineProperty(e,"parsers",{enumerable:!0,get:function(){return f.parsers}});var t=r(d[0]),n=r(d[1]),o=r(d[2]),a=r(d[3]),s=r(d[4]),c=r(d[5]),l=r(d[6]),f=r(d[7]);const u=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,p=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,k=/^'([^]*?)'?$/,h=/''/g,w=/\S/,O=/[a-zA-Z]/;function y(y,T,D,b){const P=()=>(0,a.constructFrom)(b?.in||D,NaN),A=(0,s.getDefaultOptions)(),S=b?.locale??A.locale??t.defaultLocale,W=b?.firstWeekContainsDate??b?.locale?.options?.firstWeekContainsDate??A.firstWeekContainsDate??A.locale?.options?.firstWeekContainsDate??1,F=b?.weekStartsOn??b?.locale?.options?.weekStartsOn??A.weekStartsOn??A.locale?.options?.weekStartsOn??0;if(!T)return y?P():(0,c.toDate)(D,b?.in);const $={firstWeekContainsDate:W,weekStartsOn:F,locale:S},j=[new l.DateTimezoneSetter(b?.in,D)],C=T.match(p).map((t=>{const o=t[0];if(o in n.longFormatters){return(0,n.longFormatters[o])(t,S.formatLong)}return t})).join("").match(u),E=[];for(let t of C){!b?.useAdditionalWeekYearTokens&&(0,o.isProtectedWeekYearToken)(t)&&(0,o.warnOrThrowProtectedError)(t,T,y),!b?.useAdditionalDayOfYearTokens&&(0,o.isProtectedDayOfYearToken)(t)&&(0,o.warnOrThrowProtectedError)(t,T,y);const n=t[0],a=f.parsers[n];if(a){const{incompatibleTokens:o}=a;if(Array.isArray(o)){const a=E.find((t=>o.includes(t.token)||t.token===n));if(a)throw new RangeError(`The format string mustn't contain \`${a.fullToken}\` and \`${t}\` at the same time`)}else if("*"===a.incompatibleTokens&&E.length>0)throw new RangeError(`The format string mustn't contain \`${t}\` and any other token at the same time`);E.push({token:n,fullToken:t});const s=a.run(y,t,S.match,$);if(!s)return P();j.push(s.setter),y=s.rest}else{if(n.match(O))throw new RangeError("Format string contains an unescaped latin alphabet character `"+n+"`");if("''"===t?t="'":"'"===n&&(t=t.match(k)[1].replace(h,"'")),0!==y.indexOf(t))return P();y=y.slice(t.length)}}if(y.length>0&&w.test(y))return P();const Y=j.map((t=>t.priority)).sort(((t,n)=>n-t)).filter(((t,n,o)=>o.indexOf(t)===n)).map((t=>j.filter((n=>n.priority===t)).sort(((t,n)=>n.subPriority-t.subPriority)))).map((t=>t[0]));let v=(0,c.toDate)(D,b?.in);if(isNaN(+v))return P();const N={};for(const t of Y){if(!t.validate(v,$))return P();const n=t.set(v,N,$);Array.isArray(n)?(v=n[0],Object.assign(N,n[1])):v=n}return v}e.default=y}),3581,[3512,3531,3532,3423,3551,3425,3582,3584]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueSetter=e.Setter=e.DateTimezoneSetter=void 0;var t=r(d[0]),s=r(d[1]);class u{subPriority=0;validate(t,s){return!0}}e.Setter=u;e.ValueSetter=class extends u{constructor(t,s,u,o,l){super(),this.value=t,this.validateValue=s,this.setValue=u,this.priority=o,l&&(this.subPriority=l)}validate(t,s){return this.validateValue(t,this.value,s)}set(t,s,u){return this.setValue(t,s,this.value,u)}};e.DateTimezoneSetter=class extends u{priority=10;subPriority=-1;constructor(s,u){super(),this.context=s||(s=>(0,t.constructFrom)(u,s))}set(u,o){return o.timestampIsSet?u:(0,t.constructFrom)(u,(0,s.transpose)(u,this.context))}}}),3582,[3423,3583]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.transpose=o;var t=r(d[0]);function o(o,u){const s=n(u)?new u(0):(0,t.constructFrom)(u,0);return s.setFullYear(o.getFullYear(),o.getMonth(),o.getDate()),s.setHours(o.getHours(),o.getMinutes(),o.getSeconds(),o.getMilliseconds()),s}function n(t){return"function"==typeof t&&t.prototype?.constructor===t}e.default=o}),3583,[3423]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.parsers=void 0;var n=r(d[0]),s=r(d[1]),P=r(d[2]),w=r(d[3]),o=r(d[4]),t=r(d[5]),c=r(d[6]),S=r(d[7]),l=r(d[8]),u=r(d[9]),M=r(d[10]),y=r(d[11]),D=r(d[12]),O=r(d[13]),T=r(d[14]),I=r(d[15]),Y=r(d[16]),h=r(d[17]),k=r(d[18]),p=r(d[19]),A=r(d[20]),H=r(d[21]),L=r(d[22]),W=r(d[23]),f=r(d[24]),_=r(d[25]),v=r(d[26]),E=r(d[27]),Q=r(d[28]),b=r(d[29]),x=r(d[30]);e.parsers={G:new n.EraParser,y:new s.YearParser,Y:new P.LocalWeekYearParser,R:new w.ISOWeekYearParser,u:new o.ExtendedYearParser,Q:new t.QuarterParser,q:new c.StandAloneQuarterParser,M:new S.MonthParser,L:new l.StandAloneMonthParser,w:new u.LocalWeekParser,I:new M.ISOWeekParser,d:new y.DateParser,D:new D.DayOfYearParser,E:new O.DayParser,e:new T.LocalDayParser,c:new I.StandAloneLocalDayParser,i:new Y.ISODayParser,a:new h.AMPMParser,b:new k.AMPMMidnightParser,B:new p.DayPeriodParser,h:new A.Hour1to12Parser,H:new H.Hour0to23Parser,K:new L.Hour0To11Parser,k:new W.Hour1To24Parser,m:new f.MinuteParser,s:new _.SecondParser,S:new v.FractionOfSecondParser,X:new E.ISOTimezoneWithZParser,x:new Q.ISOTimezoneParser,t:new b.TimestampSecondsParser,T:new x.TimestampMillisecondsParser}}),3584,[3585,3587,3590,3591,3592,3593,3594,3595,3596,3597,3599,3601,3602,3603,3605,3606,3607,3609,3610,3611,3612,3613,3614,3615,3616,3617,3618,3619,3620,3621,3622]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.EraParser=void 0;var t=r(d[0]);class s extends t.Parser{priority=140;parse(t,s,n){switch(s){case"G":case"GG":case"GGG":return n.era(t,{width:"abbreviated"})||n.era(t,{width:"narrow"});case"GGGGG":return n.era(t,{width:"narrow"});default:return n.era(t,{width:"wide"})||n.era(t,{width:"abbreviated"})||n.era(t,{width:"narrow"})}}set(t,s,n){return s.era=n,t.setFullYear(n,0,1),t.setHours(0,0,0,0),t}incompatibleTokens=["R","u","t","T"]}e.EraParser=s}),3585,[3586]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.Parser=void 0;var t=r(d[0]);e.Parser=class{run(s,u,l,n){const o=this.parse(s,u,l,n);return o?{setter:new t.ValueSetter(o.value,this.validate,this.set,this.priority,this.subPriority),rest:o.rest}:null}validate(t,s,u){return!0}}}),3586,[3582]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.YearParser=void 0;var t=r(d[0]),s=r(d[1]);class n extends t.Parser{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(t,n,u){const o=t=>({year:t,isTwoDigitYear:"yy"===n});switch(n){case"y":return(0,s.mapValue)((0,s.parseNDigits)(4,t),o);case"yo":return(0,s.mapValue)(u.ordinalNumber(t,{unit:"year"}),o);default:return(0,s.mapValue)((0,s.parseNDigits)(n.length,t),o)}}validate(t,s){return s.isTwoDigitYear||s.year>0}set(t,n,u){const o=t.getFullYear();if(u.isTwoDigitYear){const n=(0,s.normalizeTwoDigitYear)(u.year,o);return t.setFullYear(n,0,1),t.setHours(0,0,0,0),t}const l="era"in n&&1!==n.era?1-u.year:u.year;return t.setFullYear(l,0,1),t.setHours(0,0,0,0),t}}e.YearParser=n}),3587,[3586,3588]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.dayPeriodEnumToHours=function(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}},e.isLeapYearIndex=function(n){return n%400==0||n%4==0&&n%100!=0},e.mapValue=function(n,t){if(!n)return n;return{value:t(n.value),rest:n.rest}},e.normalizeTwoDigitYear=function(n,t){const s=t>0,u=s?t:1-t;let c;if(u<=50)c=n||100;else{const t=u+50;c=n+100*Math.trunc(t/100)-(n>=t%100?100:0)}return s?c:1-c},e.parseAnyDigitsSigned=function(n){return s(t.numericPatterns.anyDigitsSigned,n)},e.parseNDigits=function(n,u){switch(n){case 1:return s(t.numericPatterns.singleDigit,u);case 2:return s(t.numericPatterns.twoDigits,u);case 3:return s(t.numericPatterns.threeDigits,u);case 4:return s(t.numericPatterns.fourDigits,u);default:return s(new RegExp("^\\d{1,"+n+"}"),u)}},e.parseNDigitsSigned=function(n,u){switch(n){case 1:return s(t.numericPatterns.singleDigitSigned,u);case 2:return s(t.numericPatterns.twoDigitsSigned,u);case 3:return s(t.numericPatterns.threeDigitsSigned,u);case 4:return s(t.numericPatterns.fourDigitsSigned,u);default:return s(new RegExp("^-?\\d{1,"+n+"}"),u)}},e.parseNumericPattern=s,e.parseTimezonePattern=function(t,s){const u=s.match(t);if(!u)return null;if("Z"===u[0])return{value:0,rest:s.slice(1)};const c="+"===u[1]?1:-1,o=u[2]?parseInt(u[2],10):0,l=u[3]?parseInt(u[3],10):0,f=u[5]?parseInt(u[5],10):0;return{value:c*(o*n.millisecondsInHour+l*n.millisecondsInMinute+f*n.millisecondsInSecond),rest:s.slice(u[0].length)}};var n=r(d[0]),t=r(d[1]);function s(n,t){const s=t.match(n);return s?{value:parseInt(s[0],10),rest:t.slice(s[0].length)}:null}}),3588,[3424,3589]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.timezonePatterns=e.numericPatterns=void 0;e.numericPatterns={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},e.timezonePatterns={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/}}),3589,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.LocalWeekYearParser=void 0;var t=r(d[0]),s=r(d[1]),n=r(d[2]),o=r(d[3]);class u extends n.Parser{priority=130;parse(t,s,n){const u=t=>({year:t,isTwoDigitYear:"YY"===s});switch(s){case"Y":return(0,o.mapValue)((0,o.parseNDigits)(4,t),u);case"Yo":return(0,o.mapValue)(n.ordinalNumber(t,{unit:"year"}),u);default:return(0,o.mapValue)((0,o.parseNDigits)(s.length,t),u)}}validate(t,s){return s.isTwoDigitYear||s.year>0}set(n,u,l,c){const Y=(0,t.getWeekYear)(n,c);if(l.isTwoDigitYear){const t=(0,o.normalizeTwoDigitYear)(l.year,Y);return n.setFullYear(t,0,c.firstWeekContainsDate),n.setHours(0,0,0,0),(0,s.startOfWeek)(n,c)}const p="era"in u&&1!==u.era?1-l.year:l.year;return n.setFullYear(p,0,c.firstWeekContainsDate),n.setHours(0,0,0,0),(0,s.startOfWeek)(n,c)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}e.LocalWeekYearParser=u}),3590,[3528,3436,3586,3588]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ISOWeekYearParser=void 0;var s=r(d[0]),t=r(d[1]),n=r(d[2]),o=r(d[3]);class u extends n.Parser{priority=130;parse(s,t){return"R"===t?(0,o.parseNDigitsSigned)(4,s):(0,o.parseNDigitsSigned)(t.length,s)}set(n,o,u){const c=(0,t.constructFrom)(n,0);return c.setFullYear(u,0,4),c.setHours(0,0,0,0),(0,s.startOfISOWeek)(c)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}e.ISOWeekYearParser=u}),3591,[3435,3423,3586,3588]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ExtendedYearParser=void 0;var s=r(d[0]),t=r(d[1]);class n extends s.Parser{priority=130;parse(s,n){return"u"===n?(0,t.parseNDigitsSigned)(4,s):(0,t.parseNDigitsSigned)(n.length,s)}set(s,t,n){return s.setFullYear(n,0,1),s.setHours(0,0,0,0),s}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}e.ExtendedYearParser=n}),3592,[3586,3588]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.QuarterParser=void 0;var t=r(d[0]),n=r(d[1]);class o extends t.Parser{priority=120;parse(t,o,u){switch(o){case"Q":case"QQ":return(0,n.parseNDigits)(o.length,t);case"Qo":return u.ordinalNumber(t,{unit:"quarter"});case"QQQ":return u.quarter(t,{width:"abbreviated",context:"formatting"})||u.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return u.quarter(t,{width:"narrow",context:"formatting"});default:return u.quarter(t,{width:"wide",context:"formatting"})||u.quarter(t,{width:"abbreviated",context:"formatting"})||u.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=1&&n<=4}set(t,n,o){return t.setMonth(3*(o-1),1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}e.QuarterParser=o}),3593,[3586,3588]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.StandAloneQuarterParser=void 0;var t=r(d[0]),n=r(d[1]);class o extends t.Parser{priority=120;parse(t,o,s){switch(o){case"q":case"qq":return(0,n.parseNDigits)(o.length,t);case"qo":return s.ordinalNumber(t,{unit:"quarter"});case"qqq":return s.quarter(t,{width:"abbreviated",context:"standalone"})||s.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(t,{width:"narrow",context:"standalone"});default:return s.quarter(t,{width:"wide",context:"standalone"})||s.quarter(t,{width:"abbreviated",context:"standalone"})||s.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=1&&n<=4}set(t,n,o){return t.setMonth(3*(o-1),1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}e.StandAloneQuarterParser=o}),3594,[3586,3588]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.MonthParser=void 0;var t=r(d[0]),n=r(d[1]),o=r(d[2]);class s extends n.Parser{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(n,s,c){const u=t=>t-1;switch(s){case"M":return(0,o.mapValue)((0,o.parseNumericPattern)(t.numericPatterns.month,n),u);case"MM":return(0,o.mapValue)((0,o.parseNDigits)(2,n),u);case"Mo":return(0,o.mapValue)(c.ordinalNumber(n,{unit:"month"}),u);case"MMM":return c.month(n,{width:"abbreviated",context:"formatting"})||c.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return c.month(n,{width:"narrow",context:"formatting"});default:return c.month(n,{width:"wide",context:"formatting"})||c.month(n,{width:"abbreviated",context:"formatting"})||c.month(n,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=11}set(t,n,o){return t.setMonth(o,1),t.setHours(0,0,0,0),t}}e.MonthParser=s}),3595,[3589,3586,3588]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.StandAloneMonthParser=void 0;var t=r(d[0]),n=r(d[1]),o=r(d[2]);class s extends n.Parser{priority=110;parse(n,s,c){const u=t=>t-1;switch(s){case"L":return(0,o.mapValue)((0,o.parseNumericPattern)(t.numericPatterns.month,n),u);case"LL":return(0,o.mapValue)((0,o.parseNDigits)(2,n),u);case"Lo":return(0,o.mapValue)(c.ordinalNumber(n,{unit:"month"}),u);case"LLL":return c.month(n,{width:"abbreviated",context:"standalone"})||c.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return c.month(n,{width:"narrow",context:"standalone"});default:return c.month(n,{width:"wide",context:"standalone"})||c.month(n,{width:"abbreviated",context:"standalone"})||c.month(n,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=0&&n<=11}set(t,n,o){return t.setMonth(o,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}e.StandAloneMonthParser=s}),3596,[3589,3586,3588]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.LocalWeekParser=void 0;var t=r(d[0]),s=r(d[1]),n=r(d[2]),u=r(d[3]),c=r(d[4]);class o extends u.Parser{priority=100;parse(t,s,u){switch(s){case"w":return(0,c.parseNumericPattern)(n.numericPatterns.week,t);case"wo":return u.ordinalNumber(t,{unit:"week"});default:return(0,c.parseNDigits)(s.length,t)}}validate(t,s){return s>=1&&s<=53}set(n,u,c,o){return(0,s.startOfWeek)((0,t.setWeek)(n,c,o),o)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}e.LocalWeekParser=o}),3597,[3598,3436,3589,3586,3588]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.setWeek=o;var t=r(d[0]),n=r(d[1]);function o(o,u,f){const c=(0,n.toDate)(o,f?.in),l=(0,t.getWeek)(c,f)-u;return c.setDate(c.getDate()-7*l),(0,n.toDate)(c,f?.in)}e.default=o}),3598,[3526,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ISOWeekParser=void 0;var t=r(d[0]),s=r(d[1]),n=r(d[2]),u=r(d[3]),c=r(d[4]);class o extends u.Parser{priority=100;parse(t,s,u){switch(s){case"I":return(0,c.parseNumericPattern)(n.numericPatterns.week,t);case"Io":return u.ordinalNumber(t,{unit:"week"});default:return(0,c.parseNDigits)(s.length,t)}}validate(t,s){return s>=1&&s<=53}set(n,u,c){return(0,s.startOfISOWeek)((0,t.setISOWeek)(n,c))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}e.ISOWeekParser=o}),3599,[3600,3435,3589,3586,3588]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.setISOWeek=o;var t=r(d[0]),n=r(d[1]);function o(o,u,f){const c=(0,n.toDate)(o,f?.in),l=(0,t.getISOWeek)(c,f)-u;return c.setDate(c.getDate()-7*l),c}e.default=o}),3600,[3525,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.DateParser=void 0;var t=r(d[0]),s=r(d[1]),n=r(d[2]);const u=[31,28,31,30,31,30,31,31,30,31,30,31],o=[31,29,31,30,31,30,31,31,30,31,30,31];class c extends s.Parser{priority=90;subPriority=1;parse(s,u,o){switch(u){case"d":return(0,n.parseNumericPattern)(t.numericPatterns.date,s);case"do":return o.ordinalNumber(s,{unit:"date"});default:return(0,n.parseNDigits)(u.length,s)}}validate(t,s){const c=t.getFullYear(),l=(0,n.isLeapYearIndex)(c),p=t.getMonth();return l?s>=1&&s<=o[p]:s>=1&&s<=u[p]}set(t,s,n){return t.setDate(n),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}e.DateParser=c}),3601,[3589,3586,3588]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.DayOfYearParser=void 0;var t=r(d[0]),s=r(d[1]),n=r(d[2]);class u extends s.Parser{priority=90;subpriority=1;parse(s,u,o){switch(u){case"D":case"DD":return(0,n.parseNumericPattern)(t.numericPatterns.dayOfYear,s);case"Do":return o.ordinalNumber(s,{unit:"date"});default:return(0,n.parseNDigits)(u.length,s)}}validate(t,s){const u=t.getFullYear();return(0,n.isLeapYearIndex)(u)?s>=1&&s<=366:s>=1&&s<=365}set(t,s,n){return t.setMonth(0,n),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}e.DayOfYearParser=u}),3602,[3589,3586,3588]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.DayParser=void 0;var t=r(d[0]),n=r(d[1]);class o extends n.Parser{priority=90;parse(t,n,o){switch(n){case"E":case"EE":case"EEE":return o.day(t,{width:"abbreviated",context:"formatting"})||o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return o.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"});default:return o.day(t,{width:"wide",context:"formatting"})||o.day(t,{width:"abbreviated",context:"formatting"})||o.day(t,{width:"short",context:"formatting"})||o.day(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=6}set(n,o,s,c){return(n=(0,t.setDay)(n,s,c)).setHours(0,0,0,0),n}incompatibleTokens=["D","i","e","c","t","T"]}e.DayParser=o}),3603,[3604,3586]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.setDay=s;var t=r(d[0]),n=r(d[1]),o=r(d[2]);function s(s,l,u){const c=(0,t.getDefaultOptions)(),f=u?.weekStartsOn??u?.locale?.options?.weekStartsOn??c.weekStartsOn??c.locale?.options?.weekStartsOn??0,O=(0,o.toDate)(s,u?.in),D=O.getDay(),k=7-f,p=l<0||l>6?l-(D+k)%7:((l%7+7)%7+k)%7-(D+k)%7;return(0,n.addDays)(O,p,u)}e.default=s}),3604,[3437,3422,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.LocalDayParser=void 0;var t=r(d[0]),n=r(d[1]),o=r(d[2]);class s extends n.Parser{priority=90;parse(t,n,s,c){const u=t=>{const n=7*Math.floor((t-1)/7);return(t+c.weekStartsOn+6)%7+n};switch(n){case"e":case"ee":return(0,o.mapValue)((0,o.parseNDigits)(n.length,t),u);case"eo":return(0,o.mapValue)(s.ordinalNumber(t,{unit:"day"}),u);case"eee":return s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});case"eeeee":return s.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"});default:return s.day(t,{width:"wide",context:"formatting"})||s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"})}}validate(t,n){return n>=0&&n<=6}set(n,o,s,c){return(n=(0,t.setDay)(n,s,c)).setHours(0,0,0,0),n}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}e.LocalDayParser=s}),3605,[3604,3586,3588]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.StandAloneLocalDayParser=void 0;var t=r(d[0]),n=r(d[1]),o=r(d[2]);class c extends n.Parser{priority=90;parse(t,n,c,s){const l=t=>{const n=7*Math.floor((t-1)/7);return(t+s.weekStartsOn+6)%7+n};switch(n){case"c":case"cc":return(0,o.mapValue)((0,o.parseNDigits)(n.length,t),l);case"co":return(0,o.mapValue)(c.ordinalNumber(t,{unit:"day"}),l);case"ccc":return c.day(t,{width:"abbreviated",context:"standalone"})||c.day(t,{width:"short",context:"standalone"})||c.day(t,{width:"narrow",context:"standalone"});case"ccccc":return c.day(t,{width:"narrow",context:"standalone"});case"cccccc":return c.day(t,{width:"short",context:"standalone"})||c.day(t,{width:"narrow",context:"standalone"});default:return c.day(t,{width:"wide",context:"standalone"})||c.day(t,{width:"abbreviated",context:"standalone"})||c.day(t,{width:"short",context:"standalone"})||c.day(t,{width:"narrow",context:"standalone"})}}validate(t,n){return n>=0&&n<=6}set(n,o,c,s){return(n=(0,t.setDay)(n,c,s)).setHours(0,0,0,0),n}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}e.StandAloneLocalDayParser=c}),3606,[3604,3586,3588]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ISODayParser=void 0;var t=r(d[0]),n=r(d[1]),o=r(d[2]);class s extends n.Parser{priority=90;parse(t,n,s){const c=t=>0===t?7:t;switch(n){case"i":case"ii":return(0,o.parseNDigits)(n.length,t);case"io":return s.ordinalNumber(t,{unit:"day"});case"iii":return(0,o.mapValue)(s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"}),c);case"iiiii":return(0,o.mapValue)(s.day(t,{width:"narrow",context:"formatting"}),c);case"iiiiii":return(0,o.mapValue)(s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"}),c);default:return(0,o.mapValue)(s.day(t,{width:"wide",context:"formatting"})||s.day(t,{width:"abbreviated",context:"formatting"})||s.day(t,{width:"short",context:"formatting"})||s.day(t,{width:"narrow",context:"formatting"}),c)}}validate(t,n){return n>=1&&n<=7}set(n,o,s){return(n=(0,t.setISODay)(n,s)).setHours(0,0,0,0),n}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}e.ISODayParser=s}),3607,[3608,3586,3588]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.setISODay=u;var t=r(d[0]),n=r(d[1]),o=r(d[2]);function u(u,f,c){const l=(0,o.toDate)(u,c?.in),s=f-(0,n.getISODay)(l,c);return(0,t.addDays)(l,s,c)}e.default=u}),3608,[3422,3553,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.AMPMParser=void 0;var t=r(d[0]),o=r(d[1]);class n extends t.Parser{priority=80;parse(t,o,n){switch(o){case"a":case"aa":case"aaa":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(t,{width:"narrow",context:"formatting"});default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,s){return t.setHours((0,o.dayPeriodEnumToHours)(s),0,0,0),t}incompatibleTokens=["b","B","H","k","t","T"]}e.AMPMParser=n}),3609,[3586,3588]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.AMPMMidnightParser=void 0;var t=r(d[0]),o=r(d[1]);class n extends t.Parser{priority=80;parse(t,o,n){switch(o){case"b":case"bb":case"bbb":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(t,{width:"narrow",context:"formatting"});default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,s){return t.setHours((0,o.dayPeriodEnumToHours)(s),0,0,0),t}incompatibleTokens=["a","B","H","k","t","T"]}e.AMPMMidnightParser=n}),3610,[3586,3588]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.DayPeriodParser=void 0;var t=r(d[0]),o=r(d[1]);class n extends t.Parser{priority=80;parse(t,o,n){switch(o){case"B":case"BB":case"BBB":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(t,{width:"narrow",context:"formatting"});default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,n,s){return t.setHours((0,o.dayPeriodEnumToHours)(s),0,0,0),t}incompatibleTokens=["a","b","t","T"]}e.DayPeriodParser=n}),3611,[3586,3588]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.Hour1to12Parser=void 0;var t=r(d[0]),s=r(d[1]),u=r(d[2]);class o extends s.Parser{priority=70;parse(s,o,n){switch(o){case"h":return(0,u.parseNumericPattern)(t.numericPatterns.hour12h,s);case"ho":return n.ordinalNumber(s,{unit:"hour"});default:return(0,u.parseNDigits)(o.length,s)}}validate(t,s){return s>=1&&s<=12}set(t,s,u){const o=t.getHours()>=12;return o&&u<12?t.setHours(u+12,0,0,0):o||12!==u?t.setHours(u,0,0,0):t.setHours(0,0,0,0),t}incompatibleTokens=["H","K","k","t","T"]}e.Hour1to12Parser=o}),3612,[3589,3586,3588]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.Hour0to23Parser=void 0;var t=r(d[0]),s=r(d[1]),u=r(d[2]);class n extends s.Parser{priority=70;parse(s,n,o){switch(n){case"H":return(0,u.parseNumericPattern)(t.numericPatterns.hour23h,s);case"Ho":return o.ordinalNumber(s,{unit:"hour"});default:return(0,u.parseNDigits)(n.length,s)}}validate(t,s){return s>=0&&s<=23}set(t,s,u){return t.setHours(u,0,0,0),t}incompatibleTokens=["a","b","h","K","k","t","T"]}e.Hour0to23Parser=n}),3613,[3589,3586,3588]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.Hour0To11Parser=void 0;var t=r(d[0]),s=r(d[1]),u=r(d[2]);class o extends s.Parser{priority=70;parse(s,o,n){switch(o){case"K":return(0,u.parseNumericPattern)(t.numericPatterns.hour11h,s);case"Ko":return n.ordinalNumber(s,{unit:"hour"});default:return(0,u.parseNDigits)(o.length,s)}}validate(t,s){return s>=0&&s<=11}set(t,s,u){return t.getHours()>=12&&u<12?t.setHours(u+12,0,0,0):t.setHours(u,0,0,0),t}incompatibleTokens=["h","H","k","t","T"]}e.Hour0To11Parser=o}),3614,[3589,3586,3588]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.Hour1To24Parser=void 0;var t=r(d[0]),s=r(d[1]),n=r(d[2]);class u extends s.Parser{priority=70;parse(s,u,o){switch(u){case"k":return(0,n.parseNumericPattern)(t.numericPatterns.hour24h,s);case"ko":return o.ordinalNumber(s,{unit:"hour"});default:return(0,n.parseNDigits)(u.length,s)}}validate(t,s){return s>=1&&s<=24}set(t,s,n){const u=n<=24?n%24:n;return t.setHours(u,0,0,0),t}incompatibleTokens=["a","b","h","H","K","t","T"]}e.Hour1To24Parser=u}),3615,[3589,3586,3588]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.MinuteParser=void 0;var t=r(d[0]),n=r(d[1]),s=r(d[2]);class u extends n.Parser{priority=60;parse(n,u,c){switch(u){case"m":return(0,s.parseNumericPattern)(t.numericPatterns.minute,n);case"mo":return c.ordinalNumber(n,{unit:"minute"});default:return(0,s.parseNDigits)(u.length,n)}}validate(t,n){return n>=0&&n<=59}set(t,n,s){return t.setMinutes(s,0,0),t}incompatibleTokens=["t","T"]}e.MinuteParser=u}),3616,[3589,3586,3588]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.SecondParser=void 0;var t=r(d[0]),s=r(d[1]),n=r(d[2]);class c extends s.Parser{priority=50;parse(s,c,o){switch(c){case"s":return(0,n.parseNumericPattern)(t.numericPatterns.second,s);case"so":return o.ordinalNumber(s,{unit:"second"});default:return(0,n.parseNDigits)(c.length,s)}}validate(t,s){return s>=0&&s<=59}set(t,s,n){return t.setSeconds(n,0),t}incompatibleTokens=["t","T"]}e.SecondParser=c}),3617,[3589,3586,3588]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.FractionOfSecondParser=void 0;var t=r(d[0]),n=r(d[1]);class s extends t.Parser{priority=30;parse(t,s){return(0,n.mapValue)((0,n.parseNDigits)(s.length,t),(t=>Math.trunc(t*Math.pow(10,3-s.length))))}set(t,n,s){return t.setMilliseconds(s),t}incompatibleTokens=["t","T"]}e.FractionOfSecondParser=s}),3618,[3586,3588]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ISOTimezoneWithZParser=void 0;var t=r(d[0]),n=r(d[1]),s=r(d[2]),o=r(d[3]),c=r(d[4]);class P extends o.Parser{priority=10;parse(t,n){switch(n){case"X":return(0,c.parseTimezonePattern)(s.timezonePatterns.basicOptionalMinutes,t);case"XX":return(0,c.parseTimezonePattern)(s.timezonePatterns.basic,t);case"XXXX":return(0,c.parseTimezonePattern)(s.timezonePatterns.basicOptionalSeconds,t);case"XXXXX":return(0,c.parseTimezonePattern)(s.timezonePatterns.extendedOptionalSeconds,t);default:return(0,c.parseTimezonePattern)(s.timezonePatterns.extended,t)}}set(s,o,c){return o.timestampIsSet?s:(0,t.constructFrom)(s,s.getTime()-(0,n.getTimezoneOffsetInMilliseconds)(s)-c)}incompatibleTokens=["t","T","x"]}e.ISOTimezoneWithZParser=P}),3619,[3423,3440,3589,3586,3588]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ISOTimezoneParser=void 0;var t=r(d[0]),n=r(d[1]),s=r(d[2]),o=r(d[3]),c=r(d[4]);class x extends o.Parser{priority=10;parse(t,n){switch(n){case"x":return(0,c.parseTimezonePattern)(s.timezonePatterns.basicOptionalMinutes,t);case"xx":return(0,c.parseTimezonePattern)(s.timezonePatterns.basic,t);case"xxxx":return(0,c.parseTimezonePattern)(s.timezonePatterns.basicOptionalSeconds,t);case"xxxxx":return(0,c.parseTimezonePattern)(s.timezonePatterns.extendedOptionalSeconds,t);default:return(0,c.parseTimezonePattern)(s.timezonePatterns.extended,t)}}set(s,o,c){return o.timestampIsSet?s:(0,t.constructFrom)(s,s.getTime()-(0,n.getTimezoneOffsetInMilliseconds)(s)-c)}incompatibleTokens=["t","T","X"]}e.ISOTimezoneParser=x}),3620,[3423,3440,3589,3586,3588]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.TimestampSecondsParser=void 0;var s=r(d[0]),t=r(d[1]),n=r(d[2]);class o extends t.Parser{priority=40;parse(s){return(0,n.parseAnyDigitsSigned)(s)}set(t,n,o){return[(0,s.constructFrom)(t,1e3*o),{timestampIsSet:!0}]}incompatibleTokens="*"}e.TimestampSecondsParser=o}),3621,[3423,3586,3588]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.TimestampMillisecondsParser=void 0;var s=r(d[0]),t=r(d[1]),n=r(d[2]);class o extends t.Parser{priority=20;parse(s){return(0,n.parseAnyDigitsSigned)(s)}set(t,n,o){return[(0,s.constructFrom)(t,o),{timestampIsSet:!0}]}incompatibleTokens="*"}e.TimestampMillisecondsParser=o}),3622,[3423,3586,3588]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isMonday=n;var t=r(d[0]);function n(n,o){return 1===(0,t.toDate)(n,o?.in).getDay()}e.default=n}),3623,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isPast=n;var t=r(d[0]);function n(n){return+(0,t.toDate)(n)<Date.now()}e.default=n}),3624,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isSameHour=u;var t=r(d[0]),o=r(d[1]);function u(u,n,f){const[s,l]=(0,t.normalizeDates)(f?.in,u,n);return+(0,o.startOfHour)(s)==+(0,o.startOfHour)(l)}e.default=u}),3625,[3441,3626]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.startOfHour=n;var t=r(d[0]);function n(n,u){const o=(0,t.toDate)(n,u?.in);return o.setMinutes(0,0,0),o}e.default=n}),3626,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isSameISOWeek=n;var t=r(d[0]);function n(n,u,f){return(0,t.isSameWeek)(n,u,{...f,weekStartsOn:1})}e.default=n}),3627,[3628]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isSameWeek=f;var t=r(d[0]),n=r(d[1]);function f(f,o,u){const[s,l]=(0,t.normalizeDates)(u?.in,f,o);return+(0,n.startOfWeek)(s,u)==+(0,n.startOfWeek)(l,u)}e.default=f}),3628,[3441,3436]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isSameISOWeekYear=f;var t=r(d[0]),n=r(d[1]);function f(f,o,u){const[s,O]=(0,n.normalizeDates)(u?.in,f,o);return+(0,t.startOfISOWeekYear)(s)==+(0,t.startOfISOWeekYear)(O)}e.default=f}),3629,[3443,3441]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isSameMinute=u;var t=r(d[0]);function u(u,n){return+(0,t.startOfMinute)(u)==+(0,t.startOfMinute)(n)}e.default=u}),3630,[3631]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.startOfMinute=n;var t=r(d[0]);function n(n,o){const u=(0,t.toDate)(n,o?.in);return u.setSeconds(0,0),u}e.default=n}),3631,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isSameMonth=n;var t=r(d[0]);function n(n,o,l){const[u,f]=(0,t.normalizeDates)(l?.in,n,o);return u.getFullYear()===f.getFullYear()&&u.getMonth()===f.getMonth()}e.default=n}),3632,[3441]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isSameQuarter=n;var t=r(d[0]),u=r(d[1]);function n(n,f,o){const[s,l]=(0,t.normalizeDates)(o?.in,n,f);return+(0,u.startOfQuarter)(s)==+(0,u.startOfQuarter)(l)}e.default=n}),3633,[3441,3491]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isSameSecond=n;var t=r(d[0]);function n(n,o){return+(0,t.startOfSecond)(n)==+(0,t.startOfSecond)(o)}e.default=n}),3634,[3635]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.startOfSecond=n;var t=r(d[0]);function n(n,o){const u=(0,t.toDate)(n,o?.in);return u.setMilliseconds(0),u}e.default=n}),3635,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isSameYear=l;var t=r(d[0]);function l(l,n,u){const[o,f]=(0,t.normalizeDates)(u?.in,l,n);return o.getFullYear()===f.getFullYear()}e.default=l}),3636,[3441]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isThisHour=n;var t=r(d[0]),o=r(d[1]),u=r(d[2]);function n(n,c){return(0,o.isSameHour)((0,u.toDate)(n,c?.in),(0,t.constructNow)(c?.in||n))}e.default=n}),3637,[3457,3625,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isThisISOWeek=u;var t=r(d[0]),n=r(d[1]),o=r(d[2]);function u(u,c){return(0,o.isSameISOWeek)((0,t.constructFrom)(c?.in||u,u),(0,n.constructNow)(c?.in||u))}e.default=u}),3638,[3423,3457,3627]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isThisMinute=n;var t=r(d[0]),u=r(d[1]);function n(n){return(0,u.isSameMinute)(n,(0,t.constructNow)(n))}e.default=n}),3639,[3457,3630]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isThisMonth=u;var t=r(d[0]),n=r(d[1]),o=r(d[2]);function u(u,c){return(0,o.isSameMonth)((0,t.constructFrom)(c?.in||u,u),(0,n.constructNow)(c?.in||u))}e.default=u}),3640,[3423,3457,3632]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isThisQuarter=o;var t=r(d[0]),u=r(d[1]),n=r(d[2]);function o(o,c){return(0,n.isSameQuarter)((0,t.constructFrom)(c?.in||o,o),(0,u.constructNow)(c?.in||o))}e.default=o}),3641,[3423,3457,3633]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isThisSecond=t;var n=r(d[0]),o=r(d[1]);function t(t){return(0,o.isSameSecond)(t,(0,n.constructNow)(t))}e.default=t}),3642,[3457,3634]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isThisWeek=u;var t=r(d[0]),n=r(d[1]),o=r(d[2]);function u(u,c){return(0,o.isSameWeek)((0,t.constructFrom)(c?.in||u,u),(0,n.constructNow)(c?.in||u),c)}e.default=u}),3643,[3423,3457,3628]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isThisYear=u;var t=r(d[0]),n=r(d[1]),o=r(d[2]);function u(u,c){return(0,o.isSameYear)((0,t.constructFrom)(c?.in||u,u),(0,n.constructNow)(c?.in||u))}e.default=u}),3644,[3423,3457,3636]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isThursday=u;var t=r(d[0]);function u(u,n){return 4===(0,t.toDate)(u,n?.in).getDay()}e.default=u}),3645,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isToday=u;var t=r(d[0]),n=r(d[1]),o=r(d[2]);function u(u,c){return(0,o.isSameDay)((0,t.constructFrom)(c?.in||u,u),(0,n.constructNow)(c?.in||u))}e.default=u}),3646,[3423,3457,3460]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isTomorrow=u;var o=r(d[0]),t=r(d[1]),n=r(d[2]);function u(u,c){return(0,n.isSameDay)(u,(0,o.addDays)((0,t.constructNow)(c?.in||u),1),c)}e.default=u}),3647,[3422,3457,3460]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isTuesday=u;var t=r(d[0]);function u(u,n){return 2===(0,t.toDate)(u,n?.in).getDay()}e.default=u}),3648,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isWednesday=n;var t=r(d[0]);function n(n,u){return 3===(0,t.toDate)(n,u?.in).getDay()}e.default=n}),3649,[3425]);
__d((function(g,r,i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isWithinInterval=n;var t=r(d[0]);function n(n,o,a){const u=+(0,t.toDate)(n,a?.in),[f,l]=[+(0,t.toDate)(o.start,a?.in),+(0,t.toDate)(o.end,a?.in)].sort(((t,n)=>t-n));return u>=f&&u<=l}e.default=n}),3650,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.isYesterday=s;var t=r(d[0]),n=r(d[1]),u=r(d[2]),o=r(d[3]);function s(s,c){return(0,u.isSameDay)((0,t.constructFrom)(c?.in||s,s),(0,o.subDays)((0,n.constructNow)(c?.in||s),1))}e.default=s}),3651,[3423,3457,3460,3652]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.subDays=t;var u=r(d[0]);function t(t,n,f){return(0,u.addDays)(t,-n,f)}e.default=t}),3652,[3422]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.lastDayOfDecade=o;var t=r(d[0]);function o(o,l){const u=(0,t.toDate)(o,l?.in),n=u.getFullYear(),f=9+10*Math.floor(n/10);return u.setFullYear(f+1,0,0),u.setHours(0,0,0,0),(0,t.toDate)(u,l?.in)}e.default=o}),3653,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.lastDayOfISOWeek=f;var t=r(d[0]);function f(f,n){return(0,t.lastDayOfWeek)(f,{...n,weekStartsOn:1})}e.default=f}),3654,[3655]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.lastDayOfWeek=o;var t=r(d[0]),n=r(d[1]);function o(o,s){const l=(0,t.getDefaultOptions)(),u=s?.weekStartsOn??s?.locale?.options?.weekStartsOn??l.weekStartsOn??l.locale?.options?.weekStartsOn??0,f=(0,n.toDate)(o,s?.in),O=f.getDay(),c=6+(O<u?-7:0)-(O-u);return f.setHours(0,0,0,0),f.setDate(f.getDate()+c),f}e.default=o}),3655,[3437,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.lastDayOfISOWeekYear=s;var t=r(d[0]),n=r(d[1]),o=r(d[2]);function s(s,u){const c=(0,n.getISOWeekYear)(s,u),f=(0,t.constructFrom)(u?.in||s,0);f.setFullYear(c+1,0,4),f.setHours(0,0,0,0);const l=(0,o.startOfISOWeek)(f,u);return l.setDate(l.getDate()-1),l}e.default=s}),3656,[3423,3434,3435]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.lastDayOfQuarter=n;var t=r(d[0]);function n(n,o){const u=(0,t.toDate)(n,o?.in),f=u.getMonth(),s=f-f%3+3;return u.setMonth(s,0),u.setHours(0,0,0,0),u}e.default=n}),3657,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.lastDayOfYear=u;var t=r(d[0]);function u(u,l){const n=(0,t.toDate)(u,l?.in),o=n.getFullYear();return n.setFullYear(o+1,0,0),n.setHours(0,0,0,0),n}e.default=u}),3658,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.lightFormat=s,Object.defineProperty(e,"lightFormatters",{enumerable:!0,get:function(){return t.lightFormatters}});var t=r(d[0]),n=r(d[1]),o=r(d[2]);const c=/(\w)\1*|''|'(''|[^'])+('|$)|./g,u=/^'([^]*?)'?$/,l=/''/g,f=/[a-zA-Z]/;function s(u,l){const s=(0,o.toDate)(u);if(!(0,n.isValid)(s))throw new RangeError("Invalid time value");const p=l.match(c);if(!p)return"";return p.map((n=>{if("''"===n)return"'";const o=n[0];if("'"===o)return h(n);const c=t.lightFormatters[o];if(c)return c(s,n);if(o.match(f))throw new RangeError("Format string contains an unescaped latin alphabet character `"+o+"`");return n})).join("")}function h(t){const n=t.match(u);return n?n[1].replace(l,"'"):t}e.default=s}),3659,[3530,3461,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.milliseconds=s;var n=r(d[0]);function s({years:s,months:t,weeks:u,days:o,hours:l,minutes:c,seconds:f}){let y=0;s&&(y+=s*n.daysInYear),t&&(y+=t*(n.daysInYear/12)),u&&(y+=7*u),o&&(y+=o);let _=24*y*60*60;return l&&(_+=60*l*60),c&&(_+=60*c),f&&(_+=f),Math.trunc(1e3*_)}e.default=s}),3660,[3424]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.millisecondsToHours=o;var n=r(d[0]);function o(o){const t=o/n.millisecondsInHour;return Math.trunc(t)}e.default=o}),3661,[3424]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.millisecondsToMinutes=t;var n=r(d[0]);function t(t){const u=t/n.millisecondsInMinute;return Math.trunc(u)}e.default=t}),3662,[3424]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.millisecondsToSeconds=o;var n=r(d[0]);function o(o){const t=o/n.millisecondsInSecond;return Math.trunc(t)}e.default=o}),3663,[3424]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.minutesToHours=u;var t=r(d[0]);function u(u){const n=u/t.minutesInHour;return Math.trunc(n)}e.default=u}),3664,[3424]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.minutesToMilliseconds=t;var n=r(d[0]);function t(t){return Math.trunc(t*n.millisecondsInMinute)}e.default=t}),3665,[3424]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.minutesToSeconds=t;var n=r(d[0]);function t(t){return Math.trunc(t*n.secondsInMinute)}e.default=t}),3666,[3424]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.monthsToQuarters=n;var t=r(d[0]);function n(n){const u=n/t.monthsInQuarter;return Math.trunc(u)}e.default=n}),3667,[3424]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.monthsToYears=n;var t=r(d[0]);function n(n){const o=n/t.monthsInYear;return Math.trunc(o)}e.default=n}),3668,[3424]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.nextDay=u;var t=r(d[0]),n=r(d[1]);function u(u,f,l){let o=f-(0,n.getDay)(u,l);return o<=0&&(o+=7),(0,t.addDays)(u,o,l)}e.default=u}),3669,[3422,3546]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.nextFriday=n;var t=r(d[0]);function n(n,u){return(0,t.nextDay)(n,5,u)}e.default=n}),3670,[3669]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.nextMonday=t;var n=r(d[0]);function t(t,u){return(0,n.nextDay)(t,1,u)}e.default=t}),3671,[3669]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.nextSaturday=n;var t=r(d[0]);function n(n,u){return(0,t.nextDay)(n,6,u)}e.default=n}),3672,[3669]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.nextSunday=t;var n=r(d[0]);function t(t,u){return(0,n.nextDay)(t,0,u)}e.default=t}),3673,[3669]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.nextThursday=n;var t=r(d[0]);function n(n,u){return(0,t.nextDay)(n,4,u)}e.default=n}),3674,[3669]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.nextTuesday=n;var t=r(d[0]);function n(n,u){return(0,t.nextDay)(n,2,u)}e.default=n}),3675,[3669]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.nextWednesday=t;var n=r(d[0]);function t(t,u){return(0,n.nextDay)(t,3,u)}e.default=t}),3676,[3669]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.parseISO=o;var t=r(d[0]),n=r(d[1]),u=r(d[2]);function o(t,o){const s=()=>(0,n.constructFrom)(o?.in,NaN),c=o?.additionalDigits??2,l=N(t);let f;if(l.date){const t=D(l.date,c);f=T(t.restDateString,t.year)}if(!f||isNaN(+f))return s();const p=+f;let U,I=0;if(l.time&&(I=C(l.time),isNaN(I)))return s();if(!l.timezone){const t=new Date(p+I),n=(0,u.toDate)(0,o?.in);return n.setFullYear(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()),n.setHours(t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()),n}return U=h(l.timezone),isNaN(U)?s():(0,u.toDate)(p+I+U,o?.in)}const s={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},c=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,l=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,f=/^([+-])(\d{2})(?::?(\d{2}))?$/;function N(t){const n={},u=t.split(s.dateTimeDelimiter);let o;if(u.length>2)return n;if(/:/.test(u[0])?o=u[0]:(n.date=u[0],o=u[1],s.timeZoneDelimiter.test(n.date)&&(n.date=t.split(s.timeZoneDelimiter)[0],o=t.substr(n.date.length,t.length))),o){const t=s.timezone.exec(o);t?(n.time=o.replace(t[1],""),n.timezone=t[1]):n.time=o}return n}function D(t,n){const u=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+n)+"})|(\\d{2}|[+-]\\d{"+(2+n)+"})$)"),o=t.match(u);if(!o)return{year:NaN,restDateString:""};const s=o[1]?parseInt(o[1]):null,c=o[2]?parseInt(o[2]):null;return{year:null===c?s:100*c,restDateString:t.slice((o[1]||o[2]).length)}}function T(t,n){if(null===n)return new Date(NaN);const u=t.match(c);if(!u)return new Date(NaN);const o=!!u[4],s=p(u[1]),l=p(u[2])-1,f=p(u[3]),N=p(u[4]),D=p(u[5])-1;if(o)return y(n,N,D)?I(n,N,D):new Date(NaN);{const t=new Date(0);return F(n,l,f)&&Z(n,s)?(t.setUTCFullYear(n,l,Math.max(s,f)),t):new Date(NaN)}}function p(t){return t?parseInt(t):1}function C(n){const u=n.match(l);if(!u)return NaN;const o=U(u[1]),s=U(u[2]),c=U(u[3]);return z(o,s,c)?o*t.millisecondsInHour+s*t.millisecondsInMinute+1e3*c:NaN}function U(t){return t&&parseFloat(t.replace(",","."))||0}function h(n){if("Z"===n)return 0;const u=n.match(f);if(!u)return 0;const o="+"===u[1]?-1:1,s=parseInt(u[2]),c=u[3]&&parseInt(u[3])||0;return S(s,c)?o*(s*t.millisecondsInHour+c*t.millisecondsInMinute):NaN}function I(t,n,u){const o=new Date(0);o.setUTCFullYear(t,0,4);const s=7*(n-1)+u+1-(o.getUTCDay()||7);return o.setUTCDate(o.getUTCDate()+s),o}const w=[31,null,31,30,31,30,31,31,30,31,30,31];function M(t){return t%400==0||t%4==0&&t%100!=0}function F(t,n,u){return n>=0&&n<=11&&u>=1&&u<=(w[n]||(M(t)?29:28))}function Z(t,n){return n>=1&&n<=(M(t)?366:365)}function y(t,n,u){return n>=1&&n<=53&&u>=0&&u<=6}function z(t,n,u){return 24===t?0===n&&0===u:u>=0&&u<60&&n>=0&&n<60&&t>=0&&t<25}function S(t,n){return n>=0&&n<=59}e.default=o}),3677,[3424,3423,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.parseJSON=n;var t=r(d[0]);function n(n,o){const u=n.match(/(\d{4})-(\d{2})-(\d{2})[T ](\d{2}):(\d{2}):(\d{2})(?:\.(\d{0,7}))?(?:Z|(.)(\d{2}):?(\d{2})?)?/);return u?(0,t.toDate)(Date.UTC(+u[1],+u[2]-1,+u[3],+u[4]-(+u[9]||0)*("-"==u[8]?-1:1),+u[5]-(+u[10]||0)*("-"==u[8]?-1:1),+u[6],+((u[7]||"0")+"00").substring(0,3)),o?.in):(0,t.toDate)(NaN,o?.in)}e.default=n}),3678,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.previousDay=n;var t=r(d[0]),u=r(d[1]);function n(n,o,f){let l=(0,t.getDay)(n,f)-o;return l<=0&&(l+=7),(0,u.subDays)(n,l,f)}e.default=n}),3679,[3546,3652]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.previousFriday=o;var u=r(d[0]);function o(o,t){return(0,u.previousDay)(o,5,t)}e.default=o}),3680,[3679]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.previousMonday=o;var u=r(d[0]);function o(o,n){return(0,u.previousDay)(o,1,n)}e.default=o}),3681,[3679]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.previousSaturday=t;var u=r(d[0]);function t(t,o){return(0,u.previousDay)(t,6,o)}e.default=t}),3682,[3679]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.previousSunday=n;var u=r(d[0]);function n(n,o){return(0,u.previousDay)(n,0,o)}e.default=n}),3683,[3679]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.previousThursday=o;var u=r(d[0]);function o(o,t){return(0,u.previousDay)(o,4,t)}e.default=o}),3684,[3679]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.previousTuesday=o;var u=r(d[0]);function o(o,t){return(0,u.previousDay)(o,2,t)}e.default=o}),3685,[3679]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.previousWednesday=n;var u=r(d[0]);function n(n,o){return(0,u.previousDay)(n,3,o)}e.default=n}),3686,[3679]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.quartersToMonths=n;var t=r(d[0]);function n(n){return Math.trunc(n*t.monthsInQuarter)}e.default=n}),3687,[3424]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.quartersToYears=u;var t=r(d[0]);function u(u){const n=u/t.quartersInYear;return Math.trunc(n)}e.default=u}),3688,[3424]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.roundToNearestHours=u;var t=r(d[0]),o=r(d[1]),n=r(d[2]);function u(u,s){const c=s?.nearestTo??1;if(c<1||c>12)return(0,o.constructFrom)(s?.in||u,NaN);const f=(0,n.toDate)(u,s?.in),l=f.getMinutes()/60,M=f.getSeconds()/60/60,_=f.getMilliseconds()/1e3/60/60,v=f.getHours()+l+M+_,H=s?.roundingMethod??"round",N=(0,t.getRoundingMethod)(H)(v/c)*c;return f.setHours(N,0,0,0),f}e.default=u}),3689,[3472,3423,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.roundToNearestMinutes=u;var t=r(d[0]),n=r(d[1]),o=r(d[2]);function u(u,s){const c=s?.nearestTo??1;if(c<1||c>30)return(0,n.constructFrom)(u,NaN);const M=(0,o.toDate)(u,s?.in),f=M.getSeconds()/60,l=M.getMilliseconds()/1e3/60,_=M.getMinutes()+f+l,v=s?.roundingMethod??"round",N=(0,t.getRoundingMethod)(v)(_/c)*c;return M.setMinutes(N,0,0),M}e.default=u}),3690,[3472,3423,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.secondsToHours=o;var n=r(d[0]);function o(o){const t=o/n.secondsInHour;return Math.trunc(t)}e.default=o}),3691,[3424]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.secondsToMilliseconds=o;var n=r(d[0]);function o(o){return o*n.millisecondsInSecond}e.default=o}),3692,[3424]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.secondsToMinutes=t;var n=r(d[0]);function t(t){const u=t/n.secondsInMinute;return Math.trunc(u)}e.default=t}),3693,[3424]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.set=l;var t=r(d[0]),n=r(d[1]),s=r(d[2]);function l(l,u,o){let c=(0,s.toDate)(l,o?.in);return isNaN(+c)?(0,t.constructFrom)(o?.in||l,NaN):(null!=u.year&&c.setFullYear(u.year),null!=u.month&&(c=(0,n.setMonth)(c,u.month)),null!=u.date&&c.setDate(u.date),null!=u.hours&&c.setHours(u.hours),null!=u.minutes&&c.setMinutes(u.minutes),null!=u.seconds&&c.setSeconds(u.seconds),null!=u.milliseconds&&c.setMilliseconds(u.milliseconds),c)}e.default=l}),3694,[3423,3695,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.setMonth=u;var t=r(d[0]),n=r(d[1]),o=r(d[2]);function u(u,s,l){const c=(0,o.toDate)(u,l?.in),f=c.getFullYear(),M=c.getDate(),h=(0,t.constructFrom)(l?.in||u,0);h.setFullYear(f,s,15),h.setHours(0,0,0,0);const _=(0,n.getDaysInMonth)(h);return c.setMonth(s,Math.min(M,_)),c}e.default=u}),3695,[3423,3547,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.setDate=n;var t=r(d[0]);function n(n,o,u){const f=(0,t.toDate)(n,u?.in);return f.setDate(o),f}e.default=n}),3696,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.setDayOfYear=n;var t=r(d[0]);function n(n,o,u){const f=(0,t.toDate)(n,u?.in);return f.setMonth(0),f.setDate(o),f}e.default=n}),3697,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.setDefaultOptions=o;var t=r(d[0]);function o(o){const n={},l=(0,t.getDefaultOptions)();for(const t in l)Object.prototype.hasOwnProperty.call(l,t)&&(n[t]=l[t]);for(const t in o)Object.prototype.hasOwnProperty.call(o,t)&&(void 0===o[t]?delete n[t]:n[t]=o[t]);(0,t.setDefaultOptions)(n)}e.default=o}),3698,[3437]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.setHours=o;var t=r(d[0]);function o(o,u,n){const s=(0,t.toDate)(o,n?.in);return s.setHours(u),s}e.default=o}),3699,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.setMilliseconds=n;var t=r(d[0]);function n(n,o,l){const s=(0,t.toDate)(n,l?.in);return s.setMilliseconds(o),s}e.default=n}),3700,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.setMinutes=n;var t=r(d[0]);function n(n,u,o){const s=(0,t.toDate)(n,o?.in);return s.setMinutes(u),s}e.default=n}),3701,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.setQuarter=o;var t=r(d[0]),n=r(d[1]);function o(o,u,c){const f=(0,n.toDate)(o,c?.in),M=u-(Math.trunc(f.getMonth()/3)+1);return(0,t.setMonth)(f,f.getMonth()+3*M)}e.default=o}),3702,[3695,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.setSeconds=n;var t=r(d[0]);function n(n,o,u){const c=(0,t.toDate)(n,u?.in);return c.setSeconds(o),c}e.default=n}),3703,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.setWeekYear=l;var t=r(d[0]),n=r(d[1]),s=r(d[2]),o=r(d[3]),f=r(d[4]);function l(l,u,c){const D=(0,t.getDefaultOptions)(),k=c?.firstWeekContainsDate??c?.locale?.options?.firstWeekContainsDate??D.firstWeekContainsDate??D.locale?.options?.firstWeekContainsDate??1,W=(0,s.differenceInCalendarDays)((0,f.toDate)(l,c?.in),(0,o.startOfWeekYear)(l,c),c),C=(0,n.constructFrom)(c?.in||l,0);C.setFullYear(u,0,k),C.setHours(0,0,0,0);const p=(0,o.startOfWeekYear)(C,c);return p.setDate(p.getDate()+W),p}e.default=l}),3704,[3437,3423,3439,3527,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.setYear=o;var t=r(d[0]),n=r(d[1]);function o(o,u,c){const l=(0,n.toDate)(o,c?.in);return isNaN(+l)?(0,t.constructFrom)(c?.in||o,NaN):(l.setFullYear(u),l)}e.default=o}),3705,[3423,3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.startOfDecade=o;var t=r(d[0]);function o(o,u){const l=(0,t.toDate)(o,u?.in),n=l.getFullYear(),f=10*Math.floor(n/10);return l.setFullYear(f,0,1),l.setHours(0,0,0,0),l}e.default=o}),3706,[3425]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.startOfToday=f;var t=r(d[0]);function f(f){return(0,t.startOfDay)(Date.now(),f)}e.default=f}),3707,[3442]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.startOfTomorrow=n;var t=r(d[0]),o=r(d[1]);function n(n){const u=(0,o.constructNow)(n?.in),c=u.getFullYear(),l=u.getMonth(),s=u.getDate(),f=(0,t.constructFrom)(n?.in,0);return f.setFullYear(c,l,s+1),f.setHours(0,0,0,0),f}e.default=n}),3708,[3423,3457]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.startOfYesterday=n;var t=r(d[0]);function n(n){const o=(0,t.constructNow)(n?.in),u=o.getFullYear(),s=o.getMonth(),c=o.getDate(),l=(0,t.constructNow)(n?.in);return l.setFullYear(u,s,c-1),l.setHours(0,0,0,0),l}e.default=n}),3709,[3457]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.sub=u;var s=r(d[0]),n=r(d[1]),t=r(d[2]);function u(u,o,c){const{years:f=0,months:b=0,weeks:l=0,days:y=0,hours:_=0,minutes:h=0,seconds:v=0}=o,M=(0,t.subMonths)(u,b+12*f,c),j=(0,n.subDays)(M,y+7*l,c),k=1e3*(v+60*(h+60*_));return(0,s.constructFrom)(c?.in||u,+j-k)}e.default=u}),3710,[3423,3652,3711]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.subMonths=n;var t=r(d[0]);function n(n,u,o){return(0,t.addMonths)(n,-u,o)}e.default=n}),3711,[3426]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.subBusinessDays=u;var s=r(d[0]);function u(u,n,t){return(0,s.addBusinessDays)(u,-n,t)}e.default=u}),3712,[3427]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.subHours=o;var u=r(d[0]);function o(o,t,n){return(0,u.addHours)(o,-t,n)}e.default=o}),3713,[3431]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.subMilliseconds=n;var l=r(d[0]);function n(n,u,o){return(0,l.addMilliseconds)(n,-u,o)}e.default=n}),3714,[3432]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.subMinutes=t;var u=r(d[0]);function t(t,n,f){return(0,u.addMinutes)(t,-n,f)}e.default=t}),3715,[3444]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.subQuarters=t;var u=r(d[0]);function t(t,n,f){return(0,u.addQuarters)(t,-n,f)}e.default=t}),3716,[3445]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.subSeconds=u;var n=r(d[0]);function u(u,o,t){return(0,n.addSeconds)(u,-o,t)}e.default=u}),3717,[3446]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.subWeeks=t;var u=r(d[0]);function t(t,n,f){return(0,u.addWeeks)(t,-n,f)}e.default=t}),3718,[3447]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.subYears=t;var u=r(d[0]);function t(t,n,f){return(0,u.addYears)(t,-n,f)}e.default=t}),3719,[3448]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.weeksToDays=n;var t=r(d[0]);function n(n){return Math.trunc(n*t.daysInWeek)}e.default=n}),3720,[3424]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.yearsToDays=n;var t=r(d[0]);function n(n){return Math.trunc(n*t.daysInYear)}e.default=n}),3721,[3424]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.yearsToMonths=n;var t=r(d[0]);function n(n){return Math.trunc(n*t.monthsInYear)}e.default=n}),3722,[3424]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.yearsToQuarters=u;var t=r(d[0]);function u(u){return Math.trunc(u*t.quartersInYear)}e.default=u}),3723,[3424]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.updateGroupSchema=e.updateExpenseSchema=e.timeframeInputSchema=e.splitTypeValues=e.settlementStatusValues=e.paginationInputSchema=e.groupIdWithTimeframeSchema=e.groupIdWithPaginationSchema=e.groupIdInputSchema=e.createSettlementSchema=e.createGroupSchema=e.createExpenseWithSplitsSchema=e.createExpenseSplitSchema=e.createExpenseSchema=e.categoryValues=e.addMemberSchema=void 0;var t=r(d[0]),n=r(d[1]),o=r(d[2]);const c=n.z.coerce.number({message:'Invalid amount'}).positive().refine((t=>{const n=t.toString().split('.')[1];return!n||n.length<=2}),{message:'The amount can only have 2 decimal places'}),p=(e.categoryValues=['food','transport','accommodation','entertainment','shopping','utilities','other'],e.splitTypeValues=['equal','percentage','exact'],e.settlementStatusValues=['pending','completed'],e.createGroupSchema=(0,t.createInsertSchema)(o.group,{id:void 0,createdAt:void 0,updatedAt:void 0}),e.updateGroupSchema=(0,t.createUpdateSchema)(o.group,{name:n.z.string({required_error:'Name is required'}).min(1,{message:'Name is required'}),createdAt:void 0,updatedAt:void 0}),e.addMemberSchema=(0,t.createInsertSchema)(o.groupMember,{id:void 0,joinedAt:void 0}),e.createExpenseSplitSchema=(0,t.createInsertSchema)(o.expenseSplit).omit({expenseId:!0})),u=e.createExpenseSchema=(0,t.createInsertSchema)(o.expense,{amount:c}).extend({splits:n.z.array(p)});e.createExpenseWithSplitsSchema=n.z.object({expense:u,splits:n.z.array(p)}),e.updateExpenseSchema=(0,t.createUpdateSchema)(o.expense,{amount:c,id:n.z.string().uuid()}).pick({id:!0,title:!0,description:!0,category:!0}),e.createSettlementSchema=(0,t.createInsertSchema)(o.settlement,{id:void 0,createdAt:void 0,updatedAt:void 0,settledAt:void 0}),e.paginationInputSchema=n.z.object({limit:n.z.number().positive().optional().default(20),cursor:n.z.string().uuid().optional()}),e.groupIdInputSchema=n.z.object({groupId:n.z.string().uuid()}),e.groupIdWithPaginationSchema=n.z.object({groupId:n.z.string().uuid(),limit:n.z.number().positive().optional().default(20),cursor:n.z.object({date:n.z.date(),id:n.z.string().uuid()}).nullish(),searchTerm:n.z.string().optional()}),e.timeframeInputSchema=n.z.object({timeframe:n.z.enum(['week','month','year','all']).optional().default('all')}),e.groupIdWithTimeframeSchema=n.z.object({groupId:n.z.string().uuid(),timeframe:n.z.enum(['week','month','year','all']).optional().default('all')})}),3737,[3738,3739,3810]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.createInsertSchema=e.bufferSchema=void 0,e.createSchemaFactory=function(n){return{createSelectSchema:(t,l)=>S(t)?b(t,n):f(M(t),l??{},A,n),createInsertSchema:(t,l)=>f(M(t),l??{},p,n),createUpdateSchema:(t,l)=>f(M(t),l??{},h,n)}},e.createUpdateSchema=e.createSelectSchema=void 0,e.isColumnType=o,e.isPgEnum=void 0,e.isWithEnum=u,e.literalSchema=e.jsonSchema=void 0;var n=r(d[0]),t=r(d[1]);const l={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function o(n,t){return t.includes(n.columnType)}function u(n){return'enumValues'in n&&Array.isArray(n.enumValues)&&n.enumValues.length>0}const S=e.isPgEnum=u,N=e.literalSchema=n.z.union([n.z.string(),n.z.number(),n.z.boolean(),n.z.null()]),I=e.jsonSchema=n.z.union([N,n.z.record(n.z.any()),n.z.array(n.z.any())]),c=e.bufferSchema=n.z.custom((n=>n instanceof Buffer));function s(t,l){const S=l?.zodInstance??n.z,N=l?.coerce??{};let M;return u(t)&&(M=t.enumValues.length?S.enum(t.enumValues):S.string()),M||(o(t,['PgGeometry','PgPointTuple'])?M=S.tuple([S.number(),S.number()]):o(t,['PgGeometryObject','PgPointObject'])?M=S.object({x:S.number(),y:S.number()}):o(t,['PgHalfVector','PgVector'])?(M=S.array(S.number()),M=t.dimensions?M.length(t.dimensions):M):o(t,['PgLine'])?M=S.tuple([S.number(),S.number(),S.number()]):o(t,['PgLineABC'])?M=S.object({a:S.number(),b:S.number(),c:S.number()}):o(t,['PgArray'])?(M=S.array(s(t.baseColumn,S)),M=t.size?M.length(t.size):M):'array'===t.dataType?M=S.array(S.any()):'number'===t.dataType?M=T(t,S,N):'bigint'===t.dataType?M=_(t,S,N):'boolean'===t.dataType?M=!0===N||N.boolean?S.coerce.boolean():S.boolean():'date'===t.dataType?M=!0===N||N.date?S.coerce.date():S.date():'string'===t.dataType?M=y(t,S,N):'json'===t.dataType?M=I:'custom'===t.dataType?M=S.any():'buffer'===t.dataType&&(M=c)),M||(M=S.any()),M}function T(n,t,u){let S,N,I=n.getSQLType().includes('unsigned'),c=!1;o(n,['MySqlTinyInt','SingleStoreTinyInt'])?(S=I?0:l.INT8_MIN,N=I?l.INT8_UNSIGNED_MAX:l.INT8_MAX,c=!0):o(n,['PgSmallInt','PgSmallSerial','MySqlSmallInt','SingleStoreSmallInt'])?(S=I?0:l.INT16_MIN,N=I?l.INT16_UNSIGNED_MAX:l.INT16_MAX,c=!0):o(n,['PgReal','MySqlFloat','MySqlMediumInt','SingleStoreMediumInt','SingleStoreFloat'])?(S=I?0:l.INT24_MIN,N=I?l.INT24_UNSIGNED_MAX:l.INT24_MAX,c=o(n,['MySqlMediumInt','SingleStoreMediumInt'])):o(n,['PgInteger','PgSerial','MySqlInt','SingleStoreInt'])?(S=I?0:l.INT32_MIN,N=I?l.INT32_UNSIGNED_MAX:l.INT32_MAX,c=!0):o(n,['PgDoublePrecision','MySqlReal','MySqlDouble','SingleStoreReal','SingleStoreDouble','SQLiteReal'])?(S=I?0:l.INT48_MIN,N=I?l.INT48_UNSIGNED_MAX:l.INT48_MAX):o(n,['PgBigInt53','PgBigSerial53','MySqlBigInt53','MySqlSerial','SingleStoreBigInt53','SingleStoreSerial','SQLiteInteger'])?(I=I||o(n,['MySqlSerial','SingleStoreSerial']),S=I?0:Number.MIN_SAFE_INTEGER,N=Number.MAX_SAFE_INTEGER,c=!0):o(n,['MySqlYear','SingleStoreYear'])?(S=1901,N=2155,c=!0):(S=Number.MIN_SAFE_INTEGER,N=Number.MAX_SAFE_INTEGER);let s=!0===u||u?.number?t.coerce.number():t.number();return s=s.min(S).max(N),c?s.int():s}function _(n,t,o){const u=n.getSQLType().includes('unsigned'),S=u?0n:l.INT64_MIN,N=u?l.INT64_UNSIGNED_MAX:l.INT64_MAX;return(!0===o||o?.bigint?t.coerce.bigint():t.bigint()).min(S).max(N)}function y(n,t,u){if(o(n,['PgUUID']))return t.string().uuid();let S,N,I=!1;o(n,['PgVarchar','SQLiteText'])?S=n.length:o(n,['MySqlVarChar','SingleStoreVarChar'])?S=n.length??l.INT16_UNSIGNED_MAX:o(n,['MySqlText','SingleStoreText'])&&(S='longtext'===n.textType?l.INT32_UNSIGNED_MAX:'mediumtext'===n.textType?l.INT24_UNSIGNED_MAX:'text'===n.textType?l.INT16_UNSIGNED_MAX:l.INT8_UNSIGNED_MAX),o(n,['PgChar','MySqlChar','SingleStoreChar'])&&(S=n.length,I=!0),o(n,['PgBinaryVector'])&&(N=/^[01]+$/,S=n.dimensions);let c=!0===u||u?.string?t.coerce.string():t.string();return c=N?c.regex(N):c,S&&I?c.length(S):S?c.max(S):c}function M(n){return(0,t.isTable)(n)?(0,t.getTableColumns)(n):(0,t.getViewSelectedFields)(n)}function f(l,o,u,S){const N={};for(const[I,c]of Object.entries(l)){if(!(0,t.is)(c,t.Column)&&!(0,t.is)(c,t.SQL)&&!(0,t.is)(c,t.SQL.Aliased)&&'object'==typeof c){const n=(0,t.isTable)(c)||(0,t.isView)(c)?M(c):c;N[I]=f(n,o[I]??{},u,S);continue}const l=o[I];if(void 0!==l&&'function'!=typeof l){N[I]=l;continue}const T=(0,t.is)(c,t.Column)?c:void 0,_=T?s(T,S):n.z.any(),y='function'==typeof l?l(_):_;u.never(T)||(N[I]=y,T&&(u.nullable(T)&&(N[I]=N[I].nullable()),u.optional(T)&&(N[I]=N[I].optional())))}return n.z.object(N)}function b(t,l){return(l?.zodInstance??n.z).enum(t.enumValues)}const A={never:()=>!1,optional:()=>!1,nullable:n=>!n.notNull},p={never:n=>'always'===n?.generated?.type||'always'===n?.generatedIdentity?.type,optional:n=>!n.notNull||n.notNull&&n.hasDefault,nullable:n=>!n.notNull},h={never:n=>'always'===n?.generated?.type||'always'===n?.generatedIdentity?.type,optional:()=>!0,nullable:n=>!n.notNull};e.createSelectSchema=(n,t)=>{if(S(n))return b(n);return f(M(n),t??{},A)};e.createInsertSchema=(n,t)=>f(M(n),t??{},p);e.createUpdateSchema=(n,t)=>f(M(n),t??{},h)}),3738,[3739,3740]);
__d((function(e,t,a,s,n,r,i){var o,d;Object.defineProperty(r,"__esModule",{value:!0}),r.ZodVoid=r.ZodUnknown=r.ZodUnion=r.ZodUndefined=r.ZodType=r.ZodTuple=r.ZodTransformer=r.ZodSymbol=r.ZodString=r.ZodSet=r.ZodSchema=r.ZodRecord=r.ZodReadonly=r.ZodPromise=r.ZodPipeline=r.ZodParsedType=r.ZodOptional=r.ZodObject=r.ZodNumber=r.ZodNullable=r.ZodNull=r.ZodNever=r.ZodNativeEnum=r.ZodNaN=r.ZodMap=r.ZodLiteral=r.ZodLazy=r.ZodIssueCode=r.ZodIntersection=r.ZodFunction=r.ZodFirstPartyTypeKind=r.ZodError=r.ZodEnum=r.ZodEffects=r.ZodDiscriminatedUnion=r.ZodDefault=r.ZodDate=r.ZodCatch=r.ZodBranded=r.ZodBoolean=r.ZodBigInt=r.ZodArray=r.ZodAny=r.Schema=r.ParseStatus=r.OK=r.NEVER=r.INVALID=r.EMPTY_PATH=r.DIRTY=r.BRAND=void 0,r.addIssueToContext=b,r.coerce=r.boolean=r.bigint=r.array=r.any=void 0,r.custom=Ye,r.date=void 0,r.datetimeRegex=ae,r.function=r.enum=r.effect=r.discriminatedUnion=r.defaultErrorMap=r.default=void 0,r.getErrorMap=v,r.set=r.record=r.quotelessJson=r.promise=r.preprocess=r.pipeline=r.ostring=r.optional=r.onumber=r.oboolean=r.objectUtil=r.object=r.number=r.nullable=r.null=r.never=r.nativeEnum=r.nan=r.map=r.makeIssue=r.literal=r.lazy=r.late=r.isValid=r.isDirty=r.isAsync=r.isAborted=r.intersection=r.instanceof=r.getParsedType=void 0,r.setErrorMap=y,r.string=r.strictObject=void 0,r.z=r.void=r.util=r.unknown=r.union=r.undefined=r.tuple=r.transformer=r.symbol=void 0,(function(e){e.assertEqual=e=>e,e.assertIs=function(e){},e.assertNever=function(e){throw new Error},e.arrayToEnum=e=>{const t={};for(const a of e)t[a]=a;return t},e.getValidEnumValues=t=>{const a=e.objectKeys(t).filter((e=>"number"!=typeof t[t[e]])),s={};for(const e of a)s[e]=t[e];return e.objectValues(s)},e.objectValues=t=>e.objectKeys(t).map((function(e){return t[e]})),e.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.push(a);return t},e.find=(e,t)=>{for(const a of e)if(t(a))return a},e.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,e.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},e.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t})(o||(r.util=o={})),(function(e){e.mergeShapes=(e,t)=>({...e,...t})})(d||(r.objectUtil=d={}));const c=r.ZodParsedType=o.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),u=e=>{switch(typeof e){case"undefined":return c.undefined;case"string":return c.string;case"number":return isNaN(e)?c.nan:c.number;case"boolean":return c.boolean;case"function":return c.function;case"bigint":return c.bigint;case"symbol":return c.symbol;case"object":return Array.isArray(e)?c.array:null===e?c.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?c.promise:"undefined"!=typeof Map&&e instanceof Map?c.map:"undefined"!=typeof Set&&e instanceof Set?c.set:"undefined"!=typeof Date&&e instanceof Date?c.date:c.object;default:return c.unknown}};r.getParsedType=u;const l=r.ZodIssueCode=o.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),h=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");r.quotelessJson=h;class p extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},a={_errors:[]},s=e=>{for(const n of e.issues)if("invalid_union"===n.code)n.unionErrors.map(s);else if("invalid_return_type"===n.code)s(n.returnTypeError);else if("invalid_arguments"===n.code)s(n.argumentsError);else if(0===n.path.length)a._errors.push(t(n));else{let e=a,s=0;for(;s<n.path.length;){const a=n.path[s];s===n.path.length-1?(e[a]=e[a]||{_errors:[]},e[a]._errors.push(t(n))):e[a]=e[a]||{_errors:[]},e=e[a],s++}}};return s(this),a}static assert(e){if(!(e instanceof p))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,o.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},a=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):a.push(e(s));return{formErrors:a,fieldErrors:t}}get formErrors(){return this.flatten()}}r.ZodError=p,p.create=e=>new p(e);const m=(e,t)=>{let a;switch(e.code){case l.invalid_type:a=e.received===c.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case l.invalid_literal:a=`Invalid literal value, expected ${JSON.stringify(e.expected,o.jsonStringifyReplacer)}`;break;case l.unrecognized_keys:a=`Unrecognized key(s) in object: ${o.joinValues(e.keys,", ")}`;break;case l.invalid_union:a="Invalid input";break;case l.invalid_union_discriminator:a=`Invalid discriminator value. Expected ${o.joinValues(e.options)}`;break;case l.invalid_enum_value:a=`Invalid enum value. Expected ${o.joinValues(e.options)}, received '${e.received}'`;break;case l.invalid_arguments:a="Invalid function arguments";break;case l.invalid_return_type:a="Invalid function return type";break;case l.invalid_date:a="Invalid date";break;case l.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(a=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(a=`${a} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?a=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?a=`Invalid input: must end with "${e.validation.endsWith}"`:o.assertNever(e.validation):a="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case l.too_small:a="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case l.too_big:a="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case l.custom:a="Invalid input";break;case l.invalid_intersection_types:a="Intersection results could not be merged";break;case l.not_multiple_of:a=`Number must be a multiple of ${e.multipleOf}`;break;case l.not_finite:a="Number must be finite";break;default:a=t.defaultError,o.assertNever(e)}return{message:a}};r.defaultErrorMap=m;let f=m;function y(e){f=e}function v(){return f}const _=e=>{const{data:t,path:a,errorMaps:s,issueData:n}=e,r=[...a,...n.path||[]],i={...n,path:r};if(void 0!==n.message)return{...n,path:r,message:n.message};let o="";const d=s.filter((e=>!!e)).slice().reverse();for(const e of d)o=e(i,{data:t,defaultError:o}).message;return{...n,path:r,message:o}};r.makeIssue=_;const g=r.EMPTY_PATH=[];function b(e,t){const a=v(),s=_({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,a,a===m?void 0:m].filter((e=>!!e))});e.common.issues.push(s)}class k{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const a=[];for(const s of t){if("aborted"===s.status)return x;"dirty"===s.status&&e.dirty(),a.push(s.value)}return{status:e.value,value:a}}static async mergeObjectAsync(e,t){const a=[];for(const e of t){const t=await e.key,s=await e.value;a.push({key:t,value:s})}return k.mergeObjectSync(e,a)}static mergeObjectSync(e,t){const a={};for(const s of t){const{key:t,value:n}=s;if("aborted"===t.status)return x;if("aborted"===n.status)return x;"dirty"===t.status&&e.dirty(),"dirty"===n.status&&e.dirty(),"__proto__"===t.value||void 0===n.value&&!s.alwaysSet||(a[t.value]=n.value)}return{status:e.value,value:a}}}r.ParseStatus=k;const x=r.INVALID=Object.freeze({status:"aborted"}),Z=e=>({status:"dirty",value:e});r.DIRTY=Z;const w=e=>({status:"valid",value:e});r.OK=w;const T=e=>"aborted"===e.status;r.isAborted=T;const O=e=>"dirty"===e.status;r.isDirty=O;const N=e=>"valid"===e.status;r.isValid=N;const A=e=>"undefined"!=typeof Promise&&e instanceof Promise;function C(e,t,a,s){if("a"===a&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===a?s:"a"===a?s.call(e):s?s.value:t.get(e)}function E(e,t,a,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,a):n?n.value=a:t.set(e,a),a}var S,j,I;r.isAsync=A,"function"==typeof SuppressedError&&SuppressedError,(function(e){e.errToObj=e=>"string"==typeof e?{message:e}:e||{},e.toString=e=>"string"==typeof e?e:null==e?void 0:e.message})(S||(S={}));class P{constructor(e,t,a,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=a,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const R=(e,t)=>{if(N(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new p(e.common.issues);return this._error=t,this._error}}};function $(e){if(!e)return{};const{errorMap:t,invalid_type_error:a,required_error:s,description:n}=e;if(t&&(a||s))throw new Error("Can't use \"invalid_type_error\" or \"required_error\" in conjunction with custom error map.");if(t)return{errorMap:t,description:n};return{errorMap:(t,n)=>{var r,i;const{message:o}=e;return"invalid_enum_value"===t.code?{message:null!=o?o:n.defaultError}:void 0===n.data?{message:null!==(r=null!=o?o:s)&&void 0!==r?r:n.defaultError}:"invalid_type"!==t.code?{message:n.defaultError}:{message:null!==(i=null!=o?o:a)&&void 0!==i?i:n.defaultError}},description:n}}class M{get description(){return this._def.description}_getType(e){return u(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:u(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new k,ctx:{common:e.parent.common,data:e.data,parsedType:u(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(A(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const a=this.safeParse(e,t);if(a.success)return a.data;throw a.error}safeParse(e,t){var a;const s={common:{issues:[],async:null!==(a=null==t?void 0:t.async)&&void 0!==a&&a,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:u(e)},n=this._parseSync({data:e,path:s.path,parent:s});return R(s,n)}"~validate"(e){var t,a;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:u(e)};if(!this["~standard"].async)try{const t=this._parseSync({data:e,path:[],parent:s});return N(t)?{value:t.value}:{issues:s.common.issues}}catch(e){(null===(a=null===(t=null==e?void 0:e.message)||void 0===t?void 0:t.toLowerCase())||void 0===a?void 0:a.includes("encountered"))&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then((e=>N(e)?{value:e.value}:{issues:s.common.issues}))}async parseAsync(e,t){const a=await this.safeParseAsync(e,t);if(a.success)return a.data;throw a.error}async safeParseAsync(e,t){const a={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:u(e)},s=this._parse({data:e,path:a.path,parent:a}),n=await(A(s)?s:Promise.resolve(s));return R(a,n)}refine(e,t){const a=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,s)=>{const n=e(t),r=()=>s.addIssue({code:l.custom,...a(t)});return"undefined"!=typeof Promise&&n instanceof Promise?n.then((e=>!!e||(r(),!1))):!!n||(r(),!1)}))}refinement(e,t){return this._refinement(((a,s)=>!!e(a)||(s.addIssue("function"==typeof t?t(a,s):t),!1)))}_refinement(e){return new Me({schema:this,typeName:He.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return De.create(this,this._def)}nullable(){return Fe.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return _e.create(this)}promise(){return $e.create(this,this._def)}or(e){return ke.create([this,e],this._def)}and(e){return Te.create(this,e,this._def)}transform(e){return new Me({...$(this._def),schema:this,typeName:He.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new Le({...$(this._def),innerType:this,defaultValue:t,typeName:He.ZodDefault})}brand(){return new Be({typeName:He.ZodBranded,type:this,...$(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new ze({...$(this._def),innerType:this,catchValue:t,typeName:He.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return Ke.create(this,e)}readonly(){return We.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}r.ZodType=r.ZodSchema=r.Schema=M;const D=/^c[^\s-]{8,}$/i,F=/^[0-9a-z]+$/,L=/^[0-9A-HJKMNP-TV-Z]{26}$/i,z=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,V=/^[a-z0-9_-]{21}$/i,U=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,B=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,K=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let W;const q=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Y=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,J=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,H=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,G=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,X=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Q="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",ee=new RegExp(`^${Q}$`);function te(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function ae(e){let t=`${Q}T${te(e)}`;const a=[];return a.push(e.local?"Z?":"Z"),e.offset&&a.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${a.join("|")})`,new RegExp(`^${t}$`)}function se(e,t){if(!U.test(e))return!1;try{const[a]=e.split("."),s=a.replace(/-/g,"+").replace(/_/g,"/").padEnd(a.length+(4-a.length%4)%4,"="),n=JSON.parse(atob(s));return"object"==typeof n&&null!==n&&(!(!n.typ||!n.alg)&&(!t||n.alg===t))}catch(e){return!1}}function ne(e,t){return!("v4"!==t&&t||!Y.test(e))||!("v6"!==t&&t||!H.test(e))}class re extends M{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==c.string){const t=this._getOrReturnCtx(e);return b(t,{code:l.invalid_type,expected:c.string,received:t.parsedType}),x}const t=new k;let a;for(const r of this._def.checks)if("min"===r.kind)e.data.length<r.value&&(a=this._getOrReturnCtx(e,a),b(a,{code:l.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if("max"===r.kind)e.data.length>r.value&&(a=this._getOrReturnCtx(e,a),b(a,{code:l.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!1,message:r.message}),t.dirty());else if("length"===r.kind){const s=e.data.length>r.value,n=e.data.length<r.value;(s||n)&&(a=this._getOrReturnCtx(e,a),s?b(a,{code:l.too_big,maximum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}):n&&b(a,{code:l.too_small,minimum:r.value,type:"string",inclusive:!0,exact:!0,message:r.message}),t.dirty())}else if("email"===r.kind)K.test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"email",code:l.invalid_string,message:r.message}),t.dirty());else if("emoji"===r.kind)W||(W=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),W.test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"emoji",code:l.invalid_string,message:r.message}),t.dirty());else if("uuid"===r.kind)z.test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"uuid",code:l.invalid_string,message:r.message}),t.dirty());else if("nanoid"===r.kind)V.test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"nanoid",code:l.invalid_string,message:r.message}),t.dirty());else if("cuid"===r.kind)D.test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"cuid",code:l.invalid_string,message:r.message}),t.dirty());else if("cuid2"===r.kind)F.test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"cuid2",code:l.invalid_string,message:r.message}),t.dirty());else if("ulid"===r.kind)L.test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"ulid",code:l.invalid_string,message:r.message}),t.dirty());else if("url"===r.kind)try{new URL(e.data)}catch(s){a=this._getOrReturnCtx(e,a),b(a,{validation:"url",code:l.invalid_string,message:r.message}),t.dirty()}else if("regex"===r.kind){r.regex.lastIndex=0;r.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"regex",code:l.invalid_string,message:r.message}),t.dirty())}else if("trim"===r.kind)e.data=e.data.trim();else if("includes"===r.kind)e.data.includes(r.value,r.position)||(a=this._getOrReturnCtx(e,a),b(a,{code:l.invalid_string,validation:{includes:r.value,position:r.position},message:r.message}),t.dirty());else if("toLowerCase"===r.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===r.kind)e.data=e.data.toUpperCase();else if("startsWith"===r.kind)e.data.startsWith(r.value)||(a=this._getOrReturnCtx(e,a),b(a,{code:l.invalid_string,validation:{startsWith:r.value},message:r.message}),t.dirty());else if("endsWith"===r.kind)e.data.endsWith(r.value)||(a=this._getOrReturnCtx(e,a),b(a,{code:l.invalid_string,validation:{endsWith:r.value},message:r.message}),t.dirty());else if("datetime"===r.kind){ae(r).test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{code:l.invalid_string,validation:"datetime",message:r.message}),t.dirty())}else if("date"===r.kind){ee.test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{code:l.invalid_string,validation:"date",message:r.message}),t.dirty())}else if("time"===r.kind){new RegExp(`^${te(r)}$`).test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{code:l.invalid_string,validation:"time",message:r.message}),t.dirty())}else"duration"===r.kind?B.test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"duration",code:l.invalid_string,message:r.message}),t.dirty()):"ip"===r.kind?(s=e.data,("v4"!==(n=r.version)&&n||!q.test(s))&&("v6"!==n&&n||!J.test(s))&&(a=this._getOrReturnCtx(e,a),b(a,{validation:"ip",code:l.invalid_string,message:r.message}),t.dirty())):"jwt"===r.kind?se(e.data,r.alg)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"jwt",code:l.invalid_string,message:r.message}),t.dirty()):"cidr"===r.kind?ne(e.data,r.version)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"cidr",code:l.invalid_string,message:r.message}),t.dirty()):"base64"===r.kind?G.test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"base64",code:l.invalid_string,message:r.message}),t.dirty()):"base64url"===r.kind?X.test(e.data)||(a=this._getOrReturnCtx(e,a),b(a,{validation:"base64url",code:l.invalid_string,message:r.message}),t.dirty()):o.assertNever(r);var s,n;return{status:t.value,value:e.data}}_regex(e,t,a){return this.refinement((t=>e.test(t)),{validation:t,code:l.invalid_string,...S.errToObj(a)})}_addCheck(e){return new re({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...S.errToObj(e)})}url(e){return this._addCheck({kind:"url",...S.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...S.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...S.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...S.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...S.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...S.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...S.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...S.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...S.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...S.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...S.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...S.errToObj(e)})}datetime(e){var t,a;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(a=null==e?void 0:e.local)&&void 0!==a&&a,...S.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...S.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...S.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...S.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...S.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...S.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...S.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...S.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...S.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...S.errToObj(t)})}nonempty(e){return this.min(1,S.errToObj(e))}trim(){return new re({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new re({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new re({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isDate(){return!!this._def.checks.find((e=>"date"===e.kind))}get isTime(){return!!this._def.checks.find((e=>"time"===e.kind))}get isDuration(){return!!this._def.checks.find((e=>"duration"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isNANOID(){return!!this._def.checks.find((e=>"nanoid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get isCIDR(){return!!this._def.checks.find((e=>"cidr"===e.kind))}get isBase64(){return!!this._def.checks.find((e=>"base64"===e.kind))}get isBase64url(){return!!this._def.checks.find((e=>"base64url"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function ie(e,t){const a=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,n=a>s?a:s;return parseInt(e.toFixed(n).replace(".",""))%parseInt(t.toFixed(n).replace(".",""))/Math.pow(10,n)}r.ZodString=re,re.create=e=>{var t;return new re({checks:[],typeName:He.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...$(e)})};class oe extends M{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==c.number){const t=this._getOrReturnCtx(e);return b(t,{code:l.invalid_type,expected:c.number,received:t.parsedType}),x}let t;const a=new k;for(const s of this._def.checks)if("int"===s.kind)o.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),b(t,{code:l.invalid_type,expected:"integer",received:"float",message:s.message}),a.dirty());else if("min"===s.kind){(s.inclusive?e.data<s.value:e.data<=s.value)&&(t=this._getOrReturnCtx(e,t),b(t,{code:l.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),a.dirty())}else if("max"===s.kind){(s.inclusive?e.data>s.value:e.data>=s.value)&&(t=this._getOrReturnCtx(e,t),b(t,{code:l.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),a.dirty())}else"multipleOf"===s.kind?0!==ie(e.data,s.value)&&(t=this._getOrReturnCtx(e,t),b(t,{code:l.not_multiple_of,multipleOf:s.value,message:s.message}),a.dirty()):"finite"===s.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),b(t,{code:l.not_finite,message:s.message}),a.dirty()):o.assertNever(s);return{status:a.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,S.toString(t))}gt(e,t){return this.setLimit("min",e,!1,S.toString(t))}lte(e,t){return this.setLimit("max",e,!0,S.toString(t))}lt(e,t){return this.setLimit("max",e,!1,S.toString(t))}setLimit(e,t,a,s){return new oe({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:a,message:S.toString(s)}]})}_addCheck(e){return new oe({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:S.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:S.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:S.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:S.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:S.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:S.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:S.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:S.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:S.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&o.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const a of this._def.checks){if("finite"===a.kind||"int"===a.kind||"multipleOf"===a.kind)return!0;"min"===a.kind?(null===t||a.value>t)&&(t=a.value):"max"===a.kind&&(null===e||a.value<e)&&(e=a.value)}return Number.isFinite(t)&&Number.isFinite(e)}}r.ZodNumber=oe,oe.create=e=>new oe({checks:[],typeName:He.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...$(e)});class de extends M{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch(t){return this._getInvalidInput(e)}if(this._getType(e)!==c.bigint)return this._getInvalidInput(e);let t;const a=new k;for(const s of this._def.checks)if("min"===s.kind){(s.inclusive?e.data<s.value:e.data<=s.value)&&(t=this._getOrReturnCtx(e,t),b(t,{code:l.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),a.dirty())}else if("max"===s.kind){(s.inclusive?e.data>s.value:e.data>=s.value)&&(t=this._getOrReturnCtx(e,t),b(t,{code:l.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),a.dirty())}else"multipleOf"===s.kind?e.data%s.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),b(t,{code:l.not_multiple_of,multipleOf:s.value,message:s.message}),a.dirty()):o.assertNever(s);return{status:a.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return b(t,{code:l.invalid_type,expected:c.bigint,received:t.parsedType}),x}gte(e,t){return this.setLimit("min",e,!0,S.toString(t))}gt(e,t){return this.setLimit("min",e,!1,S.toString(t))}lte(e,t){return this.setLimit("max",e,!0,S.toString(t))}lt(e,t){return this.setLimit("max",e,!1,S.toString(t))}setLimit(e,t,a,s){return new de({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:a,message:S.toString(s)}]})}_addCheck(e){return new de({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:S.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:S.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:S.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:S.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:S.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}r.ZodBigInt=de,de.create=e=>{var t;return new de({checks:[],typeName:He.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...$(e)})};class ce extends M{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==c.boolean){const t=this._getOrReturnCtx(e);return b(t,{code:l.invalid_type,expected:c.boolean,received:t.parsedType}),x}return w(e.data)}}r.ZodBoolean=ce,ce.create=e=>new ce({typeName:He.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...$(e)});class ue extends M{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==c.date){const t=this._getOrReturnCtx(e);return b(t,{code:l.invalid_type,expected:c.date,received:t.parsedType}),x}if(isNaN(e.data.getTime())){return b(this._getOrReturnCtx(e),{code:l.invalid_date}),x}const t=new k;let a;for(const s of this._def.checks)"min"===s.kind?e.data.getTime()<s.value&&(a=this._getOrReturnCtx(e,a),b(a,{code:l.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),t.dirty()):"max"===s.kind?e.data.getTime()>s.value&&(a=this._getOrReturnCtx(e,a),b(a,{code:l.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),t.dirty()):o.assertNever(s);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ue({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:S.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:S.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}r.ZodDate=ue,ue.create=e=>new ue({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:He.ZodDate,...$(e)});class le extends M{_parse(e){if(this._getType(e)!==c.symbol){const t=this._getOrReturnCtx(e);return b(t,{code:l.invalid_type,expected:c.symbol,received:t.parsedType}),x}return w(e.data)}}r.ZodSymbol=le,le.create=e=>new le({typeName:He.ZodSymbol,...$(e)});class he extends M{_parse(e){if(this._getType(e)!==c.undefined){const t=this._getOrReturnCtx(e);return b(t,{code:l.invalid_type,expected:c.undefined,received:t.parsedType}),x}return w(e.data)}}r.ZodUndefined=he,he.create=e=>new he({typeName:He.ZodUndefined,...$(e)});class pe extends M{_parse(e){if(this._getType(e)!==c.null){const t=this._getOrReturnCtx(e);return b(t,{code:l.invalid_type,expected:c.null,received:t.parsedType}),x}return w(e.data)}}r.ZodNull=pe,pe.create=e=>new pe({typeName:He.ZodNull,...$(e)});class me extends M{constructor(){super(...arguments),this._any=!0}_parse(e){return w(e.data)}}r.ZodAny=me,me.create=e=>new me({typeName:He.ZodAny,...$(e)});class fe extends M{constructor(){super(...arguments),this._unknown=!0}_parse(e){return w(e.data)}}r.ZodUnknown=fe,fe.create=e=>new fe({typeName:He.ZodUnknown,...$(e)});class ye extends M{_parse(e){const t=this._getOrReturnCtx(e);return b(t,{code:l.invalid_type,expected:c.never,received:t.parsedType}),x}}r.ZodNever=ye,ye.create=e=>new ye({typeName:He.ZodNever,...$(e)});class ve extends M{_parse(e){if(this._getType(e)!==c.undefined){const t=this._getOrReturnCtx(e);return b(t,{code:l.invalid_type,expected:c.void,received:t.parsedType}),x}return w(e.data)}}r.ZodVoid=ve,ve.create=e=>new ve({typeName:He.ZodVoid,...$(e)});class _e extends M{_parse(e){const{ctx:t,status:a}=this._processInputParams(e),s=this._def;if(t.parsedType!==c.array)return b(t,{code:l.invalid_type,expected:c.array,received:t.parsedType}),x;if(null!==s.exactLength){const e=t.data.length>s.exactLength.value,n=t.data.length<s.exactLength.value;(e||n)&&(b(t,{code:e?l.too_big:l.too_small,minimum:n?s.exactLength.value:void 0,maximum:e?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),a.dirty())}if(null!==s.minLength&&t.data.length<s.minLength.value&&(b(t,{code:l.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),a.dirty()),null!==s.maxLength&&t.data.length>s.maxLength.value&&(b(t,{code:l.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),a.dirty()),t.common.async)return Promise.all([...t.data].map(((e,a)=>s.type._parseAsync(new P(t,e,t.path,a))))).then((e=>k.mergeArray(a,e)));const n=[...t.data].map(((e,a)=>s.type._parseSync(new P(t,e,t.path,a))));return k.mergeArray(a,n)}get element(){return this._def.type}min(e,t){return new _e({...this._def,minLength:{value:e,message:S.toString(t)}})}max(e,t){return new _e({...this._def,maxLength:{value:e,message:S.toString(t)}})}length(e,t){return new _e({...this._def,exactLength:{value:e,message:S.toString(t)}})}nonempty(e){return this.min(1,e)}}function ge(e){if(e instanceof be){const t={};for(const a in e.shape){const s=e.shape[a];t[a]=De.create(ge(s))}return new be({...e._def,shape:()=>t})}return e instanceof _e?new _e({...e._def,type:ge(e.element)}):e instanceof De?De.create(ge(e.unwrap())):e instanceof Fe?Fe.create(ge(e.unwrap())):e instanceof Oe?Oe.create(e.items.map((e=>ge(e)))):e}r.ZodArray=_e,_e.create=(e,t)=>new _e({type:e,minLength:null,maxLength:null,exactLength:null,typeName:He.ZodArray,...$(t)});class be extends M{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=o.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==c.object){const t=this._getOrReturnCtx(e);return b(t,{code:l.invalid_type,expected:c.object,received:t.parsedType}),x}const{status:t,ctx:a}=this._processInputParams(e),{shape:s,keys:n}=this._getCached(),r=[];if(!(this._def.catchall instanceof ye&&"strip"===this._def.unknownKeys))for(const e in a.data)n.includes(e)||r.push(e);const i=[];for(const e of n){const t=s[e],n=a.data[e];i.push({key:{status:"valid",value:e},value:t._parse(new P(a,n,a.path,e)),alwaysSet:e in a.data})}if(this._def.catchall instanceof ye){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of r)i.push({key:{status:"valid",value:e},value:{status:"valid",value:a.data[e]}});else if("strict"===e)r.length>0&&(b(a,{code:l.unrecognized_keys,keys:r}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of r){const s=a.data[t];i.push({key:{status:"valid",value:t},value:e._parse(new P(a,s,a.path,t)),alwaysSet:t in a.data})}}return a.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of i){const a=await t.key,s=await t.value;e.push({key:a,value:s,alwaysSet:t.alwaysSet})}return e})).then((e=>k.mergeObjectSync(t,e))):k.mergeObjectSync(t,i)}get shape(){return this._def.shape()}strict(e){return S.errToObj,new be({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,a)=>{var s,n,r,i;const o=null!==(r=null===(n=(s=this._def).errorMap)||void 0===n?void 0:n.call(s,t,a).message)&&void 0!==r?r:a.defaultError;return"unrecognized_keys"===t.code?{message:null!==(i=S.errToObj(e).message)&&void 0!==i?i:o}:{message:o}}}:{}})}strip(){return new be({...this._def,unknownKeys:"strip"})}passthrough(){return new be({...this._def,unknownKeys:"passthrough"})}extend(e){return new be({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new be({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:He.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new be({...this._def,catchall:e})}pick(e){const t={};return o.objectKeys(e).forEach((a=>{e[a]&&this.shape[a]&&(t[a]=this.shape[a])})),new be({...this._def,shape:()=>t})}omit(e){const t={};return o.objectKeys(this.shape).forEach((a=>{e[a]||(t[a]=this.shape[a])})),new be({...this._def,shape:()=>t})}deepPartial(){return ge(this)}partial(e){const t={};return o.objectKeys(this.shape).forEach((a=>{const s=this.shape[a];e&&!e[a]?t[a]=s:t[a]=s.optional()})),new be({...this._def,shape:()=>t})}required(e){const t={};return o.objectKeys(this.shape).forEach((a=>{if(e&&!e[a])t[a]=this.shape[a];else{let e=this.shape[a];for(;e instanceof De;)e=e._def.innerType;t[a]=e}})),new be({...this._def,shape:()=>t})}keyof(){return Ie(o.objectKeys(this.shape))}}r.ZodObject=be,be.create=(e,t)=>new be({shape:()=>e,unknownKeys:"strip",catchall:ye.create(),typeName:He.ZodObject,...$(t)}),be.strictCreate=(e,t)=>new be({shape:()=>e,unknownKeys:"strict",catchall:ye.create(),typeName:He.ZodObject,...$(t)}),be.lazycreate=(e,t)=>new be({shape:e,unknownKeys:"strip",catchall:ye.create(),typeName:He.ZodObject,...$(t)});class ke extends M{_parse(e){const{ctx:t}=this._processInputParams(e),a=this._def.options;if(t.common.async)return Promise.all(a.map((async e=>{const a={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:a}),ctx:a}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const a of e)if("dirty"===a.result.status)return t.common.issues.push(...a.ctx.common.issues),a.result;const a=e.map((e=>new p(e.ctx.common.issues)));return b(t,{code:l.invalid_union,unionErrors:a}),x}));{let e;const s=[];for(const n of a){const a={...t,common:{...t.common,issues:[]},parent:null},r=n._parseSync({data:t.data,path:t.path,parent:a});if("valid"===r.status)return r;"dirty"!==r.status||e||(e={result:r,ctx:a}),a.common.issues.length&&s.push(a.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const n=s.map((e=>new p(e)));return b(t,{code:l.invalid_union,unionErrors:n}),x}}get options(){return this._def.options}}r.ZodUnion=ke,ke.create=(e,t)=>new ke({options:e,typeName:He.ZodUnion,...$(t)});const xe=e=>e instanceof Se?xe(e.schema):e instanceof Me?xe(e.innerType()):e instanceof je?[e.value]:e instanceof Pe?e.options:e instanceof Re?o.objectValues(e.enum):e instanceof Le?xe(e._def.innerType):e instanceof he?[void 0]:e instanceof pe?[null]:e instanceof De?[void 0,...xe(e.unwrap())]:e instanceof Fe?[null,...xe(e.unwrap())]:e instanceof Be||e instanceof We?xe(e.unwrap()):e instanceof ze?xe(e._def.innerType):[];class Ze extends M{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==c.object)return b(t,{code:l.invalid_type,expected:c.object,received:t.parsedType}),x;const a=this.discriminator,s=t.data[a],n=this.optionsMap.get(s);return n?t.common.async?n._parseAsync({data:t.data,path:t.path,parent:t}):n._parseSync({data:t.data,path:t.path,parent:t}):(b(t,{code:l.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[a]}),x)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,a){const s=new Map;for(const a of t){const t=xe(a.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const n of t){if(s.has(n))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(n)}`);s.set(n,a)}}return new Ze({typeName:He.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:s,...$(a)})}}function we(e,t){const a=u(e),s=u(t);if(e===t)return{valid:!0,data:e};if(a===c.object&&s===c.object){const a=o.objectKeys(t),s=o.objectKeys(e).filter((e=>-1!==a.indexOf(e))),n={...e,...t};for(const a of s){const s=we(e[a],t[a]);if(!s.valid)return{valid:!1};n[a]=s.data}return{valid:!0,data:n}}if(a===c.array&&s===c.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let s=0;s<e.length;s++){const n=we(e[s],t[s]);if(!n.valid)return{valid:!1};a.push(n.data)}return{valid:!0,data:a}}return a===c.date&&s===c.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}r.ZodDiscriminatedUnion=Ze;class Te extends M{_parse(e){const{status:t,ctx:a}=this._processInputParams(e),s=(e,s)=>{if(T(e)||T(s))return x;const n=we(e.value,s.value);return n.valid?((O(e)||O(s))&&t.dirty(),{status:t.value,value:n.data}):(b(a,{code:l.invalid_intersection_types}),x)};return a.common.async?Promise.all([this._def.left._parseAsync({data:a.data,path:a.path,parent:a}),this._def.right._parseAsync({data:a.data,path:a.path,parent:a})]).then((([e,t])=>s(e,t))):s(this._def.left._parseSync({data:a.data,path:a.path,parent:a}),this._def.right._parseSync({data:a.data,path:a.path,parent:a}))}}r.ZodIntersection=Te,Te.create=(e,t,a)=>new Te({left:e,right:t,typeName:He.ZodIntersection,...$(a)});class Oe extends M{_parse(e){const{status:t,ctx:a}=this._processInputParams(e);if(a.parsedType!==c.array)return b(a,{code:l.invalid_type,expected:c.array,received:a.parsedType}),x;if(a.data.length<this._def.items.length)return b(a,{code:l.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),x;!this._def.rest&&a.data.length>this._def.items.length&&(b(a,{code:l.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const s=[...a.data].map(((e,t)=>{const s=this._def.items[t]||this._def.rest;return s?s._parse(new P(a,e,a.path,t)):null})).filter((e=>!!e));return a.common.async?Promise.all(s).then((e=>k.mergeArray(t,e))):k.mergeArray(t,s)}get items(){return this._def.items}rest(e){return new Oe({...this._def,rest:e})}}r.ZodTuple=Oe,Oe.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Oe({items:e,typeName:He.ZodTuple,rest:null,...$(t)})};class Ne extends M{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:a}=this._processInputParams(e);if(a.parsedType!==c.object)return b(a,{code:l.invalid_type,expected:c.object,received:a.parsedType}),x;const s=[],n=this._def.keyType,r=this._def.valueType;for(const e in a.data)s.push({key:n._parse(new P(a,e,a.path,e)),value:r._parse(new P(a,a.data[e],a.path,e)),alwaysSet:e in a.data});return a.common.async?k.mergeObjectAsync(t,s):k.mergeObjectSync(t,s)}get element(){return this._def.valueType}static create(e,t,a){return new Ne(t instanceof M?{keyType:e,valueType:t,typeName:He.ZodRecord,...$(a)}:{keyType:re.create(),valueType:e,typeName:He.ZodRecord,...$(t)})}}r.ZodRecord=Ne;class Ae extends M{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:a}=this._processInputParams(e);if(a.parsedType!==c.map)return b(a,{code:l.invalid_type,expected:c.map,received:a.parsedType}),x;const s=this._def.keyType,n=this._def.valueType,r=[...a.data.entries()].map((([e,t],r)=>({key:s._parse(new P(a,e,a.path,[r,"key"])),value:n._parse(new P(a,t,a.path,[r,"value"]))})));if(a.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const a of r){const s=await a.key,n=await a.value;if("aborted"===s.status||"aborted"===n.status)return x;"dirty"!==s.status&&"dirty"!==n.status||t.dirty(),e.set(s.value,n.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const a of r){const s=a.key,n=a.value;if("aborted"===s.status||"aborted"===n.status)return x;"dirty"!==s.status&&"dirty"!==n.status||t.dirty(),e.set(s.value,n.value)}return{status:t.value,value:e}}}}r.ZodMap=Ae,Ae.create=(e,t,a)=>new Ae({valueType:t,keyType:e,typeName:He.ZodMap,...$(a)});class Ce extends M{_parse(e){const{status:t,ctx:a}=this._processInputParams(e);if(a.parsedType!==c.set)return b(a,{code:l.invalid_type,expected:c.set,received:a.parsedType}),x;const s=this._def;null!==s.minSize&&a.data.size<s.minSize.value&&(b(a,{code:l.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),null!==s.maxSize&&a.data.size>s.maxSize.value&&(b(a,{code:l.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const n=this._def.valueType;function r(e){const a=new Set;for(const s of e){if("aborted"===s.status)return x;"dirty"===s.status&&t.dirty(),a.add(s.value)}return{status:t.value,value:a}}const i=[...a.data.values()].map(((e,t)=>n._parse(new P(a,e,a.path,t))));return a.common.async?Promise.all(i).then((e=>r(e))):r(i)}min(e,t){return new Ce({...this._def,minSize:{value:e,message:S.toString(t)}})}max(e,t){return new Ce({...this._def,maxSize:{value:e,message:S.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}r.ZodSet=Ce,Ce.create=(e,t)=>new Ce({valueType:e,minSize:null,maxSize:null,typeName:He.ZodSet,...$(t)});class Ee extends M{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==c.function)return b(t,{code:l.invalid_type,expected:c.function,received:t.parsedType}),x;function a(e,a){return _({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,v(),m].filter((e=>!!e)),issueData:{code:l.invalid_arguments,argumentsError:a}})}function s(e,a){return _({data:e,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,v(),m].filter((e=>!!e)),issueData:{code:l.invalid_return_type,returnTypeError:a}})}const n={errorMap:t.common.contextualErrorMap},r=t.data;if(this._def.returns instanceof $e){const e=this;return w((async function(...t){const i=new p([]),o=await e._def.args.parseAsync(t,n).catch((e=>{throw i.addIssue(a(t,e)),i})),d=await Reflect.apply(r,this,o);return await e._def.returns._def.type.parseAsync(d,n).catch((e=>{throw i.addIssue(s(d,e)),i}))}))}{const e=this;return w((function(...t){const i=e._def.args.safeParse(t,n);if(!i.success)throw new p([a(t,i.error)]);const o=Reflect.apply(r,this,i.data),d=e._def.returns.safeParse(o,n);if(!d.success)throw new p([s(o,d.error)]);return d.data}))}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new Ee({...this._def,args:Oe.create(e).rest(fe.create())})}returns(e){return new Ee({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,t,a){return new Ee({args:e||Oe.create([]).rest(fe.create()),returns:t||fe.create(),typeName:He.ZodFunction,...$(a)})}}r.ZodFunction=Ee;class Se extends M{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}r.ZodLazy=Se,Se.create=(e,t)=>new Se({getter:e,typeName:He.ZodLazy,...$(t)});class je extends M{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return b(t,{received:t.data,code:l.invalid_literal,expected:this._def.value}),x}return{status:"valid",value:e.data}}get value(){return this._def.value}}function Ie(e,t){return new Pe({values:e,typeName:He.ZodEnum,...$(t)})}r.ZodLiteral=je,je.create=(e,t)=>new je({value:e,typeName:He.ZodLiteral,...$(t)});class Pe extends M{constructor(){super(...arguments),j.set(this,void 0)}_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),a=this._def.values;return b(t,{expected:o.joinValues(a),received:t.parsedType,code:l.invalid_type}),x}if(C(this,j,"f")||E(this,j,new Set(this._def.values),"f"),!C(this,j,"f").has(e.data)){const t=this._getOrReturnCtx(e),a=this._def.values;return b(t,{received:t.data,code:l.invalid_enum_value,options:a}),x}return w(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Pe.create(e,{...this._def,...t})}exclude(e,t=this._def){return Pe.create(this.options.filter((t=>!e.includes(t))),{...this._def,...t})}}r.ZodEnum=Pe,j=new WeakMap,Pe.create=Ie;class Re extends M{constructor(){super(...arguments),I.set(this,void 0)}_parse(e){const t=o.getValidEnumValues(this._def.values),a=this._getOrReturnCtx(e);if(a.parsedType!==c.string&&a.parsedType!==c.number){const e=o.objectValues(t);return b(a,{expected:o.joinValues(e),received:a.parsedType,code:l.invalid_type}),x}if(C(this,I,"f")||E(this,I,new Set(o.getValidEnumValues(this._def.values)),"f"),!C(this,I,"f").has(e.data)){const e=o.objectValues(t);return b(a,{received:a.data,code:l.invalid_enum_value,options:e}),x}return w(e.data)}get enum(){return this._def.values}}r.ZodNativeEnum=Re,I=new WeakMap,Re.create=(e,t)=>new Re({values:e,typeName:He.ZodNativeEnum,...$(t)});class $e extends M{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==c.promise&&!1===t.common.async)return b(t,{code:l.invalid_type,expected:c.promise,received:t.parsedType}),x;const a=t.parsedType===c.promise?t.data:Promise.resolve(t.data);return w(a.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}}r.ZodPromise=$e,$e.create=(e,t)=>new $e({type:e,typeName:He.ZodPromise,...$(t)});class Me extends M{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===He.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:a}=this._processInputParams(e),s=this._def.effect||null,n={addIssue:e=>{b(a,e),e.fatal?t.abort():t.dirty()},get path(){return a.path}};if(n.addIssue=n.addIssue.bind(n),"preprocess"===s.type){const e=s.transform(a.data,n);if(a.common.async)return Promise.resolve(e).then((async e=>{if("aborted"===t.value)return x;const s=await this._def.schema._parseAsync({data:e,path:a.path,parent:a});return"aborted"===s.status?x:"dirty"===s.status||"dirty"===t.value?Z(s.value):s}));{if("aborted"===t.value)return x;const s=this._def.schema._parseSync({data:e,path:a.path,parent:a});return"aborted"===s.status?x:"dirty"===s.status||"dirty"===t.value?Z(s.value):s}}if("refinement"===s.type){const e=e=>{const t=s.refinement(e,n);if(a.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===a.common.async){const s=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});return"aborted"===s.status?x:("dirty"===s.status&&t.dirty(),e(s.value),{status:t.value,value:s.value})}return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then((a=>"aborted"===a.status?x:("dirty"===a.status&&t.dirty(),e(a.value).then((()=>({status:t.value,value:a.value}))))))}if("transform"===s.type){if(!1===a.common.async){const e=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});if(!N(e))return e;const r=s.transform(e.value,n);if(r instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:r}}return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then((e=>N(e)?Promise.resolve(s.transform(e.value,n)).then((e=>({status:t.value,value:e}))):e))}o.assertNever(s)}}r.ZodTransformer=r.ZodEffects=Me,Me.create=(e,t,a)=>new Me({schema:e,typeName:He.ZodEffects,effect:t,...$(a)}),Me.createWithPreprocess=(e,t,a)=>new Me({schema:t,effect:{type:"preprocess",transform:e},typeName:He.ZodEffects,...$(a)});class De extends M{_parse(e){return this._getType(e)===c.undefined?w(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}r.ZodOptional=De,De.create=(e,t)=>new De({innerType:e,typeName:He.ZodOptional,...$(t)});class Fe extends M{_parse(e){return this._getType(e)===c.null?w(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}r.ZodNullable=Fe,Fe.create=(e,t)=>new Fe({innerType:e,typeName:He.ZodNullable,...$(t)});class Le extends M{_parse(e){const{ctx:t}=this._processInputParams(e);let a=t.data;return t.parsedType===c.undefined&&(a=this._def.defaultValue()),this._def.innerType._parse({data:a,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}r.ZodDefault=Le,Le.create=(e,t)=>new Le({innerType:e,typeName:He.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...$(t)});class ze extends M{_parse(e){const{ctx:t}=this._processInputParams(e),a={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:a.data,path:a.path,parent:{...a}});return A(s)?s.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new p(a.common.issues)},input:a.data})}))):{status:"valid",value:"valid"===s.status?s.value:this._def.catchValue({get error(){return new p(a.common.issues)},input:a.data})}}removeCatch(){return this._def.innerType}}r.ZodCatch=ze,ze.create=(e,t)=>new ze({innerType:e,typeName:He.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...$(t)});class Ve extends M{_parse(e){if(this._getType(e)!==c.nan){const t=this._getOrReturnCtx(e);return b(t,{code:l.invalid_type,expected:c.nan,received:t.parsedType}),x}return{status:"valid",value:e.data}}}r.ZodNaN=Ve,Ve.create=e=>new Ve({typeName:He.ZodNaN,...$(e)});const Ue=r.BRAND=Symbol("zod_brand");class Be extends M{_parse(e){const{ctx:t}=this._processInputParams(e),a=t.data;return this._def.type._parse({data:a,path:t.path,parent:t})}unwrap(){return this._def.type}}r.ZodBranded=Be;class Ke extends M{_parse(e){const{status:t,ctx:a}=this._processInputParams(e);if(a.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:a.data,path:a.path,parent:a});return"aborted"===e.status?x:"dirty"===e.status?(t.dirty(),Z(e.value)):this._def.out._parseAsync({data:e.value,path:a.path,parent:a})})()}{const e=this._def.in._parseSync({data:a.data,path:a.path,parent:a});return"aborted"===e.status?x:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:a.path,parent:a})}}static create(e,t){return new Ke({in:e,out:t,typeName:He.ZodPipeline})}}r.ZodPipeline=Ke;class We extends M{_parse(e){const t=this._def.innerType._parse(e),a=e=>(N(e)&&(e.value=Object.freeze(e.value)),e);return A(t)?t.then((e=>a(e))):a(t)}unwrap(){return this._def.innerType}}function qe(e,t){const a="function"==typeof e?e(t):"string"==typeof e?{message:e}:e;return"string"==typeof a?{message:a}:a}function Ye(e,t={},a){return e?me.create().superRefine(((s,n)=>{var r,i;const o=e(s);if(o instanceof Promise)return o.then((e=>{var r,i;if(!e){const e=qe(t,s),o=null===(i=null!==(r=e.fatal)&&void 0!==r?r:a)||void 0===i||i;n.addIssue({code:"custom",...e,fatal:o})}}));if(!o){const e=qe(t,s),o=null===(i=null!==(r=e.fatal)&&void 0!==r?r:a)||void 0===i||i;n.addIssue({code:"custom",...e,fatal:o})}})):me.create()}r.ZodReadonly=We,We.create=(e,t)=>new We({innerType:e,typeName:He.ZodReadonly,...$(t)});const Je=r.late={object:be.lazycreate};var He;!(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(He||(r.ZodFirstPartyTypeKind=He={}));const Ge=(e,t={message:`Input not instance of ${e.name}`})=>Ye((t=>t instanceof e),t);r.instanceof=Ge;const Xe=r.string=re.create,Qe=r.number=oe.create,et=r.nan=Ve.create,tt=r.bigint=de.create,at=r.boolean=ce.create,st=r.date=ue.create,nt=r.symbol=le.create,rt=r.undefined=he.create,it=r.null=pe.create,ot=r.any=me.create,dt=r.unknown=fe.create,ct=r.never=ye.create,ut=r.void=ve.create,lt=r.array=_e.create,ht=r.object=be.create,pt=r.strictObject=be.strictCreate,mt=r.union=ke.create,ft=r.discriminatedUnion=Ze.create,yt=r.intersection=Te.create,vt=r.tuple=Oe.create,_t=r.record=Ne.create,gt=r.map=Ae.create,bt=r.set=Ce.create,kt=r.function=Ee.create,xt=r.lazy=Se.create,Zt=r.literal=je.create,wt=r.enum=Pe.create,Tt=r.nativeEnum=Re.create,Ot=r.promise=$e.create,Nt=r.transformer=r.effect=Me.create,At=r.optional=De.create,Ct=r.nullable=Fe.create,Et=r.preprocess=Me.createWithPreprocess,St=r.pipeline=Ke.create,jt=()=>Xe().optional();r.ostring=jt;const It=()=>Qe().optional();r.onumber=It;const Pt=()=>at().optional();r.oboolean=Pt;const Rt=r.coerce={string:e=>re.create({...e,coerce:!0}),number:e=>oe.create({...e,coerce:!0}),boolean:e=>ce.create({...e,coerce:!0}),bigint:e=>de.create({...e,coerce:!0}),date:e=>ue.create({...e,coerce:!0})},$t=r.NEVER=x;r.z=r.default=Object.freeze({__proto__:null,defaultErrorMap:m,setErrorMap:y,getErrorMap:v,makeIssue:_,EMPTY_PATH:g,addIssueToContext:b,ParseStatus:k,INVALID:x,DIRTY:Z,OK:w,isAborted:T,isDirty:O,isValid:N,isAsync:A,get util(){return o},get objectUtil(){return d},ZodParsedType:c,getParsedType:u,ZodType:M,datetimeRegex:ae,ZodString:re,ZodNumber:oe,ZodBigInt:de,ZodBoolean:ce,ZodDate:ue,ZodSymbol:le,ZodUndefined:he,ZodNull:pe,ZodAny:me,ZodUnknown:fe,ZodNever:ye,ZodVoid:ve,ZodArray:_e,ZodObject:be,ZodUnion:ke,ZodDiscriminatedUnion:Ze,ZodIntersection:Te,ZodTuple:Oe,ZodRecord:Ne,ZodMap:Ae,ZodSet:Ce,ZodFunction:Ee,ZodLazy:Se,ZodLiteral:je,ZodEnum:Pe,ZodNativeEnum:Re,ZodPromise:$e,ZodEffects:Me,ZodTransformer:Me,ZodOptional:De,ZodNullable:Fe,ZodDefault:Le,ZodCatch:ze,ZodNaN:Ve,BRAND:Ue,ZodBranded:Be,ZodPipeline:Ke,ZodReadonly:We,custom:Ye,Schema:M,ZodSchema:M,late:Je,get ZodFirstPartyTypeKind(){return He},coerce:Rt,any:ot,array:lt,bigint:tt,boolean:at,date:st,discriminatedUnion:ft,effect:Nt,enum:wt,function:kt,instanceof:Ge,intersection:yt,lazy:xt,literal:Zt,map:gt,nan:et,nativeEnum:Tt,never:ct,null:it,nullable:Ct,number:Qe,object:ht,oboolean:Pt,onumber:It,optional:At,ostring:jt,pipeline:St,preprocess:Et,promise:Ot,record:_t,set:bt,strictObject:pt,string:Xe,symbol:nt,transformer:Nt,tuple:vt,undefined:rt,union:mt,unknown:dt,void:ut,NEVER:$t,ZodIssueCode:l,quotelessJson:h,ZodError:p})}),3739,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0});var n=r(d[0]);Object.keys(n).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===n[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}}))}));var t=r(d[1]);Object.keys(t).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===t[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}}))}));var u=r(d[2]);Object.keys(u).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===u[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return u[n]}}))}));var o=r(d[3]);Object.keys(o).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===o[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return o[n]}}))}));var c=r(d[4]);Object.keys(c).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===c[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return c[n]}}))}));var f=r(d[5]);Object.keys(f).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===f[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return f[n]}}))}));var l=r(d[6]);Object.keys(l).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===l[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return l[n]}}))}));var b=r(d[7]);Object.keys(b).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===b[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return b[n]}}))}));var _=r(d[8]);Object.keys(_).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===_[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return _[n]}}))}));var j=r(d[9]);Object.keys(j).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===j[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return j[n]}}))}));var s=r(d[10]);Object.keys(s).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===s[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return s[n]}}))}));var y=r(d[11]);Object.keys(y).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===y[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return y[n]}}))}));var O=r(d[12]);Object.keys(O).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===O[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return O[n]}}))}));var p=r(d[13]);Object.keys(p).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===p[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return p[n]}}))}));var v=r(d[14]);Object.keys(v).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===v[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return v[n]}}))}))}),3740,[3741,3747,3742,3743,3758,3759,3763,3764,3765,3766,3806,3753,3757,3771,3756]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.TableAliasProxyHandler=e.RelationTableAliasProxyHandler=e.ColumnAliasProxyHandler=void 0,e.aliasedRelation=function(n,l){return new Proxy(n,new c(l))},e.aliasedTable=b,e.aliasedTableColumn=P,e.mapColumnsInAliasedSQLToAlias=w,e.mapColumnsInSQLToAlias=x;var n=r(d[0]),l=r(d[1]),s=r(d[2]),t=r(d[3]),o=r(d[4]);class u{constructor(n){this.table=n}static[l.entityKind]="ColumnAliasProxyHandler";get(n,l){return"table"===l?this.table:n[l]}}e.ColumnAliasProxyHandler=u;class y{constructor(n,l){this.alias=n,this.replaceOriginalName=l}static[l.entityKind]="TableAliasProxyHandler";get(s,y){if(y===t.Table.Symbol.IsAlias)return!0;if(y===t.Table.Symbol.Name)return this.alias;if(this.replaceOriginalName&&y===t.Table.Symbol.OriginalName)return this.alias;if(y===o.ViewBaseConfig)return{...s[o.ViewBaseConfig],name:this.alias,isAlias:!0};if(y===t.Table.Symbol.Columns){const n=s[t.Table.Symbol.Columns];if(!n)return n;const l={};return Object.keys(n).map((t=>{l[t]=new Proxy(n[t],new u(new Proxy(s,this)))})),l}const c=s[y];return(0,l.is)(c,n.Column)?new Proxy(c,new u(new Proxy(s,this))):c}}e.TableAliasProxyHandler=y;class c{constructor(n){this.alias=n}static[l.entityKind]="RelationTableAliasProxyHandler";get(n,l){return"sourceTable"===l?b(n.sourceTable,this.alias):n[l]}}function b(n,l){return new Proxy(n,new y(l,!1))}function P(n,l){return new Proxy(n,new u(new Proxy(n.table,new y(l,!1))))}function w(n,l){return new s.SQL.Aliased(x(n.sql,l),n.fieldAlias)}function x(t,o){return s.sql.join(t.queryChunks.map((t=>(0,l.is)(t,n.Column)?P(t,o):(0,l.is)(t,s.SQL)?x(t,o):(0,l.is)(t,s.SQL.Aliased)?w(t,o):t)))}e.RelationTableAliasProxyHandler=c}),3741,[3742,3743,3744,3757,3756]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.Column=void 0;var t=r(d[0]);class n{constructor(t,n){this.table=t,this.config=n,this.name=n.name,this.keyAsName=n.keyAsName,this.notNull=n.notNull,this.default=n.default,this.defaultFn=n.defaultFn,this.onUpdateFn=n.onUpdateFn,this.hasDefault=n.hasDefault,this.primary=n.primaryKey,this.isUnique=n.isUnique,this.uniqueName=n.uniqueName,this.uniqueType=n.uniqueType,this.dataType=n.dataType,this.columnType=n.columnType,this.generated=n.generated,this.generatedIdentity=n.generatedIdentity}static[t.entityKind]="Column";enumValues=void 0;generated=void 0;generatedIdentity=void 0;mapFromDriverValue(t){return t}mapToDriverValue(t){return t}shouldDisableInsert(){return void 0!==this.config.generated&&"byDefault"!==this.config.generated.type}}e.Column=n}),3742,[3743]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.hasOwnEntityKind=e.entityKind=void 0,e.is=function(n,o){if(!n||"object"!=typeof n)return!1;if(n instanceof o)return!0;if(!Object.prototype.hasOwnProperty.call(o,t))throw new Error(`Class "${o.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let s=Object.getPrototypeOf(n).constructor;if(s)for(;s;){if(t in s&&s[t]===o[t])return!0;s=Object.getPrototypeOf(s)}return!1};const t=e.entityKind=Symbol.for("drizzle:entityKind");e.hasOwnEntityKind=Symbol.for("drizzle:hasOwnEntityKind")}),3743,[]);
__d((function(g,r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.View=e.StringChunk=e.SQL=e.Placeholder=e.Param=e.Name=e.FakePrimitiveParam=void 0,e.fillPlaceholders=function(t,i){return t.map((t=>{if((0,n.is)(t,Q)){if(!(t.name in i))throw new Error(`No value for placeholder "${t.name}" was provided`);return i[t.name]}if((0,n.is)(t,b)&&(0,n.is)(t.value,Q)){if(!(t.value.name in i))throw new Error(`No value for placeholder "${t.value.name}" was provided`);return t.encoder.mapToDriverValue(i[t.value.name])}return t}))},e.getViewName=function(n){return n[o.ViewBaseConfig].name},e.isDriverValueEncoder=function(n){return"object"==typeof n&&null!==n&&"mapToDriverValue"in n&&"function"==typeof n.mapToDriverValue},e.isSQLWrapper=p,e.isView=function(n){return"object"==typeof n&&null!==n&&L in n},e.name=function(n){return new S(n)},e.noopMapper=e.noopEncoder=e.noopDecoder=void 0,e.param=function(n,t){return new b(n,t)},e.placeholder=function(n){return new Q(n)},e.sql=q;var n=r(d[0]),t=r(d[1]),i=r(d[2]),s=r(d[3]),o=r(d[4]),u=r(d[5]),l=r(d[6]);class c{static[n.entityKind]="FakePrimitiveParam"}function p(n){return null!=n&&"function"==typeof n.getSQL}function h(n){const t={sql:"",params:[]};for(const i of n)t.sql+=i.sql,t.params.push(...i.params),i.typings?.length&&(t.typings||(t.typings=[]),t.typings.push(...i.typings));return t}e.FakePrimitiveParam=c;class f{static[n.entityKind]="StringChunk";constructor(n){this.value=Array.isArray(n)?n:[n]}getSQL(){return new y([this])}}e.StringChunk=f;class y{constructor(n){this.queryChunks=n}static[n.entityKind]="SQL";decoder=w;shouldInlineParams=!1;append(n){return this.queryChunks.push(...n.queryChunks),this}toQuery(n){return s.tracer.startActiveSpan("drizzle.buildSQL",(t=>{const i=this.buildQueryFromSourceParams(this.queryChunks,n);return t?.setAttributes({"drizzle.query.text":i.sql,"drizzle.query.params":JSON.stringify(i.params)}),i}))}buildQueryFromSourceParams(s,c){const w=Object.assign({},c,{inlineParams:c.inlineParams||this.shouldInlineParams,paramStartIndex:c.paramStartIndex||{value:0}}),{casing:v,escapeName:q,escapeParam:P,prepareTyping:L,inlineParams:A,paramStartIndex:C}=w;return h(s.map((s=>{if((0,n.is)(s,f))return{sql:s.value.join(""),params:[]};if((0,n.is)(s,S))return{sql:q(s.value),params:[]};if(void 0===s)return{sql:"",params:[]};if(Array.isArray(s)){const n=[new f("(")];for(const[t,i]of s.entries())n.push(i),t<s.length-1&&n.push(new f(", "));return n.push(new f(")")),this.buildQueryFromSourceParams(n,w)}if((0,n.is)(s,y))return this.buildQueryFromSourceParams(s.queryChunks,{...w,inlineParams:A||s.shouldInlineParams});if((0,n.is)(s,l.Table)){const n=s[l.Table.Symbol.Schema],t=s[l.Table.Symbol.Name];return{sql:void 0===n||s[l.IsAlias]?q(t):q(n)+"."+q(t),params:[]}}if((0,n.is)(s,u.Column)){const n=v.getColumnCasing(s);if("indexes"===c.invokeSource)return{sql:q(n),params:[]};const t=s.table[l.Table.Symbol.Schema];return{sql:s.table[l.IsAlias]||void 0===t?q(s.table[l.Table.Symbol.Name])+"."+q(n):q(t)+"."+q(s.table[l.Table.Symbol.Name])+"."+q(n),params:[]}}if((0,n.is)(s,V)){const n=s[o.ViewBaseConfig].schema,t=s[o.ViewBaseConfig].name;return{sql:void 0===n||s[o.ViewBaseConfig].isAlias?q(t):q(n)+"."+q(t),params:[]}}if((0,n.is)(s,b)){if((0,n.is)(s.value,Q))return{sql:P(C.value++,s),params:[s],typings:["none"]};const t=null===s.value?null:s.encoder.mapToDriverValue(s.value);if((0,n.is)(t,y))return this.buildQueryFromSourceParams([t],w);if(A)return{sql:this.mapInlineParam(t,w),params:[]};let i=["none"];return L&&(i=[L(s.encoder)]),{sql:P(C.value++,t),params:[t],typings:i}}return(0,n.is)(s,Q)?{sql:P(C.value++,s),params:[s],typings:["none"]}:(0,n.is)(s,y.Aliased)&&void 0!==s.fieldAlias?{sql:q(s.fieldAlias),params:[]}:(0,n.is)(s,i.Subquery)?s._.isWith?{sql:q(s._.alias),params:[]}:this.buildQueryFromSourceParams([new f("("),s._.sql,new f(") "),new S(s._.alias)],w):(0,t.isPgEnum)(s)?s.schema?{sql:q(s.schema)+"."+q(s.enumName),params:[]}:{sql:q(s.enumName),params:[]}:p(s)?s.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([s.getSQL()],w):this.buildQueryFromSourceParams([new f("("),s.getSQL(),new f(")")],w):A?{sql:this.mapInlineParam(s,w),params:[]}:{sql:P(C.value++,s),params:[s],typings:["none"]}})))}mapInlineParam(n,{escapeString:t}){if(null===n)return"null";if("number"==typeof n||"boolean"==typeof n)return n.toString();if("string"==typeof n)return t(n);if("object"==typeof n){const i=n.toString();return t("[object Object]"===i?JSON.stringify(n):i)}throw new Error("Unexpected param value: "+n)}getSQL(){return this}as(n){return void 0===n?this:new y.Aliased(this,n)}mapWith(n){return this.decoder="function"==typeof n?{mapFromDriverValue:n}:n,this}inlineParams(){return this.shouldInlineParams=!0,this}if(n){return n?this:void 0}}e.SQL=y;class S{constructor(n){this.value=n}static[n.entityKind]="Name";getSQL(){return new y([this])}}e.Name=S;const w=e.noopDecoder={mapFromDriverValue:n=>n},v=e.noopEncoder={mapToDriverValue:n=>n};e.noopMapper={...w,...v};class b{constructor(n,t=v){this.value=n,this.encoder=t}static[n.entityKind]="Param";getSQL(){return new y([this])}}function q(n,...t){const i=[];(t.length>0||n.length>0&&""!==n[0])&&i.push(new f(n[0]));for(const[s,o]of t.entries())i.push(o,new f(n[s+1]));return new y(i)}var P;e.Param=b,(P=q||(e.sql=q={})).empty=function(){return new y([])},P.fromList=function(n){return new y(n)},P.raw=function(n){return new y([new f(n)])},P.join=function(n,t){const i=[];for(const[s,o]of n.entries())s>0&&void 0!==t&&i.push(t),i.push(o);return new y(i)},P.identifier=function(n){return new S(n)},P.placeholder=function(n){return new Q(n)},P.param=function(n,t){return new b(n,t)},(t=>{class i{constructor(n,t){this.sql=n,this.fieldAlias=t}static[n.entityKind]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new i(this.sql,this.fieldAlias)}}t.Aliased=i})(y||(e.SQL=y={}));class Q{constructor(n){this.name=n}static[n.entityKind]="Placeholder";getSQL(){return new y([this])}}e.Placeholder=Q;const L=Symbol.for("drizzle:IsDrizzleView");class V{static[n.entityKind]="View";[L]=!0;constructor({name:n,schema:t,selectedFields:i,query:s}){this[o.ViewBaseConfig]={name:n,originalName:n,schema:t,selectedFields:i,query:s,isExisting:!s,isAlias:!1}}getSQL(){return new y([this])}}e.View=V,u.Column.prototype.getSQL=function(){return new y([this])},l.Table.prototype.getSQL=function(){return new y([this])},i.Subquery.prototype.getSQL=function(){return new y([this])}}),3744,[3743,3745,3753,3754,3756,3742,3757]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgEnumColumnBuilder=e.PgEnumColumn=void 0,e.isPgEnum=function(n){return!!n&&"function"==typeof n&&t in n&&!0===n[t]},e.pgEnum=function(n,u){return c(n,u,void 0)},e.pgEnumWithSchema=c;var n=r(d[0]),u=r(d[1]);const t=Symbol.for("drizzle:isPgEnum");class o extends u.PgColumnBuilder{static[n.entityKind]="PgEnumColumnBuilder";constructor(n,u){super(n,"string","PgEnumColumn"),this.config.enum=u}build(n){return new s(n,this.config)}}e.PgEnumColumnBuilder=o;class s extends u.PgColumn{static[n.entityKind]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(n,u){super(n,u),this.enum=u.enum}getSQLType(){return this.enum.enumName}}function c(n,u,s){const c=Object.assign((n=>new o(n??"",c)),{enumName:n,enumValues:u,schema:s,[t]:!0});return c}e.PgEnumColumn=s}),3745,[3743,3746]);
__d((function(g,r,i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgColumnBuilder=e.PgColumn=e.PgArrayBuilder=e.PgArray=e.IndexedColumn=e.ExtraConfigColumn=void 0;var n=r(d[0]),s=r(d[1]),t=r(d[2]),o=r(d[3]),u=r(d[4]),a=r(d[5]),l=r(d[6]);class c extends n.ColumnBuilder{foreignKeyConfigs=[];static[t.entityKind]="PgColumnBuilder";array(n){return new y(this.config.name,this,n)}references(n,s={}){return this.foreignKeyConfigs.push({ref:n,actions:s}),this}unique(n,s){return this.config.isUnique=!0,this.config.uniqueName=n,this.config.uniqueType=s?.nulls,this}generatedAlwaysAs(n){return this.config.generated={as:n,type:"always",mode:"stored"},this}buildForeignKeys(n,s){return this.foreignKeyConfigs.map((({ref:t,actions:a})=>(0,u.iife)(((t,u)=>{const a=new o.ForeignKeyBuilder((()=>{const s=t();return{columns:[n],foreignColumns:[s]}}));return u.onUpdate&&a.onUpdate(u.onUpdate),u.onDelete&&a.onDelete(u.onDelete),a.build(s)}),t,a)))}buildExtraConfigColumn(n){return new f(n,this.config)}}e.PgColumnBuilder=c;class h extends s.Column{constructor(n,s){s.uniqueName||(s.uniqueName=(0,a.uniqueKeyName)(n,[s.name])),super(n,s),this.table=n}static[t.entityKind]="PgColumn"}e.PgColumn=h;class f extends h{static[t.entityKind]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(n){return this.indexConfig.opClass=n,this}}e.ExtraConfigColumn=f;class C{static[t.entityKind]="IndexedColumn";constructor(n,s,t,o){this.name=n,this.keyAsName=s,this.type=t,this.indexConfig=o}}e.IndexedColumn=C;class y extends c{static[t.entityKind]="PgArrayBuilder";constructor(n,s,t){super(n,"array","PgArray"),this.config.baseBuilder=s,this.config.size=t}build(n){const s=this.config.baseBuilder.build(n);return new p(n,this.config,s)}}e.PgArrayBuilder=y;class p extends h{constructor(n,s,t,o){super(n,s),this.baseColumn=t,this.range=o,this.size=s.size}static[t.entityKind]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${"number"==typeof this.size?this.size:""}]`}mapFromDriverValue(n){return"string"==typeof n&&(n=(0,l.parsePgArray)(n)),n.map((n=>this.baseColumn.mapFromDriverValue(n)))}mapToDriverValue(n,s=!1){const o=n.map((n=>null===n?null:(0,t.is)(this.baseColumn,p)?this.baseColumn.mapToDriverValue(n,!0):this.baseColumn.mapToDriverValue(n)));return s?o:(0,l.makePgArray)(o)}}e.PgArray=p}),3746,[3747,3742,3743,3748,3750,3751,3752]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ColumnBuilder=void 0;var t=r(d[0]);class n{static[t.entityKind]="ColumnBuilder";constructor(t,n,u){this.config={name:t,keyAsName:""===t,notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:n,columnType:u,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(t){return this.config.default=t,this.config.hasDefault=!0,this}$defaultFn(t){return this.config.defaultFn=t,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(t){return this.config.onUpdateFn=t,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(t){""===this.config.name&&(this.config.name=t)}}e.ColumnBuilder=n}),3747,[3743]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ForeignKeyBuilder=e.ForeignKey=void 0,e.foreignKey=function(n){return new o((function(){const{name:t,columns:o,foreignColumns:s}=n;return{name:t,columns:o,foreignColumns:s}}))};var n=r(d[0]),t=r(d[1]);class o{static[n.entityKind]="PgForeignKeyBuilder";_onUpdate="no action";_onDelete="no action";constructor(n,t){this.reference=()=>{const{name:t,columns:o,foreignColumns:s}=n();return{name:t,columns:o,foreignTable:s[0].table,foreignColumns:s}},t&&(this._onUpdate=t.onUpdate,this._onDelete=t.onDelete)}onUpdate(n){return this._onUpdate=void 0===n?"no action":n,this}onDelete(n){return this._onDelete=void 0===n?"no action":n,this}build(n){return new s(n,this)}}e.ForeignKeyBuilder=o;class s{constructor(n,t){this.table=n,this.reference=t.reference,this.onUpdate=t._onUpdate,this.onDelete=t._onDelete}static[n.entityKind]="PgForeignKey";getName(){const{name:n,columns:o,foreignColumns:s}=this.reference(),l=o.map((n=>n.name)),c=s.map((n=>n.name)),u=[this.table[t.TableName],...l,s[0].table[t.TableName],...c];return n??`${u.join("_")}_fk`}}e.ForeignKey=s}),3748,[3743,3749]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.TableName=void 0;e.TableName=Symbol.for("drizzle:Name")}),3749,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.iife=function(n,...t){return n(...t)}}),3750,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.UniqueOnConstraintBuilder=e.UniqueConstraintBuilder=e.UniqueConstraint=void 0,e.unique=function(n){return new o(n)},e.uniqueKeyName=s;var n=r(d[0]),t=r(d[1]);function s(n,s){return`${n[t.TableName]}_${s.join("_")}_unique`}class u{constructor(n,t){this.name=t,this.columns=n}static[n.entityKind]="PgUniqueConstraintBuilder";nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(n){return new l(n,this.columns,this.nullsNotDistinctConfig,this.name)}}e.UniqueConstraintBuilder=u;class o{static[n.entityKind]="PgUniqueOnConstraintBuilder";constructor(n){this.name=n}on(...n){return new u(n,this.name)}}e.UniqueOnConstraintBuilder=o;class l{constructor(n,t,u,o){this.table=n,this.columns=t,this.name=o??s(this.table,this.columns.map((n=>n.name))),this.nullsNotDistinct=u}static[n.entityKind]="PgUniqueConstraint";nullsNotDistinct=!1;getName(){return this.name}}e.UniqueConstraint=l}),3751,[3743,3749]);
__d((function(g,r,_i,a,m,e,d){function n(n,t,c){for(let i=t;i<n.length;i++){const o=n[i];if("\\"!==o){if('"'===o)return[n.slice(t,i).replace(/\\/g,""),i+1];if(!c&&(","===o||"}"===o))return[n.slice(t,i).replace(/\\/g,""),i]}else i++}return[n.slice(t).replace(/\\/g,""),n.length]}function t(c,i=0){const o=[];let u=i,s=!1;for(;u<c.length;){const f=c[u];if(","===f){(s||u===i)&&o.push(""),s=!0,u++;continue}if(s=!1,"\\"===f){u+=2;continue}if('"'===f){const[t,i]=n(c,u+1,!0);o.push(t),u=i;continue}if("}"===f)return[o,u+1];if("{"===f){const[n,i]=t(c,u+1);o.push(n),u=i;continue}const[l,p]=n(c,u,!1);o.push(l),u=p}return[o,u]}Object.defineProperty(e,"__esModule",{value:!0}),e.makePgArray=function n(t){return`{${t.map((t=>Array.isArray(t)?n(t):"string"==typeof t?`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${t}`)).join(",")}}`},e.parsePgArray=function(n){const[c]=t(n,1);return c},e.parsePgNestedArray=t}),3752,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.WithSubquery=e.Subquery=void 0;var t=r(d[0]);class u{static[t.entityKind]="Subquery";constructor(t,u,s,n=!1){this._={brand:"Subquery",sql:t,selectedFields:u,alias:s,isWith:n}}}e.Subquery=u;class s extends u{static[t.entityKind]="WithSubquery"}e.WithSubquery=s}),3753,[3743]);
__d((function(g,r,i,a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.tracer=void 0;r(d[0]),r(d[1]);_e.tracer={startActiveSpan:(e,t)=>t()}}),3754,[3750,3755]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.npmVersion=e.compatibilityVersion=void 0;e.npmVersion="0.41.0",e.compatibilityVersion=10}),3755,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ViewBaseConfig=void 0;e.ViewBaseConfig=Symbol.for("drizzle:ViewBaseConfig")}),3756,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.Table=e.Schema=e.OriginalName=e.IsAlias=e.ExtraConfigColumns=e.ExtraConfigBuilder=e.Columns=e.BaseName=void 0,e.getTableName=function(l){return l[o.TableName]},e.getTableUniqueName=function(l){return`${l[n]??"public"}.${l[o.TableName]}`},e.isTable=function(l){return"object"==typeof l&&null!==l&&c in l};var l=r(d[0]),o=r(d[1]);const n=e.Schema=Symbol.for("drizzle:Schema"),t=e.Columns=Symbol.for("drizzle:Columns"),s=e.ExtraConfigColumns=Symbol.for("drizzle:ExtraConfigColumns"),u=e.OriginalName=Symbol.for("drizzle:OriginalName"),b=e.BaseName=Symbol.for("drizzle:BaseName"),f=e.IsAlias=Symbol.for("drizzle:IsAlias"),z=e.ExtraConfigBuilder=Symbol.for("drizzle:ExtraConfigBuilder"),c=Symbol.for("drizzle:IsDrizzleTable");class C{static[l.entityKind]="Table";static Symbol={Name:o.TableName,Schema:n,OriginalName:u,Columns:t,ExtraConfigColumns:s,BaseName:b,IsAlias:f,ExtraConfigBuilder:z};[f]=!1;[c]=!0;[z]=void 0;constructor(l,t,s){this[o.TableName]=this[u]=l,this[n]=t,this[b]=s}}e.Table=C}),3757,[3743,3749]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.TransactionRollbackError=e.DrizzleError=void 0;var s=r(d[0]);class o extends Error{static[s.entityKind]="DrizzleError";constructor({message:s,cause:o}){super(s),this.name="DrizzleError",this.cause=o}}e.DrizzleError=o;class t extends o{static[s.entityKind]="TransactionRollbackError";constructor(){super({message:"Rollback"})}}e.TransactionRollbackError=t}),3758,[3743]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0});var n=r(d[0]);Object.keys(n).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===n[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}}))}))}),3759,[3760]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0});var n=r(d[0]);Object.keys(n).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===n[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}}))}));var t=r(d[1]);Object.keys(t).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===t[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}}))}))}),3760,[3761,3762]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.and=function(...n){const t=n.filter((n=>void 0!==n));if(0===t.length)return;if(1===t.length)return new s.SQL(t);return new s.SQL([new s.StringChunk("("),s.sql.join(t,new s.StringChunk(" and ")),new s.StringChunk(")")])},e.arrayContained=function(n,t){if(Array.isArray(t)){if(0===t.length)throw new Error("arrayContained requires at least one value");const l=s.sql`${u(t,n)}`;return s.sql`${n} <@ ${l}`}return s.sql`${n} <@ ${u(t,n)}`},e.arrayContains=function(n,t){if(Array.isArray(t)){if(0===t.length)throw new Error("arrayContains requires at least one value");const l=s.sql`${u(t,n)}`;return s.sql`${n} @> ${l}`}return s.sql`${n} @> ${u(t,n)}`},e.arrayOverlaps=function(n,t){if(Array.isArray(t)){if(0===t.length)throw new Error("arrayOverlaps requires at least one value");const l=s.sql`${u(t,n)}`;return s.sql`${n} && ${l}`}return s.sql`${n} && ${u(t,n)}`},e.between=function(n,t,l){return s.sql`${n} between ${u(t,n)} and ${u(l,n)}`},e.bindIfParam=u,e.eq=void 0,e.exists=function(n){return s.sql`exists ${n}`},e.gte=e.gt=void 0,e.ilike=function(n,t){return s.sql`${n} ilike ${t}`},e.inArray=function(n,t){if(Array.isArray(t))return 0===t.length?s.sql`false`:s.sql`${n} in ${t.map((t=>u(t,n)))}`;return s.sql`${n} in ${u(t,n)}`},e.isNotNull=function(n){return s.sql`${n} is not null`},e.isNull=function(n){return s.sql`${n} is null`},e.like=function(n,t){return s.sql`${n} like ${t}`},e.ne=e.lte=e.lt=void 0,e.not=function(n){return s.sql`not ${n}`},e.notBetween=function(n,t,l){return s.sql`${n} not between ${u(t,n)} and ${u(l,n)}`},e.notExists=function(n){return s.sql`not exists ${n}`},e.notIlike=function(n,t){return s.sql`${n} not ilike ${t}`},e.notInArray=function(n,t){if(Array.isArray(t))return 0===t.length?s.sql`true`:s.sql`${n} not in ${t.map((t=>u(t,n)))}`;return s.sql`${n} not in ${u(t,n)}`},e.notLike=function(n,t){return s.sql`${n} not like ${t}`},e.or=function(...n){const t=n.filter((n=>void 0!==n));if(0===t.length)return;if(1===t.length)return new s.SQL(t);return new s.SQL([new s.StringChunk("("),s.sql.join(t,new s.StringChunk(" or ")),new s.StringChunk(")")])};var n=r(d[0]),t=r(d[1]),l=r(d[2]),s=r(d[3]);function u(u,o){return!(0,s.isDriverValueEncoder)(o)||(0,s.isSQLWrapper)(u)||(0,t.is)(u,s.Param)||(0,t.is)(u,s.Placeholder)||(0,t.is)(u,n.Column)||(0,t.is)(u,l.Table)||(0,t.is)(u,s.View)?u:new s.Param(u,o)}e.eq=(n,t)=>s.sql`${n} = ${u(t,n)}`;e.ne=(n,t)=>s.sql`${n} <> ${u(t,n)}`;e.gt=(n,t)=>s.sql`${n} > ${u(t,n)}`;e.gte=(n,t)=>s.sql`${n} >= ${u(t,n)}`;e.lt=(n,t)=>s.sql`${n} < ${u(t,n)}`;e.lte=(n,t)=>s.sql`${n} <= ${u(t,n)}`}),3761,[3742,3743,3757,3744]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.asc=function(c){return n.sql`${c} asc`},e.desc=function(c){return n.sql`${c} desc`};var n=r(d[0])}),3762,[3744]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.NoopLogger=e.DefaultLogger=e.ConsoleLogWriter=void 0;var t=r(d[0]);class o{static[t.entityKind]="ConsoleLogWriter";write(t){console.log(t)}}e.ConsoleLogWriter=o;class n{static[t.entityKind]="DefaultLogger";constructor(t){this.writer=t?.writer??new o}logQuery(t,o){const n=o.map((t=>{try{return JSON.stringify(t)}catch{return String(t)}})),s=n.length?` -- params: [${n.join(", ")}]`:"";this.writer.write(`Query: ${t}${s}`)}}e.DefaultLogger=n;class s{static[t.entityKind]="NoopLogger";logQuery(){}}e.NoopLogger=s}),3763,[3743]);
__d((function(g,r,i,a,m,e,d){}),3764,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.QueryPromise=void 0;var t=r(d[0]);class n{static[t.entityKind]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(t){return this.then(void 0,t)}finally(t){return this.then((n=>(t?.(),n)),(n=>{throw t?.(),n}))}then(t,n){return this.execute().then(t,n)}}e.QueryPromise=n}),3765,[3743]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.Relations=e.Relation=e.One=e.Many=void 0,e.createMany=h,e.createOne=T,e.createTableRelationsHelpers=function(n){return{one:T(n),many:h(n)}},e.extractTablesRelationalConfig=function(t,s){1===Object.keys(t).length&&"default"in t&&!(0,o.is)(t.default,n.Table)&&(t=t.default);const c={},f={},b={};for(const[y,T]of Object.entries(t))if((0,o.is)(T,n.Table)){const t=(0,n.getTableUniqueName)(T),s=f[t];c[t]=y,b[y]={tsName:y,dbName:T[n.Table.Symbol.Name],schema:T[n.Table.Symbol.Schema],columns:T[n.Table.Symbol.Columns],relations:s?.relations??{},primaryKey:s?.primaryKey??[]};for(const t of Object.values(T[n.Table.Symbol.Columns]))t.primary&&b[y].primaryKey.push(t);const u=T[n.Table.Symbol.ExtraConfigBuilder]?.(T[n.Table.Symbol.ExtraConfigColumns]);if(u)for(const n of Object.values(u))(0,o.is)(n,l.PrimaryKeyBuilder)&&b[y].primaryKey.push(...n.columns)}else if((0,o.is)(T,u)){const t=(0,n.getTableUniqueName)(T.table),o=c[t],l=T.config(s(T.table));let u;for(const[n,s]of Object.entries(l))if(o){const t=b[o];t.relations[n]=s,u&&t.primaryKey.push(...u)}else t in f||(f[t]={relations:{},primaryKey:u}),f[t].relations[n]=s}return{tables:b,tableNamesMap:c}},e.getOperators=function(){return{and:s.and,between:s.between,eq:s.eq,exists:s.exists,gt:s.gt,gte:s.gte,ilike:s.ilike,inArray:s.inArray,isNull:s.isNull,isNotNull:s.isNotNull,like:s.like,lt:s.lt,lte:s.lte,ne:s.ne,not:s.not,notBetween:s.notBetween,notExists:s.notExists,notLike:s.notLike,notIlike:s.notIlike,notInArray:s.notInArray,or:s.or,sql:c.sql}},e.getOrderByOperators=function(){return{sql:c.sql,asc:s.asc,desc:s.desc}},e.mapRelationalRow=function n(l,s,f,u,y=n=>n){const T={};for(const[h,N]of u.entries())if(N.isJson){const t=s.relations[N.tsKey],c=f[h],u="string"==typeof c?JSON.parse(c):c;T[N.tsKey]=(0,o.is)(t,b)?u&&n(l,l[N.relationTableTsKey],u,N.selection,y):u.map((t=>n(l,l[N.relationTableTsKey],t,N.selection,y)))}else{const n=y(f[h]),l=N.field;let s;s=(0,o.is)(l,t.Column)?l:(0,o.is)(l,c.SQL)?l.decoder:l.sql.decoder,T[N.tsKey]=null===n?null:s.mapFromDriverValue(n)}return T},e.normalizeRelation=function(t,l,s){if((0,o.is)(s,b)&&s.config)return{fields:s.config.fields,references:s.config.references};const c=l[(0,n.getTableUniqueName)(s.referencedTable)];if(!c)throw new Error(`Table "${s.referencedTable[n.Table.Symbol.Name]}" not found in schema`);const f=t[c];if(!f)throw new Error(`Table "${c}" not found in schema`);const u=s.sourceTable,y=l[(0,n.getTableUniqueName)(u)];if(!y)throw new Error(`Table "${u[n.Table.Symbol.Name]}" not found in schema`);const T=[];for(const n of Object.values(f.relations))(s.relationName&&s!==n&&n.relationName===s.relationName||!s.relationName&&n.referencedTable===s.sourceTable)&&T.push(n);if(T.length>1)throw s.relationName?new Error(`There are multiple relations with name "${s.relationName}" in table "${c}"`):new Error(`There are multiple relations between "${c}" and "${s.sourceTable[n.Table.Symbol.Name]}". Please specify relation name`);if(T[0]&&(0,o.is)(T[0],b)&&T[0].config)return{fields:T[0].config.references,references:T[0].config.fields};throw new Error(`There is not enough information to infer relation "${y}.${s.fieldName}"`)},e.relations=function(n,t){return new u(n,(n=>Object.fromEntries(Object.entries(t(n)).map((([n,t])=>[n,t.withFieldName(n)])))))};var n=r(d[0]),t=r(d[1]),o=r(d[2]),l=r(d[3]),s=r(d[4]),c=r(d[5]);class f{constructor(t,o,l){this.sourceTable=t,this.referencedTable=o,this.relationName=l,this.referencedTableName=o[n.Table.Symbol.Name]}static[o.entityKind]="Relation"}e.Relation=f;class u{constructor(n,t){this.table=n,this.config=t}static[o.entityKind]="Relations"}e.Relations=u;class b extends f{constructor(n,t,o,l){super(n,t,o?.relationName),this.config=o,this.isNullable=l}static[o.entityKind]="One";withFieldName(n){const t=new b(this.sourceTable,this.referencedTable,this.config,this.isNullable);return t.fieldName=n,t}}e.One=b;class y extends f{constructor(n,t,o){super(n,t,o?.relationName),this.config=o}static[o.entityKind]="Many";withFieldName(n){const t=new y(this.sourceTable,this.referencedTable,this.config);return t.fieldName=n,t}}function T(n){return function(t,o){return new b(n,t,o,o?.fields.reduce(((n,t)=>n&&t.notNull),!0)??!1)}}function h(n){return function(t,o){return new y(n,t,o)}}e.Many=y}),3766,[3757,3742,3743,3767,3760,3744]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PrimaryKeyBuilder=e.PrimaryKey=void 0,e.primaryKey=function(...t){if(t[0].columns)return new s(t[0].columns,t[0].name);return new s(t)};var t=r(d[0]),n=r(d[1]);class s{static[t.entityKind]="PgPrimaryKeyBuilder";constructor(t,n){this.columns=t,this.name=n}build(t){return new u(t,this.columns,this.name)}}e.PrimaryKeyBuilder=s;class u{constructor(t,n,s){this.table=t,this.columns=n,this.name=s}static[t.entityKind]="PgPrimaryKey";getName(){return this.name??`${this.table[n.PgTable.Symbol.Name]}_${this.columns.map((t=>t.name)).join("_")}_pk`}}e.PrimaryKey=u}),3767,[3743,3768]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.pgTable=e.PgTable=e.InlineForeignKeys=e.EnableRLS=void 0,e.pgTableCreator=function(n){return(l,o,t)=>u(n(l),o,t,void 0,l)},e.pgTableWithSchema=u;var n=r(d[0]),l=r(d[1]),o=r(d[2]);const t=e.InlineForeignKeys=Symbol.for("drizzle:PgInlineForeignKeys"),b=e.EnableRLS=Symbol.for("drizzle:EnableRLS");class s extends l.Table{static[n.entityKind]="PgTable";static Symbol=Object.assign({},l.Table.Symbol,{InlineForeignKeys:t,EnableRLS:b});[t]=[];[b]=!1;[l.Table.Symbol.ExtraConfigBuilder]=void 0;[l.Table.Symbol.ExtraConfigColumns]={}}function u(n,b,u,c,y=n){const S=new s(n,c,y),f="function"==typeof b?b((0,o.getPgColumnBuilders)()):b,T=Object.fromEntries(Object.entries(f).map((([n,l])=>{const o=l;o.setName(n);const b=o.build(S);return S[t].push(...o.buildForeignKeys(b,S)),[n,b]}))),E=Object.fromEntries(Object.entries(f).map((([n,l])=>{const o=l;o.setName(n);return[n,o.buildExtraConfigColumn(S)]}))),C=Object.assign(S,T);return C[l.Table.Symbol.Columns]=T,C[l.Table.Symbol.ExtraConfigColumns]=E,u&&(C[s.Symbol.ExtraConfigBuilder]=u),Object.assign(C,{enableRLS:()=>(C[s.Symbol.EnableRLS]=!0,C)})}e.PgTable=s;e.pgTable=(n,l,o)=>u(n,l,o,void 0)}),3768,[3743,3757,3769]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getPgColumnBuilders=function(){return{bigint:t.bigint,bigserial:n.bigserial,boolean:l.boolean,char:s.char,cidr:c.cidr,customType:o.customType,date:u.date,doublePrecision:b.doublePrecision,inet:v.inet,integer:p.integer,interval:h.interval,json:f.json,jsonb:j.jsonb,line:y.line,macaddr:P.macaddr,macaddr8:_.macaddr8,numeric:x.numeric,point:T.point,geometry:B.geometry,real:C.real,serial:M.serial,smallint:O.smallint,smallserial:k.smallserial,text:q.text,time:w.time,timestamp:z.timestamp,uuid:A.uuid,varchar:D.varchar,bit:E.bit,halfvec:F.halfvec,sparsevec:G.sparsevec,vector:H.vector}};var t=r(d[0]),n=r(d[1]),l=r(d[2]),s=r(d[3]),c=r(d[4]),o=r(d[5]),u=r(d[6]),b=r(d[7]),v=r(d[8]),p=r(d[9]),h=r(d[10]),f=r(d[11]),j=r(d[12]),y=r(d[13]),P=r(d[14]),_=r(d[15]),x=r(d[16]),T=r(d[17]),B=r(d[18]),C=r(d[19]),M=r(d[20]),O=r(d[21]),k=r(d[22]),q=r(d[23]),w=r(d[24]),z=r(d[25]),A=r(d[26]),D=r(d[27]),E=r(d[28]),F=r(d[29]),G=r(d[30]),H=r(d[31])}),3769,[3770,3773,3774,3775,3776,3777,3778,3780,3781,3782,3783,3784,3785,3786,3787,3788,3789,3790,3791,3793,3794,3795,3796,3797,3798,3799,3800,3801,3802,3803,3804,3805]);
__d((function(g,r,i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgBigInt64Builder=e.PgBigInt64=e.PgBigInt53Builder=e.PgBigInt53=void 0,e.bigint=function(n,u){const{name:s,config:l}=(0,t.getColumnNameAndConfig)(n,u);if("number"===l.mode)return new B(s);return new o(s)};var n=r(d[0]),t=r(d[1]),u=r(d[2]),s=r(d[3]);class B extends s.PgIntColumnBaseBuilder{static[n.entityKind]="PgBigInt53Builder";constructor(n){super(n,"number","PgBigInt53")}build(n){return new l(n,this.config)}}e.PgBigInt53Builder=B;class l extends u.PgColumn{static[n.entityKind]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(n){return"number"==typeof n?n:Number(n)}}e.PgBigInt53=l;class o extends s.PgIntColumnBaseBuilder{static[n.entityKind]="PgBigInt64Builder";constructor(n){super(n,"bigint","PgBigInt64")}build(n){return new c(n,this.config)}}e.PgBigInt64Builder=o;class c extends u.PgColumn{static[n.entityKind]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(n){return BigInt(n)}}e.PgBigInt64=c}),3770,[3743,3771,3746,3772]);
__d((function(g,r,i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.applyMixins=function(t,n){for(const o of n)for(const n of Object.getOwnPropertyNames(o.prototype))"constructor"!==n&&Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(o.prototype,n)||Object.create(null))},e.getColumnNameAndConfig=function(t,n){return{name:"string"==typeof t&&t.length>0?t:"",config:"object"==typeof t?t:n}},e.getTableColumns=function(t){return t[s.Table.Symbol.Columns]},e.getTableLikeName=function(t){return(0,n.is)(t,l.Subquery)?t._.alias:(0,n.is)(t,o.View)?t[c.ViewBaseConfig].name:(0,n.is)(t,o.SQL)?void 0:t[s.Table.Symbol.IsAlias]?t[s.Table.Symbol.Name]:t[s.Table.Symbol.BaseName]},e.getViewSelectedFields=function(t){return t[c.ViewBaseConfig].selectedFields},e.haveSameKeys=function(t,n){const o=Object.keys(t),l=Object.keys(n);if(o.length!==l.length)return!1;for(const[t,n]of o.entries())if(n!==l[t])return!1;return!0},e.isConfig=function(t){if("object"!=typeof t||null===t)return!1;if("Object"!==t.constructor.name)return!1;if("logger"in t){const n=typeof t.logger;return"boolean"===n||"object"===n&&"function"==typeof t.logger.logQuery||"undefined"===n}if("schema"in t){const n=typeof t.schema;return"object"===n||"undefined"===n}if("casing"in t){const n=typeof t.casing;return"string"===n||"undefined"===n}if("mode"in t)return"default"===t.mode&&"planetscale"===t.mode&&void 0===t.mode;if("connection"in t){const n=typeof t.connection;return"string"===n||"object"===n||"undefined"===n}if("client"in t){const n=typeof t.client;return"object"===n||"function"===n||"undefined"===n}return 0===Object.keys(t).length},e.mapResultRow=function(l,c,u){const f={},a=l.reduce(((l,{path:a,field:b},p)=>{let y;y=(0,n.is)(b,t.Column)?b:(0,n.is)(b,o.SQL)?b.decoder:b.sql.decoder;let j=l;for(const[o,l]of a.entries())if(o<a.length-1)l in j||(j[l]={}),j=j[l];else{const o=c[p],h=j[l]=null===o?null:y.mapFromDriverValue(o);if(u&&(0,n.is)(b,t.Column)&&2===a.length){const t=a[0];t in f?"string"==typeof f[t]&&f[t]!==(0,s.getTableName)(b.table)&&(f[t]=!1):f[t]=null===h&&(0,s.getTableName)(b.table)}}return l}),{});if(u&&Object.keys(f).length>0)for(const[t,n]of Object.entries(f))"string"!=typeof n||u[n]||(a[t]=null);return a},e.mapUpdateSet=function(l,c){const u=Object.entries(c).filter((([,t])=>void 0!==t)).map((([c,u])=>(0,n.is)(u,o.SQL)||(0,n.is)(u,t.Column)?[c,u]:[c,new o.Param(u,l[s.Table.Symbol.Columns][c])]));if(0===u.length)throw new Error("No values to set");return Object.fromEntries(u)},e.orderSelectedFields=function l(c,u){return Object.entries(c).reduce(((c,[f,a])=>{if("string"!=typeof f)return c;const b=u?[...u,f]:[f];return(0,n.is)(a,t.Column)||(0,n.is)(a,o.SQL)||(0,n.is)(a,o.SQL.Aliased)?c.push({path:b,field:a}):(0,n.is)(a,s.Table)?c.push(...l(a[s.Table.Symbol.Columns],b)):c.push(...l(a,b)),c}),[])};var t=r(d[0]),n=r(d[1]),o=r(d[2]),l=r(d[3]),s=r(d[4]),c=r(d[5])}),3771,[3742,3743,3744,3753,3757,3756]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgIntColumnBaseBuilder=void 0;var t=r(d[0]),n=r(d[1]);class s extends n.PgColumnBuilder{static[t.entityKind]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(t){if(t){const{name:n,...s}=t;this.config.generatedIdentity={type:"always",sequenceName:n,sequenceOptions:s}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(t){if(t){const{name:n,...s}=t;this.config.generatedIdentity={type:"byDefault",sequenceName:n,sequenceOptions:s}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}e.PgIntColumnBaseBuilder=s}),3772,[3743,3746]);
__d((function(g,r,i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgBigSerial64Builder=e.PgBigSerial64=e.PgBigSerial53Builder=e.PgBigSerial53=void 0,e.bigserial=function(n,l){const{name:a,config:o}=(0,t.getColumnNameAndConfig)(n,l);if("number"===o.mode)return new u(a);return new s(a)};var n=r(d[0]),t=r(d[1]),l=r(d[2]);class u extends l.PgColumnBuilder{static[n.entityKind]="PgBigSerial53Builder";constructor(n){super(n,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(n){return new a(n,this.config)}}e.PgBigSerial53Builder=u;class a extends l.PgColumn{static[n.entityKind]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(n){return"number"==typeof n?n:Number(n)}}e.PgBigSerial53=a;class s extends l.PgColumnBuilder{static[n.entityKind]="PgBigSerial64Builder";constructor(n){super(n,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(n){return new o(n,this.config)}}e.PgBigSerial64Builder=s;class o extends l.PgColumn{static[n.entityKind]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(n){return BigInt(n)}}e.PgBigSerial64=o}),3773,[3743,3771,3746]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgBooleanBuilder=e.PgBoolean=void 0,e.boolean=function(n){return new l(n??"")};var n=r(d[0]),o=r(d[1]);class l extends o.PgColumnBuilder{static[n.entityKind]="PgBooleanBuilder";constructor(n){super(n,"boolean","PgBoolean")}build(n){return new t(n,this.config)}}e.PgBooleanBuilder=l;class t extends o.PgColumn{static[n.entityKind]="PgBoolean";getSQLType(){return"boolean"}}e.PgBoolean=t}),3774,[3743,3746]);
__d((function(g,r,i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgCharBuilder=e.PgChar=void 0,e.char=function(n,u={}){const{name:s,config:a}=(0,t.getColumnNameAndConfig)(n,u);return new h(s,a)};var n=r(d[0]),t=r(d[1]),u=r(d[2]);class h extends u.PgColumnBuilder{static[n.entityKind]="PgCharBuilder";constructor(n,t){super(n,"string","PgChar"),this.config.length=t.length,this.config.enumValues=t.enum}build(n){return new s(n,this.config)}}e.PgCharBuilder=h;class s extends u.PgColumn{static[n.entityKind]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"char":`char(${this.length})`}}e.PgChar=s}),3775,[3743,3771,3746]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgCidrBuilder=e.PgCidr=void 0,e.cidr=function(t){return new u(t??"")};var t=r(d[0]),n=r(d[1]);class u extends n.PgColumnBuilder{static[t.entityKind]="PgCidrBuilder";constructor(t){super(t,"string","PgCidr")}build(t){return new s(t,this.config)}}e.PgCidrBuilder=u;class s extends n.PgColumn{static[t.entityKind]="PgCidr";getSQLType(){return"cidr"}}e.PgCidr=s}),3776,[3743,3746]);
__d((function(g,r,i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgCustomColumnBuilder=e.PgCustomColumn=void 0,e.customType=function(t){return(u,s)=>{const{name:a,config:l}=(0,o.getColumnNameAndConfig)(u,s);return new n(a,l,t)}};var t=r(d[0]),o=r(d[1]),u=r(d[2]);class n extends u.PgColumnBuilder{static[t.entityKind]="PgCustomColumnBuilder";constructor(t,o,u){super(t,"custom","PgCustomColumn"),this.config.fieldConfig=o,this.config.customTypeParams=u}build(t){return new s(t,this.config)}}e.PgCustomColumnBuilder=n;class s extends u.PgColumn{static[t.entityKind]="PgCustomColumn";constructor(t,o){super(t,o),this.sqlName=o.customTypeParams.dataType(o.fieldConfig),this.mapTo=o.customTypeParams.toDriver,this.mapFrom=o.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(t){return"function"==typeof this.mapFrom?this.mapFrom(t):t}mapToDriverValue(t){return"function"==typeof this.mapTo?this.mapTo(t):t}}e.PgCustomColumn=s}),3777,[3743,3771,3746]);
__d((function(g,r,i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgDateStringBuilder=e.PgDateString=e.PgDateBuilder=e.PgDate=void 0,e.date=function(t,a){const{name:u,config:l}=(0,n.getColumnNameAndConfig)(t,a);if("date"===l?.mode)return new s(u);return new o(u)};var t=r(d[0]),n=r(d[1]),a=r(d[2]),u=r(d[3]);class s extends u.PgDateColumnBaseBuilder{static[t.entityKind]="PgDateBuilder";constructor(t){super(t,"date","PgDate")}build(t){return new l(t,this.config)}}e.PgDateBuilder=s;class l extends a.PgColumn{static[t.entityKind]="PgDate";getSQLType(){return"date"}mapFromDriverValue(t){return new Date(t)}mapToDriverValue(t){return t.toISOString()}}e.PgDate=l;class o extends u.PgDateColumnBaseBuilder{static[t.entityKind]="PgDateStringBuilder";constructor(t){super(t,"string","PgDateString")}build(t){return new c(t,this.config)}}e.PgDateStringBuilder=o;class c extends a.PgColumn{static[t.entityKind]="PgDateString";getSQLType(){return"date"}}e.PgDateString=c}),3778,[3743,3771,3746,3779]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgDateColumnBaseBuilder=void 0;var t=r(d[0]),l=r(d[1]),u=r(d[2]);class n extends u.PgColumnBuilder{static[t.entityKind]="PgDateColumnBaseBuilder";defaultNow(){return this.default(l.sql`now()`)}}e.PgDateColumnBaseBuilder=n}),3779,[3743,3744,3746]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgDoublePrecisionBuilder=e.PgDoublePrecision=void 0,e.doublePrecision=function(n){return new u(n??"")};var n=r(d[0]),o=r(d[1]);class u extends o.PgColumnBuilder{static[n.entityKind]="PgDoublePrecisionBuilder";constructor(n){super(n,"number","PgDoublePrecision")}build(n){return new t(n,this.config)}}e.PgDoublePrecisionBuilder=u;class t extends o.PgColumn{static[n.entityKind]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(n){return"string"==typeof n?Number.parseFloat(n):n}}e.PgDoublePrecision=t}),3780,[3743,3746]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgInetBuilder=e.PgInet=void 0,e.inet=function(t){return new u(t??"")};var t=r(d[0]),n=r(d[1]);class u extends n.PgColumnBuilder{static[t.entityKind]="PgInetBuilder";constructor(t){super(t,"string","PgInet")}build(t){return new s(t,this.config)}}e.PgInetBuilder=u;class s extends n.PgColumn{static[t.entityKind]="PgInet";getSQLType(){return"inet"}}e.PgInet=s}),3781,[3743,3746]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgIntegerBuilder=e.PgInteger=void 0,e.integer=function(t){return new s(t??"")};var t=r(d[0]),n=r(d[1]),u=r(d[2]);class s extends u.PgIntColumnBaseBuilder{static[t.entityKind]="PgIntegerBuilder";constructor(t){super(t,"number","PgInteger")}build(t){return new l(t,this.config)}}e.PgIntegerBuilder=s;class l extends n.PgColumn{static[t.entityKind]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(t){return"string"==typeof t?Number.parseInt(t):t}}e.PgInteger=l}),3782,[3743,3746,3772]);
__d((function(g,r,i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgIntervalBuilder=e.PgInterval=void 0,e.interval=function(n,s={}){const{name:o,config:a}=(0,t.getColumnNameAndConfig)(n,s);return new l(o,a)};var n=r(d[0]),t=r(d[1]),s=r(d[2]);class l extends s.PgColumnBuilder{static[n.entityKind]="PgIntervalBuilder";constructor(n,t){super(n,"string","PgInterval"),this.config.intervalConfig=t}build(n){return new o(n,this.config)}}e.PgIntervalBuilder=l;class o extends s.PgColumn{static[n.entityKind]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){return`interval${this.fields?` ${this.fields}`:""}${this.precision?`(${this.precision})`:""}`}}e.PgInterval=o}),3783,[3743,3771,3746]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgJsonBuilder=e.PgJson=void 0,e.json=function(n){return new s(n??"")};var n=r(d[0]),t=r(d[1]);class s extends t.PgColumnBuilder{static[n.entityKind]="PgJsonBuilder";constructor(n){super(n,"json","PgJson")}build(n){return new o(n,this.config)}}e.PgJsonBuilder=s;class o extends t.PgColumn{static[n.entityKind]="PgJson";constructor(n,t){super(n,t)}getSQLType(){return"json"}mapToDriverValue(n){return JSON.stringify(n)}mapFromDriverValue(n){if("string"==typeof n)try{return JSON.parse(n)}catch{return n}return n}}e.PgJson=o}),3784,[3743,3746]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgJsonbBuilder=e.PgJsonb=void 0,e.jsonb=function(n){return new s(n??"")};var n=r(d[0]),t=r(d[1]);class s extends t.PgColumnBuilder{static[n.entityKind]="PgJsonbBuilder";constructor(n){super(n,"json","PgJsonb")}build(n){return new o(n,this.config)}}e.PgJsonbBuilder=s;class o extends t.PgColumn{static[n.entityKind]="PgJsonb";constructor(n,t){super(n,t)}getSQLType(){return"jsonb"}mapToDriverValue(n){return JSON.stringify(n)}mapFromDriverValue(n){if("string"==typeof n)try{return JSON.parse(n)}catch{return n}return n}}e.PgJsonb=o}),3785,[3743,3746]);
__d((function(g,r,i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgLineTuple=e.PgLineBuilder=e.PgLineABCBuilder=e.PgLineABC=void 0,e.line=function(n,u){const{name:s,config:o}=(0,t.getColumnNameAndConfig)(n,u);if(!o?.mode||"tuple"===o.mode)return new l(s);return new a(s)};var n=r(d[0]),t=r(d[1]),u=r(d[2]);class l extends u.PgColumnBuilder{static[n.entityKind]="PgLineBuilder";constructor(n){super(n,"array","PgLine")}build(n){return new s(n,this.config)}}e.PgLineBuilder=l;class s extends u.PgColumn{static[n.entityKind]="PgLine";getSQLType(){return"line"}mapFromDriverValue(n){const[t,u,l]=n.slice(1,-1).split(",");return[Number.parseFloat(t),Number.parseFloat(u),Number.parseFloat(l)]}mapToDriverValue(n){return`{${n[0]},${n[1]},${n[2]}}`}}e.PgLineTuple=s;class a extends u.PgColumnBuilder{static[n.entityKind]="PgLineABCBuilder";constructor(n){super(n,"json","PgLineABC")}build(n){return new o(n,this.config)}}e.PgLineABCBuilder=a;class o extends u.PgColumn{static[n.entityKind]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(n){const[t,u,l]=n.slice(1,-1).split(",");return{a:Number.parseFloat(t),b:Number.parseFloat(u),c:Number.parseFloat(l)}}mapToDriverValue(n){return`{${n.a},${n.b},${n.c}}`}}e.PgLineABC=o}),3786,[3743,3771,3746]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgMacaddrBuilder=e.PgMacaddr=void 0,e.macaddr=function(t){return new c(t??"")};var t=r(d[0]),n=r(d[1]);class c extends n.PgColumnBuilder{static[t.entityKind]="PgMacaddrBuilder";constructor(t){super(t,"string","PgMacaddr")}build(t){return new u(t,this.config)}}e.PgMacaddrBuilder=c;class u extends n.PgColumn{static[t.entityKind]="PgMacaddr";getSQLType(){return"macaddr"}}e.PgMacaddr=u}),3787,[3743,3746]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgMacaddr8Builder=e.PgMacaddr8=void 0,e.macaddr8=function(t){return new c(t??"")};var t=r(d[0]),n=r(d[1]);class c extends n.PgColumnBuilder{static[t.entityKind]="PgMacaddr8Builder";constructor(t){super(t,"string","PgMacaddr8")}build(t){return new u(t,this.config)}}e.PgMacaddr8Builder=c;class u extends n.PgColumn{static[t.entityKind]="PgMacaddr8";getSQLType(){return"macaddr8"}}e.PgMacaddr8=u}),3788,[3743,3746]);
__d((function(g,r,i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.decimal=e.PgNumericNumberBuilder=e.PgNumericNumber=e.PgNumericBuilder=e.PgNumericBigIntBuilder=e.PgNumericBigInt=e.PgNumeric=void 0,e.numeric=h;var n=r(d[0]),s=r(d[1]),c=r(d[2]);class t extends c.PgColumnBuilder{static[n.entityKind]="PgNumericBuilder";constructor(n,s,c){super(n,"string","PgNumeric"),this.config.precision=s,this.config.scale=c}build(n){return new u(n,this.config)}}e.PgNumericBuilder=t;class u extends c.PgColumn{static[n.entityKind]="PgNumeric";constructor(n,s){super(n,s),this.precision=s.precision,this.scale=s.scale}mapFromDriverValue(n){return"string"==typeof n?n:String(n)}getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}e.PgNumeric=u;class o extends c.PgColumnBuilder{static[n.entityKind]="PgNumericNumberBuilder";constructor(n,s,c){super(n,"number","PgNumericNumber"),this.config.precision=s,this.config.scale=c}build(n){return new l(n,this.config)}}e.PgNumericNumberBuilder=o;class l extends c.PgColumn{static[n.entityKind]="PgNumericNumber";constructor(n,s){super(n,s),this.precision=s.precision,this.scale=s.scale}mapFromDriverValue(n){return"number"==typeof n?n:Number(n)}mapToDriverValue=String;getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}e.PgNumericNumber=l;class a extends c.PgColumnBuilder{static[n.entityKind]="PgNumericBigIntBuilder";constructor(n,s,c){super(n,"bigint","PgNumericBigInt"),this.config.precision=s,this.config.scale=c}build(n){return new p(n,this.config)}}e.PgNumericBigIntBuilder=a;class p extends c.PgColumn{static[n.entityKind]="PgNumericBigInt";constructor(n,s){super(n,s),this.precision=s.precision,this.scale=s.scale}mapFromDriverValue=BigInt;mapToDriverValue=String;getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}function h(n,c){const{name:u,config:l}=(0,s.getColumnNameAndConfig)(n,c),p=l?.mode;return"number"===p?new o(u,l?.precision,l?.scale):"bigint"===p?new a(u,l?.precision,l?.scale):new t(u,l?.precision,l?.scale)}e.PgNumericBigInt=p;e.decimal=h}),3789,[3743,3771,3746]);
__d((function(g,r,i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgPointTupleBuilder=e.PgPointTuple=e.PgPointObjectBuilder=e.PgPointObject=void 0,e.point=function(t,o){const{name:l,config:P}=(0,n.getColumnNameAndConfig)(t,o);if(!P?.mode||"tuple"===P.mode)return new u(l);return new s(l)};var t=r(d[0]),n=r(d[1]),o=r(d[2]);class u extends o.PgColumnBuilder{static[t.entityKind]="PgPointTupleBuilder";constructor(t){super(t,"array","PgPointTuple")}build(t){return new l(t,this.config)}}e.PgPointTupleBuilder=u;class l extends o.PgColumn{static[t.entityKind]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(t){if("string"==typeof t){const[n,o]=t.slice(1,-1).split(",");return[Number.parseFloat(n),Number.parseFloat(o)]}return[t.x,t.y]}mapToDriverValue(t){return`(${t[0]},${t[1]})`}}e.PgPointTuple=l;class s extends o.PgColumnBuilder{static[t.entityKind]="PgPointObjectBuilder";constructor(t){super(t,"json","PgPointObject")}build(t){return new P(t,this.config)}}e.PgPointObjectBuilder=s;class P extends o.PgColumn{static[t.entityKind]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(t){if("string"==typeof t){const[n,o]=t.slice(1,-1).split(",");return{x:Number.parseFloat(n),y:Number.parseFloat(o)}}return t}mapToDriverValue(t){return`(${t.x},${t.y})`}}e.PgPointObject=P}),3790,[3743,3771,3746]);
__d((function(g,r,i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgGeometryObjectBuilder=e.PgGeometryObject=e.PgGeometryBuilder=e.PgGeometry=void 0,e.geometry=function(t,o){const{name:u,config:c}=(0,n.getColumnNameAndConfig)(t,o);if(!c?.mode||"tuple"===c.mode)return new s(u);return new y(u)};var t=r(d[0]),n=r(d[1]),o=r(d[2]),u=r(d[3]);class s extends o.PgColumnBuilder{static[t.entityKind]="PgGeometryBuilder";constructor(t){super(t,"array","PgGeometry")}build(t){return new c(t,this.config)}}e.PgGeometryBuilder=s;class c extends o.PgColumn{static[t.entityKind]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(t){return(0,u.parseEWKB)(t)}mapToDriverValue(t){return`point(${t[0]} ${t[1]})`}}e.PgGeometry=c;class y extends o.PgColumnBuilder{static[t.entityKind]="PgGeometryObjectBuilder";constructor(t){super(t,"json","PgGeometryObject")}build(t){return new l(t,this.config)}}e.PgGeometryObjectBuilder=y;class l extends o.PgColumn{static[t.entityKind]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(t){const n=(0,u.parseEWKB)(t);return{x:n[0],y:n[1]}}mapToDriverValue(t){return`point(${t.x} ${t.y})`}}e.PgGeometryObject=l}),3791,[3743,3771,3746,3792]);
__d((function(g,r,_i,a,m,e,d){function t(t){const n=[];for(let o=0;o<t.length;o+=2)n.push(Number.parseInt(t.slice(o,o+2),16));return new Uint8Array(n)}function n(t,n){const o=new ArrayBuffer(8),s=new DataView(o);for(let o=0;o<8;o++)s.setUint8(o,t[n+o]);return s.getFloat64(0,!0)}Object.defineProperty(e,"__esModule",{value:!0}),e.parseEWKB=function(o){const s=t(o);let u=0;const c=s[u];u+=1;const i=new DataView(s.buffer),f=i.getUint32(u,1===c);let l;u+=4,536870912&f&&(l=i.getUint32(u,1===c),u+=4);if(1==(65535&f)){const t=n(s,u);u+=8;const o=n(s,u);return u+=8,[t,o]}throw new Error("Unsupported geometry type")}}),3792,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgRealBuilder=e.PgReal=void 0,e.real=function(t){return new l(t??"")};var t=r(d[0]),n=r(d[1]);class l extends n.PgColumnBuilder{static[t.entityKind]="PgRealBuilder";constructor(t,n){super(t,"number","PgReal"),this.config.length=n}build(t){return new u(t,this.config)}}e.PgRealBuilder=l;class u extends n.PgColumn{static[t.entityKind]="PgReal";constructor(t,n){super(t,n)}getSQLType(){return"real"}mapFromDriverValue=t=>"string"==typeof t?Number.parseFloat(t):t}e.PgReal=u}),3793,[3743,3746]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgSerialBuilder=e.PgSerial=void 0,e.serial=function(t){return new l(t??"")};var t=r(d[0]),n=r(d[1]);class l extends n.PgColumnBuilder{static[t.entityKind]="PgSerialBuilder";constructor(t){super(t,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(t){return new u(t,this.config)}}e.PgSerialBuilder=l;class u extends n.PgColumn{static[t.entityKind]="PgSerial";getSQLType(){return"serial"}}e.PgSerial=u}),3794,[3743,3746]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgSmallIntBuilder=e.PgSmallInt=void 0,e.smallint=function(t){return new u(t??"")};var t=r(d[0]),n=r(d[1]),l=r(d[2]);class u extends l.PgIntColumnBaseBuilder{static[t.entityKind]="PgSmallIntBuilder";constructor(t){super(t,"number","PgSmallInt")}build(t){return new s(t,this.config)}}e.PgSmallIntBuilder=u;class s extends n.PgColumn{static[t.entityKind]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=t=>"string"==typeof t?Number(t):t}e.PgSmallInt=s}),3795,[3743,3746,3772]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgSmallSerialBuilder=e.PgSmallSerial=void 0,e.smallserial=function(l){return new n(l??"")};var l=r(d[0]),t=r(d[1]);class n extends t.PgColumnBuilder{static[l.entityKind]="PgSmallSerialBuilder";constructor(l){super(l,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(l){return new s(l,this.config)}}e.PgSmallSerialBuilder=n;class s extends t.PgColumn{static[l.entityKind]="PgSmallSerial";getSQLType(){return"smallserial"}}e.PgSmallSerial=s}),3796,[3743,3746]);
__d((function(g,r,i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgTextBuilder=e.PgText=void 0,e.text=function(t,u={}){const{name:o,config:l}=(0,n.getColumnNameAndConfig)(t,u);return new s(o,l)};var t=r(d[0]),n=r(d[1]),u=r(d[2]);class s extends u.PgColumnBuilder{static[t.entityKind]="PgTextBuilder";constructor(t,n){super(t,"string","PgText"),this.config.enumValues=n.enum}build(t){return new o(t,this.config)}}e.PgTextBuilder=s;class o extends u.PgColumn{static[t.entityKind]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}}e.PgText=o}),3797,[3743,3771,3746]);
__d((function(g,r,i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgTimeBuilder=e.PgTime=void 0,e.time=function(t,o={}){const{name:s,config:u}=(0,n.getColumnNameAndConfig)(t,o);return new c(s,u.withTimezone??!1,u.precision)};var t=r(d[0]),n=r(d[1]),o=r(d[2]),s=r(d[3]);class c extends s.PgDateColumnBaseBuilder{constructor(t,n,o){super(t,"string","PgTime"),this.withTimezone=n,this.precision=o,this.config.withTimezone=n,this.config.precision=o}static[t.entityKind]="PgTimeBuilder";build(t){return new u(t,this.config)}}e.PgTimeBuilder=c;class u extends o.PgColumn{static[t.entityKind]="PgTime";constructor(t,n){super(t,n),this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`time${void 0===this.precision?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}e.PgTime=u}),3798,[3743,3771,3746,3779]);
__d((function(g,r,i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgTimestampStringBuilder=e.PgTimestampString=e.PgTimestampBuilder=e.PgTimestamp=void 0,e.timestamp=function(t,s={}){const{name:o,config:c}=(0,n.getColumnNameAndConfig)(t,s);if("string"===c?.mode)return new p(o,c.withTimezone??!1,c.precision);return new a(o,c?.withTimezone??!1,c?.precision)};var t=r(d[0]),n=r(d[1]),s=r(d[2]),o=r(d[3]);class a extends o.PgDateColumnBaseBuilder{static[t.entityKind]="PgTimestampBuilder";constructor(t,n,s){super(t,"date","PgTimestamp"),this.config.withTimezone=n,this.config.precision=s}build(t){return new c(t,this.config)}}e.PgTimestampBuilder=a;class c extends s.PgColumn{static[t.entityKind]="PgTimestamp";constructor(t,n){super(t,n),this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${void 0===this.precision?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=t=>new Date(this.withTimezone?t:t+"+0000");mapToDriverValue=t=>t.toISOString()}e.PgTimestamp=c;class p extends o.PgDateColumnBaseBuilder{static[t.entityKind]="PgTimestampStringBuilder";constructor(t,n,s){super(t,"string","PgTimestampString"),this.config.withTimezone=n,this.config.precision=s}build(t){return new u(t,this.config)}}e.PgTimestampStringBuilder=p;class u extends s.PgColumn{static[t.entityKind]="PgTimestampString";constructor(t,n){super(t,n),this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${void 0===this.precision?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}e.PgTimestampString=u}),3799,[3743,3771,3746,3779]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgUUIDBuilder=e.PgUUID=void 0,e.uuid=function(t){return new s(t??"")};var t=r(d[0]),n=r(d[1]),u=r(d[2]);class s extends u.PgColumnBuilder{static[t.entityKind]="PgUUIDBuilder";constructor(t){super(t,"string","PgUUID")}defaultRandom(){return this.default(n.sql`gen_random_uuid()`)}build(t){return new l(t,this.config)}}e.PgUUIDBuilder=s;class l extends u.PgColumn{static[t.entityKind]="PgUUID";getSQLType(){return"uuid"}}e.PgUUID=l}),3800,[3743,3744,3746]);
__d((function(g,r,i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgVarcharBuilder=e.PgVarchar=void 0,e.varchar=function(n,a={}){const{name:u,config:h}=(0,t.getColumnNameAndConfig)(n,a);return new c(u,h)};var n=r(d[0]),t=r(d[1]),a=r(d[2]);class c extends a.PgColumnBuilder{static[n.entityKind]="PgVarcharBuilder";constructor(n,t){super(n,"string","PgVarchar"),this.config.length=t.length,this.config.enumValues=t.enum}build(n){return new u(n,this.config)}}e.PgVarcharBuilder=c;class u extends a.PgColumn{static[n.entityKind]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"varchar":`varchar(${this.length})`}}e.PgVarchar=u}),3801,[3743,3771,3746]);
__d((function(g,r,i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgBinaryVectorBuilder=e.PgBinaryVector=void 0,e.bit=function(n,o){const{name:c,config:u}=(0,t.getColumnNameAndConfig)(n,o);return new s(c,u)};var n=r(d[0]),t=r(d[1]),o=r(d[2]);class s extends o.PgColumnBuilder{static[n.entityKind]="PgBinaryVectorBuilder";constructor(n,t){super(n,"string","PgBinaryVector"),this.config.dimensions=t.dimensions}build(n){return new c(n,this.config)}}e.PgBinaryVectorBuilder=s;class c extends o.PgColumn{static[n.entityKind]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}}e.PgBinaryVector=c}),3802,[3743,3771,3746]);
__d((function(g,r,i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgHalfVectorBuilder=e.PgHalfVector=void 0,e.halfvec=function(n,o){const{name:a,config:l}=(0,t.getColumnNameAndConfig)(n,o);return new s(a,l)};var n=r(d[0]),t=r(d[1]),o=r(d[2]);class s extends o.PgColumnBuilder{static[n.entityKind]="PgHalfVectorBuilder";constructor(n,t){super(n,"array","PgHalfVector"),this.config.dimensions=t.dimensions}build(n){return new a(n,this.config)}}e.PgHalfVectorBuilder=s;class a extends o.PgColumn{static[n.entityKind]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(n){return JSON.stringify(n)}mapFromDriverValue(n){return n.slice(1,-1).split(",").map((n=>Number.parseFloat(n)))}}e.PgHalfVector=a}),3803,[3743,3771,3746]);
__d((function(g,r,i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgSparseVectorBuilder=e.PgSparseVector=void 0,e.sparsevec=function(n,t){const{name:c,config:a}=(0,s.getColumnNameAndConfig)(n,t);return new o(c,a)};var n=r(d[0]),s=r(d[1]),t=r(d[2]);class o extends t.PgColumnBuilder{static[n.entityKind]="PgSparseVectorBuilder";constructor(n,s){super(n,"string","PgSparseVector"),this.config.dimensions=s.dimensions}build(n){return new c(n,this.config)}}e.PgSparseVectorBuilder=o;class c extends t.PgColumn{static[n.entityKind]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}}e.PgSparseVector=c}),3804,[3743,3771,3746]);
__d((function(g,r,i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgVectorBuilder=e.PgVector=void 0,e.vector=function(n,o){const{name:c,config:u}=(0,t.getColumnNameAndConfig)(n,o);return new s(c,u)};var n=r(d[0]),t=r(d[1]),o=r(d[2]);class s extends o.PgColumnBuilder{static[n.entityKind]="PgVectorBuilder";constructor(n,t){super(n,"array","PgVector"),this.config.dimensions=t.dimensions}build(n){return new c(n,this.config)}}e.PgVectorBuilder=s;class c extends o.PgColumn{static[n.entityKind]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(n){return JSON.stringify(n)}mapFromDriverValue(n){return n.slice(1,-1).split(",").map((n=>Number.parseFloat(n)))}}e.PgVector=c}),3805,[3743,3771,3746]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0});var n=r(d[0]);Object.keys(n).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===n[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}}))}));var t=r(d[1]);Object.keys(t).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===t[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}}))}));var u=r(d[2]);Object.keys(u).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===u[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return u[n]}}))}))}),3806,[3760,3807,3744]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0});var n=r(d[0]);Object.keys(n).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===n[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}}))}));var t=r(d[1]);Object.keys(t).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===t[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}}))}))}),3807,[3808,3809]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.avg=function(t){return u.sql`avg(${t})`.mapWith(String)},e.avgDistinct=function(t){return u.sql`avg(distinct ${t})`.mapWith(String)},e.count=function(t){return u.sql`count(${t||u.sql.raw("*")})`.mapWith(Number)},e.countDistinct=function(t){return u.sql`count(distinct ${t})`.mapWith(Number)},e.max=function(s){return u.sql`max(${s})`.mapWith((0,n.is)(s,t.Column)?s:String)},e.min=function(s){return u.sql`min(${s})`.mapWith((0,n.is)(s,t.Column)?s:String)},e.sum=function(t){return u.sql`sum(${t})`.mapWith(String)},e.sumDistinct=function(t){return u.sql`sum(distinct ${t})`.mapWith(String)};var t=r(d[0]),n=r(d[1]),u=r(d[2])}),3808,[3742,3743,3744]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.cosineDistance=function(s,u){if(Array.isArray(u))return n.sql`${s} <=> ${t(u)}`;return n.sql`${s} <=> ${u}`},e.hammingDistance=function(s,u){if(Array.isArray(u))return n.sql`${s} <~> ${t(u)}`;return n.sql`${s} <~> ${u}`},e.innerProduct=function(s,u){if(Array.isArray(u))return n.sql`${s} <#> ${t(u)}`;return n.sql`${s} <#> ${u}`},e.jaccardDistance=function(s,u){if(Array.isArray(u))return n.sql`${s} <%> ${t(u)}`;return n.sql`${s} <%> ${u}`},e.l1Distance=function(s,u){if(Array.isArray(u))return n.sql`${s} <+> ${t(u)}`;return n.sql`${s} <+> ${u}`},e.l2Distance=function(s,u){if(Array.isArray(u))return n.sql`${s} <-> ${t(u)}`;return n.sql`${s} <-> ${u}`};var n=r(d[0]);function t(n){return JSON.stringify(n)}}),3809,[3744]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0});var n=r(d[0]);Object.keys(n).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===n[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}}))}));var t=r(d[1]);Object.keys(t).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===t[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}}))}))}),3810,[3811,3845]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.verification=e.user=e.splitTypeEnum=e.settlement=e.session=e.memberRoleEnum=e.groupMember=e.groupInvite=e.group=e.expenseSplit=e.expense=e.categoryEnum=e.account=void 0;var t=r(d[0]),n=r(d[1]),o=r(d[2]),l=r(d[3]);const u=e.splitTypeEnum=(0,t.pgEnum)('split_type',['equal','percentage','exact']),s=e.categoryEnum=(0,t.pgEnum)('category',['food','transport','accommodation','entertainment','shopping','utilities','other']),p=e.memberRoleEnum=(0,t.pgEnum)('member_role',['owner','member']),c=e.user=(0,t.pgTable)('user',{id:(0,t.text)('id').primaryKey(),name:(0,t.text)('name').notNull(),email:(0,t.text)('email').notNull().unique(),emailVerified:(0,t.boolean)('email_verified').notNull(),image:(0,t.text)('image'),createdAt:(0,t.timestamp)('created_at').notNull(),updatedAt:(0,t.timestamp)('updated_at').notNull(),isAnonymous:(0,t.boolean)('is_anonymous')}),x=(e.session=(0,t.pgTable)('session',{id:(0,t.text)('id').primaryKey(),expiresAt:(0,t.timestamp)('expires_at').notNull(),token:(0,t.text)('token').notNull().unique(),createdAt:(0,t.timestamp)('created_at').notNull(),updatedAt:(0,t.timestamp)('updated_at').notNull(),ipAddress:(0,t.text)('ip_address'),userAgent:(0,t.text)('user_agent'),userId:(0,t.text)('user_id').notNull().references((()=>c.id),{onDelete:'cascade'})}),e.account=(0,t.pgTable)('account',{id:(0,t.text)('id').primaryKey(),accountId:(0,t.text)('account_id').notNull(),providerId:(0,t.text)('provider_id').notNull(),userId:(0,t.text)('user_id').notNull().references((()=>c.id),{onDelete:'cascade'}),accessToken:(0,t.text)('access_token'),refreshToken:(0,t.text)('refresh_token'),idToken:(0,t.text)('id_token'),accessTokenExpiresAt:(0,t.timestamp)('access_token_expires_at'),refreshTokenExpiresAt:(0,t.timestamp)('refresh_token_expires_at'),scope:(0,t.text)('scope'),password:(0,t.text)('password'),createdAt:(0,t.timestamp)('created_at').notNull(),updatedAt:(0,t.timestamp)('updated_at').notNull()}),e.verification=(0,t.pgTable)('verification',{id:(0,t.text)('id').primaryKey(),identifier:(0,t.text)('identifier').notNull(),value:(0,t.text)('value').notNull(),expiresAt:(0,t.timestamp)('expires_at').notNull(),createdAt:(0,t.timestamp)('created_at'),updatedAt:(0,t.timestamp)('updated_at')}),e.group=(0,t.pgTable)('group',{id:(0,t.uuid)().defaultRandom().primaryKey(),name:(0,t.text)().notNull(),description:(0,t.text)(),createdById:(0,t.text)().notNull().references((()=>c.id),{onDelete:'cascade'}),...n.timestamps},(n=>[(0,t.index)('group_created_by_id_idx').on(n.createdById)]))),_=(e.groupMember=(0,t.pgTable)('group_member',{id:(0,t.uuid)().defaultRandom().primaryKey(),groupId:(0,t.uuid)().notNull().references((()=>x.id),{onDelete:'cascade'}),userId:(0,t.text)().notNull().references((()=>c.id),{onDelete:'cascade'}),role:p().notNull().default('member'),joinedAt:(0,t.timestamp)().notNull().defaultNow()}),e.groupInvite=(0,t.pgTable)('group_invite',{id:(0,t.uuid)().defaultRandom().primaryKey(),groupId:(0,t.uuid)().notNull().references((()=>x.id),{onDelete:'cascade'}),token:(0,t.text)().notNull().default(l.sql`gen_random_uuid()`).unique(),expiresAt:(0,t.timestamp)().notNull().$defaultFn((()=>(0,o.addDays)(new Date,7))),...n.timestamps},(n=>[(0,t.index)('group_invite_token_idx').on(n.token)])),e.expense=(0,t.pgTable)('expense',{id:(0,t.uuid)().defaultRandom().primaryKey(),groupId:(0,t.uuid)().notNull().references((()=>x.id),{onDelete:'cascade'}),title:(0,t.text)().notNull().default('Expense'),description:(0,t.text)(),amount:(0,t.doublePrecision)().notNull(),paidById:(0,t.text)().notNull().references((()=>c.id),{onDelete:'cascade'}),date:(0,t.timestamp)().notNull().defaultNow(),splitType:u().notNull().default('equal'),category:s().notNull().default('other'),...n.timestamps},(n=>[(0,t.index)('expense_group_id_idx').on(n.groupId)])));e.expenseSplit=(0,t.pgTable)('expense_split',{id:(0,t.uuid)().defaultRandom().primaryKey(),expenseId:(0,t.uuid)().notNull().references((()=>_.id),{onDelete:'cascade'}),userId:(0,t.text)().notNull().references((()=>c.id),{onDelete:'cascade'}),amount:(0,t.doublePrecision)().notNull(),percentage:(0,t.doublePrecision)(),settled:(0,t.boolean)().notNull().default(!1),...n.timestamps},(n=>[(0,t.index)('expense_split_expense_id_idx').on(n.expenseId),(0,t.index)('expense_split_user_id_idx').on(n.userId)])),e.settlement=(0,t.pgTable)('settlement',{id:(0,t.uuid)().defaultRandom().primaryKey(),groupId:(0,t.uuid)().notNull().references((()=>x.id),{onDelete:'cascade'}),fromUserId:(0,t.text)().notNull().references((()=>c.id),{onDelete:'cascade'}),toUserId:(0,t.text)().notNull().references((()=>c.id),{onDelete:'cascade'}),amount:(0,t.doublePrecision)().notNull(),settledAt:(0,t.timestamp)(),...n.timestamps},(n=>[(0,t.index)('settlement_group_id_idx').on(n.groupId),(0,t.index)('settlement_from_user_id_idx').on(n.fromUserId),(0,t.index)('settlement_to_user_id_idx').on(n.toUserId)]))}),3811,[3812,3844,3420,3740]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0});var n=r(d[0]);Object.keys(n).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===n[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}}))}));var t=r(d[1]);Object.keys(t).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===t[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}}))}));var u=r(d[2]);Object.keys(u).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===u[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return u[n]}}))}));var o=r(d[3]);Object.keys(o).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===o[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return o[n]}}))}));var c=r(d[4]);Object.keys(c).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===c[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return c[n]}}))}));var f=r(d[5]);Object.keys(f).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===f[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return f[n]}}))}));var l=r(d[6]);Object.keys(l).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===l[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return l[n]}}))}));var b=r(d[7]);Object.keys(b).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===b[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return b[n]}}))}));var _=r(d[8]);Object.keys(_).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===_[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return _[n]}}))}));var j=r(d[9]);Object.keys(j).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===j[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return j[n]}}))}));var s=r(d[10]);Object.keys(s).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===s[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return s[n]}}))}));var y=r(d[11]);Object.keys(y).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===y[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return y[n]}}))}));var O=r(d[12]);Object.keys(O).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===O[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return O[n]}}))}));var p=r(d[13]);Object.keys(p).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===p[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return p[n]}}))}));var v=r(d[14]);Object.keys(v).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===v[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return v[n]}}))}));var M=r(d[15]);Object.keys(M).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===M[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return M[n]}}))}));var P=r(d[16]);Object.keys(P).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===P[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return P[n]}}))}));var h=r(d[17]);Object.keys(h).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===h[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return h[n]}}))}));var k=r(d[18]);Object.keys(k).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===k[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return k[n]}}))}));var E=r(d[19]);Object.keys(E).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===E[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return E[n]}}))}));var q=r(d[20]);Object.keys(q).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===q[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return q[n]}}))}))}),3812,[3813,3814,3815,3816,3822,3748,3833,3834,3767,3817,3835,3836,3837,3840,3841,3768,3751,3842,3843,3839,3838]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.alias=function(l,o){return new Proxy(l,new n.TableAliasProxyHandler(o,!1))};var n=r(d[0])}),3813,[3741]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.CheckBuilder=e.Check=void 0,e.check=function(t,n){return new c(t,n)};var t=r(d[0]);class c{constructor(t,c){this.name=t,this.value=c}static[t.entityKind]="PgCheckBuilder";build(t){return new n(t,this)}}e.CheckBuilder=c;class n{constructor(t,c){this.table=t,this.name=c.name,this.value=c.value}static[t.entityKind]="PgCheck"}e.Check=n}),3814,[3743]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0});var n=r(d[0]);Object.keys(n).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===n[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}}))}));var t=r(d[1]);Object.keys(t).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===t[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}}))}));var u=r(d[2]);Object.keys(u).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===u[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return u[n]}}))}));var o=r(d[3]);Object.keys(o).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===o[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return o[n]}}))}));var c=r(d[4]);Object.keys(c).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===c[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return c[n]}}))}));var f=r(d[5]);Object.keys(f).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===f[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return f[n]}}))}));var l=r(d[6]);Object.keys(l).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===l[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return l[n]}}))}));var b=r(d[7]);Object.keys(b).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===b[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return b[n]}}))}));var _=r(d[8]);Object.keys(_).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===_[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return _[n]}}))}));var j=r(d[9]);Object.keys(j).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===j[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return j[n]}}))}));var s=r(d[10]);Object.keys(s).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===s[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return s[n]}}))}));var y=r(d[11]);Object.keys(y).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===y[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return y[n]}}))}));var O=r(d[12]);Object.keys(O).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===O[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return O[n]}}))}));var p=r(d[13]);Object.keys(p).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===p[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return p[n]}}))}));var v=r(d[14]);Object.keys(v).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===v[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return v[n]}}))}));var M=r(d[15]);Object.keys(M).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===M[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return M[n]}}))}));var P=r(d[16]);Object.keys(P).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===P[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return P[n]}}))}));var h=r(d[17]);Object.keys(h).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===h[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return h[n]}}))}));var k=r(d[18]);Object.keys(k).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===k[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return k[n]}}))}));var E=r(d[19]);Object.keys(E).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===E[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return E[n]}}))}));var q=r(d[20]);Object.keys(q).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===q[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return q[n]}}))}));var w=r(d[21]);Object.keys(w).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===w[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return w[n]}}))}));var x=r(d[22]);Object.keys(x).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===x[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return x[n]}}))}));var z=r(d[23]);Object.keys(z).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===z[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return z[n]}}))}));var A=r(d[24]);Object.keys(A).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===A[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return A[n]}}))}));var B=r(d[25]);Object.keys(B).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===B[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return B[n]}}))}));var C=r(d[26]);Object.keys(C).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===C[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return C[n]}}))}));var D=r(d[27]);Object.keys(D).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===D[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return D[n]}}))}));var F=r(d[28]);Object.keys(F).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===F[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return F[n]}}))}));var G=r(d[29]);Object.keys(G).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===G[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return G[n]}}))}));var H=r(d[30]);Object.keys(H).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===H[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return H[n]}}))}));var I=r(d[31]);Object.keys(I).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===I[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return I[n]}}))}));var J=r(d[32]);Object.keys(J).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===J[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return J[n]}}))}));var K=r(d[33]);Object.keys(K).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===K[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return K[n]}}))}));var L=r(d[34]);Object.keys(L).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===L[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return L[n]}}))}))}),3815,[3770,3773,3774,3775,3776,3746,3777,3778,3780,3745,3781,3772,3782,3783,3784,3785,3786,3787,3788,3789,3790,3791,3793,3794,3795,3796,3797,3798,3799,3800,3801,3802,3803,3804,3805]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.withReplicas=e.PgDatabase=void 0;var t=r(d[0]),s=r(d[1]),n=r(d[2]),l=r(d[3]),c=r(d[4]),o=r(d[5]),u=r(d[6]),h=r(d[7]),w=r(d[8]);class f{constructor(t,s,n){if(this.dialect=t,this.session=s,this._=n?{schema:n.schema,fullSchema:n.fullSchema,tableNamesMap:n.tableNamesMap,session:s}:{schema:void 0,fullSchema:{},tableNamesMap:{},session:s},this.query={},this._.schema)for(const[l,c]of Object.entries(this._.schema))this.query[l]=new u.RelationalQueryBuilder(n.fullSchema,this._.schema,this._.tableNamesMap,n.fullSchema[l],c,t,s)}static[t.entityKind]="PgDatabase";$with=(t,l)=>{const o=this;return{as:u=>("function"==typeof u&&(u=u(new s.QueryBuilder(o.dialect))),new Proxy(new c.WithSubquery(u.getSQL(),l??("getSelectedFields"in u?u.getSelectedFields()??{}:{}),t,!0),new n.SelectionProxyHandler({alias:t,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};$count(t,s){return new o.PgCountBuilder({source:t,filters:s,session:this.session})}with(...t){const n=this;return{select:function(l){return new s.PgSelectBuilder({fields:l??void 0,session:n.session,dialect:n.dialect,withList:t})},selectDistinct:function(l){return new s.PgSelectBuilder({fields:l??void 0,session:n.session,dialect:n.dialect,withList:t,distinct:!0})},selectDistinctOn:function(l,c){return new s.PgSelectBuilder({fields:c??void 0,session:n.session,dialect:n.dialect,withList:t,distinct:{on:l}})},update:function(l){return new s.PgUpdateBuilder(l,n.session,n.dialect,t)},insert:function(l){return new s.PgInsertBuilder(l,n.session,n.dialect,t)},delete:function(l){return new s.PgDeleteBase(l,n.session,n.dialect,t)}}}select(t){return new s.PgSelectBuilder({fields:t??void 0,session:this.session,dialect:this.dialect})}selectDistinct(t){return new s.PgSelectBuilder({fields:t??void 0,session:this.session,dialect:this.dialect,distinct:!0})}selectDistinctOn(t,n){return new s.PgSelectBuilder({fields:n??void 0,session:this.session,dialect:this.dialect,distinct:{on:t}})}update(t){return new s.PgUpdateBuilder(t,this.session,this.dialect)}insert(t){return new s.PgInsertBuilder(t,this.session,this.dialect)}delete(t){return new s.PgDeleteBase(t,this.session,this.dialect)}refreshMaterializedView(t){return new w.PgRefreshMaterializedView(t,this.session,this.dialect)}execute(t){const s="string"==typeof t?l.sql.raw(t):t.getSQL(),n=this.dialect.sqlToQuery(s),c=this.session.prepareQuery(n,void 0,void 0,!1);return new h.PgRaw((()=>c.execute(void 0,this.authToken)),s,n,(t=>c.mapResult(t,!0)))}transaction(t,s){return this.session.transaction(t,s)}}e.PgDatabase=f;e.withReplicas=(t,s,n=()=>s[Math.floor(Math.random()*s.length)])=>({...t,update:(...s)=>t.update(...s),insert:(...s)=>t.insert(...s),delete:(...s)=>t.delete(...s),execute:(...s)=>t.execute(...s),transaction:(...s)=>t.transaction(...s),refreshMaterializedView:(...s)=>t.refreshMaterializedView(...s),$primary:t,select:(...t)=>n(s).select(...t),selectDistinct:(...t)=>n(s).selectDistinct(...t),selectDistinctOn:(...t)=>n(s).selectDistinctOn(...t),$count:(...t)=>n(s).$count(...t),$with:t=>n(s).$with(t),with:(...t)=>n(s).with(...t),get query(){return n(s).query}})}),3816,[3743,3817,3819,3744,3753,3830,3831,3832,3827]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0});var n=r(d[0]);Object.keys(n).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===n[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}}))}));var t=r(d[1]);Object.keys(t).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===t[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}}))}));var u=r(d[2]);Object.keys(u).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===u[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return u[n]}}))}));var o=r(d[3]);Object.keys(o).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===o[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return o[n]}}))}));var c=r(d[4]);Object.keys(c).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===c[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return c[n]}}))}));var f=r(d[5]);Object.keys(f).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===f[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return f[n]}}))}));var l=r(d[6]);Object.keys(l).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===l[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return l[n]}}))}))}),3817,[3818,3820,3821,3827,3825,3828,3829]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgDeleteBase=void 0;var t=r(d[0]),s=r(d[1]),n=r(d[2]),o=r(d[3]),l=r(d[4]),h=r(d[5]);class u extends s.QueryPromise{constructor(t,s,n,o){super(),this.session=s,this.dialect=n,this.config={table:t,withList:o}}static[t.entityKind]="PgDelete";where(t){return this.config.where=t,this}returning(t=this.config.table[o.Table.Symbol.Columns]){return this.config.returningFields=t,this.config.returning=(0,h.orderSelectedFields)(t),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){const{typings:t,...s}=this.dialect.sqlToQuery(this.getSQL());return s}_prepare(t){return l.tracer.startActiveSpan("drizzle.prepareQuery",(()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,t,!0)))}prepare(t){return this._prepare(t)}setToken(t){return this.authToken=t,this}execute=t=>l.tracer.startActiveSpan("drizzle.operation",(()=>this._prepare().execute(t,this.authToken)));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new n.SelectionProxyHandler({alias:(0,o.getTableName)(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}e.PgDeleteBase=u}),3818,[3743,3765,3819,3757,3754,3771]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.SelectionProxyHandler=void 0;var s=r(d[0]),l=r(d[1]),n=r(d[2]),t=r(d[3]),o=r(d[4]),c=r(d[5]);class f{static[n.entityKind]="SelectionProxyHandler";constructor(s){this.config={...s}}get(u,h){if("_"===h)return{...u._,selectedFields:new Proxy(u._.selectedFields,this)};if(h===c.ViewBaseConfig)return{...u[c.ViewBaseConfig],selectedFields:new Proxy(u[c.ViewBaseConfig].selectedFields,this)};if("symbol"==typeof h)return u[h];const w=((0,n.is)(u,o.Subquery)?u._.selectedFields:(0,n.is)(u,t.View)?u[c.ViewBaseConfig].selectedFields:u)[h];if((0,n.is)(w,t.SQL.Aliased)){if("sql"===this.config.sqlAliasedBehavior&&!w.isSelectionField)return w.sql;const s=w.clone();return s.isSelectionField=!0,s}if((0,n.is)(w,t.SQL)){if("sql"===this.config.sqlBehavior)return w;throw new Error(`You tried to reference "${h}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return(0,n.is)(w,l.Column)?this.config.alias?new Proxy(w,new s.ColumnAliasProxyHandler(new Proxy(w.table,new s.TableAliasProxyHandler(this.config.alias,this.config.replaceOriginalName??!1)))):w:"object"!=typeof w||null===w?w:new Proxy(w,new f(this.config))}}e.SelectionProxyHandler=f}),3819,[3741,3742,3743,3744,3753,3756]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgInsertBuilder=e.PgInsertBase=void 0;var t=r(d[0]),s=r(d[1]),n=r(d[2]),o=r(d[3]),h=r(d[4]),l=r(d[5]),c=r(d[6]),u=r(d[7]);class f{constructor(t,s,n,o,h){this.table=t,this.session=s,this.dialect=n,this.withList=o,this.overridingSystemValue_=h}static[t.entityKind]="PgInsertBuilder";setToken(t){return this.authToken=t,this}overridingSystemValue(){return this.overridingSystemValue_=!0,this}values(s){if(0===(s=Array.isArray(s)?s:[s]).length)throw new Error("values() must be called with at least one value");const n=s.map((s=>{const n={},l=this.table[h.Table.Symbol.Columns];for(const h of Object.keys(s)){const c=s[h];n[h]=(0,t.is)(c,o.SQL)?c:new o.Param(c,l[h])}return n}));return new p(this.table,n,this.session,this.dialect,this.withList,!1,this.overridingSystemValue_).setToken(this.authToken)}select(s){const n="function"==typeof s?s(new u.QueryBuilder):s;if(!(0,t.is)(n,o.SQL)&&!(0,c.haveSameKeys)(this.table[h.Columns],n._.selectedFields))throw new Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new p(this.table,n,this.session,this.dialect,this.withList,!0)}}e.PgInsertBuilder=f;class p extends s.QueryPromise{constructor(t,s,n,o,h,l,c){super(),this.session=n,this.dialect=o,this.config={table:t,values:s,withList:h,select:l,overridingSystemValue_:c}}static[t.entityKind]="PgInsert";returning(t=this.config.table[h.Table.Symbol.Columns]){return this.config.returningFields=t,this.config.returning=(0,c.orderSelectedFields)(t),this}onConflictDoNothing(t={}){if(void 0===t.target)this.config.onConflict=o.sql`do nothing`;else{let s="";s=Array.isArray(t.target)?t.target.map((t=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(t)))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(t.target));const n=t.where?o.sql` where ${t.where}`:void 0;this.config.onConflict=o.sql`(${o.sql.raw(s)})${n} do nothing`}return this}onConflictDoUpdate(t){if(t.where&&(t.targetWhere||t.setWhere))throw new Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');const s=t.where?o.sql` where ${t.where}`:void 0,n=t.targetWhere?o.sql` where ${t.targetWhere}`:void 0,h=t.setWhere?o.sql` where ${t.setWhere}`:void 0,l=this.dialect.buildUpdateSet(this.config.table,(0,c.mapUpdateSet)(this.config.table,t.set));let u="";return u=Array.isArray(t.target)?t.target.map((t=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(t)))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(t.target)),this.config.onConflict=o.sql`(${o.sql.raw(u)})${n} do update set ${l}${s}${h}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){const{typings:t,...s}=this.dialect.sqlToQuery(this.getSQL());return s}_prepare(t){return l.tracer.startActiveSpan("drizzle.prepareQuery",(()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,t,!0)))}prepare(t){return this._prepare(t)}setToken(t){return this.authToken=t,this}execute=t=>l.tracer.startActiveSpan("drizzle.operation",(()=>this._prepare().execute(t,this.authToken)));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new n.SelectionProxyHandler({alias:(0,h.getTableName)(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}e.PgInsertBase=p}),3820,[3743,3765,3819,3744,3757,3754,3771,3821]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.QueryBuilder=void 0;var t=r(d[0]),s=r(d[1]),l=r(d[2]),n=r(d[3]),c=r(d[4]);class o{static[t.entityKind]="PgQueryBuilder";constructor(l){this.dialect=(0,t.is)(l,s.PgDialect)?l:void 0,this.dialectConfig=(0,t.is)(l,s.PgDialect)?void 0:l}$with=(t,s)=>{const c=this;return{as:o=>("function"==typeof o&&(o=o(c)),new Proxy(new n.WithSubquery(o.getSQL(),s??("getSelectedFields"in o?o.getSelectedFields()??{}:{}),t,!0),new l.SelectionProxyHandler({alias:t,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};with(...t){const s=this;return{select:function(l){return new c.PgSelectBuilder({fields:l??void 0,session:void 0,dialect:s.getDialect(),withList:t})},selectDistinct:function(t){return new c.PgSelectBuilder({fields:t??void 0,session:void 0,dialect:s.getDialect(),distinct:!0})},selectDistinctOn:function(t,l){return new c.PgSelectBuilder({fields:l??void 0,session:void 0,dialect:s.getDialect(),distinct:{on:t}})}}}select(t){return new c.PgSelectBuilder({fields:t??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(t){return new c.PgSelectBuilder({fields:t??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn(t,s){return new c.PgSelectBuilder({fields:s??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:t}})}getDialect(){return this.dialect||(this.dialect=new s.PgDialect(this.dialectConfig)),this.dialect}}e.QueryBuilder=o}),3821,[3743,3822,3819,3753,3825]);
__d((function(g,r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgDialect=void 0;var i=r(d[0]),s=r(d[1]),l=r(d[2]),t=r(d[3]),n=r(d[4]),o=r(d[5]),u=r(d[6]),f=r(d[7]),c=r(d[8]),q=r(d[9]),b=r(d[10]),h=r(d[11]),p=r(d[12]),$=r(d[13]),y=r(d[14]);class S{static[t.entityKind]="PgDialect";constructor(i){this.casing=new s.CasingCache(i?.casing)}async migrate(i,s,l){const t="string"==typeof l?"__drizzle_migrations":l.migrationsTable??"__drizzle_migrations",n="string"==typeof l?"drizzle":l.migrationsSchema??"drizzle",o=q.sql`
			CREATE TABLE IF NOT EXISTS ${q.sql.identifier(n)}.${q.sql.identifier(t)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at bigint
			)
		`;await s.execute(q.sql`CREATE SCHEMA IF NOT EXISTS ${q.sql.identifier(n)}`),await s.execute(o);const u=(await s.all(q.sql`select id, hash, created_at from ${q.sql.identifier(n)}.${q.sql.identifier(t)} order by created_at desc limit 1`))[0];await s.transaction((async s=>{for await(const l of i)if(!u||Number(u.created_at)<l.folderMillis){for(const i of l.sql)await s.execute(q.sql.raw(i));await s.execute(q.sql`insert into ${q.sql.identifier(n)}.${q.sql.identifier(t)} ("hash", "created_at") values(${l.hash}, ${l.folderMillis})`)}}))}escapeName(i){return`"${i}"`}escapeParam(i){return`$${i+1}`}escapeString(i){return`'${i.replace(/'/g,"''")}'`}buildWithCTE(i){if(!i?.length)return;const s=[q.sql`with `];for(const[l,t]of i.entries())s.push(q.sql`${q.sql.identifier(t._.alias)} as (${t._.sql})`),l<i.length-1&&s.push(q.sql`, `);return s.push(q.sql` `),q.sql.join(s)}buildDeleteQuery({table:i,where:s,returning:l,withList:t}){const n=this.buildWithCTE(t),o=l?q.sql` returning ${this.buildSelection(l,{isSingleTable:!0})}`:void 0,u=s?q.sql` where ${s}`:void 0;return q.sql`${n}delete from ${i}${u}${o}`}buildUpdateSet(i,s){const l=i[h.Table.Symbol.Columns],t=Object.keys(l).filter((i=>void 0!==s[i]||void 0!==l[i]?.onUpdateFn)),n=t.length;return q.sql.join(t.flatMap(((i,t)=>{const o=l[i],u=s[i]??q.sql.param(o.onUpdateFn(),o),f=q.sql`${q.sql.identifier(this.casing.getColumnCasing(o))} = ${u}`;return t<n-1?[f,q.sql.raw(", ")]:[f]})))}buildUpdateQuery({table:i,set:s,where:l,returning:t,withList:n,from:o,joins:f}){const c=this.buildWithCTE(n),b=i[u.PgTable.Symbol.Name],h=i[u.PgTable.Symbol.Schema],p=i[u.PgTable.Symbol.OriginalName],$=b===p?void 0:b,y=q.sql`${h?q.sql`${q.sql.identifier(h)}.`:void 0}${q.sql.identifier(p)}${$&&q.sql` ${q.sql.identifier($)}`}`,S=this.buildUpdateSet(i,s),T=o&&q.sql.join([q.sql.raw(" from "),this.buildFromTable(o)]),w=this.buildJoins(f),v=t?q.sql` returning ${this.buildSelection(t,{isSingleTable:!o})}`:void 0,C=l?q.sql` where ${l}`:void 0;return q.sql`${c}update ${y} set ${S}${T}${w}${C}${v}`}buildSelection(i,{isSingleTable:s=!1}={}){const n=i.length,u=i.flatMap((({field:i},u)=>{const f=[];if((0,t.is)(i,q.SQL.Aliased)&&i.isSelectionField)f.push(q.sql.identifier(i.fieldAlias));else if((0,t.is)(i,q.SQL.Aliased)||(0,t.is)(i,q.SQL)){const l=(0,t.is)(i,q.SQL.Aliased)?i.sql:i;s?f.push(new q.SQL(l.queryChunks.map((i=>(0,t.is)(i,o.PgColumn)?q.sql.identifier(this.casing.getColumnCasing(i)):i)))):f.push(l),(0,t.is)(i,q.SQL.Aliased)&&f.push(q.sql` as ${q.sql.identifier(i.fieldAlias)}`)}else(0,t.is)(i,l.Column)&&(s?f.push(q.sql.identifier(this.casing.getColumnCasing(i))):f.push(i));return u<n-1&&f.push(q.sql`, `),f}));return q.sql.join(u)}buildJoins(i){if(!i||0===i.length)return;const s=[];for(const[l,n]of i.entries()){0===l&&s.push(q.sql` `);const o=n.table,f=n.lateral?q.sql` lateral`:void 0;if((0,t.is)(o,u.PgTable)){const i=o[u.PgTable.Symbol.Name],l=o[u.PgTable.Symbol.Schema],t=o[u.PgTable.Symbol.OriginalName],c=i===t?void 0:n.alias;s.push(q.sql`${q.sql.raw(n.joinType)} join${f} ${l?q.sql`${q.sql.identifier(l)}.`:void 0}${q.sql.identifier(t)}${c&&q.sql` ${q.sql.identifier(c)}`} on ${n.on}`)}else if((0,t.is)(o,c.View)){const i=o[$.ViewBaseConfig].name,l=o[$.ViewBaseConfig].schema,t=o[$.ViewBaseConfig].originalName,u=i===t?void 0:n.alias;s.push(q.sql`${q.sql.raw(n.joinType)} join${f} ${l?q.sql`${q.sql.identifier(l)}.`:void 0}${q.sql.identifier(t)}${u&&q.sql` ${q.sql.identifier(u)}`} on ${n.on}`)}else s.push(q.sql`${q.sql.raw(n.joinType)} join${f} ${o} on ${n.on}`);l<i.length-1&&s.push(q.sql` `)}return q.sql.join(s)}buildFromTable(i){if((0,t.is)(i,h.Table)&&i[h.Table.Symbol.IsAlias]){let s=q.sql`${q.sql.identifier(i[h.Table.Symbol.OriginalName])}`;return i[h.Table.Symbol.Schema]&&(s=q.sql`${q.sql.identifier(i[h.Table.Symbol.Schema])}.${s}`),q.sql`${s} ${q.sql.identifier(i[h.Table.Symbol.Name])}`}return i}buildSelectQuery({withList:i,fields:s,fieldsFlat:n,where:o,having:u,table:f,joins:c,orderBy:S,groupBy:T,limit:w,offset:v,lockingClause:C,distinct:j,setOperators:O}){const Q=n??(0,p.orderSelectedFields)(s);for(const i of Q)if((0,t.is)(i.field,l.Column)&&(0,h.getTableName)(i.field.table)!==((0,t.is)(f,b.Subquery)?f._.alias:(0,t.is)(f,y.PgViewBase)?f[$.ViewBaseConfig].name:(0,t.is)(f,q.SQL)?void 0:(0,h.getTableName)(f))&&!(i=>c?.some((({alias:s})=>s===(i[h.Table.Symbol.IsAlias]?(0,h.getTableName)(i):i[h.Table.Symbol.BaseName]))))(i.field.table)){const s=(0,h.getTableName)(i.field.table);throw new Error(`Your "${i.path.join("->")}" field references a column "${s}"."${i.field.name}", but the table "${s}" is not part of the query! Did you forget to join it?`)}const P=!c||0===c.length,N=this.buildWithCTE(i);let A;j&&(A=!0===j?q.sql` distinct`:q.sql` distinct on (${q.sql.join(j.on,q.sql`, `)})`);const L=this.buildSelection(Q,{isSingleTable:P}),_=this.buildFromTable(f),K=this.buildJoins(c),E=o?q.sql` where ${o}`:void 0,B=u?q.sql` having ${u}`:void 0;let F,I;S&&S.length>0&&(F=q.sql` order by ${q.sql.join(S,q.sql`, `)}`),T&&T.length>0&&(I=q.sql` group by ${q.sql.join(T,q.sql`, `)}`);const k="object"==typeof w||"number"==typeof w&&w>=0?q.sql` limit ${w}`:void 0,z=v?q.sql` offset ${v}`:void 0,D=q.sql.empty();if(C){const i=q.sql` for ${q.sql.raw(C.strength)}`;C.config.of&&i.append(q.sql` of ${q.sql.join(Array.isArray(C.config.of)?C.config.of:[C.config.of],q.sql`, `)}`),C.config.noWait?i.append(q.sql` no wait`):C.config.skipLocked&&i.append(q.sql` skip locked`),D.append(i)}const M=q.sql`${N}select${A} ${L} from ${_}${K}${E}${I}${B}${F}${k}${z}${D}`;return O.length>0?this.buildSetOperations(M,O):M}buildSetOperations(i,s){const[l,...t]=s;if(!l)throw new Error("Cannot pass undefined values to any set operator");return 0===t.length?this.buildSetOperationQuery({leftSelect:i,setOperator:l}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:i,setOperator:l}),t)}buildSetOperationQuery({leftSelect:i,setOperator:{type:s,isAll:l,rightSelect:n,limit:u,orderBy:f,offset:c}}){const b=q.sql`(${i.getSQL()}) `,h=q.sql`(${n.getSQL()})`;let p;if(f&&f.length>0){const i=[];for(const s of f)if((0,t.is)(s,o.PgColumn))i.push(q.sql.identifier(s.name));else if((0,t.is)(s,q.SQL)){for(let i=0;i<s.queryChunks.length;i++){const l=s.queryChunks[i];(0,t.is)(l,o.PgColumn)&&(s.queryChunks[i]=q.sql.identifier(l.name))}i.push(q.sql`${s}`)}else i.push(q.sql`${s}`);p=q.sql` order by ${q.sql.join(i,q.sql`, `)} `}const $="object"==typeof u||"number"==typeof u&&u>=0?q.sql` limit ${u}`:void 0,y=q.sql.raw(`${s} ${l?"all ":""}`),S=c?q.sql` offset ${c}`:void 0;return q.sql`${b}${y}${h}${p}${$}${S}`}buildInsertQuery({table:i,values:s,onConflict:l,returning:n,withList:o,select:u,overridingSystemValue_:f}){const c=[],b=i[h.Table.Symbol.Columns],p=Object.entries(b).filter((([i,s])=>!s.shouldDisableInsert())),$=p.map((([,i])=>q.sql.identifier(this.casing.getColumnCasing(i))));if(u){const i=s;(0,t.is)(i,q.SQL)?c.push(i):c.push(i.getSQL())}else{const i=s;c.push(q.sql.raw("values "));for(const[s,l]of i.entries()){const n=[];for(const[i,s]of p){const o=l[i];if(void 0===o||(0,t.is)(o,q.Param)&&void 0===o.value)if(void 0!==s.defaultFn){const i=s.defaultFn(),l=(0,t.is)(i,q.SQL)?i:q.sql.param(i,s);n.push(l)}else if(s.default||void 0===s.onUpdateFn)n.push(q.sql`default`);else{const i=s.onUpdateFn(),l=(0,t.is)(i,q.SQL)?i:q.sql.param(i,s);n.push(l)}else n.push(o)}c.push(n),s<i.length-1&&c.push(q.sql`, `)}}const y=this.buildWithCTE(o),S=q.sql.join(c),T=n?q.sql` returning ${this.buildSelection(n,{isSingleTable:!0})}`:void 0,w=l?q.sql` on conflict ${l}`:void 0,v=!0===f?q.sql`overriding system value `:void 0;return q.sql`${y}insert into ${i} ${$} ${v}${S}${w}${T}`}buildRefreshMaterializedViewQuery({view:i,concurrently:s,withNoData:l}){const t=s?q.sql` concurrently`:void 0,n=l?q.sql` with no data`:void 0;return q.sql`refresh materialized view${t} ${i}${n}`}prepareTyping(i){return(0,t.is)(i,o.PgJsonb)||(0,t.is)(i,o.PgJson)?"json":(0,t.is)(i,o.PgNumeric)?"decimal":(0,t.is)(i,o.PgTime)?"time":(0,t.is)(i,o.PgTimestamp)||(0,t.is)(i,o.PgTimestampString)?"timestamp":(0,t.is)(i,o.PgDate)||(0,t.is)(i,o.PgDateString)?"date":(0,t.is)(i,o.PgUUID)?"uuid":"none"}sqlToQuery(i,s){return i.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping,invokeSource:s})}buildRelationalQueryWithoutPK({fullSchema:s,schema:o,tableNamesMap:p,table:$,tableConfig:y,queryConfig:S,tableAlias:T,nestedQueryRelation:w,joinOn:v}){let C,j,O,Q=[],P=[];const N=[];if(!0===S){Q=Object.entries(y.columns).map((([s,l])=>({dbKey:l.name,tsKey:s,field:(0,i.aliasedTableColumn)(l,T),relationTableTsKey:void 0,isJson:!1,selection:[]})))}else{const n=Object.fromEntries(Object.entries(y.columns).map((([s,l])=>[s,(0,i.aliasedTableColumn)(l,T)])));if(S.where){const s="function"==typeof S.where?S.where(n,(0,f.getOperators)()):S.where;O=s&&(0,i.mapColumnsInSQLToAlias)(s,T)}const u=[];let $=[];if(S.columns){let i=!1;for(const[s,l]of Object.entries(S.columns))void 0!==l&&s in y.columns&&(i||!0!==l||(i=!0),$.push(s));$.length>0&&($=i?$.filter((i=>!0===S.columns?.[i])):Object.keys(y.columns).filter((i=>!$.includes(i))))}else $=Object.keys(y.columns);for(const i of $){const s=y.columns[i];u.push({tsKey:i,value:s})}let w,v=[];if(S.with&&(v=Object.entries(S.with).filter((i=>!!i[1])).map((([i,s])=>({tsKey:i,queryConfig:s,relation:y.relations[i]})))),S.extras){w="function"==typeof S.extras?S.extras(n,{sql:q.sql}):S.extras;for(const[s,l]of Object.entries(w))u.push({tsKey:s,value:(0,i.mapColumnsInAliasedSQLToAlias)(l,T)})}for(const{tsKey:s,value:n}of u)Q.push({dbKey:(0,t.is)(n,q.SQL.Aliased)?n.fieldAlias:y.columns[s].name,tsKey:s,field:(0,t.is)(n,l.Column)?(0,i.aliasedTableColumn)(n,T):n,relationTableTsKey:void 0,isJson:!1,selection:[]});let A="function"==typeof S.orderBy?S.orderBy(n,(0,f.getOrderByOperators)()):S.orderBy??[];Array.isArray(A)||(A=[A]),P=A.map((s=>(0,t.is)(s,l.Column)?(0,i.aliasedTableColumn)(s,T):(0,i.mapColumnsInSQLToAlias)(s,T))),C=S.limit,j=S.offset;for(const{tsKey:l,queryConfig:n,relation:u}of v){const $=(0,f.normalizeRelation)(o,p,u),y=p[(0,h.getTableUniqueName)(u.referencedTable)],S=`${T}_${l}`,w=(0,c.and)(...$.fields.map(((s,l)=>(0,c.eq)((0,i.aliasedTableColumn)($.references[l],S),(0,i.aliasedTableColumn)(s,T))))),v=this.buildRelationalQueryWithoutPK({fullSchema:s,schema:o,tableNamesMap:p,table:s[y],tableConfig:o[y],queryConfig:(0,t.is)(u,f.One)?!0===n?{limit:1}:{...n,limit:1}:n,tableAlias:S,joinOn:w,nestedQueryRelation:u}),C=q.sql`${q.sql.identifier(S)}.${q.sql.identifier("data")}`.as(l);N.push({on:q.sql`true`,table:new b.Subquery(v.sql,{},S),alias:S,joinType:"left",lateral:!0}),Q.push({dbKey:l,tsKey:l,field:C,relationTableTsKey:y,isJson:!0,selection:v.selection})}}if(0===Q.length)throw new n.DrizzleError({message:`No fields selected for table "${y.tsName}" ("${T}")`});let A;if(O=(0,c.and)(v,O),w){let s=q.sql`json_build_array(${q.sql.join(Q.map((({field:i,tsKey:s,isJson:l})=>l?q.sql`${q.sql.identifier(`${T}_${s}`)}.${q.sql.identifier("data")}`:(0,t.is)(i,q.SQL.Aliased)?i.sql:i)),q.sql`, `)})`;(0,t.is)(w,f.Many)&&(s=q.sql`coalesce(json_agg(${s}${P.length>0?q.sql` order by ${q.sql.join(P,q.sql`, `)}`:void 0}), '[]'::json)`);const n=[{dbKey:"data",tsKey:"data",field:s.as("data"),isJson:!0,relationTableTsKey:y.tsName,selection:Q}];void 0!==C||void 0!==j||P.length>0?(A=this.buildSelectQuery({table:(0,i.aliasedTable)($,T),fields:{},fieldsFlat:[{path:[],field:q.sql.raw("*")}],where:O,limit:C,offset:j,orderBy:P,setOperators:[]}),O=void 0,C=void 0,j=void 0,P=[]):A=(0,i.aliasedTable)($,T),A=this.buildSelectQuery({table:(0,t.is)(A,u.PgTable)?A:new b.Subquery(A,{},T),fields:{},fieldsFlat:n.map((({field:s})=>({path:[],field:(0,t.is)(s,l.Column)?(0,i.aliasedTableColumn)(s,T):s}))),joins:N,where:O,limit:C,offset:j,orderBy:P,setOperators:[]})}else A=this.buildSelectQuery({table:(0,i.aliasedTable)($,T),fields:{},fieldsFlat:Q.map((({field:s})=>({path:[],field:(0,t.is)(s,l.Column)?(0,i.aliasedTableColumn)(s,T):s}))),joins:N,where:O,limit:C,offset:j,orderBy:P,setOperators:[]});return{tableTsKey:y.tsName,sql:A,selection:Q}}}e.PgDialect=S}),3822,[3741,3823,3742,3743,3758,3815,3768,3766,3806,3744,3753,3757,3771,3756,3824]);
__d((function(g,r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.CasingCache=void 0,e.toCamelCase=n,e.toSnakeCase=s;var c=r(d[0]),t=r(d[1]);function s(c){return(c.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).map((c=>c.toLowerCase())).join("_")}function n(c){return(c.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).reduce(((c,t,s)=>c+(0===s?t.toLowerCase():`${t[0].toUpperCase()}${t.slice(1)}`)),"")}function l(c){return c}class i{static[c.entityKind]="CasingCache";cache={};cachedTables={};constructor(c){this.convert="snake_case"===c?s:"camelCase"===c?n:l}getColumnCasing(c){if(!c.keyAsName)return c.name;const s=`${c.table[t.Table.Symbol.Schema]??"public"}.${c.table[t.Table.Symbol.OriginalName]}.${c.name}`;return this.cache[s]||this.cacheTable(c.table),this.cache[s]}cacheTable(c){const s=`${c[t.Table.Symbol.Schema]??"public"}.${c[t.Table.Symbol.OriginalName]}`;if(!this.cachedTables[s]){for(const n of Object.values(c[t.Table.Symbol.Columns])){const c=`${s}.${n.name}`;this.cache[c]=this.convert(n.name)}this.cachedTables[s]=!0}}clearCache(){this.cache={},this.cachedTables={}}}e.CasingCache=i}),3823,[3743,3757]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgViewBase=void 0;var s=r(d[0]),t=r(d[1]);class n extends t.View{static[s.entityKind]="PgViewBase"}e.PgViewBase=n}),3824,[3743,3744]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.unionAll=e.union=e.intersectAll=e.intersect=e.exceptAll=e.except=e.PgSelectQueryBuilderBase=e.PgSelectBuilder=e.PgSelectBase=void 0;var t=r(d[0]),s=r(d[1]),n=r(d[2]),o=r(d[3]),l=r(d[4]),c=r(d[5]),h=r(d[6]),u=r(d[7]),f=r(d[8]),p=r(d[9]),y=r(d[10]);class S{static[t.entityKind]="PgSelectBuilder";withList=[];constructor(t){this.fields=t.fields,this.session=t.session,this.dialect=t.dialect,t.withList&&(this.withList=t.withList),this.distinct=t.distinct}setToken(t){return this.authToken=t,this}from(n){const o=!!this.fields,l=n;let u;return u=this.fields?this.fields:(0,t.is)(l,h.Subquery)?Object.fromEntries(Object.keys(l._.selectedFields).map((t=>[t,l[t]]))):(0,t.is)(l,s.PgViewBase)?l[y.ViewBaseConfig].selectedFields:(0,t.is)(l,c.SQL)?{}:(0,p.getTableColumns)(l),new w({table:l,fields:u,isPartialSelect:o,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct}).setToken(this.authToken)}}e.PgSelectBuilder=S;class b extends n.TypedQueryBuilder{static[t.entityKind]="PgSelectQueryBuilder";constructor({table:t,fields:s,isPartialSelect:n,session:o,dialect:l,withList:c,distinct:h}){super(),this.config={withList:c,table:t,fields:{...s},distinct:h,setOperators:[]},this.isPartialSelect=n,this.session=o,this.dialect=l,this._={selectedFields:s},this.tableName=(0,p.getTableLikeName)(t),this.joinsNotNullableMap="string"==typeof this.tableName?{[this.tableName]:!0}:{}}createJoin(s){return(n,o)=>{const f=this.tableName,S=(0,p.getTableLikeName)(n);if("string"==typeof S&&this.config.joins?.some((t=>t.alias===S)))throw new Error(`Alias "${S}" is already used in this query`);if(!this.isPartialSelect&&(1===Object.keys(this.joinsNotNullableMap).length&&"string"==typeof f&&(this.config.fields={[f]:this.config.fields}),"string"==typeof S&&!(0,t.is)(n,c.SQL))){const s=(0,t.is)(n,h.Subquery)?n._.selectedFields:(0,t.is)(n,c.View)?n[y.ViewBaseConfig].selectedFields:n[u.Table.Symbol.Columns];this.config.fields[S]=s}if("function"==typeof o&&(o=o(new Proxy(this.config.fields,new l.SelectionProxyHandler({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:o,table:n,joinType:s,alias:S}),"string"==typeof S)switch(s){case"left":this.joinsNotNullableMap[S]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map((([t])=>[t,!1]))),this.joinsNotNullableMap[S]=!0;break;case"inner":this.joinsNotNullableMap[S]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map((([t])=>[t,!1]))),this.joinsNotNullableMap[S]=!1}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");createSetOperator(t,s){return n=>{const o="function"==typeof n?n(x()):n;if(!(0,p.haveSameKeys)(this.getSelectedFields(),o.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:t,isAll:s,rightSelect:o}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators(t){return this.config.setOperators.push(...t),this}where(t){return"function"==typeof t&&(t=t(new Proxy(this.config.fields,new l.SelectionProxyHandler({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=t,this}having(t){return"function"==typeof t&&(t=t(new Proxy(this.config.fields,new l.SelectionProxyHandler({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=t,this}groupBy(...t){if("function"==typeof t[0]){const s=t[0](new Proxy(this.config.fields,new l.SelectionProxyHandler({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(s)?s:[s]}else this.config.groupBy=t;return this}orderBy(...t){if("function"==typeof t[0]){const s=t[0](new Proxy(this.config.fields,new l.SelectionProxyHandler({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),n=Array.isArray(s)?s:[s];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=n:this.config.orderBy=n}else{const s=t;this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=s:this.config.orderBy=s}return this}limit(t){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=t:this.config.limit=t,this}offset(t){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=t:this.config.offset=t,this}for(t,s={}){return this.config.lockingClause={strength:t,config:s},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){const{typings:t,...s}=this.dialect.sqlToQuery(this.getSQL());return s}as(t){return new Proxy(new h.Subquery(this.getSQL(),this.config.fields,t),new l.SelectionProxyHandler({alias:t,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new l.SelectionProxyHandler({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}}e.PgSelectQueryBuilderBase=b;class w extends b{static[t.entityKind]="PgSelect";_prepare(t){const{session:s,config:n,dialect:o,joinsNotNullableMap:l,authToken:c}=this;if(!s)throw new Error("Cannot execute a query on a query builder. Please use a database instance instead.");return f.tracer.startActiveSpan("drizzle.prepareQuery",(()=>{const h=(0,p.orderSelectedFields)(n.fields),u=s.prepareQuery(o.sqlToQuery(this.getSQL()),h,t,!0);return u.joinsNotNullableMap=l,u.setToken(c)}))}prepare(t){return this._prepare(t)}setToken(t){return this.authToken=t,this}execute=t=>f.tracer.startActiveSpan("drizzle.operation",(()=>this._prepare().execute(t,this.authToken)))}function B(t,s){return(n,o,...l)=>{const c=[o,...l].map((n=>({type:t,isAll:s,rightSelect:n})));for(const t of c)if(!(0,p.haveSameKeys)(n.getSelectedFields(),t.rightSelect.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return n.addSetOperators(c)}}e.PgSelectBase=w,(0,p.applyMixins)(w,[o.QueryPromise]);const x=()=>({union:N,unionAll:P,intersect:q,intersectAll:A,except:O,exceptAll:j}),N=e.union=B("union",!1),P=e.unionAll=B("union",!0),q=e.intersect=B("intersect",!1),A=e.intersectAll=B("intersect",!0),O=e.except=B("except",!1),j=e.exceptAll=B("except",!0)}),3825,[3743,3824,3826,3765,3819,3744,3753,3757,3754,3771,3756]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.TypedQueryBuilder=void 0;var t=r(d[0]);class l{static[t.entityKind]="TypedQueryBuilder";getSelectedFields(){return this._.selectedFields}}e.TypedQueryBuilder=l}),3826,[3743]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgRefreshMaterializedView=void 0;var t=r(d[0]),n=r(d[1]),s=r(d[2]);class o extends n.QueryPromise{constructor(t,n,s){super(),this.session=n,this.dialect=s,this.config={view:t}}static[t.entityKind]="PgRefreshMaterializedView";concurrently(){if(void 0!==this.config.withNoData)throw new Error("Cannot use concurrently and withNoData together");return this.config.concurrently=!0,this}withNoData(){if(void 0!==this.config.concurrently)throw new Error("Cannot use concurrently and withNoData together");return this.config.withNoData=!0,this}getSQL(){return this.dialect.buildRefreshMaterializedViewQuery(this.config)}toSQL(){const{typings:t,...n}=this.dialect.sqlToQuery(this.getSQL());return n}_prepare(t){return s.tracer.startActiveSpan("drizzle.prepareQuery",(()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,t,!0)))}prepare(t){return this._prepare(t)}setToken(t){return this.authToken=t,this}execute=t=>s.tracer.startActiveSpan("drizzle.operation",(()=>this._prepare().execute(t,this.authToken)))}e.PgRefreshMaterializedView=o}),3827,[3743,3765,3754]);
__d((function(g,r,i,a,m,e,d){}),3828,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgUpdateBuilder=e.PgUpdateBase=void 0;var t=r(d[0]),s=r(d[1]),n=r(d[2]),o=r(d[3]),l=r(d[4]),h=r(d[5]),c=r(d[6]),u=r(d[7]),f=r(d[8]);class b{constructor(t,s,n,o){this.table=t,this.session=s,this.dialect=n,this.withList=o}static[t.entityKind]="PgUpdateBuilder";setToken(t){return this.authToken=t,this}set(t){return new p(this.table,(0,u.mapUpdateSet)(this.table,t),this.session,this.dialect,this.withList).setToken(this.authToken)}}e.PgUpdateBuilder=b;class p extends n.QueryPromise{constructor(t,s,n,o,l){super(),this.session=n,this.dialect=o,this.config={set:s,table:t,withList:l,joins:[]},this.tableName=(0,u.getTableLikeName)(t),this.joinsNotNullableMap="string"==typeof this.tableName?{[this.tableName]:!0}:{}}static[t.entityKind]="PgUpdate";from(t){const s=t,n=(0,u.getTableLikeName)(s);return"string"==typeof n&&(this.joinsNotNullableMap[n]=!0),this.config.from=s,this}getTableLikeFields(n){return(0,t.is)(n,s.PgTable)?n[c.Table.Symbol.Columns]:(0,t.is)(n,h.Subquery)?n._.selectedFields:n[f.ViewBaseConfig].selectedFields}createJoin(s){return(n,h)=>{const f=(0,u.getTableLikeName)(n);if("string"==typeof f&&this.config.joins.some((t=>t.alias===f)))throw new Error(`Alias "${f}" is already used in this query`);if("function"==typeof h){const s=this.config.from&&!(0,t.is)(this.config.from,l.SQL)?this.getTableLikeFields(this.config.from):void 0;h=h(new Proxy(this.config.table[c.Table.Symbol.Columns],new o.SelectionProxyHandler({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),s&&new Proxy(s,new o.SelectionProxyHandler({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}if(this.config.joins.push({on:h,table:n,joinType:s,alias:f}),"string"==typeof f)switch(s){case"left":this.joinsNotNullableMap[f]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map((([t])=>[t,!1]))),this.joinsNotNullableMap[f]=!0;break;case"inner":this.joinsNotNullableMap[f]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map((([t])=>[t,!1]))),this.joinsNotNullableMap[f]=!1}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where(t){return this.config.where=t,this}returning(s){if(!s&&(s=Object.assign({},this.config.table[c.Table.Symbol.Columns]),this.config.from)){const n=(0,u.getTableLikeName)(this.config.from);if("string"==typeof n&&this.config.from&&!(0,t.is)(this.config.from,l.SQL)){const t=this.getTableLikeFields(this.config.from);s[n]=t}for(const n of this.config.joins){const o=(0,u.getTableLikeName)(n.table);if("string"==typeof o&&!(0,t.is)(n.table,l.SQL)){const t=this.getTableLikeFields(n.table);s[o]=t}}}return this.config.returningFields=s,this.config.returning=(0,u.orderSelectedFields)(s),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){const{typings:t,...s}=this.dialect.sqlToQuery(this.getSQL());return s}_prepare(t){const s=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,t,!0);return s.joinsNotNullableMap=this.joinsNotNullableMap,s}prepare(t){return this._prepare(t)}setToken(t){return this.authToken=t,this}execute=t=>this._prepare().execute(t,this.authToken);getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new o.SelectionProxyHandler({alias:(0,c.getTableName)(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}}e.PgUpdateBase=p}),3829,[3743,3768,3765,3819,3744,3753,3757,3771,3756]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgCountBuilder=void 0;var t=r(d[0]),s=r(d[1]);class n extends s.SQL{constructor(t){super(n.buildEmbeddedCount(t.source,t.filters).queryChunks),this.params=t,this.mapWith(Number),this.session=t.session,this.sql=n.buildCount(t.source,t.filters)}static[t.entityKind]="PgCountBuilder";[Symbol.toStringTag]="PgCountBuilder";static buildEmbeddedCount(t,n){return s.sql`(select count(*) from ${t}${s.sql.raw(" where ").if(n)}${n})`}static buildCount(t,n){return s.sql`select count(*) as count from ${t}${s.sql.raw(" where ").if(n)}${n};`}setToken(t){return this.token=t,this}then(t,s){return Promise.resolve(this.session.count(this.sql,this.token)).then(t,s)}catch(t){return this.then(void 0,t)}finally(t){return this.then((s=>(t?.(),s)),(s=>{throw t?.(),s}))}}e.PgCountBuilder=n}),3830,[3743,3744]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.RelationalQueryBuilder=e.PgRelationalQuery=void 0;var t=r(d[0]),s=r(d[1]),l=r(d[2]),h=r(d[3]);class n{constructor(t,s,l,h,n,u,o){this.fullSchema=t,this.schema=s,this.tableNamesMap=l,this.table=h,this.tableConfig=n,this.dialect=u,this.session=o}static[t.entityKind]="PgRelationalQueryBuilder";findMany(t){return new u(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,t||{},"many")}findFirst(t){return new u(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,t?{...t,limit:1}:{limit:1},"first")}}e.RelationalQueryBuilder=n;class u extends s.QueryPromise{constructor(t,s,l,h,n,u,o,c,b){super(),this.fullSchema=t,this.schema=s,this.tableNamesMap=l,this.table=h,this.tableConfig=n,this.dialect=u,this.session=o,this.config=c,this.mode=b}static[t.entityKind]="PgRelationalQuery";_prepare(t){return h.tracer.startActiveSpan("drizzle.prepareQuery",(()=>{const{query:s,builtQuery:h}=this._toSQL();return this.session.prepareQuery(h,void 0,t,!0,((t,h)=>{const n=t.map((t=>(0,l.mapRelationalRow)(this.schema,this.tableConfig,t,s.selection,h)));return"first"===this.mode?n[0]:n}))}))}prepare(t){return this._prepare(t)}_getQuery(){return this.dialect.buildRelationalQueryWithoutPK({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}getSQL(){return this._getQuery().sql}_toSQL(){const t=this._getQuery();return{query:t,builtQuery:this.dialect.sqlToQuery(t.sql)}}toSQL(){return this._toSQL().builtQuery}setToken(t){return this.authToken=t,this}execute(){return h.tracer.startActiveSpan("drizzle.operation",(()=>this._prepare().execute(void 0,this.authToken)))}}e.PgRelationalQuery=u}),3831,[3743,3765,3766,3754]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgRaw=void 0;var t=r(d[0]),s=r(d[1]);class u extends s.QueryPromise{constructor(t,s,u,n){super(),this.execute=t,this.sql=s,this.query=u,this.mapBatchResult=n}static[t.entityKind]="PgRaw";getSQL(){return this.sql}getQuery(){return this.query}mapResult(t,s){return s?this.mapBatchResult(t):t}_prepare(){return this}isResponseInArrayMode(){return!1}}e.PgRaw=u}),3832,[3743,3765]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.IndexBuilderOn=e.IndexBuilder=e.Index=void 0,e.index=function(n){return new s(!1,n)},e.uniqueIndex=function(n){return new s(!0,n)};var n=r(d[0]),t=r(d[1]),u=r(d[2]);class s{constructor(n,t){this.unique=n,this.name=t}static[t.entityKind]="PgIndexBuilderOn";on(...s){return new o(s.map((s=>{if((0,t.is)(s,n.SQL))return s;const o=new u.IndexedColumn(s.name,!!s.keyAsName,s.columnType,s.indexConfig);return s.indexConfig=JSON.parse(JSON.stringify(s.defaultConfig)),o})),this.unique,!1,this.name)}onOnly(...s){return new o(s.map((s=>{if((0,t.is)(s,n.SQL))return s;const o=new u.IndexedColumn(s.name,!!s.keyAsName,s.columnType,s.indexConfig);return s.indexConfig=s.defaultConfig,o})),this.unique,!0,this.name)}using(s,...c){return new o(c.map((s=>{if((0,t.is)(s,n.SQL))return s;const o=new u.IndexedColumn(s.name,!!s.keyAsName,s.columnType,s.indexConfig);return s.indexConfig=JSON.parse(JSON.stringify(s.defaultConfig)),o})),this.unique,!0,this.name,s)}}e.IndexBuilderOn=s;class o{static[t.entityKind]="PgIndexBuilder";constructor(n,t,u,s,o="btree"){this.config={name:s,columns:n,unique:t,only:u,method:o}}concurrently(){return this.config.concurrently=!0,this}with(n){return this.config.with=n,this}where(n){return this.config.where=n,this}build(n){return new c(this.config,n)}}e.IndexBuilder=o;class c{static[t.entityKind]="PgIndex";constructor(n,t){this.config={...n,table:t}}}e.Index=c}),3833,[3744,3743,3815]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgPolicy=void 0,e.pgPolicy=function(t,n){return new s(t,n)};var t=r(d[0]);class s{constructor(t,s){this.name=t,s&&(this.as=s.as,this.for=s.for,this.to=s.to,this.using=s.using,this.withCheck=s.withCheck)}static[t.entityKind]="PgPolicy";link(t){return this._linkedTable=t,this}}e.PgPolicy=s}),3834,[3743]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgRole=void 0,e.pgRole=function(t,o){return new n(t,o)};var t=r(d[0]);class n{constructor(t,n){this.name=t,n&&(this.createDb=n.createDb,this.createRole=n.createRole,this.inherit=n.inherit)}static[t.entityKind]="PgRole";existing(){return this._existing=!0,this}}e.PgRole=n}),3835,[3743]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgSchema=void 0,e.isPgSchema=function(s){return(0,t.is)(s,o)},e.pgSchema=function(t){if("public"===t)throw new Error("You can't specify 'public' as schema name. Postgres is using public schema by default. If you want to use 'public' schema, just use pgTable() instead of creating a schema");return new o(t)};var t=r(d[0]),s=r(d[1]),c=r(d[2]),h=r(d[3]),n=r(d[4]),u=r(d[5]);class o{constructor(t){this.schemaName=t}static[t.entityKind]="PgSchema";table=(t,s,c)=>(0,n.pgTableWithSchema)(t,s,c,this.schemaName);view=(t,s)=>(0,u.pgViewWithSchema)(t,s,this.schemaName);materializedView=(t,s)=>(0,u.pgMaterializedViewWithSchema)(t,s,this.schemaName);enum=(t,s)=>(0,c.pgEnumWithSchema)(t,s,this.schemaName);sequence=(t,s)=>(0,h.pgSequenceWithSchema)(t,s,this.schemaName);getSQL(){return new s.SQL([s.sql.identifier(this.schemaName)])}shouldOmitSQLParens(){return!0}}e.PgSchema=o}),3836,[3743,3744,3745,3837,3768,3838]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgSequence=void 0,e.isPgSequence=function(c){return(0,n.is)(c,t)},e.pgSequence=function(n,t){return c(n,t,void 0)},e.pgSequenceWithSchema=c;var n=r(d[0]);class t{constructor(n,t,c){this.seqName=n,this.seqOptions=t,this.schema=c}static[n.entityKind]="PgSequence"}function c(n,c,u){return new t(n,c,u)}e.PgSequence=t}),3837,[3743]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ViewBuilder=e.PgView=e.PgMaterializedViewConfig=e.PgMaterializedView=e.MaterializedViewBuilderCore=e.MaterializedViewBuilder=e.ManualViewBuilder=e.ManualMaterializedViewBuilder=e.DefaultViewBuilderCore=void 0,e.isPgMaterializedView=function(n){return(0,t.is)(n,M)},e.isPgView=function(n){return(0,t.is)(n,y)},e.pgMaterializedView=function(t,n){return v(t,n,void 0)},e.pgMaterializedViewWithSchema=v,e.pgView=function(t,n){return x(t,n,void 0)},e.pgViewWithSchema=x;var t=r(d[0]),n=r(d[1]),s=r(d[2]),l=r(d[3]),o=r(d[4]),c=r(d[5]),h=r(d[6]);class u{constructor(t,n){this.name=t,this.schema=n}static[t.entityKind]="PgDefaultViewBuilderCore";config={};with(t){return this.config.with=t,this}}e.DefaultViewBuilderCore=u;class w extends u{static[t.entityKind]="PgViewBuilder";as(t){"function"==typeof t&&(t=t(new l.QueryBuilder));const s=new n.SelectionProxyHandler({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}),o=new Proxy(t.getSelectedFields(),s);return new Proxy(new y({pgConfig:this.config,config:{name:this.name,schema:this.schema,selectedFields:o,query:t.getSQL().inlineParams()}}),s)}}e.ViewBuilder=w;class f extends u{static[t.entityKind]="PgManualViewBuilder";constructor(t,n,l){super(t,l),this.columns=(0,s.getTableColumns)((0,o.pgTable)(t,n))}existing(){return new Proxy(new y({pgConfig:void 0,config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:void 0}}),new n.SelectionProxyHandler({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}as(t){return new Proxy(new y({pgConfig:this.config,config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:t.inlineParams()}}),new n.SelectionProxyHandler({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}}e.ManualViewBuilder=f;class P{constructor(t,n){this.name=t,this.schema=n}static[t.entityKind]="PgMaterializedViewBuilderCore";config={};using(t){return this.config.using=t,this}with(t){return this.config.with=t,this}tablespace(t){return this.config.tablespace=t,this}withNoData(){return this.config.withNoData=!0,this}}e.MaterializedViewBuilderCore=P;class p extends P{static[t.entityKind]="PgMaterializedViewBuilder";as(t){"function"==typeof t&&(t=t(new l.QueryBuilder));const s=new n.SelectionProxyHandler({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}),o=new Proxy(t.getSelectedFields(),s);return new Proxy(new M({pgConfig:{with:this.config.with,using:this.config.using,tablespace:this.config.tablespace,withNoData:this.config.withNoData},config:{name:this.name,schema:this.schema,selectedFields:o,query:t.getSQL().inlineParams()}}),s)}}e.MaterializedViewBuilder=p;class V extends P{static[t.entityKind]="PgManualMaterializedViewBuilder";constructor(t,n,l){super(t,l),this.columns=(0,s.getTableColumns)((0,o.pgTable)(t,n))}existing(){return new Proxy(new M({pgConfig:{tablespace:this.config.tablespace,using:this.config.using,with:this.config.with,withNoData:this.config.withNoData},config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:void 0}}),new n.SelectionProxyHandler({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}as(t){return new Proxy(new M({pgConfig:{tablespace:this.config.tablespace,using:this.config.using,with:this.config.with,withNoData:this.config.withNoData},config:{name:this.name,schema:this.schema,selectedFields:this.columns,query:t.inlineParams()}}),new n.SelectionProxyHandler({alias:this.name,sqlBehavior:"error",sqlAliasedBehavior:"alias",replaceOriginalName:!0}))}}e.ManualMaterializedViewBuilder=V;class y extends c.PgViewBase{static[t.entityKind]="PgView";constructor({pgConfig:t,config:n}){super(n),t&&(this[h.PgViewConfig]={with:t.with})}}e.PgView=y;const B=e.PgMaterializedViewConfig=Symbol.for("drizzle:PgMaterializedViewConfig");class M extends c.PgViewBase{static[t.entityKind]="PgMaterializedView";constructor({pgConfig:t,config:n}){super(n),this[B]={with:t?.with,using:t?.using,tablespace:t?.tablespace,withNoData:t?.withNoData}}}function x(t,n,s){return n?new f(t,n,s):new w(t,s)}function v(t,n,s){return n?new V(t,n,s):new p(t,s)}e.PgMaterializedView=M}),3838,[3743,3819,3771,3821,3768,3824,3839]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgViewConfig=void 0;e.PgViewConfig=Symbol.for("drizzle:PgViewConfig")}),3839,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PgTransaction=e.PgSession=e.PgPreparedQuery=void 0;var t=r(d[0]),s=r(d[1]),n=r(d[2]),o=r(d[3]),c=r(d[4]);class u{constructor(t){this.query=t}getQuery(){return this.query}mapResult(t,s){return t}setToken(t){return this.authToken=t,this}static[t.entityKind]="PgPreparedQuery"}e.PgPreparedQuery=u;class l{constructor(t){this.dialect=t}static[t.entityKind]="PgSession";execute(t,s){return o.tracer.startActiveSpan("drizzle.operation",(()=>o.tracer.startActiveSpan("drizzle.prepareQuery",(()=>this.prepareQuery(this.dialect.sqlToQuery(t),void 0,void 0,!1))).setToken(s).execute(void 0,s)))}all(t){return this.prepareQuery(this.dialect.sqlToQuery(t),void 0,void 0,!1).all()}async count(t,s){const n=await this.execute(t,s);return Number(n[0].count)}}e.PgSession=l;class h extends c.PgDatabase{constructor(t,s,n,o=0){super(t,s,n),this.schema=n,this.nestedIndex=o}static[t.entityKind]="PgTransaction";rollback(){throw new s.TransactionRollbackError}getTransactionConfigSQL(t){const s=[];return t.isolationLevel&&s.push(`isolation level ${t.isolationLevel}`),t.accessMode&&s.push(t.accessMode),"boolean"==typeof t.deferrable&&s.push(t.deferrable?"deferrable":"not deferrable"),n.sql.raw(s.join(" "))}setTransaction(t){return this.session.execute(n.sql`set transaction ${this.getTransactionConfigSQL(t)}`)}}e.PgTransaction=h}),3840,[3743,3758,3806,3754,3816]);
__d((function(g,r,i,a,m,e,d){}),3841,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getMaterializedViewConfig=function(n){return{...n[s.ViewBaseConfig],...n[h.PgMaterializedViewConfig]}},e.getTableConfig=function(s){const C=Object.values(s[o.Table.Symbol.Columns]),h=[],S=[],p=[],P=Object.values(s[l.PgTable.Symbol.InlineForeignKeys]),B=[],T=s[o.Table.Symbol.Name],v=s[o.Table.Symbol.Schema],w=[],V=s[l.PgTable.Symbol.EnableRLS],K=s[l.PgTable.Symbol.ExtraConfigBuilder];if(void 0!==K){const l=K(s[o.Table.Symbol.ExtraConfigColumns]),C=Array.isArray(l)?l.flat(1):Object.values(l);for(const l of C)(0,n.is)(l,b.IndexBuilder)?h.push(l.build(s)):(0,n.is)(l,u.CheckBuilder)?S.push(l.build(s)):(0,n.is)(l,y.UniqueConstraintBuilder)?B.push(l.build(s)):(0,n.is)(l,f.PrimaryKeyBuilder)?p.push(l.build(s)):(0,n.is)(l,t.ForeignKeyBuilder)?P.push(l.build(s)):(0,n.is)(l,c.PgPolicy)&&w.push(l)}return{columns:C,indexes:h,foreignKeys:P,checks:S,primaryKeys:p,uniqueConstraints:B,name:T,schema:v,policies:w,enableRLS:V}},e.getViewConfig=function(n){return{...n[s.ViewBaseConfig],...n[C.PgViewConfig]}};var n=r(d[0]),l=r(d[1]),o=r(d[2]),s=r(d[3]),u=r(d[4]),t=r(d[5]),b=r(d[6]),c=r(d[7]),f=r(d[8]),y=r(d[9]),C=r(d[10]),h=r(d[11])}),3842,[3743,3768,3757,3756,3814,3748,3833,3834,3767,3751,3839,3838]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0});var n=r(d[0]);Object.keys(n).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===n[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}}))}))}),3843,[3752]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.timestamps=void 0;var t=r(d[0]),o=r(d[1]);e.timestamps={createdAt:(0,o.timestamp)({withTimezone:!0,mode:'date'}).defaultNow().notNull(),updatedAt:(0,o.timestamp)({withTimezone:!0,mode:'date'}).defaultNow().notNull().$onUpdate((()=>t.sql`(now() AT TIME ZONE 'utc'::text)`))}}),3844,[3740,3812]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.userRelations=e.settlementRelations=e.sessionRelations=e.groupRelations=e.groupMemberRelations=e.groupInviteRelations=e.expenseSplitRelations=e.expenseRelations=e.accountRelations=void 0;var s=r(d[0]),n=r(d[1]);e.userRelations=(0,s.relations)(n.user,(({many:s})=>({sessions:s(n.session),accounts:s(n.account),groupsCreated:s(n.group),groupMemberships:s(n.groupMember),expensesPaid:s(n.expense),expenseSplitsOwed:s(n.expenseSplit),settlementsSent:s(n.settlement,{relationName:'settlementsSent'}),settlementsReceived:s(n.settlement,{relationName:'settlementsReceived'})}))),e.sessionRelations=(0,s.relations)(n.session,(({one:s})=>({user:s(n.user,{fields:[n.session.userId],references:[n.user.id]})}))),e.accountRelations=(0,s.relations)(n.account,(({one:s})=>({user:s(n.user,{fields:[n.account.userId],references:[n.user.id]})}))),e.groupRelations=(0,s.relations)(n.group,(({one:s,many:t})=>({creator:s(n.user,{fields:[n.group.createdById],references:[n.user.id]}),members:t(n.groupMember),expenses:t(n.expense),settlements:t(n.settlement)}))),e.groupMemberRelations=(0,s.relations)(n.groupMember,(({one:s})=>({group:s(n.group,{fields:[n.groupMember.groupId],references:[n.group.id]}),user:s(n.user,{fields:[n.groupMember.userId],references:[n.user.id]})}))),e.groupInviteRelations=(0,s.relations)(n.groupInvite,(({one:s})=>({group:s(n.group,{fields:[n.groupInvite.groupId],references:[n.group.id]})}))),e.expenseRelations=(0,s.relations)(n.expense,(({one:s,many:t})=>({group:s(n.group,{fields:[n.expense.groupId],references:[n.group.id]}),paidBy:s(n.user,{fields:[n.expense.paidById],references:[n.user.id]}),splits:t(n.expenseSplit)}))),e.expenseSplitRelations=(0,s.relations)(n.expenseSplit,(({one:s})=>({expense:s(n.expense,{fields:[n.expenseSplit.expenseId],references:[n.expense.id]}),user:s(n.user,{fields:[n.expenseSplit.userId],references:[n.user.id]})}))),e.settlementRelations=(0,s.relations)(n.settlement,(({one:s})=>({group:s(n.group,{fields:[n.settlement.groupId],references:[n.group.id]}),fromUser:s(n.user,{fields:[n.settlement.fromUserId],references:[n.user.id],relationName:'settlementsSent'}),toUser:s(n.user,{fields:[n.settlement.toUserId],references:[n.user.id],relationName:'settlementsReceived'})})))}),3845,[3740,3811]);
__d((function(g,r,i,a,m,e,d){m.exports=$$require_external('node:fs')}),3896,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.GET=void 0,e.OPTIONS=async function(o){return new Response(o.body,{status:200,headers:s(o)})},e.POST=void 0;var o=r(d[0]),t=r(d[1]),n=r(d[2]);const s=o=>({'Access-Control-Allow-Origin':o.headers.get('origin')??'*','Access-Control-Allow-Headers':'x-trpc-source, x-device-id, x-cardplus-api-key, content-type, authorization','Access-Control-Allow-Credentials':'true'});e.POST=e.GET=s=>{const c=''!==s.headers.get('origin')?s.headers.get('origin'):'https://www.merchant.store';return(0,o.fetchRequestHandler)({endpoint:'/api/trpc',req:s,router:t.appRouter,createContext:()=>(0,n.createTRPCContext)({headers:s.headers}),allowMethodOverride:!0,onError({error:o,path:t,input:n,type:c}){console.error(`>>> tRPC Error on '${t}'`,o),console.error(`>>> Input: ${JSON.stringify(n)}`),console.error(`>>> Request: ${JSON.stringify(s)}`),console.error(`>>> Type: ${c}`)},responseMeta:()=>({headers:new Headers([['Access-Control-Allow-Origin',c],['Access-Control-Allow-Headers','x-trpc-source, x-device-id, x-cardplus-api-key, content-type, authorization']])})})}}),6917,[6918,6920,6922]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"fetchRequestHandler",{enumerable:!0,get:function(){return t.fetchRequestHandler}});var t=r(d[0])}),6918,[6919]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.fetchRequestHandler=async function(n){const o=new Headers,c=new URL(n.req.url),f=t(c.pathname),l=t(n.endpoint),p=t(f.slice(l.length));return await(0,s.resolveResponse)({...n,req:n.req,createContext:async s=>n.createContext?.({req:n.req,resHeaders:o,...s}),path:p,error:null,onError(s){n?.onError?.({...s,req:n.req})},responseMeta(s){const t=n.responseMeta?.(s);if(t?.headers)if(t.headers instanceof Headers)for(const[s,n]of t.headers.entries())o.append(s,n);else for(const[s,n]of Object.entries(t.headers))if(Array.isArray(n))for(const t of n)o.append(s,t);else'string'==typeof n&&o.set(s,n);return{headers:o,status:t?.status}}})};var s=r(d[0]);r(d[1]),r(d[2]),r(d[3]);const t=s=>s=(s=s.startsWith('/')?s.slice(1):s).endsWith('/')?s.slice(0,-1):s}),6919,[3340,3357,3343,3344]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.appRouter=void 0;var t=r(d[0]),u=r(d[1]),o=r(d[2]),p=r(d[3]),R=r(d[4]);e.appRouter=(0,R.createTRPCRouter)({auth:t.authRouter,group:o.groupRouter,expense:u.expenseRouter,settlement:p.settlementRouter})}),6920,[6921,7387,7389,7391,6922]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.authRouter=void 0;var t=r(d[0]);e.authRouter={getSession:t.publicProcedure.query((({ctx:t})=>t.session)),getSecretMessage:t.protectedProcedure.query((()=>'you can see this secret message!'))}}),6921,[6922]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.publicProcedure=e.protectedProcedure=e.createTRPCRouter=e.createTRPCContext=e.createCallerFactory=void 0;var o=r(d[1]),s=t(r(d[2])),n=r(d[3]),c=r(d[4]),u=r(d[5]);const l=async t=>u.auth.api.getSession({headers:t});e.createTRPCContext=async t=>{const o=t.headers.get('Authorization')??null,s=await l(t.headers),n=t.headers.get('x-trpc-source')??'unknown';return console.log('>>> tRPC Request from',n,'by',s?.user?.name),{session:s,db:c.db,token:o}};const P=o.initTRPC.context().create({transformer:s.default,errorFormatter:({shape:t,error:o})=>({...t,data:{...t.data,zodError:o.cause instanceof n.ZodError?o.cause.flatten():null}})}),C=(e.createCallerFactory=P.createCallerFactory,e.createTRPCRouter=P.router,P.middleware((async({next:t,path:o})=>{const s=Date.now();if(P._config.isDev){const t=Math.floor(400*Math.random())+100;await new Promise((o=>setTimeout(o,t)))}const n=await t(),c=Date.now();return console.log(`[TRPC] ${o} took ${c-s}ms to execute`),n})));e.publicProcedure=P.procedure.use(C),e.protectedProcedure=P.procedure.use(C).use((({ctx:t,next:s})=>{if(!t.session?.user)throw new o.TRPCError({code:'UNAUTHORIZED'});return s({ctx:{session:{...t.session,user:t.session.user}}})}))}),6922,[16,3387,3393,3739,6923,6974]);
__d((function(g,_r,_i,_a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.db=_e.DATABASE_URL=void 0;var e=_r(d[0]),n=(function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=t(n);if(r&&r.has(e))return r.get(e);var o={__proto__:null},c=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var i=c?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(o,a,i):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o})(_r(d[1]));function t(e){if("function"!=typeof WeakMap)return null;var n=new WeakMap,r=new WeakMap;return(t=function(e){return e?r:n})(e)}const r='true'===process.env.PROD,o=_e.DATABASE_URL=r?process.env.PROD_DATABASE_URL:process.env.DATABASE_URL;r&&console.log('\ud83d\udea8 Using production database');_e.db=(0,e.drizzle)({connection:{connectionString:o},casing:'snake_case',schema:{...n}})}),6923,[6924,3810]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0});var n=r(d[0]);Object.keys(n).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===n[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}}))}));var t=r(d[1]);Object.keys(t).forEach((function(n){"default"!==n&&"__esModule"!==n&&(n in e&&e[n]===t[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}}))}))}),6924,[6925,6973]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.NodePgDriver=e.NodePgDatabase=void 0,e.drizzle=N;var n=t(r(d[1])),o=r(d[2]),s=r(d[3]),c=r(d[4]),l=r(d[5]),u=r(d[6]),f=r(d[7]),P=r(d[8]);class h{constructor(t,n,o={}){this.client=t,this.dialect=n,this.options=o}static[o.entityKind]="NodePgDriver";createSession(t){return new P.NodePgSession(this.client,this.dialect,t,{logger:this.options.logger})}}e.NodePgDriver=h;class b extends c.PgDatabase{static[o.entityKind]="NodePgDatabase"}function D(t,n={}){const o=new l.PgDialect({casing:n.casing});let c,f;if(!0===n.logger?c=new s.DefaultLogger:!1!==n.logger&&(c=n.logger),n.schema){const t=(0,u.extractTablesRelationalConfig)(n.schema,u.createTableRelationsHelpers);f={fullSchema:n.schema,schema:t.tables,tableNamesMap:t.tableNamesMap}}const P=new h(t,o,{logger:c}).createSession(f),D=new b(o,P,f);return D.$client=t,D}function N(...t){if("string"==typeof t[0]){return D(new n.default.Pool({connectionString:t[0]}),t[1])}if((0,f.isConfig)(t[0])){const{connection:o,client:s,...c}=t[0];if(s)return D(s,c);return D("string"==typeof o?new n.default.Pool({connectionString:o}):new n.default.Pool(o),c)}return D(t[0],t[1])}e.NodePgDatabase=b,(N||(e.drizzle=N={})).mock=function(t){return D({},t)}}),6925,[16,6926,3743,3763,3816,3822,3766,3771,6973]);
__d((function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),s=r(d[1]),n=r(d[2]),o=r(d[3]);const{DatabaseError:c}=r(d[4]),{escapeIdentifier:h,escapeLiteral:l}=r(d[5]),p=t=>class extends o{constructor(s){super(s,t)}};var u=function(t){this.defaults=s,this.Client=t,this.Query=this.Client.Query,this.Pool=p(this.Client),this._pools=[],this.Connection=n,this.types=r(d[6]),this.DatabaseError=c,this.escapeIdentifier=h,this.escapeLiteral=l};void 0!==process.env.NODE_PG_FORCE_NATIVE?m.exports=new u(r(d[7])):(m.exports=new u(t),Object.defineProperty(m.exports,'native',{configurable:!0,enumerable:!1,get(){var t=null;try{t=new u(r(d[7]))}catch(t){if('MODULE_NOT_FOUND'!==t.code)throw t}return Object.defineProperty(m.exports,'native',{value:t}),t}}))}),6926,[6927,6930,6953,6969,6954,6929,6931,6970]);
__d((function(g,r,i,a,m,_e,d){'use strict';var e=r(d[0]).EventEmitter,t=r(d[1]),n=r(d[2]),s=r(d[3]),o=r(d[4]),c=r(d[5]),h=r(d[6]),l=r(d[7]);const u=r(d[8]);class _ extends e{constructor(e){super(),this.connectionParameters=new o(e),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,'password',{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;var t=e||{};this._Promise=t.Promise||g.Promise,this._types=new s(t.types),this._ending=!1,this._ended=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.enableChannelBinding=Boolean(t.enableChannelBinding),this.connection=t.connection||new l({stream:t.stream,ssl:this.connectionParameters.ssl,keepAlive:t.keepAlive||!1,keepAliveInitialDelayMillis:t.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||'utf8'}),this.queryQueue=[],this.binary=t.binary||h.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,'key',{enumerable:!1}),this._connectionTimeoutMillis=t.connectionTimeoutMillis||0}_errorAllQueries(e){const t=t=>{process.nextTick((()=>{t.handleError(e,this.connection)}))};this.activeQuery&&(t(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(t),this.queryQueue.length=0}_connect(e){var t=this,n=this.connection;if(this._connectionCallback=e,this._connecting||this._connected){const t=new Error('Client has already been connected. You cannot reuse a client.');process.nextTick((()=>{e(t)}))}else this._connecting=!0,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout((()=>{n._ending=!0,n.stream.destroy(new Error('timeout expired'))}),this._connectionTimeoutMillis),this.connectionTimeoutHandle.unref&&this.connectionTimeoutHandle.unref()),this.host&&0===this.host.indexOf('/')?n.connect(this.host+'/.s.PGSQL.'+this.port):n.connect(this.port,this.host),n.on('connect',(function(){t.ssl?n.requestSsl():n.startup(t.getStartupConf())})),n.on('sslconnect',(function(){n.startup(t.getStartupConf())})),this._attachListeners(n),n.once('end',(()=>{const e=this._ending?new Error('Connection terminated'):new Error('Connection terminated unexpectedly');clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(e),this._ended=!0,this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(e):this._handleErrorEvent(e):this._connectionError||this._handleErrorEvent(e)),process.nextTick((()=>{this.emit('end')}))}))}connect(e){if(!e)return new this._Promise(((e,t)=>{this._connect((n=>{n?t(n):e()}))}));this._connect(e)}_attachListeners(e){e.on('authenticationCleartextPassword',this._handleAuthCleartextPassword.bind(this)),e.on('authenticationMD5Password',this._handleAuthMD5Password.bind(this)),e.on('authenticationSASL',this._handleAuthSASL.bind(this)),e.on('authenticationSASLContinue',this._handleAuthSASLContinue.bind(this)),e.on('authenticationSASLFinal',this._handleAuthSASLFinal.bind(this)),e.on('backendKeyData',this._handleBackendKeyData.bind(this)),e.on('error',this._handleErrorEvent.bind(this)),e.on('errorMessage',this._handleErrorMessage.bind(this)),e.on('readyForQuery',this._handleReadyForQuery.bind(this)),e.on('notice',this._handleNotice.bind(this)),e.on('rowDescription',this._handleRowDescription.bind(this)),e.on('dataRow',this._handleDataRow.bind(this)),e.on('portalSuspended',this._handlePortalSuspended.bind(this)),e.on('emptyQuery',this._handleEmptyQuery.bind(this)),e.on('commandComplete',this._handleCommandComplete.bind(this)),e.on('parseComplete',this._handleParseComplete.bind(this)),e.on('copyInResponse',this._handleCopyInResponse.bind(this)),e.on('copyData',this._handleCopyData.bind(this)),e.on('notification',this._handleNotification.bind(this))}_checkPgPass(e){const t=this.connection;if('function'==typeof this.password)this._Promise.resolve().then((()=>this.password())).then((n=>{if(void 0!==n){if('string'!=typeof n)return void t.emit('error',new TypeError('Password must be a string'));this.connectionParameters.password=this.password=n}else this.connectionParameters.password=this.password=null;e()})).catch((e=>{t.emit('error',e)}));else if(null!==this.password)e();else try{r(d[9],"pgpass")(this.connectionParameters,(t=>{void 0!==t&&(this.connectionParameters.password=this.password=t),e()}))}catch(e){this.emit('error',e)}}_handleAuthCleartextPassword(e){this._checkPgPass((()=>{this.connection.password(this.password)}))}_handleAuthMD5Password(e){this._checkPgPass((async()=>{try{const t=await u.postgresMd5PasswordHash(this.user,this.password,e.salt);this.connection.password(t)}catch(e){this.emit('error',e)}}))}_handleAuthSASL(e){this._checkPgPass((()=>{try{this.saslSession=n.startSession(e.mechanisms,this.enableChannelBinding&&this.connection.stream),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)}catch(e){this.connection.emit('error',e)}}))}async _handleAuthSASLContinue(e){try{await n.continueSession(this.saslSession,this.password,e.data,this.enableChannelBinding&&this.connection.stream),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}catch(e){this.connection.emit('error',e)}}_handleAuthSASLFinal(e){try{n.finalizeSession(this.saslSession,e.data),this.saslSession=null}catch(e){this.connection.emit('error',e)}}_handleBackendKeyData(e){this.processID=e.processID,this.secretKey=e.secretKey}_handleReadyForQuery(e){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit('connect'));const{activeQuery:t}=this;this.activeQuery=null,this.readyForQuery=!0,t&&t.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(e){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(e);this.emit('error',e)}}_handleErrorEvent(e){if(this._connecting)return this._handleErrorWhileConnecting(e);this._queryable=!1,this._errorAllQueries(e),this.emit('error',e)}_handleErrorMessage(e){if(this._connecting)return this._handleErrorWhileConnecting(e);const t=this.activeQuery;t?(this.activeQuery=null,t.handleError(e,this.connection)):this._handleErrorEvent(e)}_handleRowDescription(e){this.activeQuery.handleRowDescription(e)}_handleDataRow(e){this.activeQuery.handleDataRow(e)}_handlePortalSuspended(e){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(e){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(e){if(null!=this.activeQuery)this.activeQuery.handleCommandComplete(e,this.connection);else{const e=new Error('Received unexpected commandComplete message from backend.');this._handleErrorEvent(e)}}_handleParseComplete(){if(null!=this.activeQuery)this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text);else{const e=new Error('Received unexpected parseComplete message from backend.');this._handleErrorEvent(e)}}_handleCopyInResponse(e){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(e){this.activeQuery.handleCopyData(e,this.connection)}_handleNotification(e){this.emit('notification',e)}_handleNotice(e){this.emit('notice',e)}getStartupConf(){var e=this.connectionParameters,t={user:e.user,database:e.database},n=e.application_name||e.fallback_application_name;return n&&(t.application_name=n),e.replication&&(t.replication=''+e.replication),e.statement_timeout&&(t.statement_timeout=String(parseInt(e.statement_timeout,10))),e.lock_timeout&&(t.lock_timeout=String(parseInt(e.lock_timeout,10))),e.idle_in_transaction_session_timeout&&(t.idle_in_transaction_session_timeout=String(parseInt(e.idle_in_transaction_session_timeout,10))),e.options&&(t.options=e.options),t}cancel(e,t){if(e.activeQuery===t){var n=this.connection;this.host&&0===this.host.indexOf('/')?n.connect(this.host+'/.s.PGSQL.'+this.port):n.connect(this.port,this.host),n.on('connect',(function(){n.cancel(e.processID,e.secretKey)}))}else-1!==e.queryQueue.indexOf(t)&&e.queryQueue.splice(e.queryQueue.indexOf(t),1)}setTypeParser(e,t,n){return this._types.setTypeParser(e,t,n)}getTypeParser(e,t){return this._types.getTypeParser(e,t)}escapeIdentifier(e){return t.escapeIdentifier(e)}escapeLiteral(e){return t.escapeLiteral(e)}_pulseQueryQueue(){if(!0===this.readyForQuery)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;const e=this.activeQuery.submit(this.connection);e&&process.nextTick((()=>{this.activeQuery.handleError(e,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()}))}else this.hasExecuted&&(this.activeQuery=null,this.emit('drain'))}query(e,t,n){var s,o,h,l,u;if(null==e)throw new TypeError('Client was passed a null or undefined query');return'function'==typeof e.submit?(h=e.query_timeout||this.connectionParameters.query_timeout,o=s=e,'function'==typeof t&&(s.callback=s.callback||t)):(h=e.query_timeout||this.connectionParameters.query_timeout,(s=new c(e,t,n)).callback||(o=new this._Promise(((e,t)=>{s.callback=(n,s)=>n?t(n):e(s)})).catch((e=>{throw Error.captureStackTrace(e),e})))),h&&(u=s.callback,l=setTimeout((()=>{var e=new Error('Query read timeout');process.nextTick((()=>{s.handleError(e,this.connection)})),u(e),s.callback=()=>{};var t=this.queryQueue.indexOf(s);t>-1&&this.queryQueue.splice(t,1),this._pulseQueryQueue()}),h),s.callback=(e,t)=>{clearTimeout(l),u(e,t)}),this.binary&&!s.binary&&(s.binary=!0),s._result&&!s._result._types&&(s._result._types=this._types),this._queryable?this._ending?(process.nextTick((()=>{s.handleError(new Error('Client was closed and is not queryable'),this.connection)})),o):(this.queryQueue.push(s),this._pulseQueryQueue(),o):(process.nextTick((()=>{s.handleError(new Error('Client has encountered a connection error and is not queryable'),this.connection)})),o)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(e){if(this._ending=!0,!this.connection._connecting||this._ended){if(!e)return this._Promise.resolve();e()}if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),!e)return new this._Promise((e=>{this.connection.once('end',e)}));this.connection.once('end',e)}}_.Query=c,m.exports=_}),6927,[6928,6929,6942,6947,6948,6951,6930,6953,6943,6964]);
__d((function(g,r,i,a,m,e,d){m.exports=$$require_external('node:events')}),6928,[]);
__d((function(g,r,_i,a,m,e,d){'use strict';const t=r(d[0]);function n(t){for(var f='{',u=0;u<t.length;u++)if(u>0&&(f+=','),null===t[u]||void 0===t[u])f+='NULL';else if(Array.isArray(t[u]))f+=n(t[u]);else if(ArrayBuffer.isView(t[u])){var o=t[u];if(!(o instanceof Buffer)){var s=Buffer.from(o.buffer,o.byteOffset,o.byteLength);o=s.length===o.byteLength?s:s.slice(o.byteOffset,o.byteOffset+o.byteLength)}f+='\\\\x'+o.toString('hex')}else f+='"'+i(t[u]).replace(/\\/g,'\\\\').replace(/"/g,'\\"')+'"';return f+='}'}var i=function(i,s){if(null==i)return null;if('object'==typeof i){if(i instanceof Buffer)return i;if(ArrayBuffer.isView(i)){var c=Buffer.from(i.buffer,i.byteOffset,i.byteLength);return c.length===i.byteLength?c:c.slice(i.byteOffset,i.byteOffset+i.byteLength)}return i instanceof Date?t.parseInputDatesAsUTC?o(i):u(i):Array.isArray(i)?n(i):f(i,s)}return i.toString()};function f(t,n){if(t&&'function'==typeof t.toPostgres){if(-1!==(n=n||[]).indexOf(t))throw new Error('circular reference detected while preparing "'+t+'" for query');return n.push(t),i(t.toPostgres(i),n)}return JSON.stringify(t)}function u(t){var n=-t.getTimezoneOffset(),i=t.getFullYear(),f=i<1;f&&(i=Math.abs(i)+1);var u=String(i).padStart(4,'0')+'-'+String(t.getMonth()+1).padStart(2,'0')+'-'+String(t.getDate()).padStart(2,'0')+'T'+String(t.getHours()).padStart(2,'0')+':'+String(t.getMinutes()).padStart(2,'0')+':'+String(t.getSeconds()).padStart(2,'0')+'.'+String(t.getMilliseconds()).padStart(3,'0');return n<0?(u+='-',n*=-1):u+='+',u+=String(Math.floor(n/60)).padStart(2,'0')+':'+String(n%60).padStart(2,'0'),f&&(u+=' BC'),u}function o(t){var n=t.getUTCFullYear(),i=n<1;i&&(n=Math.abs(n)+1);var f=String(n).padStart(4,'0')+'-'+String(t.getUTCMonth()+1).padStart(2,'0')+'-'+String(t.getUTCDate()).padStart(2,'0')+'T'+String(t.getUTCHours()).padStart(2,'0')+':'+String(t.getUTCMinutes()).padStart(2,'0')+':'+String(t.getUTCSeconds()).padStart(2,'0')+'.'+String(t.getUTCMilliseconds()).padStart(3,'0');return f+='+00:00',i&&(f+=' BC'),f}m.exports={prepareValue:function(t){return i(t)},normalizeQueryConfig:function(t,n,i){return t='string'==typeof t?{text:t}:t,n&&('function'==typeof n?t.callback=n:t.values=n),i&&(t.callback=i),t},escapeIdentifier:function(t){return'"'+t.replace(/"/g,'""')+'"'},escapeLiteral:function(t){for(var n=!1,i="'",f=0;f<t.length;f++){var u=t[f];"'"===u?i+=u+u:'\\'===u?(i+=u+u,n=!0):i+=u}return i+="'",!0===n&&(i=' E'+i),i}}}),6929,[6930]);
__d((function(g,r,i,a,m,e,d){'use strict';m.exports={host:'localhost',user:'win32'===process.platform?process.env.USERNAME:process.env.USER,database:void 0,password:null,connectionString:void 0,port:5432,rows:0,binary:!1,max:10,idleTimeoutMillis:3e4,client_encoding:'',ssl:!1,application_name:void 0,fallback_application_name:void 0,options:void 0,parseInputDatesAsUTC:!1,statement_timeout:!1,lock_timeout:!1,idle_in_transaction_session_timeout:!1,query_timeout:!1,connect_timeout:0,keepalives:1,keepalives_idle:0};var t=r(d[0]),s=t.getTypeParser(20,'text'),o=t.getTypeParser(1016,'text');m.exports.__defineSetter__('parseInt8',(function(n){t.setTypeParser(20,'text',n?t.getTypeParser(23,'text'):s),t.setTypeParser(1016,'text',n?t.getTypeParser(1007,'text'):o)}))}),6930,[6931]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]),n=r(d[1]),u=r(d[2]),f=r(d[3]);e.getTypeParser=function(t,n){if(!o[n=n||'text'])return c;return o[n][t]||c},e.setTypeParser=function(t,n,u){'function'==typeof n&&(u=n,n='text');o[n][t]=u},e.arrayParser=u,e.builtins=f;var o={text:{},binary:{}};function c(t){return String(t)}t.init((function(t,n){o.text[t]=n})),n.init((function(t,n){o.binary[t]=n}))}),6931,[6932,6939,6934,6941]);
__d((function(g,r,_i,a,m,e,d){var n=r(d[0]),t=r(d[1]),u=r(d[2]),l=r(d[3]),i=r(d[4]);function o(n){return function(t){return null===t?t:n(t)}}function c(n){return null===n?n:'TRUE'===n||'t'===n||'true'===n||'y'===n||'yes'===n||'on'===n||'1'===n}function s(t){return t?n.parse(t,c):null}function f(n){return parseInt(n,10)}function p(t){return t?n.parse(t,o(f)):null}function F(t){return t?n.parse(t,o((function(n){return h(n).trim()}))):null}var S=function(n){return n?t.create(n,(function(n){return null!==n&&(n=I(n)),n})).parse():null},v=function(n){return n?t.create(n,(function(n){return null!==n&&(n=parseFloat(n)),n})).parse():null},J=function(n){return n?t.create(n).parse():null},N=function(n){return n?t.create(n,(function(n){return null!==n&&(n=u(n)),n})).parse():null},O=function(n){return n?t.create(n,(function(n){return null!==n&&(n=l(n)),n})).parse():null},b=function(t){return t?n.parse(t,o(i)):null},y=function(n){return parseInt(n,10)},h=function(n){var t=String(n);return/^\d+$/.test(t)?t:n},x=function(t){return t?n.parse(t,o(JSON.parse)):null},I=function(n){return'('!==n[0]?null:(n=n.substring(1,n.length-1).split(','),{x:parseFloat(n[0]),y:parseFloat(n[1])})},_=function(n){if('<'!==n[0]&&'('!==n[1])return null;for(var t='(',u='',l=!1,i=2;i<n.length-1;i++)l||(t+=n[i]),')'!==n[i]?l&&','!==n[i]&&(u+=n[i]):l=!0;var o=I(t);return o.radius=parseFloat(u),o};m.exports={init:function(n){n(20,h),n(21,y),n(23,y),n(26,y),n(700,parseFloat),n(701,parseFloat),n(16,c),n(1082,u),n(1114,u),n(1184,u),n(600,I),n(651,J),n(718,_),n(1e3,s),n(1001,b),n(1005,p),n(1007,p),n(1028,p),n(1016,F),n(1017,S),n(1021,v),n(1022,v),n(1231,v),n(1014,J),n(1015,J),n(1008,J),n(1009,J),n(1040,J),n(1041,J),n(1115,N),n(1182,N),n(1185,N),n(1186,l),n(1187,O),n(17,i),n(114,JSON.parse.bind(JSON)),n(3802,JSON.parse.bind(JSON)),n(199,x),n(3807,x),n(3907,J),n(2951,J),n(791,J),n(1183,J),n(1270,J)}}}),6932,[6933,6934,6935,6936,6938]);
__d((function(g,r,i,a,m,e,d){'use strict';e.parse=function(t,n){return new s(t,n).parse()};class s{constructor(s,n){this.source=s,this.transform=n||t,this.position=0,this.entries=[],this.recorded=[],this.dimension=0}isEof(){return this.position>=this.source.length}nextCharacter(){var s=this.source[this.position++];return'\\'===s?{value:this.source[this.position++],escaped:!0}:{value:s,escaped:!1}}record(s){this.recorded.push(s)}newEntry(s){var t;(this.recorded.length>0||s)&&('NULL'!==(t=this.recorded.join(''))||s||(t=null),null!==t&&(t=this.transform(t)),this.entries.push(t),this.recorded=[])}consumeDimensions(){if('['===this.source[0])for(;!this.isEof();){if('='===this.nextCharacter().value)break}}parse(t){var n,o,h;for(this.consumeDimensions();!this.isEof();)if('{'!==(n=this.nextCharacter()).value||h){if('}'!==n.value||h)'"'!==n.value||n.escaped?','!==n.value||h?this.record(n.value):this.newEntry():(h&&this.newEntry(!0),h=!h);else if(this.dimension--,!this.dimension&&(this.newEntry(),t))return this.entries}else this.dimension++,this.dimension>1&&(o=new s(this.source.substr(this.position-1),this.transform),this.entries.push(o.parse(!0)),this.position+=o.position-2);if(0!==this.dimension)throw new Error('array dimension not balanced');return this.entries}}function t(s){return s}}),6933,[]);
__d((function(g,r,i,a,m,e,d){var n=r(d[0]);m.exports={create:function(t,u){return{parse:function(){return n.parse(t,u)}}}}}),6934,[6933]);
__d((function(g,r,i,a,m,e,d){'use strict';var t=/(\d{1,})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})(\.\d{1,})?.*?( BC)?$/,n=/^(\d{1,})-(\d{2})-(\d{2})( BC)?$/,u=/([Z+-])(\d{2})?:?(\d{2})?:?(\d{2})?/,s=/^-?infinity$/;function p(t){var u=n.exec(t);if(u){var s=parseInt(u[1],10);!!u[4]&&(s=l(s));var p=parseInt(u[2],10)-1,f=u[3],v=new Date(s,p,f);return c(s)&&v.setFullYear(s),v}}function f(t){if(t.endsWith('+00'))return 0;var n=u.exec(t.split(' ')[1]);if(n){var s=n[1];if('Z'===s)return 0;var p='-'===s?-1:1;return(3600*parseInt(n[2],10)+60*parseInt(n[3]||0,10)+parseInt(n[4]||0,10))*p*1e3}}function l(t){return-(t-1)}function c(t){return t>=0&&t<100}m.exports=function(n){if(s.test(n))return Number(n.replace('i','I'));var u=t.exec(n);if(!u)return p(n)||null;var v=!!u[8],I=parseInt(u[1],10);v&&(I=l(I));var o,x=parseInt(u[2],10)-1,C=u[3],D=parseInt(u[4],10),F=parseInt(u[5],10),T=parseInt(u[6],10),w=u[7];w=w?1e3*parseFloat(w):0;var Y=f(n);return null!=Y?(o=new Date(Date.UTC(I,x,C,D,F,T,w)),c(I)&&o.setUTCFullYear(I),0!==Y&&o.setTime(o.getTime()-Y)):(o=new Date(I,x,C,D,F,T,w),c(I)&&o.setFullYear(I)),o}}),6935,[]);
__d((function(g,r,i,a,m,e,d){'use strict';var s=r(d[0]);function n(t){if(!(this instanceof n))return new n(t);s(this,f(t))}m.exports=n;var t=['seconds','minutes','hours','days','months','years'];n.prototype.toPostgres=function(){var s=t.filter(this.hasOwnProperty,this);return this.milliseconds&&s.indexOf('seconds')<0&&s.push('seconds'),0===s.length?'0':s.map((function(s){var n=this[s]||0;return'seconds'===s&&this.milliseconds&&(n=(n+this.milliseconds/1e3).toFixed(6).replace(/\.?0+$/,'')),n+' '+s}),this).join(' ')};var o={years:'Y',months:'M',days:'D',hours:'H',minutes:'M',seconds:'S'},c=['years','months','days'],u=['hours','minutes','seconds'];n.prototype.toISOString=n.prototype.toISO=function(){return'P'+c.map(s,this).join('')+'T'+u.map(s,this).join('');function s(s){var n=this[s]||0;return'seconds'===s&&this.milliseconds&&(n=(n+this.milliseconds/1e3).toFixed(6).replace(/0+$/,'')),n+o[s]}};var h=new RegExp(["([+-]?\\d+)\\s+years?","([+-]?\\d+)\\s+mons?","([+-]?\\d+)\\s+days?",'([+-])?([\\d]*):(\\d\\d):(\\d\\d)\\.?(\\d{1,6})?'].map((function(s){return'('+s+')?'})).join('\\s*')),l={years:2,months:4,days:6,hours:9,minutes:10,seconds:11,milliseconds:12},p=['hours','minutes','seconds','milliseconds'];function f(s){if(!s)return{};var n=h.exec(s),t='-'===n[8];return Object.keys(l).reduce((function(s,o){var c,u,h=l[o],f=n[h];return f&&(f='milliseconds'===o?(u=(c=f)+'000000'.slice(c.length),parseInt(u,10)/1e3):parseInt(f,10))?(t&&~p.indexOf(o)&&(f*=-1),s[o]=f,s):s}),{})}}),6936,[6937]);
__d((function(g,r,_i,a,m,e,d){m.exports=function(n){for(var o=1;o<arguments.length;o++){var c=arguments[o];for(var f in c)t.call(c,f)&&(n[f]=c[f])}return n};var t=Object.prototype.hasOwnProperty}),6937,[]);
__d((function(g,r,_i,a,m,e,d){'use strict';m.exports=function(t){if(/^\\x/.test(t))return new Buffer(t.substr(2),'hex');for(var f='',s=0;s<t.length;)if('\\'!==t[s])f+=t[s],++s;else if(/[0-7]{3}/.test(t.substr(s+1,3)))f+=String.fromCharCode(parseInt(t.substr(s+1,3),8)),s+=4;else{for(var n=1;s+n<t.length&&'\\'===t[s+n];)n++;for(var o=0;o<Math.floor(n/2);++o)f+='\\';s+=2*Math.floor(n/2)}return new Buffer(f,'binary')}}),6938,[]);
__d((function(g,r,_i,a,m,e,d){var n=r(d[0]),t=function(n,t,u,o,i){o=o||!1,i=i||function(n,t,u){return n*Math.pow(2,u)+t};var f=(u=u||0)>>3,c=function(n){return o?255&~n:n},s=255,v=8-u%8;t<v&&(s=255<<8-t&255,v=t),u&&(s>>=u%8);var l=0;u%8+t>=8&&(l=i(0,c(n[f])&s,v));for(var h=t+u>>3,M=f+1;M<h;M++)l=i(l,c(n[M]),8);var p=(t+u)%8;return p>0&&(l=i(l,c(n[h])>>8-p,p)),l},u=function(n,u,o){var i=Math.pow(2,o-1)-1,f=t(n,1),c=t(n,o,1);if(0===c)return 0;var s=1,v=t(n,u,o+1,!1,(function(n,t,u){0===n&&(n=1);for(var o=1;o<=u;o++)s/=2,(t&1<<u-o)>0&&(n+=s);return n}));return c==Math.pow(2,o+1)-1?0===v?0===f?1/0:-1/0:NaN:(0===f?1:-1)*Math.pow(2,c-i)*v},o=function(n){return 1==t(n,1)?-1*(t(n,15,1,!0)+1):t(n,15,1)},i=function(n){return 1==t(n,1)?-1*(t(n,31,1,!0)+1):t(n,31,1)},f=function(n){return u(n,23,8)},c=function(n){return u(n,52,11)},s=function(n){var u=t(n,16,32);if(49152==u)return NaN;for(var o=Math.pow(1e4,t(n,16,16)),i=0,f=t(n,16),c=0;c<f;c++)i+=t(n,16,64+16*c)*o,o/=1e4;var s=Math.pow(10,t(n,16,48));return(0===u?1:-1)*Math.round(i*s)/s},v=function(n,u){var o=t(u,1),i=t(u,63,1),f=new Date((0===o?1:-1)*i/1e3+9466848e5);return n||f.setTime(f.getTime()+6e4*f.getTimezoneOffset()),f.usec=i%1e3,f.getMicroSeconds=function(){return this.usec},f.setMicroSeconds=function(n){this.usec=n},f.getUTCMicroSeconds=function(){return this.usec},f},l=function(n){for(var u=t(n,32),o=(t(n,32,32),t(n,32,64)),i=96,f=[],c=0;c<u;c++)f[c]=t(n,32,i),i+=32,i+=32;var s=function(u){var o,f=t(n,32,i);return i+=32,4294967295==f?null:23==u||20==u?(o=t(n,8*f,i),i+=8*f,o):25==u?o=n.toString(this.encoding,i>>3,(i+=f<<3)>>3):void console.log("ERROR: ElementType not implemented: "+u)},v=function(n,t){var u,o=[];if(n.length>1){var i=n.shift();for(u=0;u<i;u++)o[u]=v(n,t);n.unshift(i)}else for(u=0;u<n[0];u++)o[u]=s(t);return o};return v(f,o)},h=function(n){return n.toString('utf8')},M=function(n){return null===n?null:t(n,8)>0};m.exports={init:function(t){t(20,n),t(21,o),t(23,i),t(26,i),t(1700,s),t(700,f),t(701,c),t(16,M),t(1114,v.bind(null,!1)),t(1184,v.bind(null,!0)),t(1e3,l),t(1007,l),t(1016,l),t(1008,l),t(1009,l),t(25,h)}}}),6939,[6940]);
__d((function(g,r,_i,a,m,e,d){'use strict';var t=1e6;m.exports=function(n){var f=n.readInt32BE(0),u=n.readUInt32BE(4),i='';f<0&&(f=~f+(0===u),u=1+~u>>>0,i='-');var o,c,h,l,s,v,B='';if(o=f%t,f=f/t>>>0,h=''+((c=4294967296*o+u)-t*(u=c/t>>>0)),0===u&&0===f)return i+h+B;for(l='',s=6-h.length,v=0;v<s;v++)l+='0';if(B=l+h+B,o=f%t,f=f/t>>>0,h=''+((c=4294967296*o+u)-t*(u=c/t>>>0)),0===u&&0===f)return i+h+B;for(l='',s=6-h.length,v=0;v<s;v++)l+='0';if(B=l+h+B,o=f%t,f=f/t>>>0,h=''+((c=4294967296*o+u)-t*(u=c/t>>>0)),0===u&&0===f)return i+h+B;for(l='',s=6-h.length,v=0;v<s;v++)l+='0';return B=l+h+B,i+(h=''+(c=4294967296*(o=f%t)+u)%t)+B}}),6940,[]);
__d((function(g,r,i,a,m,e,d){m.exports={BOOL:16,BYTEA:17,CHAR:18,INT8:20,INT2:21,INT4:23,REGPROC:24,TEXT:25,OID:26,TID:27,XID:28,CID:29,JSON:114,XML:142,PG_NODE_TREE:194,SMGR:210,PATH:602,POLYGON:604,CIDR:650,FLOAT4:700,FLOAT8:701,ABSTIME:702,RELTIME:703,TINTERVAL:704,CIRCLE:718,MACADDR8:774,MONEY:790,MACADDR:829,INET:869,ACLITEM:1033,BPCHAR:1042,VARCHAR:1043,DATE:1082,TIME:1083,TIMESTAMP:1114,TIMESTAMPTZ:1184,INTERVAL:1186,TIMETZ:1266,BIT:1560,VARBIT:1562,NUMERIC:1700,REFCURSOR:1790,REGPROCEDURE:2202,REGOPER:2203,REGOPERATOR:2204,REGCLASS:2205,REGTYPE:2206,UUID:2950,TXID_SNAPSHOT:2970,PG_LSN:3220,PG_NDISTINCT:3361,PG_DEPENDENCIES:3402,TSVECTOR:3614,TSQUERY:3615,GTSVECTOR:3642,REGCONFIG:3734,REGDICTIONARY:3769,JSONB:3802,REGNAMESPACE:4089,REGROLE:4096}}),6941,[]);
__d((function(g,r,_i,_a,m,e,d){'use strict';const t=r(d[0]),{signatureAlgorithmHashFromCertificate:n}=r(d[1]);function S(t){if('string'!=typeof t)throw new TypeError('SASL: text must be a string');return t.split('').map(((n,S)=>t.charCodeAt(S))).every((t=>t>=33&&t<=43||t>=45&&t<=126))}function s(t){return/^(?:[a-zA-Z0-9+/]{4})*(?:[a-zA-Z0-9+/]{2}==|[a-zA-Z0-9+/]{3}=)?$/.test(t)}function i(t){if('string'!=typeof t)throw new TypeError('SASL: attribute pairs text must be a string');return new Map(t.split(',').map((t=>{if(!/^.=/.test(t))throw new Error('SASL: Invalid attribute pair entry');return[t[0],t.substring(2)]})))}function o(t){const n=i(t),o=n.get('r');if(!o)throw new Error('SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce missing');if(!S(o))throw new Error('SASL: SCRAM-SERVER-FIRST-MESSAGE: nonce must only contain printable characters');const a=n.get('s');if(!a)throw new Error('SASL: SCRAM-SERVER-FIRST-MESSAGE: salt missing');if(!s(a))throw new Error('SASL: SCRAM-SERVER-FIRST-MESSAGE: salt must be base64');const f=n.get('i');if(!f)throw new Error('SASL: SCRAM-SERVER-FIRST-MESSAGE: iteration missing');if(!/^[1-9][0-9]*$/.test(f))throw new Error('SASL: SCRAM-SERVER-FIRST-MESSAGE: invalid iteration count');return{nonce:o,salt:a,iteration:parseInt(f,10)}}function a(t){const n=i(t).get('v');if(!n)throw new Error('SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature is missing');if(!s(n))throw new Error('SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature must be base64');return{serverSignature:n}}function f(t,n){if(!Buffer.isBuffer(t))throw new TypeError('first argument must be a Buffer');if(!Buffer.isBuffer(n))throw new TypeError('second argument must be a Buffer');if(t.length!==n.length)throw new Error('Buffer lengths must match');if(0===t.length)throw new Error('Buffers cannot be empty');return Buffer.from(t.map(((S,s)=>t[s]^n[s])))}m.exports={startSession:function(n,S){const s=['SCRAM-SHA-256'];S&&s.unshift('SCRAM-SHA-256-PLUS');const i=s.find((t=>n.includes(t)));if(!i)throw new Error('SASL: Only mechanism(s) '+s.join(' and ')+' are supported');if('SCRAM-SHA-256-PLUS'===i&&'function'!=typeof S.getPeerCertificate)throw new Error('SASL: Mechanism SCRAM-SHA-256-PLUS requires a certificate');const o=t.randomBytes(18).toString('base64');return{mechanism:i,clientNonce:o,response:('SCRAM-SHA-256-PLUS'===i?'p=tls-server-end-point':S?'y':'n')+',,n=*,r='+o,message:'SASLInitialResponse'}},continueSession:async function(S,s,i,a){if('SASLInitialResponse'!==S.message)throw new Error('SASL: Last message was not SASLInitialResponse');if('string'!=typeof s)throw new Error('SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a string');if(''===s)throw new Error('SASL: SCRAM-SERVER-FIRST-MESSAGE: client password must be a non-empty string');if('string'!=typeof i)throw new Error('SASL: SCRAM-SERVER-FIRST-MESSAGE: serverData must be a string');const E=o(i);if(!E.nonce.startsWith(S.clientNonce))throw new Error('SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce does not start with client nonce');if(E.nonce.length===S.clientNonce.length)throw new Error('SASL: SCRAM-SERVER-FIRST-MESSAGE: server nonce is too short');var A='n=*,r='+S.clientNonce,c='r='+E.nonce+',s='+E.salt+',i='+E.iteration;let w=a?'eSws':'biws';if('SCRAM-SHA-256-PLUS'===S.mechanism){const S=a.getPeerCertificate().raw;let s=n(S);'MD5'!==s&&'SHA-1'!==s||(s='SHA-256');const i=await t.hashByName(s,S);w=Buffer.concat([Buffer.from('p=tls-server-end-point,,'),Buffer.from(i)]).toString('base64')}var R='c='+w+',r='+E.nonce,u=A+','+c+','+R,h=Buffer.from(E.salt,'base64'),p=await t.deriveKey(s,h,E.iteration),L=await t.hmacSha256(p,'Client Key'),M=await t.sha256(L),l=await t.hmacSha256(M,u),C=f(Buffer.from(L),Buffer.from(l)).toString('base64'),b=await t.hmacSha256(p,'Server Key'),y=await t.hmacSha256(b,u);S.message='SASLResponse',S.serverSignature=Buffer.from(y).toString('base64'),S.response=R+',p='+C},finalizeSession:function(t,n){if('SASLResponse'!==t.message)throw new Error('SASL: Last message was not SASLResponse');if('string'!=typeof n)throw new Error('SASL: SCRAM-SERVER-FINAL-MESSAGE: serverData must be a string');const{serverSignature:S}=a(n);if(S!==t.serverSignature)throw new Error('SASL: SCRAM-SERVER-FINAL-MESSAGE: server signature does not match')}}}),6942,[6943,6946]);
__d((function(g,r,i,a,m,e,d){'use strict';const s=parseInt(process.versions&&process.versions.node&&process.versions.node.split('.')[0])<15;m.exports=r(s?d[0]:d[1])}),6943,[6944,6945]);
__d((function(g,r,i,a,m,e,d){'use strict';const t=r(d[0]);function n(n){return t.createHash('md5').update(n,'utf-8').digest('hex')}m.exports={postgresMd5PasswordHash:function(t,s,u){var c=n(s+t);return'md5'+n(Buffer.concat([Buffer.from(c),u]))},randomBytes:t.randomBytes,deriveKey:async function(n,s,u){return t.pbkdf2Sync(n,s,u,32,'sha256')},sha256:function(n){return t.createHash('sha256').update(n).digest()},hashByName:function(n,s){return n=n.replace(/(\D)-/,'$1'),t.createHash(n).update(s).digest()},hmacSha256:function(n,s){return t.createHmac('sha256',n).update(s).digest()},md5:n}}),6944,[468]);
__d((function(g,r,i,a,m,_e,d){const t=r(d[0]);m.exports={postgresMd5PasswordHash:async function(t,n,e){var s=await o(n+t);return'md5'+await o(Buffer.concat([Buffer.from(s),e]))},randomBytes:function(t){return n.getRandomValues(Buffer.alloc(t))},deriveKey:async function(t,n,o){const c=await e.importKey('raw',s.encode(t),'PBKDF2',!1,['deriveBits']),u={name:'PBKDF2',hash:'SHA-256',salt:n,iterations:o};return await e.deriveBits(u,c,256,['deriveBits'])},sha256:async function(t){return await e.digest('SHA-256',t)},hashByName:async function(t,n){return await e.digest(t,n)},hmacSha256:async function(t,n){const o=await e.importKey('raw',t,{name:'HMAC',hash:'SHA-256'},!1,['sign']);return await e.sign('HMAC',o,s.encode(n))},md5:o};const n=t.webcrypto||globalThis.crypto,e=n.subtle,s=new TextEncoder;async function o(n){try{return t.createHash('md5').update(n,'utf-8').digest('hex')}catch(t){const o='string'==typeof n?s.encode(n):n,c=await e.digest('MD5',o);return Array.from(new Uint8Array(c)).map((t=>t.toString(16).padStart(2,'0'))).join('')}}}),6945,[468]);
__d((function(g,r,_i,a,m,e,d){function n(n,t){throw new Error('SASL channel binding: '+n+' when parsing public certificate '+t.toString('base64'))}function t(t,c){let s=t[c++];if(s<128)return{length:s,index:c};const i=127&s;i>4&&n('bad length',t),s=0;for(let n=0;n<i;n++)s=s<<8|t[c++];return{length:s,index:c}}function c(c,s){6!==c[s++]&&n('non-OID data',c);const{length:i,index:u}=t(c,s);s=u,lastIndex=s+i;const o=c[s++];let S=(o/40|0)+'.'+o%40;for(;s<lastIndex;){let n=0;for(;s<lastIndex;){const t=c[s++];if(n=n<<7|127&t,t<128)break}S+='.'+n}return{oid:S,index:s}}function s(c,s){return 48!==c[s++]&&n('non-sequence data',c),t(c,s)}m.exports={signatureAlgorithmHashFromCertificate:function(i,u){void 0===u&&(u=0),u=s(i,u).index;const{length:o,index:S}=s(i,u);u=s(i,u=S+o).index;const{oid:A,index:H}=c(i,u);switch(A){case'1.2.840.113549.1.1.4':return'MD5';case'1.2.840.113549.1.1.5':return'SHA-1';case'1.2.840.113549.1.1.11':return'SHA-256';case'1.2.840.113549.1.1.12':return'SHA-384';case'1.2.840.113549.1.1.13':return'SHA-512';case'1.2.840.113549.1.1.14':return'SHA-224';case'1.2.840.113549.1.1.15':return'SHA512-224';case'1.2.840.113549.1.1.16':return'SHA512-256';case'1.2.840.10045.4.1':return'SHA-1';case'1.2.840.10045.4.3.1':return'SHA-224';case'1.2.840.10045.4.3.2':return'SHA-256';case'1.2.840.10045.4.3.3':return'SHA-384';case'1.2.840.10045.4.3.4':return'SHA-512';case'1.2.840.113549.1.1.10':u=s(i,u=H).index,160!==i[u++]&&n('non-tag data',i),u=s(i,u=t(i,u).index).index;const{oid:o}=c(i,u);switch(o){case'1.2.840.113549.2.5':return'MD5';case'1.3.14.3.2.26':return'SHA-1';case'2.16.840.1.101.3.4.2.1':return'SHA-256';case'2.16.840.1.101.3.4.2.2':return'SHA-384';case'2.16.840.1.101.3.4.2.3':return'SHA-512'}n('unknown hash OID '+o,i);case'1.3.101.110':case'1.3.101.112':return'SHA-512';case'1.3.101.111':case'1.3.101.113':n('Ed448 certificate channel binding is not currently supported by Postgres')}n('unknown OID '+A,i)}}}),6946,[]);
__d((function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]);function s(s){this._types=s||t,this.text={},this.binary={}}s.prototype.getOverrides=function(t){switch(t){case'text':return this.text;case'binary':return this.binary;default:return{}}},s.prototype.setTypeParser=function(t,s,n){'function'==typeof s&&(n=s,s='text'),this.getOverrides(s)[t]=n},s.prototype.getTypeParser=function(t,s){return s=s||'text',this.getOverrides(s)[t]||this._types.getTypeParser(t,s)},m.exports=s}),6947,[6931]);
__d((function(g,r,i,a,m,e,d){'use strict';var t=r(d[0]),s=r(d[1]),n=r(d[2]).parse,o=function(t,n,o){return void 0===o?o=process.env['PG'+t.toUpperCase()]:!1===o||(o=process.env[o]),n[t]||o||s[t]},l=function(){switch(process.env.PGSSLMODE){case'disable':return!1;case'prefer':case'require':case'verify-ca':case'verify-full':return!0;case'no-verify':return{rejectUnauthorized:!1}}return s.ssl},c=function(t){return"'"+(''+t).replace(/\\/g,'\\\\').replace(/'/g,"\\'")+"'"},h=function(t,s,n){var o=s[n];null!=o&&t.push(n+'='+c(o))};m.exports=class{constructor(t){(t='string'==typeof t?n(t):t||{}).connectionString&&(t=Object.assign({},t,n(t.connectionString))),this.user=o('user',t),this.database=o('database',t),void 0===this.database&&(this.database=this.user),this.port=parseInt(o('port',t),10),this.host=o('host',t),Object.defineProperty(this,'password',{configurable:!0,enumerable:!1,writable:!0,value:o('password',t)}),this.binary=o('binary',t),this.options=o('options',t),this.ssl=void 0===t.ssl?l():t.ssl,'string'==typeof this.ssl&&'true'===this.ssl&&(this.ssl=!0),'no-verify'===this.ssl&&(this.ssl={rejectUnauthorized:!1}),this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,'key',{enumerable:!1}),this.client_encoding=o('client_encoding',t),this.replication=o('replication',t),this.isDomainSocket=!(this.host||'').indexOf('/'),this.application_name=o('application_name',t,'PGAPPNAME'),this.fallback_application_name=o('fallback_application_name',t,!1),this.statement_timeout=o('statement_timeout',t,!1),this.lock_timeout=o('lock_timeout',t,!1),this.idle_in_transaction_session_timeout=o('idle_in_transaction_session_timeout',t,!1),this.query_timeout=o('query_timeout',t,!1),void 0===t.connectionTimeoutMillis?this.connect_timeout=process.env.PGCONNECT_TIMEOUT||0:this.connect_timeout=Math.floor(t.connectionTimeoutMillis/1e3),!1===t.keepAlive?this.keepalives=0:!0===t.keepAlive&&(this.keepalives=1),'number'==typeof t.keepAliveInitialDelayMillis&&(this.keepalives_idle=Math.floor(t.keepAliveInitialDelayMillis/1e3))}getLibpqConnectionString(s){var n=[];h(n,this,'user'),h(n,this,'password'),h(n,this,'port'),h(n,this,'application_name'),h(n,this,'fallback_application_name'),h(n,this,'connect_timeout'),h(n,this,'options');var o='object'==typeof this.ssl?this.ssl:this.ssl?{sslmode:this.ssl}:{};if(h(n,o,'sslmode'),h(n,o,'sslca'),h(n,o,'sslkey'),h(n,o,'sslcert'),h(n,o,'sslrootcert'),this.database&&n.push('dbname='+c(this.database)),this.replication&&n.push('replication='+c(this.replication)),this.host&&n.push('host='+c(this.host)),this.isDomainSocket)return s(null,n.join(' '));this.client_encoding&&n.push('client_encoding='+c(this.client_encoding)),t.lookup(this.host,(function(t,o){return t?s(t,null):(n.push('hostaddr='+c(o)),s(null,n.join(' ')))}))}}}),6948,[6949,6930,6950]);
__d((function(g,r,i,a,m,e,d){m.exports=$$require_external('node:dns')}),6949,[]);
__d((function(g,r,i,a,m,_e,d){'use strict';function s(s){if('/'===s.charAt(0)){const e=s.split(' ');return{host:e[0],database:e[1]}}const e={};let t,o=!1;/ |%[^a-f0-9]|%[a-f0-9][^a-f0-9]/i.test(s)&&(s=encodeURI(s).replace(/\%25(\d\d)/g,'%$1'));try{t=new URL(s,'postgres://base')}catch(e){t=new URL(s.replace('@/','@___DUMMY___/'),'postgres://base'),o=!0}for(const s of t.searchParams.entries())e[s[0]]=s[1];if(e.user=e.user||decodeURIComponent(t.username),e.password=e.password||decodeURIComponent(t.password),'socket:'==t.protocol)return e.host=decodeURI(t.pathname),e.database=t.searchParams.get('db'),e.client_encoding=t.searchParams.get('encoding'),e;const c=o?'':t.hostname;e.host?c&&/^%2f/i.test(c)&&(t.pathname=c+t.pathname):e.host=decodeURIComponent(c),e.port||(e.port=t.port);const n=t.pathname.slice(1)||null;e.database=n?decodeURI(n):null,'true'!==e.ssl&&'1'!==e.ssl||(e.ssl=!0),'0'===e.ssl&&(e.ssl=!1),(e.sslcert||e.sslkey||e.sslrootcert||e.sslmode)&&(e.ssl={});const l=e.sslcert||e.sslkey||e.sslrootcert?r(d[0]):null;switch(e.sslcert&&(e.ssl.cert=l.readFileSync(e.sslcert).toString()),e.sslkey&&(e.ssl.key=l.readFileSync(e.sslkey).toString()),e.sslrootcert&&(e.ssl.ca=l.readFileSync(e.sslrootcert).toString()),e.sslmode){case'disable':e.ssl=!1;break;case'prefer':case'require':case'verify-ca':case'verify-full':break;case'no-verify':e.ssl.rejectUnauthorized=!1}return e}m.exports=s,s.parse=s}),6950,[3896]);
__d((function(g,r,i,a,m,e,d){'use strict';const{EventEmitter:t}=r(d[0]),s=r(d[1]),h=r(d[2]);m.exports=class extends t{constructor(t,o,n){super(),t=h.normalizeQueryConfig(t,o,n),this.text=t.text,this.values=t.values,this.rows=t.rows,this.types=t.types,this.name=t.name,this.queryMode=t.queryMode,this.binary=t.binary,this.portal=t.portal||'',this.callback=t.callback,this._rowMode=t.rowMode,process.domain&&t.callback&&(this.callback=process.domain.bind(t.callback)),this._result=new s(this._rowMode,this.types),this._results=this._result,this._canceledDueToError=!1}requiresPreparation(){return'extended'===this.queryMode||(!!this.name||(!!this.rows||!!this.text&&(!!this.values&&this.values.length>0)))}_checkForMultirow(){this._result.command&&(Array.isArray(this._results)||(this._results=[this._result]),this._result=new s(this._rowMode,this._result._types),this._results.push(this._result))}handleRowDescription(t){this._checkForMultirow(),this._result.addFields(t.fields),this._accumulateRows=this.callback||!this.listeners('row').length}handleDataRow(t){let s;if(!this._canceledDueToError){try{s=this._result.parseRow(t.fields)}catch(t){return void(this._canceledDueToError=t)}this.emit('row',s,this._result),this._accumulateRows&&this._result.addRow(s)}}handleCommandComplete(t,s){this._checkForMultirow(),this._result.addCommandComplete(t),this.rows&&s.sync()}handleEmptyQuery(t){this.rows&&t.sync()}handleError(t,s){if(this._canceledDueToError&&(t=this._canceledDueToError,this._canceledDueToError=!1),this.callback)return this.callback(t);this.emit('error',t)}handleReadyForQuery(t){if(this._canceledDueToError)return this.handleError(this._canceledDueToError,t);if(this.callback)try{this.callback(null,this._results)}catch(t){process.nextTick((()=>{throw t}))}this.emit('end',this._results)}submit(t){if('string'!=typeof this.text&&'string'!=typeof this.name)return new Error('A query must have either text or a name. Supplying neither is unsupported.');const s=t.parsedStatements[this.name];if(this.text&&s&&this.text!==s)return new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);if(this.values&&!Array.isArray(this.values))return new Error('Query values must be an array');if(this.requiresPreparation()){t.stream.cork&&t.stream.cork();try{this.prepare(t)}finally{t.stream.uncork&&t.stream.uncork()}}else t.query(this.text);return null}hasBeenParsed(t){return this.name&&t.parsedStatements[this.name]}handlePortalSuspended(t){this._getRows(t,this.rows)}_getRows(t,s){t.execute({portal:this.portal,rows:s}),s?t.flush():t.sync()}prepare(t){this.hasBeenParsed(t)||t.parse({text:this.text,name:this.name,types:this.types});try{t.bind({portal:this.portal,statement:this.name,values:this.values,binary:this.binary,valueMapper:h.prepareValue})}catch(s){return void this.handleError(s,t)}t.describe({type:'P',name:this.portal||''}),this._getRows(t,this.rows)}handleCopyInResponse(t){t.sendCopyFail('No source stream defined')}handleCopyData(t,s){}}}),6951,[6928,6952,6929]);
__d((function(g,r,_i,a,m,e,d){'use strict';var t=r(d[0]),s=/^([A-Za-z]+)(?: (\d+))?(?: (\d+))?/;m.exports=class{constructor(t,s){this.command=null,this.rowCount=null,this.oid=null,this.rows=[],this.fields=[],this._parsers=void 0,this._types=s,this.RowCtor=null,this.rowAsArray='array'===t,this.rowAsArray&&(this.parseRow=this._parseRowAsArray),this._prebuiltEmptyResultObject=null}addCommandComplete(t){var i;(i=t.text?s.exec(t.text):s.exec(t.command))&&(this.command=i[1],i[3]?(this.oid=parseInt(i[2],10),this.rowCount=parseInt(i[3],10)):i[2]&&(this.rowCount=parseInt(i[2],10)))}_parseRowAsArray(t){for(var s=new Array(t.length),i=0,l=t.length;i<l;i++){var h=t[i];s[i]=null!==h?this._parsers[i](h):null}return s}parseRow(t){for(var s={...this._prebuiltEmptyResultObject},i=0,l=t.length;i<l;i++){var h=t[i],n=this.fields[i].name;s[n]=null!==h?this._parsers[i](h):null}return s}addRow(t){this.rows.push(t)}addFields(s){this.fields=s,this.fields.length&&(this._parsers=new Array(s.length));for(var i={},l=0;l<s.length;l++){var h=s[l];i[h.name]=null,this._types?this._parsers[l]=this._types.getTypeParser(h.dataTypeID,h.format||'text'):this._parsers[l]=t.getTypeParser(h.dataTypeID,h.format||'text')}this._prebuiltEmptyResultObject={...i}}}}),6952,[6931]);
__d((function(g,r,i,a,m,e,d){'use strict';var s=r(d[0]).EventEmitter;const{parse:t,serialize:n}=r(d[1]),{getStream:h,getSecureStream:o}=r(d[2]),c=n.flush(),l=n.sync(),u=n.end();m.exports=class extends s{constructor(s){super(),s=s||{},this.stream=s.stream||h(s.ssl),'function'==typeof this.stream&&(this.stream=this.stream(s)),this._keepAlive=s.keepAlive,this._keepAliveInitialDelayMillis=s.keepAliveInitialDelayMillis,this.lastBuffer=!1,this.parsedStatements={},this.ssl=s.ssl||!1,this._ending=!1,this._emitMessage=!1;var t=this;this.on('newListener',(function(s){'message'===s&&(t._emitMessage=!0)}))}connect(s,t){var n=this;this._connecting=!0,this.stream.setNoDelay(!0),this.stream.connect(s,t),this.stream.once('connect',(function(){n._keepAlive&&n.stream.setKeepAlive(!0,n._keepAliveInitialDelayMillis),n.emit('connect')}));const h=function(s){(!n._ending||'ECONNRESET'!==s.code&&'EPIPE'!==s.code)&&n.emit('error',s)};if(this.stream.on('error',h),this.stream.on('close',(function(){n.emit('end')})),!this.ssl)return this.attachListeners(this.stream);this.stream.once('data',(function(s){switch(s.toString('utf8')){case'S':break;case'N':return n.stream.end(),n.emit('error',new Error('The server does not support SSL connections'));default:return n.stream.end(),n.emit('error',new Error('There was an error establishing an SSL connection'))}const c={socket:n.stream};!0!==n.ssl&&(Object.assign(c,n.ssl),'key'in n.ssl&&(c.key=n.ssl.key));var l=r(d[3]);l.isIP&&0===l.isIP(t)&&(c.servername=t);try{n.stream=o(c)}catch(s){return n.emit('error',s)}n.attachListeners(n.stream),n.stream.on('error',h),n.emit('sslconnect')}))}attachListeners(s){t(s,(s=>{var t='error'===s.name?'errorMessage':s.name;this._emitMessage&&this.emit('message',s),this.emit(t,s)}))}requestSsl(){this.stream.write(n.requestSsl())}startup(s){this.stream.write(n.startup(s))}cancel(s,t){this._send(n.cancel(s,t))}password(s){this._send(n.password(s))}sendSASLInitialResponseMessage(s,t){this._send(n.sendSASLInitialResponseMessage(s,t))}sendSCRAMClientFinalMessage(s){this._send(n.sendSCRAMClientFinalMessage(s))}_send(s){return!!this.stream.writable&&this.stream.write(s)}query(s){this._send(n.query(s))}parse(s){this._send(n.parse(s))}bind(s){this._send(n.bind(s))}execute(s){this._send(n.execute(s))}flush(){this.stream.writable&&this.stream.write(c)}sync(){this._ending=!0,this._send(l)}ref(){this.stream.ref()}unref(){this.stream.unref()}end(){if(this._ending=!0,this._connecting&&this.stream.writable)return this.stream.write(u,(()=>{this.stream.end()}));this.stream.end()}close(s){this._send(n.close(s))}describe(s){this._send(n.describe(s))}sendCopyFromChunk(s){this._send(n.copyData(s))}endCopyFrom(){this._send(n.copyDone())}sendCopyFail(s){this._send(n.copyFail(s))}}}),6953,[6928,6954,6960,6961]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DatabaseError=e.serialize=e.parse=void 0;const n=r(d[0]);Object.defineProperty(e,"DatabaseError",{enumerable:!0,get:function(){return n.DatabaseError}});const t=r(d[1]);Object.defineProperty(e,"serialize",{enumerable:!0,get:function(){return t.serialize}});const o=r(d[2]);e.parse=function(n,t){const s=new o.Parser;return n.on('data',(n=>s.parse(n,t))),new Promise((t=>n.on('end',(()=>t()))))}}),6954,[6955,6956,6958]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoticeMessage=e.DataRowMessage=e.CommandCompleteMessage=e.ReadyForQueryMessage=e.NotificationResponseMessage=e.BackendKeyDataMessage=e.AuthenticationMD5Password=e.ParameterStatusMessage=e.ParameterDescriptionMessage=e.RowDescriptionMessage=e.Field=e.CopyResponse=e.CopyDataMessage=e.DatabaseError=e.copyDone=e.emptyQuery=e.replicationStart=e.portalSuspended=e.noData=e.closeComplete=e.bindComplete=e.parseComplete=void 0,e.parseComplete={name:'parseComplete',length:5},e.bindComplete={name:'bindComplete',length:5},e.closeComplete={name:'closeComplete',length:5},e.noData={name:'noData',length:5},e.portalSuspended={name:'portalSuspended',length:5},e.replicationStart={name:'replicationStart',length:4},e.emptyQuery={name:'emptyQuery',length:4},e.copyDone={name:'copyDone',length:4};class t extends Error{constructor(t,s,o){super(t),this.length=s,this.name=o}}e.DatabaseError=t;e.CopyDataMessage=class{constructor(t,s){this.length=t,this.chunk=s,this.name='copyData'}};e.CopyResponse=class{constructor(t,s,o,n){this.length=t,this.name=s,this.binary=o,this.columnTypes=new Array(n)}};e.Field=class{constructor(t,s,o,n,h,c,l){this.name=t,this.tableID=s,this.columnID=o,this.dataTypeID=n,this.dataTypeSize=h,this.dataTypeModifier=c,this.format=l}};e.RowDescriptionMessage=class{constructor(t,s){this.length=t,this.fieldCount=s,this.name='rowDescription',this.fields=new Array(this.fieldCount)}};e.ParameterDescriptionMessage=class{constructor(t,s){this.length=t,this.parameterCount=s,this.name='parameterDescription',this.dataTypeIDs=new Array(this.parameterCount)}};e.ParameterStatusMessage=class{constructor(t,s,o){this.length=t,this.parameterName=s,this.parameterValue=o,this.name='parameterStatus'}};e.AuthenticationMD5Password=class{constructor(t,s){this.length=t,this.salt=s,this.name='authenticationMD5Password'}};e.BackendKeyDataMessage=class{constructor(t,s,o){this.length=t,this.processID=s,this.secretKey=o,this.name='backendKeyData'}};e.NotificationResponseMessage=class{constructor(t,s,o,n){this.length=t,this.processId=s,this.channel=o,this.payload=n,this.name='notification'}};e.ReadyForQueryMessage=class{constructor(t,s){this.length=t,this.status=s,this.name='readyForQuery'}};e.CommandCompleteMessage=class{constructor(t,s){this.length=t,this.text=s,this.name='commandComplete'}};e.DataRowMessage=class{constructor(t,s){this.length=t,this.fields=s,this.name='dataRow',this.fieldCount=s.length}};e.NoticeMessage=class{constructor(t,s){this.length=t,this.message=s,this.name='notice'}}}),6955,[]);
__d((function(g,r,_i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.serialize=void 0;const t=r(d[0]),n=new t.Writer,s=[],i=new t.Writer,o=function(t,s){for(let o=0;o<t.length;o++){const u=s?s(t[o],o):t[o];null==u?(n.addInt16(0),i.addInt32(-1)):u instanceof Buffer?(n.addInt16(1),i.addInt32(u.length),i.add(u)):(n.addInt16(0),i.addInt32(Buffer.byteLength(u)),i.addString(u))}},u=Buffer.from([69,0,0,0,9,0,0,0,0,0]),f=(t,n)=>{const s=4+Buffer.byteLength(n)+1,i=Buffer.allocUnsafe(1+s);return i[0]=t,i.writeInt32BE(s,1),i.write(n,5,'utf-8'),i[s]=0,i},l=n.addCString('P').flush(68),c=n.addCString('S').flush(68),h=t=>Buffer.from([t,0,0,0,4]),I=h(72),S=h(83),p=h(88),B=h(99),w={startup:s=>{n.addInt16(3).addInt16(0);for(const t of Object.keys(s))n.addCString(t).addCString(s[t]);n.addCString('client_encoding').addCString('UTF8');var i=n.addCString('').flush(),o=i.length+4;return(new t.Writer).addInt32(o).add(i).flush()},password:t=>n.addCString(t).flush(112),requestSsl:()=>{const t=Buffer.allocUnsafe(8);return t.writeInt32BE(8,0),t.writeInt32BE(80877103,4),t},sendSASLInitialResponseMessage:function(t,s){return n.addCString(t).addInt32(Buffer.byteLength(s)).addString(s),n.flush(112)},sendSCRAMClientFinalMessage:function(t){return n.addString(t).flush(112)},query:t=>n.addCString(t).flush(81),parse:t=>{const i=t.name||'';i.length>63&&(console.error('Warning! Postgres only supports 63 characters for query names.'),console.error('You supplied %s (%s)',i,i.length),console.error('This can cause conflicts and silent errors executing queries'));const o=t.types||s;for(var u=o.length,f=n.addCString(i).addCString(t.text).addInt16(u),l=0;l<u;l++)f.addInt32(o[l]);return n.flush(80)},bind:(t={})=>{const u=t.portal||'',f=t.statement||'',l=t.binary||!1,c=t.values||s,h=c.length;return n.addCString(u).addCString(f),n.addInt16(h),o(c,t.valueMapper),n.addInt16(h),n.add(i.flush()),n.addInt16(l?1:0),n.flush(66)},execute:t=>{if(!t||!t.portal&&!t.rows)return u;const n=t.portal||'',s=t.rows||0,i=Buffer.byteLength(n),o=4+i+1+4,f=Buffer.allocUnsafe(1+o);return f[0]=69,f.writeInt32BE(o,1),f.write(n,5,'utf-8'),f[i+5]=0,f.writeUInt32BE(s,f.length-4),f},describe:t=>t.name?f(68,`${t.type}${t.name||''}`):'P'===t.type?l:c,close:t=>{const n=`${t.type}${t.name||''}`;return f(67,n)},flush:()=>I,sync:()=>S,end:()=>p,copyData:t=>n.add(t).flush(100),copyDone:()=>B,copyFail:t=>f(102,t),cancel:(t,n)=>{const s=Buffer.allocUnsafe(16);return s.writeInt32BE(16,0),s.writeInt16BE(1234,4),s.writeInt16BE(5678,6),s.writeInt32BE(t,8),s.writeInt32BE(n,12),s}};e.serialize=w}),6956,[6957]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Writer=void 0;e.Writer=class{constructor(t=256){this.size=t,this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(t)}ensure(t){if(this.buffer.length-this.offset<t){var s=this.buffer,f=s.length+(s.length>>1)+t;this.buffer=Buffer.allocUnsafe(f),s.copy(this.buffer)}}addInt32(t){return this.ensure(4),this.buffer[this.offset++]=t>>>24&255,this.buffer[this.offset++]=t>>>16&255,this.buffer[this.offset++]=t>>>8&255,this.buffer[this.offset++]=t>>>0&255,this}addInt16(t){return this.ensure(2),this.buffer[this.offset++]=t>>>8&255,this.buffer[this.offset++]=t>>>0&255,this}addCString(t){if(t){var s=Buffer.byteLength(t);this.ensure(s+1),this.buffer.write(t,this.offset,'utf-8'),this.offset+=s}else this.ensure(1);return this.buffer[this.offset++]=0,this}addString(t=""){var s=Buffer.byteLength(t);return this.ensure(s),this.buffer.write(t,this.offset),this.offset+=s,this}add(t){return this.ensure(t.length),t.copy(this.buffer,this.offset),this.offset+=t.length,this}join(t){if(t){this.buffer[this.headerPosition]=t;const s=this.offset-(this.headerPosition+1);this.buffer.writeInt32BE(s,this.headerPosition+1)}return this.buffer.slice(t?0:5,this.offset)}flush(t){var s=this.join(t);return this.offset=5,this.headerPosition=0,this.buffer=Buffer.allocUnsafe(this.size),s}}}),6957,[]);
__d((function(g,r,_i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Parser=void 0;const t=r(d[0]),s=r(d[1]),n=Buffer.allocUnsafe(0);e.Parser=class{constructor(t){if(this.buffer=n,this.bufferLength=0,this.bufferOffset=0,this.reader=new s.BufferReader,'binary'===(null==t?void 0:t.mode))throw new Error('Binary mode not supported yet');this.mode=(null==t?void 0:t.mode)||'text'}parse(t,s){this.mergeBuffer(t);const i=this.bufferOffset+this.bufferLength;let f=this.bufferOffset;for(;f+5<=i;){const t=this.buffer[f],n=this.buffer.readUInt32BE(f+1),h=1+n;if(!(h+f<=i))break;s(this.handlePacket(f+5,t,n,this.buffer)),f+=h}f===i?(this.buffer=n,this.bufferLength=0,this.bufferOffset=0):(this.bufferLength=i-f,this.bufferOffset=f)}mergeBuffer(t){if(this.bufferLength>0){const s=this.bufferLength+t.byteLength;if(s+this.bufferOffset>this.buffer.byteLength){let t;if(s<=this.buffer.byteLength&&this.bufferOffset>=this.bufferLength)t=this.buffer;else{let n=2*this.buffer.byteLength;for(;s>=n;)n*=2;t=Buffer.allocUnsafe(n)}this.buffer.copy(t,0,this.bufferOffset,this.bufferOffset+this.bufferLength),this.buffer=t,this.bufferOffset=0}t.copy(this.buffer,this.bufferOffset+this.bufferLength),this.bufferLength=s}else this.buffer=t,this.bufferOffset=0,this.bufferLength=t.byteLength}handlePacket(s,n,i,f){switch(n){case 50:return t.bindComplete;case 49:return t.parseComplete;case 51:return t.closeComplete;case 110:return t.noData;case 115:return t.portalSuspended;case 99:return t.copyDone;case 87:return t.replicationStart;case 73:return t.emptyQuery;case 68:return this.parseDataRowMessage(s,i,f);case 67:return this.parseCommandCompleteMessage(s,i,f);case 90:return this.parseReadyForQueryMessage(s,i,f);case 65:return this.parseNotificationMessage(s,i,f);case 82:return this.parseAuthenticationResponse(s,i,f);case 83:return this.parseParameterStatusMessage(s,i,f);case 75:return this.parseBackendKeyData(s,i,f);case 69:return this.parseErrorMessage(s,i,f,'error');case 78:return this.parseErrorMessage(s,i,f,'notice');case 84:return this.parseRowDescriptionMessage(s,i,f);case 116:return this.parseParameterDescriptionMessage(s,i,f);case 71:return this.parseCopyInMessage(s,i,f);case 72:return this.parseCopyOutMessage(s,i,f);case 100:return this.parseCopyData(s,i,f);default:return new t.DatabaseError('received invalid response: '+n.toString(16),i,'error')}}parseReadyForQueryMessage(s,n,i){this.reader.setBuffer(s,i);const f=this.reader.string(1);return new t.ReadyForQueryMessage(n,f)}parseCommandCompleteMessage(s,n,i){this.reader.setBuffer(s,i);const f=this.reader.cstring();return new t.CommandCompleteMessage(n,f)}parseCopyData(s,n,i){const f=i.slice(s,s+(n-4));return new t.CopyDataMessage(n,f)}parseCopyInMessage(t,s,n){return this.parseCopyMessage(t,s,n,'copyInResponse')}parseCopyOutMessage(t,s,n){return this.parseCopyMessage(t,s,n,'copyOutResponse')}parseCopyMessage(s,n,i,f){this.reader.setBuffer(s,i);const h=0!==this.reader.byte(),o=this.reader.int16(),u=new t.CopyResponse(n,f,h,o);for(let t=0;t<o;t++)u.columnTypes[t]=this.reader.int16();return u}parseNotificationMessage(s,n,i){this.reader.setBuffer(s,i);const f=this.reader.int32(),h=this.reader.cstring(),o=this.reader.cstring();return new t.NotificationResponseMessage(n,f,h,o)}parseRowDescriptionMessage(s,n,i){this.reader.setBuffer(s,i);const f=this.reader.int16(),h=new t.RowDescriptionMessage(n,f);for(let t=0;t<f;t++)h.fields[t]=this.parseField();return h}parseField(){const s=this.reader.cstring(),n=this.reader.uint32(),i=this.reader.int16(),f=this.reader.uint32(),h=this.reader.int16(),o=this.reader.int32(),u=0===this.reader.int16()?'text':'binary';return new t.Field(s,n,i,f,h,o,u)}parseParameterDescriptionMessage(s,n,i){this.reader.setBuffer(s,i);const f=this.reader.int16(),h=new t.ParameterDescriptionMessage(n,f);for(let t=0;t<f;t++)h.dataTypeIDs[t]=this.reader.int32();return h}parseDataRowMessage(s,n,i){this.reader.setBuffer(s,i);const f=this.reader.int16(),h=new Array(f);for(let t=0;t<f;t++){const s=this.reader.int32();h[t]=-1===s?null:this.reader.string(s)}return new t.DataRowMessage(n,h)}parseParameterStatusMessage(s,n,i){this.reader.setBuffer(s,i);const f=this.reader.cstring(),h=this.reader.cstring();return new t.ParameterStatusMessage(n,f,h)}parseBackendKeyData(s,n,i){this.reader.setBuffer(s,i);const f=this.reader.int32(),h=this.reader.int32();return new t.BackendKeyDataMessage(n,f,h)}parseAuthenticationResponse(s,n,i){this.reader.setBuffer(s,i);const f=this.reader.int32(),h={name:'authenticationOk',length:n};switch(f){case 0:break;case 3:8===h.length&&(h.name='authenticationCleartextPassword');break;case 5:if(12===h.length){h.name='authenticationMD5Password';const s=this.reader.bytes(4);return new t.AuthenticationMD5Password(n,s)}break;case 10:let s;h.name='authenticationSASL',h.mechanisms=[];do{s=this.reader.cstring(),s&&h.mechanisms.push(s)}while(s);break;case 11:h.name='authenticationSASLContinue',h.data=this.reader.string(n-8);break;case 12:h.name='authenticationSASLFinal',h.data=this.reader.string(n-8);break;default:throw new Error('Unknown authenticationOk message type '+f)}return h}parseErrorMessage(s,n,i,f){this.reader.setBuffer(s,i);const h={};let o=this.reader.string(1);for(;'\0'!==o;)h[o]=this.reader.cstring(),o=this.reader.string(1);const u=h.M,c='notice'===f?new t.NoticeMessage(n,u):new t.DatabaseError(u,n,f);return c.severity=h.S,c.code=h.C,c.detail=h.D,c.hint=h.H,c.position=h.P,c.internalPosition=h.p,c.internalQuery=h.q,c.where=h.W,c.schema=h.s,c.table=h.t,c.column=h.c,c.dataType=h.d,c.constraint=h.n,c.file=h.F,c.line=h.L,c.routine=h.R,c}}}),6958,[6955,6959]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BufferReader=void 0;const t=Buffer.allocUnsafe(0);e.BufferReader=class{constructor(f=0){this.offset=f,this.buffer=t,this.encoding='utf-8'}setBuffer(t,f){this.offset=t,this.buffer=f}int16(){const t=this.buffer.readInt16BE(this.offset);return this.offset+=2,t}byte(){const t=this.buffer[this.offset];return this.offset++,t}int32(){const t=this.buffer.readInt32BE(this.offset);return this.offset+=4,t}uint32(){const t=this.buffer.readUInt32BE(this.offset);return this.offset+=4,t}string(t){const f=this.buffer.toString(this.encoding,this.offset,this.offset+t);return this.offset+=t,f}cstring(){const t=this.offset;let f=t;for(;0!==this.buffer[f++];);return this.offset=f,this.buffer.toString(this.encoding,t,f-1)}bytes(t){const f=this.buffer.slice(this.offset,this.offset+t);return this.offset+=t,f}}}),6959,[]);
__d((function(g,r,i,a,m,e,d){const{getStream:t,getSecureStream:n}=(function(){if(c())return u();return o()})();function o(){return{getStream:function(t){return new(r(d[0]).Socket)},getSecureStream:function(t){return r(d[1]).connect(t)}}}function u(){return{getStream:function(t){const{CloudflareSocket:n}=r(d[2]);return new n(t)},getSecureStream:function(t){return t.socket.startTls(t),t.socket}}}function c(){if('object'==typeof navigator&&null!==navigator&&'string'==typeof navigator.userAgent)return'Cloudflare-Workers'===navigator.userAgent;if('function'==typeof Response){const t=new Response(null,{cf:{thing:!0}});if('object'==typeof t.cf&&null!==t.cf&&t.cf.thing)return!0}return!1}m.exports={getStream:t,getSecureStream:n}}),6960,[6961,6962,6963]);
__d((function(g,r,i,a,m,e,d){m.exports=$$require_external('node:net')}),6961,[]);
__d((function(g,r,i,a,m,e,d){m.exports=$$require_external('node:tls')}),6962,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={}}),6963,[]);
__d((function(g,r,i,a,m,e,d){'use strict';r(d[0]);var t=r(d[1]),s=r(d[2]);m.exports=function(n,o){var u=s.getFileName();t.stat(u,(function(c,f){if(c||!s.usePgPass(f,u))return o(void 0);var v=t.createReadStream(u);s.getPassword(n,v,o)}))},m.exports.warnTo=s.warnTo}),6964,[6965,3896,6966]);
__d((function(g,r,i,a,m,e,d){m.exports=$$require_external('node:path')}),6965,[]);
__d((function(g,r,_i,a,m,e,d){'use strict';var n=r(d[0]),t=r(d[1]).Stream,o=r(d[2]),s=r(d[3]),i='win32'===process.platform,u=process.stderr;var c=['host','port','database','user','password'],p=c.length,f=c[p-1];function l(){if(u instanceof t&&!0===u.writable){var n=Array.prototype.slice.call(arguments).concat("\n");u.write(s.format.apply(s,n))}}Object.defineProperty(m.exports,'isWin',{get:function(){return i},set:function(n){i=n}}),m.exports.warnTo=function(n){var t=u;return u=n,t},m.exports.getFileName=function(t){var o=t||process.env;return o.PGPASSFILE||(i?n.join(o.APPDATA||'./','postgresql','pgpass.conf'):n.join(o.HOME||'./','.pgpass'))},m.exports.usePgPass=function(n,t){return!Object.prototype.hasOwnProperty.call(process.env,'PGPASSWORD')&&(!!i||(t=t||'<unkn>',32768!=(61440&n.mode)?(l('WARNING: password file "%s" is not a plain file',t),!1):!(63&n.mode)||(l('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',t),!1)))};var h=m.exports.match=function(n,t){return c.slice(0,-1).reduce((function(o,s,i){return 1==i&&Number(n[s]||5432)===Number(t[s])?o&&!0:o&&('*'===t[s]||t[s]===n[s])}),!0)};m.exports.getPassword=function(n,t,s){var i,u=t.pipe(o());var c=function(n){t.destroy(),l('WARNING: error on reading file: %s',n),s(void 0)};t.on('error',c),u.on('data',(function(t){var o=v(t);o&&P(o)&&h(n,o)&&(i=o[f],u.end())})).on('end',(function(){t.destroy(),s(i)})).on('error',c)};var v=m.exports.parseLine=function(n){if(n.length<11||n.match(/^\s+#/))return null;for(var t='',o='',s=0,i=0,u={},f=function(t,o,s){var i=n.substring(o,s);Object.hasOwnProperty.call(process.env,'PGPASS_NO_DEESCAPE')||(i=i.replace(/\\([:\\])/g,'$1')),u[c[t]]=i},l=0;l<n.length-1;l+=1){if(t=n.charAt(l+1),o=n.charAt(l),s==p-1){f(s,i);break}l>=0&&':'==t&&'\\'!==o&&(f(s,i,l+1),i=l+2,s+=1)}return u=Object.keys(u).length===p?u:null},P=m.exports.isValidEntry=function(n){for(var t={0:function(n){return n.length>0},1:function(n){return'*'===n||(n=Number(n),isFinite(n)&&n>0&&n<9007199254740992&&Math.floor(n)===n)},2:function(n){return n.length>0},3:function(n){return n.length>0},4:function(n){return n.length>0}},o=0;o<c.length;o+=1){if(!(0,t[o])(n[c[o]]||''))return!1}return!0}}),6966,[6965,470,6967,467]);
__d((function(g,r,_i,a,m,e,d){'use strict';const{Transform:t}=r(d[0]),{StringDecoder:i}=r(d[1]),s=Symbol('last'),o=Symbol('decoder');function n(t,i,n){let h;if(this.overflow){if(h=this[o].write(t).split(this.matcher),1===h.length)return n();h.shift(),this.overflow=!1}else this[s]+=this[o].write(t),h=this[s].split(this.matcher);this[s]=h.pop();for(let t=0;t<h.length;t++)try{f(this,this.mapper(h[t]))}catch(t){return n(t)}this.overflow=this[s].length>this.maxLength,!this.overflow||this.skipOverflow?n():n(new Error('maximum buffer reached'))}function h(t){if(this[s]+=this[o].end(),this[s])try{f(this,this.mapper(this[s]))}catch(i){return t(i)}t()}function f(t,i){void 0!==i&&t.push(i)}function c(t){return t}m.exports=function(f,l,p){switch(f=f||/\r?\n/,l=l||c,p=p||{},arguments.length){case 1:'function'==typeof f?(l=f,f=/\r?\n/):'object'!=typeof f||f instanceof RegExp||f[Symbol.split]||(p=f,f=/\r?\n/);break;case 2:'function'==typeof f?(p=l,l=f,f=/\r?\n/):'object'==typeof l&&(p=l,l=c)}(p=Object.assign({},p)).autoDestroy=!0,p.transform=n,p.flush=h,p.readableObjectMode=!0;const u=new t(p);return u[s]='',u[o]=new i('utf8'),u.matcher=f,u.mapper=l,u.maxLength=p.maxLength,u.skipOverflow=p.skipOverflow||!1,u.overflow=!1,u._destroy=function(t,i){this._writableState.errorEmitted=!1,i(t)},u}}),6967,[470,6968]);
__d((function(g,r,i,a,m,e,d){m.exports=$$require_external('node:string_decoder')}),6968,[]);
__d((function(g,r,_i,a,m,e,d){'use strict';const t=r(d[0]).EventEmitter,i=function(){},n=(t,i)=>{const n=t.findIndex(i);return-1===n?void 0:t.splice(n,1)[0]};class s{constructor(t,i,n){this.client=t,this.idleListener=i,this.timeoutId=n}}class o{constructor(t){this.callback=t}}function l(){throw new Error('Release called on client which has already been released to the pool.')}function c(t,i){if(i)return{callback:i,result:void 0};let n,s;return{callback:function(t,i){t?n(t):s(i)},result:new t((function(t,i){s=t,n=i})).catch((t=>{throw Error.captureStackTrace(t),t}))}}function u(t,i){return function n(s){s.client=i,i.removeListener('error',n),i.on('error',(()=>{t.log('additional client error after disconnection due to error',s)})),t._remove(i),t.emit('error',s,i)}}m.exports=class extends t{constructor(t,i){super(),this.options=Object.assign({},t),null!=t&&'password'in t&&Object.defineProperty(this.options,'password',{configurable:!0,enumerable:!1,writable:!0,value:t.password}),null!=t&&t.ssl&&t.ssl.key&&Object.defineProperty(this.options.ssl,'key',{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||i||r(d[1]).Client,this.Promise=this.options.Promise||g.Promise,void 0===this.options.idleTimeoutMillis&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_pulseQueue(){if(this.log('pulse queue'),this.ended)return void this.log('pulse queue ended');if(this.ending)return this.log('pulse queue on ending'),this._idle.length&&this._idle.slice().map((t=>{this._remove(t.client)})),void(this._clients.length||(this.ended=!0,this._endCallback()));if(!this._pendingQueue.length)return void this.log('no queued requests');if(!this._idle.length&&this._isFull())return;const t=this._pendingQueue.shift();if(this._idle.length){const i=this._idle.pop();clearTimeout(i.timeoutId);const n=i.client;n.ref&&n.ref();const s=i.idleListener;return this._acquireClient(n,t,s,!1)}if(!this._isFull())return this.newClient(t);throw new Error('unexpected condition')}_remove(t){const i=n(this._idle,(i=>i.client===t));void 0!==i&&clearTimeout(i.timeoutId),this._clients=this._clients.filter((i=>i!==t)),t.end(),this.emit('remove',t)}connect(t){if(this.ending){const i=new Error('Cannot use a pool after calling end on the pool');return t?t(i):this.Promise.reject(i)}const i=c(this.Promise,t),s=i.result;if(this._isFull()||this._idle.length){if(this._idle.length&&process.nextTick((()=>this._pulseQueue())),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new o(i.callback)),s;const t=(t,n,s)=>{clearTimeout(c),i.callback(t,n,s)},l=new o(t),c=setTimeout((()=>{n(this._pendingQueue,(i=>i.callback===t)),l.timedOut=!0,i.callback(new Error('timeout exceeded when trying to connect'))}),this.options.connectionTimeoutMillis);return c.unref&&c.unref(),this._pendingQueue.push(l),s}return this.newClient(new o(i.callback)),s}newClient(t){const n=new this.Client(this.options);this._clients.push(n);const s=u(this,n);let l;this.log('checking client timeout');let c=!1;this.options.connectionTimeoutMillis&&(l=setTimeout((()=>{this.log('ending client due to timeout'),c=!0,n.connection?n.connection.stream.destroy():n.end()}),this.options.connectionTimeoutMillis)),this.log('connecting new client'),n.connect((u=>{if(l&&clearTimeout(l),n.on('error',s),!u){if(this.log('new client connected'),0!==this.options.maxLifetimeSeconds){const t=setTimeout((()=>{this.log('ending client due to expired lifetime'),this._expired.add(n);-1!==this._idle.findIndex((t=>t.client===n))&&this._acquireClient(n,new o(((t,i,n)=>n())),s,!1)}),1e3*this.options.maxLifetimeSeconds);t.unref(),n.once('end',(()=>clearTimeout(t)))}return this._acquireClient(n,t,s,!0)}this.log('client failed to connect',u),this._clients=this._clients.filter((t=>t!==n)),c&&(u=new Error('Connection terminated due to connection timeout',{cause:u})),this._pulseQueue(),t.timedOut||t.callback(u,void 0,i)}))}_acquireClient(t,n,s,o){o&&this.emit('connect',t),this.emit('acquire',t),t.release=this._releaseOnce(t,s),t.removeListener('error',s),n.timedOut?o&&this.options.verify?this.options.verify(t,t.release):t.release():o&&this.options.verify?this.options.verify(t,(s=>{if(s)return t.release(s),n.callback(s,void 0,i);n.callback(void 0,t,t.release)})):n.callback(void 0,t,t.release)}_releaseOnce(t,i){let n=!1;return s=>{n&&l(),n=!0,this._release(t,i,s)}}_release(t,i,n){if(t.on('error',i),t._poolUseCount=(t._poolUseCount||0)+1,this.emit('release',n,t),n||this.ending||!t._queryable||t._ending||t._poolUseCount>=this.options.maxUses)return t._poolUseCount>=this.options.maxUses&&this.log('remove expended client'),this._remove(t),void this._pulseQueue();if(this._expired.has(t))return this.log('remove expired client'),this._expired.delete(t),this._remove(t),void this._pulseQueue();let o;this.options.idleTimeoutMillis&&(o=setTimeout((()=>{this.log('remove idle client'),this._remove(t)}),this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&o.unref()),this.options.allowExitOnIdle&&t.unref(),this._idle.push(new s(t,i,o)),this._pulseQueue()}query(t,i,n){if('function'==typeof t){const i=c(this.Promise,t);return setImmediate((function(){return i.callback(new Error('Passing a function as the first parameter to pool.query is not supported'))})),i.result}'function'==typeof i&&(n=i,i=void 0);const s=c(this.Promise,n);return n=s.callback,this.connect(((s,o)=>{if(s)return n(s);let l=!1;const c=t=>{l||(l=!0,o.release(t),n(t))};o.once('error',c),this.log('dispatching query');try{o.query(t,i,((t,i)=>{if(this.log('query dispatched'),o.removeListener('error',c),!l)return l=!0,o.release(t),t?n(t):n(void 0,i)}))}catch(s){return o.release(s),n(s)}})),s.result}end(t){if(this.log('ending'),this.ending){const i=new Error('Called end on pool more than once');return t?t(i):this.Promise.reject(i)}this.ending=!0;const i=c(this.Promise,t);return this._endCallback=i.callback,this._pulseQueue(),i.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce(((t,i)=>t+(this._expired.has(i)?1:0)),0)}get totalCount(){return this._clients.length}}}),6969,[6928,6926]);
__d((function(g,r,i,a,m,e,d){'use strict';m.exports=r(d[0])}),6970,[6971]);
__d((function(g,r,i,a,m,_e,d){'use strict';var e;try{e=r(d[0],"pg-native")}catch(e){throw e}var t=r(d[1]),n=r(d[2]).EventEmitter,o=r(d[3]),s=r(d[4]),c=r(d[5]),u=m.exports=function(o){n.call(this),o=o||{},this._Promise=o.Promise||g.Promise,this._types=new t(o.types),this.native=new e({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;var c=this.connectionParameters=new s(o);o.nativeConnectionString&&(c.nativeConnectionString=o.nativeConnectionString),this.user=c.user,Object.defineProperty(this,'password',{configurable:!0,enumerable:!1,writable:!0,value:c.password}),this.database=c.database,this.host=c.host,this.port=c.port,this.namedQueries={}};u.Query=c,o.inherits(u,n),u.prototype._errorAllQueries=function(e){const t=t=>{process.nextTick((()=>{t.native=this.native,t.handleError(e)}))};this._hasActiveQuery()&&(t(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(t),this._queryQueue.length=0},u.prototype._connect=function(e){var t=this;this._connecting?process.nextTick((()=>e(new Error('Client has already been connected. You cannot reuse a client.')))):(this._connecting=!0,this.connectionParameters.getLibpqConnectionString((function(n,o){if(t.connectionParameters.nativeConnectionString&&(o=t.connectionParameters.nativeConnectionString),n)return e(n);t.native.connect(o,(function(n){if(n)return t.native.end(),e(n);t._connected=!0,t.native.on('error',(function(e){t._queryable=!1,t._errorAllQueries(e),t.emit('error',e)})),t.native.on('notification',(function(e){t.emit('notification',{channel:e.relname,payload:e.extra})})),t.emit('connect'),t._pulseQueryQueue(!0),e()}))})))},u.prototype.connect=function(e){if(!e)return new this._Promise(((e,t)=>{this._connect((n=>{n?t(n):e()}))}));this._connect(e)},u.prototype.query=function(e,t,n){var o,s,u,h,y;if(null==e)throw new TypeError('Client was passed a null or undefined query');if('function'==typeof e.submit)u=e.query_timeout||this.connectionParameters.query_timeout,s=o=e,'function'==typeof t&&(e.callback=t);else if(u=e.query_timeout||this.connectionParameters.query_timeout,!(o=new c(e,t,n)).callback){let e,t;s=new this._Promise(((n,o)=>{e=n,t=o})).catch((e=>{throw Error.captureStackTrace(e),e})),o.callback=(n,o)=>n?t(n):e(o)}return u&&(y=o.callback,h=setTimeout((()=>{var e=new Error('Query read timeout');process.nextTick((()=>{o.handleError(e,this.connection)})),y(e),o.callback=()=>{};var t=this._queryQueue.indexOf(o);t>-1&&this._queryQueue.splice(t,1),this._pulseQueryQueue()}),u),o.callback=(e,t)=>{clearTimeout(h),y(e,t)}),this._queryable?this._ending?(o.native=this.native,process.nextTick((()=>{o.handleError(new Error('Client was closed and is not queryable'))})),s):(this._queryQueue.push(o),this._pulseQueryQueue(),s):(o.native=this.native,process.nextTick((()=>{o.handleError(new Error('Client has encountered a connection error and is not queryable'))})),s)},u.prototype.end=function(e){var t,n=this;return this._ending=!0,this._connected||this.once('connect',this.end.bind(this,e)),e||(t=new this._Promise((function(t,n){e=e=>e?n(e):t()}))),this.native.end((function(){n._errorAllQueries(new Error('Connection terminated')),process.nextTick((()=>{n.emit('end'),e&&e()}))})),t},u.prototype._hasActiveQuery=function(){return this._activeQuery&&'error'!==this._activeQuery.state&&'end'!==this._activeQuery.state},u.prototype._pulseQueryQueue=function(e){if(this._connected&&!this._hasActiveQuery()){var t=this._queryQueue.shift();if(t){this._activeQuery=t,t.submit(this);var n=this;t.once('_done',(function(){n._pulseQueryQueue()}))}else e||this.emit('drain')}},u.prototype.cancel=function(e){this._activeQuery===e?this.native.cancel((function(){})):-1!==this._queryQueue.indexOf(e)&&this._queryQueue.splice(this._queryQueue.indexOf(e),1)},u.prototype.ref=function(){},u.prototype.unref=function(){},u.prototype.setTypeParser=function(e,t,n){return this._types.setTypeParser(e,t,n)},u.prototype.getTypeParser=function(e,t){return this._types.getTypeParser(e,t)}}),6971,[6947,6928,467,6948,6972]);
__d((function(g,r,_i,a,m,e,d){'use strict';var t=r(d[0]).EventEmitter,i=r(d[1]),n=r(d[2]),s=m.exports=function(i,s,o){t.call(this),i=n.normalizeQueryConfig(i,s,o),this.text=i.text,this.values=i.values,this.name=i.name,this.queryMode=i.queryMode,this.callback=i.callback,this.state='new',this._arrayMode='array'===i.rowMode,this._emitRowEvents=!1,this.on('newListener',function(t){'row'===t&&(this._emitRowEvents=!0)}.bind(this))};i.inherits(s,t);var o={sqlState:'code',statementPosition:'position',messagePrimary:'message',context:'where',schemaName:'schema',tableName:'table',columnName:'column',dataTypeName:'dataType',constraintName:'constraint',sourceFile:'file',sourceLine:'line',sourceFunction:'routine'};s.prototype.handleError=function(t){var i=this.native.pq.resultErrorFields();if(i)for(var n in i){t[o[n]||n]=i[n]}this.callback?this.callback(t):this.emit('error',t),this.state='error'},s.prototype.then=function(t,i){return this._getPromise().then(t,i)},s.prototype.catch=function(t){return this._getPromise().catch(t)},s.prototype._getPromise=function(){return this._promise||(this._promise=new Promise(function(t,i){this._once('end',t),this._once('error',i)}.bind(this))),this._promise},s.prototype.submit=function(t){this.state='running';var i=this;this.native=t.native,t.native.arrayMode=this._arrayMode;var s=function(n,s,o){if(t.native.arrayMode=!1,setImmediate((function(){i.emit('_done')})),n)return i.handleError(n);i._emitRowEvents&&(o.length>1?s.forEach(((t,n)=>{t.forEach((t=>{i.emit('row',t,o[n])}))})):s.forEach((function(t){i.emit('row',t,o)}))),i.state='end',i.emit('end',o),i.callback&&i.callback(null,o)};if(process.domain&&(s=process.domain.bind(s)),this.name){this.name.length>63&&(console.error('Warning! Postgres only supports 63 characters for query names.'),console.error('You supplied %s (%s)',this.name,this.name.length),console.error('This can cause conflicts and silent errors executing queries'));var o=(this.values||[]).map(n.prepareValue);if(t.namedQueries[this.name]){if(this.text&&t.namedQueries[this.name]!==this.text){const t=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return s(t)}return t.native.execute(this.name,o,s)}return t.native.prepare(this.name,this.text,o.length,(function(n){return n?s(n):(t.namedQueries[i.name]=i.text,i.native.execute(i.name,o,s))}))}if(this.values){if(!Array.isArray(this.values)){const t=new Error('Query values must be an array');return s(t)}var h=this.values.map(n.prepareValue);t.native.query(this.text,h,s)}else'extended'===this.queryMode?t.native.query(this.text,[],s):t.native.query(this.text,s)}}),6972,[6928,467,6929]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.NodePgTransaction=e.NodePgSession=e.NodePgPreparedQuery=void 0;var s=t(r(d[1])),n=r(d[2]),o=r(d[3]),c=r(d[4]),l=r(d[5]),u=r(d[6]),y=r(d[7]),h=r(d[8]);const{Pool:p,types:w}=s.default;class z extends l.PgPreparedQuery{constructor(t,s,n,o,c,l,u,y){super({sql:s,params:n}),this.client=t,this.params=n,this.logger=o,this.fields=c,this._isResponseInArrayMode=u,this.customResultMapper=y,this.rawQueryConfig={name:l,text:s,types:{getTypeParser:(t,s)=>t===w.builtins.TIMESTAMPTZ||t===w.builtins.TIMESTAMP||t===w.builtins.DATE||t===w.builtins.INTERVAL||1231===t||1115===t||1185===t||1187===t||1182===t?t=>t:w.getTypeParser(t,s)}},this.queryConfig={name:l,text:s,rowMode:"array",types:{getTypeParser:(t,s)=>t===w.builtins.TIMESTAMPTZ||t===w.builtins.TIMESTAMP||t===w.builtins.DATE||t===w.builtins.INTERVAL||1231===t||1115===t||1185===t||1187===t||1182===t?t=>t:w.getTypeParser(t,s)}}}static[n.entityKind]="NodePgPreparedQuery";async execute(t={}){return y.tracer.startActiveSpan("drizzle.execute",(async()=>{const s=(0,u.fillPlaceholders)(this.params,t);this.logger.logQuery(this.rawQueryConfig.text,s);const{fields:n,rawQueryConfig:o,client:c,queryConfig:l,joinsNotNullableMap:p,customResultMapper:w}=this;if(!n&&!w)return y.tracer.startActiveSpan("drizzle.driver.execute",(async t=>(t?.setAttributes({"drizzle.query.name":o.name,"drizzle.query.text":o.text,"drizzle.query.params":JSON.stringify(s)}),c.query(o,s))));const z=await y.tracer.startActiveSpan("drizzle.driver.execute",(t=>(t?.setAttributes({"drizzle.query.name":l.name,"drizzle.query.text":l.text,"drizzle.query.params":JSON.stringify(s)}),c.query(l,s))));return y.tracer.startActiveSpan("drizzle.mapResponse",(()=>w?w(z.rows):z.rows.map((t=>(0,h.mapResultRow)(n,t,p)))))}))}all(t={}){return y.tracer.startActiveSpan("drizzle.execute",(()=>{const s=(0,u.fillPlaceholders)(this.params,t);return this.logger.logQuery(this.rawQueryConfig.text,s),y.tracer.startActiveSpan("drizzle.driver.execute",(t=>(t?.setAttributes({"drizzle.query.name":this.rawQueryConfig.name,"drizzle.query.text":this.rawQueryConfig.text,"drizzle.query.params":JSON.stringify(s)}),this.client.query(this.rawQueryConfig,s).then((t=>t.rows)))))}))}isResponseInArrayMode(){return this._isResponseInArrayMode}}e.NodePgPreparedQuery=z;class x extends l.PgSession{constructor(t,s,n,c={}){super(s),this.client=t,this.schema=n,this.options=c,this.logger=c.logger??new o.NoopLogger}static[n.entityKind]="NodePgSession";prepareQuery(t,s,n,o,c){return new z(this.client,t.sql,t.params,this.logger,s,n,o,c)}async transaction(t,s){const n=this.client instanceof p?new x(await this.client.connect(),this.dialect,this.schema,this.options):this,o=new P(this.dialect,n,this.schema);await o.execute(u.sql`begin${s?u.sql` ${o.getTransactionConfigSQL(s)}`:void 0}`);try{const s=await t(o);return await o.execute(u.sql`commit`),s}catch(t){throw await o.execute(u.sql`rollback`),t}finally{this.client instanceof p&&n.client.release()}}async count(t){const s=await this.execute(t);return Number(s.rows[0].count)}}e.NodePgSession=x;class P extends c.PgTransaction{static[n.entityKind]="NodePgTransaction";async transaction(t){const s=`sp${this.nestedIndex+1}`,n=new P(this.dialect,this.session,this.schema,this.nestedIndex+1);await n.execute(u.sql.raw(`savepoint ${s}`));try{const o=await t(n);return await n.execute(u.sql.raw(`release savepoint ${s}`)),o}catch(t){throw await n.execute(u.sql.raw(`rollback to savepoint ${s}`)),t}}}e.NodePgTransaction=P}),6973,[16,6926,3743,3763,3812,3840,3744,3754,3771]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.auth=void 0;var n=r(d[0]),o=r(d[1]),s=r(d[2]),c=r(d[3]),t=r(d[4]),p=r(d[5]);e.auth=(0,o.betterAuth)({trustedOrigins:['divvi-app://'],socialProviders:{google:{clientId:process.env.GOOGLE_CLIENT_ID,clientSecret:process.env.GOOGLE_CLIENT_SECRET},discord:{clientId:process.env.DISCORD_CLIENT_ID,clientSecret:process.env.DISCORD_CLIENT_SECRET},apple:{clientId:process.env.APPLE_CLIENT_ID,clientSecret:process.env.APPLE_CLIENT_SECRET,appBundleIdentifier:process.env.APPLE_APP_BUNDLE_IDENTIFIER}},plugins:[(0,n.expo)(),(0,c.anonymous)({onLinkAccount:p.linkAccount,emailDomainName:'divvi-app.uing.dev'})],advanced:{cookiePrefix:'divvi'},session:{expiresIn:604800,updateAge:86400},database:(0,s.drizzleAdapter)(t.db,{provider:'pg'}),logger:{level:'debug'}})}),6974,[6975,7101,7359,7360,6923,7386]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.expo=void 0;var t=r(d[0]);e.expo=s=>({id:"expo",init:t=>({options:{trustedOrigins:t.trustedOrigins}}),async onRequest(t,o){if(!s?.overrideOrigin||t.headers.get("origin"))return;const n=t.headers.get("expo-origin");if(!n)return;const c=t.clone();return c.headers.set("origin",n),{request:c}},hooks:{after:[{matcher:t=>t.path?.startsWith("/callback")||t.path?.startsWith("/oauth2/callback"),handler:(0,t.createAuthMiddleware)((async t=>{const s=t.context.responseHeaders,o=s?.get("location");if(!o)return;if(!t.context.trustedOrigins.filter((t=>!t.startsWith("http"))).some((t=>o?.startsWith(t))))return;const n=s?.get("set-cookie");if(!n)return;const c=new URL(o);c.searchParams.set("cookie",n),t.setHeader("location",c.toString())}))}]}})}),6975,[6976]);
__d((function(g,r,i,a,_m,_e,d){var e=r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),Object.defineProperty(_e,"APIError",{enumerable:!0,get:function(){return t.APIError}}),Object.defineProperty(_e,"callbackOAuth",{enumerable:!0,get:function(){return n.L}}),Object.defineProperty(_e,"changeEmail",{enumerable:!0,get:function(){return n.D}}),Object.defineProperty(_e,"changePassword",{enumerable:!0,get:function(){return n.C}}),Object.defineProperty(_e,"createAuthEndpoint",{enumerable:!0,get:function(){return n.a}}),Object.defineProperty(_e,"createAuthMiddleware",{enumerable:!0,get:function(){return n.c}}),Object.defineProperty(_e,"createEmailVerificationToken",{enumerable:!0,get:function(){return n.e}}),Object.defineProperty(_e,"deleteUser",{enumerable:!0,get:function(){return n.z}}),Object.defineProperty(_e,"deleteUserCallback",{enumerable:!0,get:function(){return n.n}}),Object.defineProperty(_e,"error",{enumerable:!0,get:function(){return n.j}}),Object.defineProperty(_e,"forgetPassword",{enumerable:!0,get:function(){return n.I}}),Object.defineProperty(_e,"forgetPasswordCallback",{enumerable:!0,get:function(){return n.y}}),Object.defineProperty(_e,"freshSessionMiddleware",{enumerable:!0,get:function(){return n.f}}),_e.getEndpoints=j,Object.defineProperty(_e,"getSession",{enumerable:!0,get:function(){return n.b}}),Object.defineProperty(_e,"getSessionFromCtx",{enumerable:!0,get:function(){return n.g}}),Object.defineProperty(_e,"linkSocialAccount",{enumerable:!0,get:function(){return n.q}}),Object.defineProperty(_e,"listSessions",{enumerable:!0,get:function(){return n.l}}),Object.defineProperty(_e,"listUserAccounts",{enumerable:!0,get:function(){return n.p}}),Object.defineProperty(_e,"ok",{enumerable:!0,get:function(){return n.k}}),Object.defineProperty(_e,"optionsMiddleware",{enumerable:!0,get:function(){return n.O}}),Object.defineProperty(_e,"originCheck",{enumerable:!0,get:function(){return n.o}}),Object.defineProperty(_e,"originCheckMiddleware",{enumerable:!0,get:function(){return n.i}}),Object.defineProperty(_e,"refreshToken",{enumerable:!0,get:function(){return n.r}}),Object.defineProperty(_e,"requestOnlySessionMiddleware",{enumerable:!0,get:function(){return n.N}}),Object.defineProperty(_e,"resetPassword",{enumerable:!0,get:function(){return n.G}}),Object.defineProperty(_e,"revokeOtherSessions",{enumerable:!0,get:function(){return n.t}}),Object.defineProperty(_e,"revokeSession",{enumerable:!0,get:function(){return n.x}}),Object.defineProperty(_e,"revokeSessions",{enumerable:!0,get:function(){return n.v}}),_e.router=void 0,Object.defineProperty(_e,"sendVerificationEmail",{enumerable:!0,get:function(){return n.E}}),Object.defineProperty(_e,"sendVerificationEmailFn",{enumerable:!0,get:function(){return n.d}}),Object.defineProperty(_e,"sessionMiddleware",{enumerable:!0,get:function(){return n.s}}),Object.defineProperty(_e,"setPassword",{enumerable:!0,get:function(){return n.A}}),Object.defineProperty(_e,"signInEmail",{enumerable:!0,get:function(){return n.J}}),Object.defineProperty(_e,"signInSocial",{enumerable:!0,get:function(){return n.M}}),Object.defineProperty(_e,"signOut",{enumerable:!0,get:function(){return n.K}}),_e.signUpEmail=void 0,Object.defineProperty(_e,"unlinkAccount",{enumerable:!0,get:function(){return n.m}}),Object.defineProperty(_e,"updateUser",{enumerable:!0,get:function(){return n.u}}),Object.defineProperty(_e,"verifyEmail",{enumerable:!0,get:function(){return n.F}});var t=r(d[1]),n=r(d[2]),o=r(d[3]),s=r(d[4]),c=r(d[5]),u=r(d[6]),l=r(d[7]),f=r(d[8]),p=e(r(d[9]));r(d[10]),r(d[11]),r(d[12]),r(d[13]),r(d[14]),r(d[15]),r(d[16]),r(d[17]),r(d[18]),r(d[19]),r(d[20]),r(d[21]),r(d[22]),r(d[23]),r(d[24]),r(d[25]),r(d[26]),r(d[27]),r(d[28]),r(d[29]),r(d[30]),r(d[31]),r(d[32]),r(d[33]),r(d[34]);const m=()=>(0,n.a)("/sign-up/email",{method:"POST",body:o.z.record(o.z.string(),o.z.any()),metadata:{$Infer:{body:{}},openapi:{description:"Sign up a user using email and password",requestBody:{content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"The name of the user"},email:{type:"string",description:"The email of the user"},password:{type:"string",description:"The password of the user"},callbackURL:{type:"string",description:"The URL to use for email verification callback"}},required:["name","email","password"]}}}},responses:{200:{description:"Successfully created user",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",nullable:!0,description:"Authentication token for the session"},user:{type:"object",properties:{id:{type:"string",description:"The unique identifier of the user"},email:{type:"string",format:"email",description:"The email address of the user"},name:{type:"string",description:"The name of the user"},image:{type:"string",format:"uri",nullable:!0,description:"The profile image URL of the user"},emailVerified:{type:"boolean",description:"Whether the email has been verified"},createdAt:{type:"string",format:"date-time",description:"When the user was created"},updatedAt:{type:"string",format:"date-time",description:"When the user was last updated"}},required:["id","email","name","emailVerified","createdAt","updatedAt"]}},required:["user"]}}}}}}}},(async e=>{if(!e.context.options.emailAndPassword?.enabled||e.context.options.emailAndPassword?.disableSignUp)throw new t.APIError("BAD_REQUEST",{message:"Email and password sign up is not enabled"});const l=e.body,{name:f,email:p,password:m,image:h,callbackURL:b,...w}=l;if(!o.z.string().email().safeParse(p).success)throw new t.APIError("BAD_REQUEST",{message:n.B.INVALID_EMAIL});const y=e.context.password.config.minPasswordLength;if(m.length<y)throw e.context.logger.error("Password is too short"),new t.APIError("BAD_REQUEST",{message:n.B.PASSWORD_TOO_SHORT});const E=e.context.password.config.maxPasswordLength;if(m.length>E)throw e.context.logger.error("Password is too long"),new t.APIError("BAD_REQUEST",{message:n.B.PASSWORD_TOO_LONG});const P=await e.context.internalAdapter.findUserByEmail(p);if(P?.user)throw e.context.logger.info(`Sign-up attempt for existing email: ${p}`),new t.APIError("UNPROCESSABLE_ENTITY",{message:n.B.USER_ALREADY_EXISTS});const A=(0,c.f)(e.context.options,w),O=await e.context.password.hash(m);let R;try{if(R=await e.context.internalAdapter.createUser({email:p.toLowerCase(),name:f,image:h,...A,emailVerified:!1},e),!R)throw new t.APIError("BAD_REQUEST",{message:n.B.FAILED_TO_CREATE_USER})}catch(o){if(u.b&&e.context.logger.error("Failed to create user",o),o instanceof t.APIError)throw o;throw new t.APIError("UNPROCESSABLE_ENTITY",{message:n.B.FAILED_TO_CREATE_USER,details:o})}if(!R)throw new t.APIError("UNPROCESSABLE_ENTITY",{message:n.B.FAILED_TO_CREATE_USER});if(await e.context.internalAdapter.linkAccount({userId:R.id,providerId:"credential",accountId:R.id,password:O},e),e.context.options.emailVerification?.sendOnSignUp||e.context.options.emailAndPassword.requireEmailVerification){const t=await(0,n.e)(e.context.secret,R.email,void 0,e.context.options.emailVerification?.expiresIn),o=`${e.context.baseURL}/verify-email?token=${t}&callbackURL=${l.callbackURL||"/"}`;await(e.context.options.emailVerification?.sendVerificationEmail?.({user:R,url:o,token:t},e.request))}if(!1===e.context.options.emailAndPassword.autoSignIn||e.context.options.emailAndPassword.requireEmailVerification)return e.json({token:null,user:{id:R.id,email:R.email,name:R.name,image:R.image,emailVerified:R.emailVerified,createdAt:R.createdAt,updatedAt:R.updatedAt}});const S=await e.context.internalAdapter.createSession(R.id,e.headers);if(!S)throw new t.APIError("BAD_REQUEST",{message:n.B.FAILED_TO_CREATE_SESSION});return await(0,s.setSessionCookie)(e,{session:S,user:R}),e.json({token:S.token,user:{id:R.id,email:R.email,name:R.name,image:R.image,emailVerified:R.emailVerified,createdAt:R.createdAt,updatedAt:R.updatedAt}})}));function h(e,t,n){const o=1e3*t;return Date.now()-n.lastRequest<o&&n.count>=e}function b(e){return new Response(JSON.stringify({message:"Too many requests. Please try again later."}),{status:429,statusText:"Too Many Requests",headers:{"X-Retry-After":e.toString()}})}function w(e,t){const n=Date.now(),o=1e3*t;return Math.ceil((e+o-n)/1e3)}function y(e,t){const n=e.options.rateLimit?.modelName||"rateLimit",o=e.adapter;return{get:async e=>{const t=(await o.findMany({model:n,where:[{field:"key",value:e}]}))[0];return"bigint"==typeof t?.lastRequest&&(t.lastRequest=Number(t.lastRequest)),t},set:async(t,n,s)=>{try{s?await o.updateMany({model:"rateLimit",where:[{field:"key",value:t}],update:{count:n.count,lastRequest:n.lastRequest}}):await o.create({model:"rateLimit",data:{key:t,count:n.count,lastRequest:n.lastRequest}})}catch(t){e.logger.error("Error setting rate limit",t)}}}}_e.signUpEmail=m;const E=new Map;function P(e){if(e.options.rateLimit?.customStorage)return e.options.rateLimit.customStorage;if("secondary-storage"===e.rateLimit.storage)return{get:async t=>{const n=await(e.options.secondaryStorage?.get(t));return n?JSON.parse(n):void 0},set:async(t,n)=>{await(e.options.secondaryStorage?.set?.(t,JSON.stringify(n)))}};return"memory"===e.rateLimit.storage?{get:async e=>E.get(e),async set(e,t,n){E.set(e,t)}}:y(e,e.rateLimit.modelName)}async function A(e,t){if(!t.rateLimit.enabled)return;const o=new URL(e.url).pathname.replace(t.options.basePath||"/api/auth","");let s=t.rateLimit.window,c=t.rateLimit.max;const u=(0,f.g)(e,t.options);if(!u)return;const l=u+o,p=O().find((e=>e.pathMatcher(o)));p&&(s=p.window,c=p.max);for(const e of t.options.plugins||[])if(e.rateLimit){const t=e.rateLimit.find((e=>e.pathMatcher(o)));if(t){s=t.window,c=t.max;break}}if(t.rateLimit.customRules){const u=Object.keys(t.rateLimit.customRules).find((e=>{if(e.includes("*")){return(0,n.w)(e)(o)}return e===o}));if(u){const n=t.rateLimit.customRules[u],o="function"==typeof n?await n(e):n;o&&(s=o.window,c=o.max)}}const m=P(t),y=await m.get(l),E=Date.now();if(y){const e=E-y.lastRequest;if(h(c,s,y)){return b(w(y.lastRequest,s))}e>1e3*s?await m.set(l,{...y,count:1,lastRequest:E},!0):await m.set(l,{...y,count:y.count+1,lastRequest:E},!0)}else await m.set(l,{key:l,count:1,lastRequest:E})}function O(){return[{pathMatcher:e=>e.startsWith("/sign-in")||e.startsWith("/sign-up")||e.startsWith("/change-password")||e.startsWith("/change-email"),window:10,max:3}]}function R(e,n){const o={};for(const[s,c]of Object.entries(e))o[s]=async e=>{const o=await n;let s={...e,context:{...o,returned:void 0,responseHeaders:void 0,session:null},path:c.path,headers:e?.headers?new Headers(e?.headers):void 0};const{beforeHooks:u,afterHooks:l}=x(o),f=await S(s,u);if("context"in f&&f.context&&"object"==typeof f.context){const{headers:e,...t}=f.context;e&&e.forEach(((e,t)=>{s.headers.set(t,e)})),s=(0,p.default)(t,s)}else if(f)return f;s.asResponse=!1,s.returnHeaders=!0;const m=await c(s).catch((e=>{if(e instanceof t.APIError)return{response:e,headers:e.headers?new Headers(e.headers):null};throw e}));s.context.returned=m.response,s.context.responseHeaders=m.headers;const h=await k(s,l);if(h.response&&(m.response=h.response),m.response instanceof t.APIError&&!e?.asResponse)throw m.response;return e?.asResponse?(0,t.toResponse)(m.response,{headers:m.headers}):e?.returnHeaders?{headers:m.headers,response:m.response}:m.response},o[s].path=c.path,o[s].options=c.options;return o}async function S(e,t){let n={};for(const o of t)if(o.matcher(e)){const t=await o.handler({...e,returnHeaders:!1});if(t&&"object"==typeof t){if("context"in t&&"object"==typeof t.context){const{headers:e,...o}=t.context;e instanceof Headers&&(n.headers?e.forEach(((e,t)=>{n.headers?.set(t,e)})):n.headers=e),n=(0,p.default)(o,n);continue}return t}}return{context:n}}async function k(e,n){for(const o of n)if(o.matcher(e)){const n=await o.handler(e).catch((e=>{if(e instanceof t.APIError)return{response:e,headers:e.headers?new Headers(e.headers):null};throw e}));n.headers&&n.headers.forEach(((t,n)=>{e.context.responseHeaders?"set-cookie"===n.toLowerCase()?e.context.responseHeaders.append(n,t):e.context.responseHeaders.set(n,t):e.context.responseHeaders=new Headers({[n]:t})})),n.response&&(e.context.returned=n.response)}return{response:e.context.returned,headers:e.context.responseHeaders}}function x(e){const t=e.options.plugins||[],n=[],o=[];e.options.hooks?.before&&n.push({matcher:()=>!0,handler:e.options.hooks.before}),e.options.hooks?.after&&o.push({matcher:()=>!0,handler:e.options.hooks.after});const s=t.map((e=>{if(e.hooks?.before)return e.hooks.before})).filter((e=>void 0!==e)).flat(),c=t.map((e=>{if(e.hooks?.after)return e.hooks.after})).filter((e=>void 0!==e)).flat();return s.length&&n.push(...s),c.length&&o.push(...c),{beforeHooks:n,afterHooks:o}}function j(e,t){const o=t.plugins?.reduce(((e,t)=>({...e,...t.endpoints})),{}),s=t.plugins?.map((t=>t.middlewares?.map((t=>{const n=async n=>t.middleware({...n,context:{...e,...n.context}});return n.options=t.middleware.options,{path:t.path,middleware:n}})))).filter((e=>void 0!==e)).flat()||[];return{api:R({...{signInSocial:n.M,callbackOAuth:n.L,getSession:(0,n.b)(),signOut:n.K,signUpEmail:m(),signInEmail:n.J,forgetPassword:n.I,resetPassword:n.G,verifyEmail:n.F,sendVerificationEmail:n.E,changeEmail:n.D,changePassword:n.C,setPassword:n.A,updateUser:(0,n.u)(),deleteUser:n.z,forgetPasswordCallback:n.y,listSessions:(0,n.l)(),revokeSession:n.x,revokeSessions:n.v,revokeOtherSessions:n.t,linkSocialAccount:n.q,listUserAccounts:n.p,deleteUserCallback:n.n,unlinkAccount:n.m,refreshToken:n.r},...o,ok:n.k,error:n.j},e),middlewares:s}}_e.router=(e,o)=>{const{api:s,middlewares:c}=j(e,o),u=new URL(e.baseURL).pathname;return(0,t.createRouter)(s,{routerContext:e,openapi:{disabled:!0},basePath:u,routerMiddleware:[{path:"/**",middleware:n.i},...c],async onRequest(t){const n=e.options.disabledPaths||[],o=new URL(t.url).pathname.replace(u,"");if(n.includes(o))return new Response("Not Found",{status:404});for(const n of e.options.plugins||[])if(n.onRequest){const o=await n.onRequest(t,e);if(o&&"response"in o)return o.response}return A(t,e)},async onResponse(t){for(const n of e.options.plugins||[])if(n.onResponse){const o=await n.onResponse(t,e);if(o)return o.response}return t},onError(n){if(n instanceof t.APIError&&"FOUND"===n.status)return;if(o.onAPIError?.throw)throw n;if(o.onAPIError?.onError)return void o.onAPIError.onError(n,e);const s=o.logger?.level,c="error"===s||"warn"===s||"debug"===s?l.l:void 0;if(!0!==o.logger?.disabled){if(n&&"object"==typeof n&&"message"in n&&"string"==typeof n.message&&(n.message.includes("no column")||n.message.includes("column")||n.message.includes("relation")||n.message.includes("table")||n.message.includes("does not exist")))return void e.logger?.error(n.message);n instanceof t.APIError?("INTERNAL_SERVER_ERROR"===n.status&&e.logger.error(n.status,n),c?.error(n.message)):e.logger?.error(n&&"object"==typeof n&&"name"in n?n.name:"",n)}}})}}),6976,[16,6977,6980,3739,6981,7096,910,7093,7100,7097,6987,908,6988,7073,6982,7074,6983,7075,7078,7080,7082,7090,6985,7086,7091,7092,911,7094,6986,7095,6984,7098,909,6996,7099]);
__d((function(g,r,_i,_a2,_m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.createInternalContext=_e.createEndpoint=_e._statusCode=_e.APIError=void 0,_e.createMiddleware=T,_e.createRouter=void 0,_e.generator=ft,_e.getHTML=_e.getCookieKey=void 0,_e.parseCookies=b,_e.serializeSignedCookie=_e.serializeCookie=void 0,_e.toResponse=c;var e=r(d[0]),t=r(d[1]),a=_e._statusCode={OK:200,CREATED:201,ACCEPTED:202,NO_CONTENT:204,MULTIPLE_CHOICES:300,MOVED_PERMANENTLY:301,FOUND:302,SEE_OTHER:303,NOT_MODIFIED:304,TEMPORARY_REDIRECT:307,BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,PROXY_AUTHENTICATION_REQUIRED:407,REQUEST_TIMEOUT:408,CONFLICT:409,GONE:410,LENGTH_REQUIRED:411,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,URI_TOO_LONG:414,UNSUPPORTED_MEDIA_TYPE:415,RANGE_NOT_SATISFIABLE:416,EXPECTATION_FAILED:417,"I'M_A_TEAPOT":418,MISDIRECTED_REQUEST:421,UNPROCESSABLE_ENTITY:422,LOCKED:423,FAILED_DEPENDENCY:424,TOO_EARLY:425,UPGRADE_REQUIRED:426,PRECONDITION_REQUIRED:428,TOO_MANY_REQUESTS:429,REQUEST_HEADER_FIELDS_TOO_LARGE:431,UNAVAILABLE_FOR_LEGAL_REASONS:451,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,HTTP_VERSION_NOT_SUPPORTED:505,VARIANT_ALSO_NEGOTIATES:506,INSUFFICIENT_STORAGE:507,LOOP_DETECTED:508,NOT_EXTENDED:510,NETWORK_AUTHENTICATION_REQUIRED:511},s=class extends Error{constructor(e="INTERNAL_SERVER_ERROR",t=void 0,s={},n=("number"==typeof e?e:a[e])){super(t?.message),this.status=e,this.body=t,this.headers=s,this.statusCode=n,this.name="APIError",this.status=e,this.headers=s,this.statusCode=n,this.body=t?{code:t?.message?.toUpperCase().replace(/ /g,"_").replace(/[^A-Z0-9_]/g,""),...t}:void 0,this.stack=""}};async function n(e){const t=e.headers.get("content-type")||"";if(e.body){if(t.includes("application/json"))return await e.json();if(t.includes("application/x-www-form-urlencoded")){const t=await e.formData(),a={};return t.forEach(((e,t)=>{a[t]=e.toString()})),a}if(t.includes("multipart/form-data")){const t=await e.formData(),a={};return t.forEach(((e,t)=>{a[t]=e})),a}if(t.includes("text/plain"))return await e.text();if(t.includes("application/octet-stream"))return await e.arrayBuffer();if(t.includes("application/pdf")||t.includes("image/")||t.includes("video/")){return await e.blob()}return t.includes("application/stream")||e.body instanceof ReadableStream?e.body:await e.text()}}function i(e){return e instanceof s||"APIError"===e?.name}function o(e){try{return e.includes("%")?decodeURIComponent(e):e}catch{return e}}function u(e){if(void 0===e)return!1;const t=typeof e;return"string"===t||"number"===t||"boolean"===t||null===t||"object"===t&&(!!Array.isArray(e)||!e.buffer&&(e.constructor&&"Object"===e.constructor.name||"function"==typeof e.toJSON))}function c(e,t){if(e instanceof Response)return t?.headers instanceof Headers&&t.headers.forEach(((t,a)=>{e.headers.set(a,t)})),e;if("json"===e?._flag){const t=e.routerResponse;return t instanceof Response?t:c(e.body,{headers:e.headers,status:e.status})}if(i(e))return c(e.body,{status:e.statusCode,statusText:e.status.toString(),headers:t?.headers||e.headers});let a=e,s=new Headers(t?.headers);return e?"string"==typeof e?(a=e,s.set("Content-Type","text/plain")):e instanceof ArrayBuffer||ArrayBuffer.isView(e)?(a=e,s.set("Content-Type","application/octet-stream")):e instanceof Blob?(a=e,s.set("Content-Type",e.type||"application/octet-stream")):e instanceof FormData?a=e:e instanceof URLSearchParams?(a=e,s.set("Content-Type","application/x-www-form-urlencoded")):e instanceof ReadableStream?(a=e,s.set("Content-Type","application/octet-stream")):u(e)&&(a=JSON.stringify(e),s.set("Content-Type","application/json")):(null===e&&(a=JSON.stringify(null)),s.set("content-type","application/json")),new Response(a,{...t,headers:s})}async function l(e,t={}){let a={body:t.body,query:t.query};if(e.body){const s=await e.body["~standard"].validate(t.body);if(s.issues)return{data:null,error:h(s.issues,"body")};a.body=s.value}if(e.query){const s=await e.query["~standard"].validate(t.query);if(s.issues)return{data:null,error:h(s.issues,"query")};a.query=s.value}return e.requireHeaders&&!t.headers?{data:null,error:{message:"Headers is required"}}:e.requireRequest&&!t.request?{data:null,error:{message:"Request is required"}}:{data:a,error:null}}function h(e,t){const a=[];for(const t of e){const e=t.message;a.push(e)}return{message:`Invalid ${t} parameters`}}_e.APIError=s;var p={name:"HMAC",hash:"SHA-256"},m=async t=>{const a="string"==typeof t?(new TextEncoder).encode(t):t;return await e.subtle.importKey("raw",a,p,!1,["sign","verify"])},f=async(t,a,s)=>{try{const n=atob(t),i=new Uint8Array(n.length);for(let e=0,t=n.length;e<t;e++)i[e]=n.charCodeAt(e);return await e.subtle.verify(p,s,i,(new TextEncoder).encode(a))}catch(e){return!1}},y=async(t,a)=>{const s=await m(a),n=await e.subtle.sign(p.name,s,(new TextEncoder).encode(t));return btoa(String.fromCharCode(...new Uint8Array(n)))},_=async(e,t)=>(e=`${e}.${await y(e,t)}`,e=encodeURIComponent(e)),v=(e,t)=>{let a=e;if(t)if("secure"===t)a="__Secure-"+e;else{if("host"!==t)return;a="__Host-"+e}return a};function b(e){if("string"!=typeof e)throw new TypeError("argument str must be a string");const t=new Map;let a=0;for(;a<e.length;){const s=e.indexOf("=",a);if(-1===s)break;let n=e.indexOf(";",a);if(-1===n)n=e.length;else if(n<s){a=e.lastIndexOf(";",s-1)+1;continue}const i=e.slice(a,s).trim();if(!t.has(i)){let a=e.slice(s+1,n).trim();34===a.codePointAt(0)&&(a=a.slice(1,-1)),t.set(i,o(a))}a=n+1}return t}_e.getCookieKey=v;var x=(e,t,a={})=>{let s;if(s="secure"===a?.prefix?`__Secure-${e}=${t}`:"host"===a?.prefix?`__Host-${e}=${t}`:`${e}=${t}`,e.startsWith("__Secure-")&&!a.secure&&(a.secure=!0),e.startsWith("__Host-")&&(a.secure||(a.secure=!0),"/"!==a.path&&(a.path="/"),a.domain&&(a.domain=void 0)),a&&"number"==typeof a.maxAge&&a.maxAge>=0){if(a.maxAge>3456e4)throw new Error("Cookies Max-Age SHOULD NOT be greater than 400 days (34560000 seconds) in duration.");s+=`; Max-Age=${Math.floor(a.maxAge)}`}if(a.domain&&"host"!==a.prefix&&(s+=`; Domain=${a.domain}`),a.path&&(s+=`; Path=${a.path}`),a.expires){if(a.expires.getTime()-Date.now()>3456e7)throw new Error("Cookies Expires SHOULD NOT be greater than 400 days (34560000 seconds) in the future.");s+=`; Expires=${a.expires.toUTCString()}`}return a.httpOnly&&(s+="; HttpOnly"),a.secure&&(s+="; Secure"),a.sameSite&&(s+=`; SameSite=${a.sameSite.charAt(0).toUpperCase()+a.sameSite.slice(1)}`),a.partitioned&&(a.secure||(a.secure=!0),s+="; Partitioned"),s},k=(e,t,a)=>(t=encodeURIComponent(t),x(e,t,a));_e.serializeCookie=k;var w=async(e,t,a,s)=>(t=await _(t,a),x(e,t,s));_e.serializeSignedCookie=w;var E=async(e,{options:t,path:a})=>{const n=new Headers,{data:i,error:o}=await l(t,e);if(o)throw new s(400,{message:o.message,code:"VALIDATION_ERROR"});const u="headers"in e?e.headers instanceof Headers?e.headers:new Headers(e.headers):"request"in e&&e.request instanceof Request?e.request.headers:null,c=u?.get("cookie"),h=c?b(c):void 0,p={...e,body:i.body,query:i.query,path:e.path||a,context:"context"in e&&e.context?e.context:{},returned:void 0,headers:e?.headers,request:e?.request,params:"params"in e?e.params:void 0,method:e.method,setHeader:(e,t)=>{n.set(e,t)},getHeader:e=>u?u.get(e):null,getCookie:(e,t)=>{const a=v(e,t);return a&&h?.get(a)||null},getSignedCookie:async(e,t,a)=>{const s=v(e,a);if(!s)return null;const n=h?.get(s);if(!n)return null;const i=n.lastIndexOf(".");if(i<1)return null;const o=n.substring(0,i),u=n.substring(i+1);if(44!==u.length||!u.endsWith("="))return null;const c=await m(t);return!!await f(u,o,c)&&o},setCookie:(e,t,a)=>{const s=k(e,t,a);return n.append("set-cookie",s),s},setSignedCookie:async(e,t,a,s)=>{const i=await w(e,t,a,s);return n.append("set-cookie",i),i},redirect:e=>(n.set("location",e),new s("FOUND",void 0,n)),error:(e,t,a)=>new s(e,t,a),json:(t,a)=>e.asResponse?{body:a?.body||t,routerResponse:a,_flag:"json"}:t,responseHeaders:n};for(const e of t.use||[]){const t=await e({...p,returnHeaders:!0,asResponse:!1});t.response&&Object.assign(p.context,t.response),t.headers&&t.headers.forEach(((e,t)=>{p.responseHeaders.set(t,e)}))}return p};function T(e,t){const a=async a=>{const s=a,n="function"==typeof e?e:t,i="function"==typeof e?{}:e,o=await E(s,{options:i,path:"/"});if(!n)throw new Error("handler must be defined");const u=await n(o),c=o.responseHeaders;return s.returnHeaders?{headers:c,response:u}:u};return a.options="function"==typeof e?{}:e,a}_e.createInternalContext=E,T.create=e=>function(t,a){if("function"==typeof t)return T({use:e?.use},t);if(!a)throw new Error("Middleware handler is required");return T({...t,method:"*",use:[...e?.use||[],...t.use||[]]},a)};var O,A,R,C=(e,t,a)=>{const s=async(...s)=>{const n=s[0]||{},o=await E(n,{options:t,path:e}),u=await a(o).catch((async e=>{if(i(e)){const a=t.onAPIError;if(a&&await a(e),n.asResponse)return e}throw e})),l=o.responseHeaders;return n.asResponse?c(u,{headers:l}):n.returnHeaders?{headers:l,response:u}:u};return s.options=t,s.path=e,s};_e.createEndpoint=C,C.create=e=>(t,a,s)=>C(t,{...a,use:[...a?.use||[],...e?.use||[]]},s),(A=O||(O={})).assertEqual=e=>e,A.assertIs=function(e){},A.assertNever=function(e){throw new Error},A.arrayToEnum=e=>{const t={};for(const a of e)t[a]=a;return t},A.getValidEnumValues=e=>{const t=A.objectKeys(e).filter((t=>"number"!=typeof e[e[t]])),a={};for(const s of t)a[s]=e[s];return A.objectValues(a)},A.objectValues=e=>A.objectKeys(e).map((function(t){return e[t]})),A.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.push(a);return t},A.find=(e,t)=>{for(const a of e)if(t(a))return a},A.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e,A.joinValues=function(e,t=" | "){return e.map((e=>"string"==typeof e?`'${e}'`:e)).join(t)},A.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,(R||(R={})).mergeShapes=(e,t)=>({...e,...t});var N=O.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),S=e=>{switch(typeof e){case"undefined":return N.undefined;case"string":return N.string;case"number":return isNaN(e)?N.nan:N.number;case"boolean":return N.boolean;case"function":return N.function;case"bigint":return N.bigint;case"symbol":return N.symbol;case"object":return Array.isArray(e)?N.array:null===e?N.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?N.promise:"undefined"!=typeof Map&&e instanceof Map?N.map:"undefined"!=typeof Set&&e instanceof Set?N.set:"undefined"!=typeof Date&&e instanceof Date?N.date:N.object;default:return N.unknown}},I=O.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Z=class e extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},a={_errors:[]},s=e=>{for(const n of e.issues)if("invalid_union"===n.code)n.unionErrors.map(s);else if("invalid_return_type"===n.code)s(n.returnTypeError);else if("invalid_arguments"===n.code)s(n.argumentsError);else if(0===n.path.length)a._errors.push(t(n));else{let e=a,s=0;for(;s<n.path.length;){const a=n.path[s];s===n.path.length-1?(e[a]=e[a]||{_errors:[]},e[a]._errors.push(t(n))):e[a]=e[a]||{_errors:[]},e=e[a],s++}}};return s(this),a}static assert(t){if(!(t instanceof e))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,O.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},a=[];for(const s of this.issues)s.path.length>0?(t[s.path[0]]=t[s.path[0]]||[],t[s.path[0]].push(e(s))):a.push(e(s));return{formErrors:a,fieldErrors:t}}get formErrors(){return this.flatten()}};Z.create=e=>new Z(e);var j=(e,t)=>{let a;switch(e.code){case I.invalid_type:a=e.received===N.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case I.invalid_literal:a=`Invalid literal value, expected ${JSON.stringify(e.expected,O.jsonStringifyReplacer)}`;break;case I.unrecognized_keys:a=`Unrecognized key(s) in object: ${O.joinValues(e.keys,", ")}`;break;case I.invalid_union:a="Invalid input";break;case I.invalid_union_discriminator:a=`Invalid discriminator value. Expected ${O.joinValues(e.options)}`;break;case I.invalid_enum_value:a=`Invalid enum value. Expected ${O.joinValues(e.options)}, received '${e.received}'`;break;case I.invalid_arguments:a="Invalid function arguments";break;case I.invalid_return_type:a="Invalid function return type";break;case I.invalid_date:a="Invalid date";break;case I.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(a=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(a=`${a} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?a=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?a=`Invalid input: must end with "${e.validation.endsWith}"`:O.assertNever(e.validation):a="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case I.too_small:a="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case I.too_big:a="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case I.custom:a="Invalid input";break;case I.invalid_intersection_types:a="Intersection results could not be merged";break;case I.not_multiple_of:a=`Number must be a multiple of ${e.multipleOf}`;break;case I.not_finite:a="Number must be finite";break;default:a=t.defaultError,O.assertNever(e)}return{message:a}},P=j;function D(){return P}var L=e=>{const{data:t,path:a,errorMaps:s,issueData:n}=e,i=[...a,...n.path||[]],o={...n,path:i};if(void 0!==n.message)return{...n,path:i,message:n.message};let u="";const c=s.filter((e=>!!e)).slice().reverse();for(const e of c)u=e(o,{data:t,defaultError:u}).message;return{...n,path:i,message:u}};function $(e,t){const a=D(),s=L({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,a,a===j?void 0:j].filter((e=>!!e))});e.common.issues.push(s)}var F,M,U,q,z=class e{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const a=[];for(const s of t){if("aborted"===s.status)return V;"dirty"===s.status&&e.dirty(),a.push(s.value)}return{status:e.value,value:a}}static async mergeObjectAsync(t,a){const s=[];for(const e of a){const t=await e.key,a=await e.value;s.push({key:t,value:a})}return e.mergeObjectSync(t,s)}static mergeObjectSync(e,t){const a={};for(const s of t){const{key:t,value:n}=s;if("aborted"===t.status)return V;if("aborted"===n.status)return V;"dirty"===t.status&&e.dirty(),"dirty"===n.status&&e.dirty(),"__proto__"===t.value||void 0===n.value&&!s.alwaysSet||(a[t.value]=n.value)}return{status:e.value,value:a}}},V=Object.freeze({status:"aborted"}),B=e=>({status:"dirty",value:e}),H=e=>({status:"valid",value:e}),K=e=>"aborted"===e.status,W=e=>"dirty"===e.status,Y=e=>"valid"===e.status,G=e=>"undefined"!=typeof Promise&&e instanceof Promise;function J(e,t,a,s){if("a"===a&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===a?s:"a"===a?s.call(e):s?s.value:t.get(e)}function Q(e,t,a,s,n){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?n.call(e,a):n?n.value=a:t.set(e,a),a}(M=F||(F={})).errToObj=e=>"string"==typeof e?{message:e}:e||{},M.toString=e=>"string"==typeof e?e:null==e?void 0:e.message;var X=class{constructor(e,t,a,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=a,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},ee=(e,t)=>{if(Y(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Z(e.common.issues);return this._error=t,this._error}}};function te(e){if(!e)return{};const{errorMap:t,invalid_type_error:a,required_error:s,description:n}=e;if(t&&(a||s))throw new Error("Can't use \"invalid_type_error\" or \"required_error\" in conjunction with custom error map.");if(t)return{errorMap:t,description:n};return{errorMap:(t,n)=>{var i,o;const{message:u}=e;return"invalid_enum_value"===t.code?{message:null!=u?u:n.defaultError}:void 0===n.data?{message:null!==(i=null!=u?u:s)&&void 0!==i?i:n.defaultError}:"invalid_type"!==t.code?{message:n.defaultError}:{message:null!==(o=null!=u?u:a)&&void 0!==o?o:n.defaultError}},description:n}}var ae,se=class{get description(){return this._def.description}_getType(e){return S(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:S(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new z,ctx:{common:e.parent.common,data:e.data,parsedType:S(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(G(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const a=this.safeParse(e,t);if(a.success)return a.data;throw a.error}safeParse(e,t){var a;const s={common:{issues:[],async:null!==(a=null==t?void 0:t.async)&&void 0!==a&&a,contextualErrorMap:null==t?void 0:t.errorMap},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:S(e)},n=this._parseSync({data:e,path:s.path,parent:s});return ee(s,n)}"~validate"(e){var t,a;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:S(e)};if(!this["~standard"].async)try{const t=this._parseSync({data:e,path:[],parent:s});return Y(t)?{value:t.value}:{issues:s.common.issues}}catch(e){(null===(a=null===(t=null==e?void 0:e.message)||void 0===t?void 0:t.toLowerCase())||void 0===a?void 0:a.includes("encountered"))&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then((e=>Y(e)?{value:e.value}:{issues:s.common.issues}))}async parseAsync(e,t){const a=await this.safeParseAsync(e,t);if(a.success)return a.data;throw a.error}async safeParseAsync(e,t){const a={common:{issues:[],contextualErrorMap:null==t?void 0:t.errorMap,async:!0},path:(null==t?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:S(e)},s=this._parse({data:e,path:a.path,parent:a}),n=await(G(s)?s:Promise.resolve(s));return ee(a,n)}refine(e,t){const a=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement(((t,s)=>{const n=e(t),i=()=>s.addIssue({code:I.custom,...a(t)});return"undefined"!=typeof Promise&&n instanceof Promise?n.then((e=>!!e||(i(),!1))):!!n||(i(),!1)}))}refinement(e,t){return this._refinement(((a,s)=>!!e(a)||(s.addIssue("function"==typeof t?t(a,s):t),!1)))}_refinement(e){return new Xe({schema:this,typeName:dt.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return et.create(this,this._def)}nullable(){return tt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return $e.create(this)}promise(){return Qe.create(this,this._def)}or(e){return Ue.create([this,e],this._def)}and(e){return ze.create(this,e,this._def)}transform(e){return new Xe({...te(this._def),schema:this,typeName:dt.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new at({...te(this._def),innerType:this,defaultValue:t,typeName:dt.ZodDefault})}brand(){return new rt({typeName:dt.ZodBranded,type:this,...te(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new st({...te(this._def),innerType:this,catchValue:t,typeName:dt.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return it.create(this,e)}readonly(){return ot.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},ne=/^c[^\s-]{8,}$/i,re=/^[0-9a-z]+$/,ie=/^[0-9A-HJKMNP-TV-Z]{26}$/i,oe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,de=/^[a-z0-9_-]{21}$/i,ue=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,ce=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,le=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,he=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,pe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,me=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,fe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ye=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,ve=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,ge="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",be=new RegExp(`^${ge}$`);function xe(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`),t}function ke(e){let t=`${ge}T${xe(e)}`;const a=[];return a.push(e.local?"Z?":"Z"),e.offset&&a.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${a.join("|")})`,new RegExp(`^${t}$`)}function we(e,t){if(!ue.test(e))return!1;try{const[a]=e.split("."),s=a.replace(/-/g,"+").replace(/_/g,"/").padEnd(a.length+(4-a.length%4)%4,"="),n=JSON.parse(atob(s));return"object"==typeof n&&null!==n&&(!(!n.typ||!n.alg)&&(!t||n.alg===t))}catch(e){return!1}}function Ee(e,t){return!("v4"!==t&&t||!pe.test(e))||!("v6"!==t&&t||!fe.test(e))}var Te=class e extends se{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==N.string){const t=this._getOrReturnCtx(e);return $(t,{code:I.invalid_type,expected:N.string,received:t.parsedType}),V}const t=new z;let a;for(const i of this._def.checks)if("min"===i.kind)e.data.length<i.value&&(a=this._getOrReturnCtx(e,a),$(a,{code:I.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),t.dirty());else if("max"===i.kind)e.data.length>i.value&&(a=this._getOrReturnCtx(e,a),$(a,{code:I.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),t.dirty());else if("length"===i.kind){const s=e.data.length>i.value,n=e.data.length<i.value;(s||n)&&(a=this._getOrReturnCtx(e,a),s?$(a,{code:I.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):n&&$(a,{code:I.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),t.dirty())}else if("email"===i.kind)le.test(e.data)||(a=this._getOrReturnCtx(e,a),$(a,{validation:"email",code:I.invalid_string,message:i.message}),t.dirty());else if("emoji"===i.kind)ae||(ae=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),ae.test(e.data)||(a=this._getOrReturnCtx(e,a),$(a,{validation:"emoji",code:I.invalid_string,message:i.message}),t.dirty());else if("uuid"===i.kind)oe.test(e.data)||(a=this._getOrReturnCtx(e,a),$(a,{validation:"uuid",code:I.invalid_string,message:i.message}),t.dirty());else if("nanoid"===i.kind)de.test(e.data)||(a=this._getOrReturnCtx(e,a),$(a,{validation:"nanoid",code:I.invalid_string,message:i.message}),t.dirty());else if("cuid"===i.kind)ne.test(e.data)||(a=this._getOrReturnCtx(e,a),$(a,{validation:"cuid",code:I.invalid_string,message:i.message}),t.dirty());else if("cuid2"===i.kind)re.test(e.data)||(a=this._getOrReturnCtx(e,a),$(a,{validation:"cuid2",code:I.invalid_string,message:i.message}),t.dirty());else if("ulid"===i.kind)ie.test(e.data)||(a=this._getOrReturnCtx(e,a),$(a,{validation:"ulid",code:I.invalid_string,message:i.message}),t.dirty());else if("url"===i.kind)try{new URL(e.data)}catch(s){a=this._getOrReturnCtx(e,a),$(a,{validation:"url",code:I.invalid_string,message:i.message}),t.dirty()}else if("regex"===i.kind){i.regex.lastIndex=0;i.regex.test(e.data)||(a=this._getOrReturnCtx(e,a),$(a,{validation:"regex",code:I.invalid_string,message:i.message}),t.dirty())}else if("trim"===i.kind)e.data=e.data.trim();else if("includes"===i.kind)e.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(e,a),$(a,{code:I.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),t.dirty());else if("toLowerCase"===i.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===i.kind)e.data=e.data.toUpperCase();else if("startsWith"===i.kind)e.data.startsWith(i.value)||(a=this._getOrReturnCtx(e,a),$(a,{code:I.invalid_string,validation:{startsWith:i.value},message:i.message}),t.dirty());else if("endsWith"===i.kind)e.data.endsWith(i.value)||(a=this._getOrReturnCtx(e,a),$(a,{code:I.invalid_string,validation:{endsWith:i.value},message:i.message}),t.dirty());else if("datetime"===i.kind){ke(i).test(e.data)||(a=this._getOrReturnCtx(e,a),$(a,{code:I.invalid_string,validation:"datetime",message:i.message}),t.dirty())}else if("date"===i.kind){be.test(e.data)||(a=this._getOrReturnCtx(e,a),$(a,{code:I.invalid_string,validation:"date",message:i.message}),t.dirty())}else if("time"===i.kind){new RegExp(`^${xe(i)}$`).test(e.data)||(a=this._getOrReturnCtx(e,a),$(a,{code:I.invalid_string,validation:"time",message:i.message}),t.dirty())}else"duration"===i.kind?ce.test(e.data)||(a=this._getOrReturnCtx(e,a),$(a,{validation:"duration",code:I.invalid_string,message:i.message}),t.dirty()):"ip"===i.kind?(s=e.data,("v4"!==(n=i.version)&&n||!he.test(s))&&("v6"!==n&&n||!me.test(s))&&(a=this._getOrReturnCtx(e,a),$(a,{validation:"ip",code:I.invalid_string,message:i.message}),t.dirty())):"jwt"===i.kind?we(e.data,i.alg)||(a=this._getOrReturnCtx(e,a),$(a,{validation:"jwt",code:I.invalid_string,message:i.message}),t.dirty()):"cidr"===i.kind?Ee(e.data,i.version)||(a=this._getOrReturnCtx(e,a),$(a,{validation:"cidr",code:I.invalid_string,message:i.message}),t.dirty()):"base64"===i.kind?ye.test(e.data)||(a=this._getOrReturnCtx(e,a),$(a,{validation:"base64",code:I.invalid_string,message:i.message}),t.dirty()):"base64url"===i.kind?ve.test(e.data)||(a=this._getOrReturnCtx(e,a),$(a,{validation:"base64url",code:I.invalid_string,message:i.message}),t.dirty()):O.assertNever(i);var s,n;return{status:t.value,value:e.data}}_regex(e,t,a){return this.refinement((t=>e.test(t)),{validation:t,code:I.invalid_string,...F.errToObj(a)})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}email(e){return this._addCheck({kind:"email",...F.errToObj(e)})}url(e){return this._addCheck({kind:"url",...F.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...F.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...F.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...F.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...F.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...F.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...F.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...F.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...F.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...F.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...F.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...F.errToObj(e)})}datetime(e){var t,a;return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,offset:null!==(t=null==e?void 0:e.offset)&&void 0!==t&&t,local:null!==(a=null==e?void 0:e.local)&&void 0!==a&&a,...F.errToObj(null==e?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===(null==e?void 0:e.precision)?null:null==e?void 0:e.precision,...F.errToObj(null==e?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...F.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...F.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:null==t?void 0:t.position,...F.errToObj(null==t?void 0:t.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...F.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...F.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...F.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...F.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...F.errToObj(t)})}nonempty(e){return this.min(1,F.errToObj(e))}trim(){return new e({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new e({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find((e=>"datetime"===e.kind))}get isDate(){return!!this._def.checks.find((e=>"date"===e.kind))}get isTime(){return!!this._def.checks.find((e=>"time"===e.kind))}get isDuration(){return!!this._def.checks.find((e=>"duration"===e.kind))}get isEmail(){return!!this._def.checks.find((e=>"email"===e.kind))}get isURL(){return!!this._def.checks.find((e=>"url"===e.kind))}get isEmoji(){return!!this._def.checks.find((e=>"emoji"===e.kind))}get isUUID(){return!!this._def.checks.find((e=>"uuid"===e.kind))}get isNANOID(){return!!this._def.checks.find((e=>"nanoid"===e.kind))}get isCUID(){return!!this._def.checks.find((e=>"cuid"===e.kind))}get isCUID2(){return!!this._def.checks.find((e=>"cuid2"===e.kind))}get isULID(){return!!this._def.checks.find((e=>"ulid"===e.kind))}get isIP(){return!!this._def.checks.find((e=>"ip"===e.kind))}get isCIDR(){return!!this._def.checks.find((e=>"cidr"===e.kind))}get isBase64(){return!!this._def.checks.find((e=>"base64"===e.kind))}get isBase64url(){return!!this._def.checks.find((e=>"base64url"===e.kind))}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}};function Oe(e,t){const a=(e.toString().split(".")[1]||"").length,s=(t.toString().split(".")[1]||"").length,n=a>s?a:s;return parseInt(e.toFixed(n).replace(".",""))%parseInt(t.toFixed(n).replace(".",""))/Math.pow(10,n)}Te.create=e=>{var t;return new Te({checks:[],typeName:dt.ZodString,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...te(e)})};var Ae=class e extends se{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==N.number){const t=this._getOrReturnCtx(e);return $(t,{code:I.invalid_type,expected:N.number,received:t.parsedType}),V}let t;const a=new z;for(const s of this._def.checks)if("int"===s.kind)O.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),$(t,{code:I.invalid_type,expected:"integer",received:"float",message:s.message}),a.dirty());else if("min"===s.kind){(s.inclusive?e.data<s.value:e.data<=s.value)&&(t=this._getOrReturnCtx(e,t),$(t,{code:I.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),a.dirty())}else if("max"===s.kind){(s.inclusive?e.data>s.value:e.data>=s.value)&&(t=this._getOrReturnCtx(e,t),$(t,{code:I.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),a.dirty())}else"multipleOf"===s.kind?0!==Oe(e.data,s.value)&&(t=this._getOrReturnCtx(e,t),$(t,{code:I.not_multiple_of,multipleOf:s.value,message:s.message}),a.dirty()):"finite"===s.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),$(t,{code:I.not_finite,message:s.message}),a.dirty()):O.assertNever(s);return{status:a.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,F.toString(t))}gt(e,t){return this.setLimit("min",e,!1,F.toString(t))}lte(e,t){return this.setLimit("max",e,!0,F.toString(t))}lt(e,t){return this.setLimit("max",e,!1,F.toString(t))}setLimit(t,a,s,n){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:a,inclusive:s,message:F.toString(n)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}int(e){return this._addCheck({kind:"int",message:F.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:F.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:F.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:F.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:F.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:F.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:F.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:F.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:F.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find((e=>"int"===e.kind||"multipleOf"===e.kind&&O.isInteger(e.value)))}get isFinite(){let e=null,t=null;for(const a of this._def.checks){if("finite"===a.kind||"int"===a.kind||"multipleOf"===a.kind)return!0;"min"===a.kind?(null===t||a.value>t)&&(t=a.value):"max"===a.kind&&(null===e||a.value<e)&&(e=a.value)}return Number.isFinite(t)&&Number.isFinite(e)}};Ae.create=e=>new Ae({checks:[],typeName:dt.ZodNumber,coerce:(null==e?void 0:e.coerce)||!1,...te(e)});var Re=class e extends se{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch(t){return this._getInvalidInput(e)}if(this._getType(e)!==N.bigint)return this._getInvalidInput(e);let t;const a=new z;for(const s of this._def.checks)if("min"===s.kind){(s.inclusive?e.data<s.value:e.data<=s.value)&&(t=this._getOrReturnCtx(e,t),$(t,{code:I.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),a.dirty())}else if("max"===s.kind){(s.inclusive?e.data>s.value:e.data>=s.value)&&(t=this._getOrReturnCtx(e,t),$(t,{code:I.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),a.dirty())}else"multipleOf"===s.kind?e.data%s.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),$(t,{code:I.not_multiple_of,multipleOf:s.value,message:s.message}),a.dirty()):O.assertNever(s);return{status:a.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return $(t,{code:I.invalid_type,expected:N.bigint,received:t.parsedType}),V}gte(e,t){return this.setLimit("min",e,!0,F.toString(t))}gt(e,t){return this.setLimit("min",e,!1,F.toString(t))}lte(e,t){return this.setLimit("max",e,!0,F.toString(t))}lt(e,t){return this.setLimit("max",e,!1,F.toString(t))}setLimit(t,a,s,n){return new e({...this._def,checks:[...this._def.checks,{kind:t,value:a,inclusive:s,message:F.toString(n)}]})}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:F.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:F.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:F.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:F.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:F.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}};Re.create=e=>{var t;return new Re({checks:[],typeName:dt.ZodBigInt,coerce:null!==(t=null==e?void 0:e.coerce)&&void 0!==t&&t,...te(e)})};var Ce=class extends se{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==N.boolean){const t=this._getOrReturnCtx(e);return $(t,{code:I.invalid_type,expected:N.boolean,received:t.parsedType}),V}return H(e.data)}};Ce.create=e=>new Ce({typeName:dt.ZodBoolean,coerce:(null==e?void 0:e.coerce)||!1,...te(e)});var Ne=class e extends se{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==N.date){const t=this._getOrReturnCtx(e);return $(t,{code:I.invalid_type,expected:N.date,received:t.parsedType}),V}if(isNaN(e.data.getTime())){return $(this._getOrReturnCtx(e),{code:I.invalid_date}),V}const t=new z;let a;for(const s of this._def.checks)"min"===s.kind?e.data.getTime()<s.value&&(a=this._getOrReturnCtx(e,a),$(a,{code:I.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),t.dirty()):"max"===s.kind?e.data.getTime()>s.value&&(a=this._getOrReturnCtx(e,a),$(a,{code:I.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),t.dirty()):O.assertNever(s);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(t){return new e({...this._def,checks:[...this._def.checks,t]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:F.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:F.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}};Ne.create=e=>new Ne({checks:[],coerce:(null==e?void 0:e.coerce)||!1,typeName:dt.ZodDate,...te(e)});var Se=class extends se{_parse(e){if(this._getType(e)!==N.symbol){const t=this._getOrReturnCtx(e);return $(t,{code:I.invalid_type,expected:N.symbol,received:t.parsedType}),V}return H(e.data)}};Se.create=e=>new Se({typeName:dt.ZodSymbol,...te(e)});var Ie=class extends se{_parse(e){if(this._getType(e)!==N.undefined){const t=this._getOrReturnCtx(e);return $(t,{code:I.invalid_type,expected:N.undefined,received:t.parsedType}),V}return H(e.data)}};Ie.create=e=>new Ie({typeName:dt.ZodUndefined,...te(e)});var Ze=class extends se{_parse(e){if(this._getType(e)!==N.null){const t=this._getOrReturnCtx(e);return $(t,{code:I.invalid_type,expected:N.null,received:t.parsedType}),V}return H(e.data)}};Ze.create=e=>new Ze({typeName:dt.ZodNull,...te(e)});var je=class extends se{constructor(){super(...arguments),this._any=!0}_parse(e){return H(e.data)}};je.create=e=>new je({typeName:dt.ZodAny,...te(e)});var Pe=class extends se{constructor(){super(...arguments),this._unknown=!0}_parse(e){return H(e.data)}};Pe.create=e=>new Pe({typeName:dt.ZodUnknown,...te(e)});var De=class extends se{_parse(e){const t=this._getOrReturnCtx(e);return $(t,{code:I.invalid_type,expected:N.never,received:t.parsedType}),V}};De.create=e=>new De({typeName:dt.ZodNever,...te(e)});var Le=class extends se{_parse(e){if(this._getType(e)!==N.undefined){const t=this._getOrReturnCtx(e);return $(t,{code:I.invalid_type,expected:N.void,received:t.parsedType}),V}return H(e.data)}};Le.create=e=>new Le({typeName:dt.ZodVoid,...te(e)});var $e=class e extends se{_parse(e){const{ctx:t,status:a}=this._processInputParams(e),s=this._def;if(t.parsedType!==N.array)return $(t,{code:I.invalid_type,expected:N.array,received:t.parsedType}),V;if(null!==s.exactLength){const e=t.data.length>s.exactLength.value,n=t.data.length<s.exactLength.value;(e||n)&&($(t,{code:e?I.too_big:I.too_small,minimum:n?s.exactLength.value:void 0,maximum:e?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),a.dirty())}if(null!==s.minLength&&t.data.length<s.minLength.value&&($(t,{code:I.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),a.dirty()),null!==s.maxLength&&t.data.length>s.maxLength.value&&($(t,{code:I.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),a.dirty()),t.common.async)return Promise.all([...t.data].map(((e,a)=>s.type._parseAsync(new X(t,e,t.path,a))))).then((e=>z.mergeArray(a,e)));const n=[...t.data].map(((e,a)=>s.type._parseSync(new X(t,e,t.path,a))));return z.mergeArray(a,n)}get element(){return this._def.type}min(t,a){return new e({...this._def,minLength:{value:t,message:F.toString(a)}})}max(t,a){return new e({...this._def,maxLength:{value:t,message:F.toString(a)}})}length(t,a){return new e({...this._def,exactLength:{value:t,message:F.toString(a)}})}nonempty(e){return this.min(1,e)}};function Fe(e){if(e instanceof Me){const t={};for(const a in e.shape){const s=e.shape[a];t[a]=et.create(Fe(s))}return new Me({...e._def,shape:()=>t})}return e instanceof $e?new $e({...e._def,type:Fe(e.element)}):e instanceof et?et.create(Fe(e.unwrap())):e instanceof tt?tt.create(Fe(e.unwrap())):e instanceof Ve?Ve.create(e.items.map((e=>Fe(e)))):e}$e.create=(e,t)=>new $e({type:e,minLength:null,maxLength:null,exactLength:null,typeName:dt.ZodArray,...te(t)});var Me=class e extends se{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=O.objectKeys(e);return this._cached={shape:e,keys:t}}_parse(e){if(this._getType(e)!==N.object){const t=this._getOrReturnCtx(e);return $(t,{code:I.invalid_type,expected:N.object,received:t.parsedType}),V}const{status:t,ctx:a}=this._processInputParams(e),{shape:s,keys:n}=this._getCached(),i=[];if(!(this._def.catchall instanceof De&&"strip"===this._def.unknownKeys))for(const e in a.data)n.includes(e)||i.push(e);const o=[];for(const e of n){const t=s[e],n=a.data[e];o.push({key:{status:"valid",value:e},value:t._parse(new X(a,n,a.path,e)),alwaysSet:e in a.data})}if(this._def.catchall instanceof De){const e=this._def.unknownKeys;if("passthrough"===e)for(const e of i)o.push({key:{status:"valid",value:e},value:{status:"valid",value:a.data[e]}});else if("strict"===e)i.length>0&&($(a,{code:I.unrecognized_keys,keys:i}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of i){const s=a.data[t];o.push({key:{status:"valid",value:t},value:e._parse(new X(a,s,a.path,t)),alwaysSet:t in a.data})}}return a.common.async?Promise.resolve().then((async()=>{const e=[];for(const t of o){const a=await t.key,s=await t.value;e.push({key:a,value:s,alwaysSet:t.alwaysSet})}return e})).then((e=>z.mergeObjectSync(t,e))):z.mergeObjectSync(t,o)}get shape(){return this._def.shape()}strict(t){return F.errToObj,new e({...this._def,unknownKeys:"strict",...void 0!==t?{errorMap:(e,a)=>{var s,n,i,o;const u=null!==(i=null===(n=(s=this._def).errorMap)||void 0===n?void 0:n.call(s,e,a).message)&&void 0!==i?i:a.defaultError;return"unrecognized_keys"===e.code?{message:null!==(o=F.errToObj(t).message)&&void 0!==o?o:u}:{message:u}}}:{}})}strip(){return new e({...this._def,unknownKeys:"strip"})}passthrough(){return new e({...this._def,unknownKeys:"passthrough"})}extend(t){return new e({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new e({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:dt.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(t){return new e({...this._def,catchall:t})}pick(t){const a={};return O.objectKeys(t).forEach((e=>{t[e]&&this.shape[e]&&(a[e]=this.shape[e])})),new e({...this._def,shape:()=>a})}omit(t){const a={};return O.objectKeys(this.shape).forEach((e=>{t[e]||(a[e]=this.shape[e])})),new e({...this._def,shape:()=>a})}deepPartial(){return Fe(this)}partial(t){const a={};return O.objectKeys(this.shape).forEach((e=>{const s=this.shape[e];t&&!t[e]?a[e]=s:a[e]=s.optional()})),new e({...this._def,shape:()=>a})}required(t){const a={};return O.objectKeys(this.shape).forEach((e=>{if(t&&!t[e])a[e]=this.shape[e];else{let t=this.shape[e];for(;t instanceof et;)t=t._def.innerType;a[e]=t}})),new e({...this._def,shape:()=>a})}keyof(){return Ye(O.objectKeys(this.shape))}};Me.create=(e,t)=>new Me({shape:()=>e,unknownKeys:"strip",catchall:De.create(),typeName:dt.ZodObject,...te(t)}),Me.strictCreate=(e,t)=>new Me({shape:()=>e,unknownKeys:"strict",catchall:De.create(),typeName:dt.ZodObject,...te(t)}),Me.lazycreate=(e,t)=>new Me({shape:e,unknownKeys:"strip",catchall:De.create(),typeName:dt.ZodObject,...te(t)});var Ue=class extends se{_parse(e){const{ctx:t}=this._processInputParams(e),a=this._def.options;if(t.common.async)return Promise.all(a.map((async e=>{const a={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:a}),ctx:a}}))).then((function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const a of e)if("dirty"===a.result.status)return t.common.issues.push(...a.ctx.common.issues),a.result;const a=e.map((e=>new Z(e.ctx.common.issues)));return $(t,{code:I.invalid_union,unionErrors:a}),V}));{let e;const s=[];for(const n of a){const a={...t,common:{...t.common,issues:[]},parent:null},i=n._parseSync({data:t.data,path:t.path,parent:a});if("valid"===i.status)return i;"dirty"!==i.status||e||(e={result:i,ctx:a}),a.common.issues.length&&s.push(a.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const n=s.map((e=>new Z(e)));return $(t,{code:I.invalid_union,unionErrors:n}),V}}get options(){return this._def.options}};Ue.create=(e,t)=>new Ue({options:e,typeName:dt.ZodUnion,...te(t)});function qe(e,t){const a=S(e),s=S(t);if(e===t)return{valid:!0,data:e};if(a===N.object&&s===N.object){const a=O.objectKeys(t),s=O.objectKeys(e).filter((e=>-1!==a.indexOf(e))),n={...e,...t};for(const a of s){const s=qe(e[a],t[a]);if(!s.valid)return{valid:!1};n[a]=s.data}return{valid:!0,data:n}}if(a===N.array&&s===N.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let s=0;s<e.length;s++){const n=qe(e[s],t[s]);if(!n.valid)return{valid:!1};a.push(n.data)}return{valid:!0,data:a}}return a===N.date&&s===N.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}var ze=class extends se{_parse(e){const{status:t,ctx:a}=this._processInputParams(e),s=(e,s)=>{if(K(e)||K(s))return V;const n=qe(e.value,s.value);return n.valid?((W(e)||W(s))&&t.dirty(),{status:t.value,value:n.data}):($(a,{code:I.invalid_intersection_types}),V)};return a.common.async?Promise.all([this._def.left._parseAsync({data:a.data,path:a.path,parent:a}),this._def.right._parseAsync({data:a.data,path:a.path,parent:a})]).then((([e,t])=>s(e,t))):s(this._def.left._parseSync({data:a.data,path:a.path,parent:a}),this._def.right._parseSync({data:a.data,path:a.path,parent:a}))}};ze.create=(e,t,a)=>new ze({left:e,right:t,typeName:dt.ZodIntersection,...te(a)});var Ve=class e extends se{_parse(e){const{status:t,ctx:a}=this._processInputParams(e);if(a.parsedType!==N.array)return $(a,{code:I.invalid_type,expected:N.array,received:a.parsedType}),V;if(a.data.length<this._def.items.length)return $(a,{code:I.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),V;!this._def.rest&&a.data.length>this._def.items.length&&($(a,{code:I.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const s=[...a.data].map(((e,t)=>{const s=this._def.items[t]||this._def.rest;return s?s._parse(new X(a,e,a.path,t)):null})).filter((e=>!!e));return a.common.async?Promise.all(s).then((e=>z.mergeArray(t,e))):z.mergeArray(t,s)}get items(){return this._def.items}rest(t){return new e({...this._def,rest:t})}};Ve.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Ve({items:e,typeName:dt.ZodTuple,rest:null,...te(t)})};var Be=class extends se{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:a}=this._processInputParams(e);if(a.parsedType!==N.map)return $(a,{code:I.invalid_type,expected:N.map,received:a.parsedType}),V;const s=this._def.keyType,n=this._def.valueType,i=[...a.data.entries()].map((([e,t],i)=>({key:s._parse(new X(a,e,a.path,[i,"key"])),value:n._parse(new X(a,t,a.path,[i,"value"]))})));if(a.common.async){const e=new Map;return Promise.resolve().then((async()=>{for(const a of i){const s=await a.key,n=await a.value;if("aborted"===s.status||"aborted"===n.status)return V;"dirty"!==s.status&&"dirty"!==n.status||t.dirty(),e.set(s.value,n.value)}return{status:t.value,value:e}}))}{const e=new Map;for(const a of i){const s=a.key,n=a.value;if("aborted"===s.status||"aborted"===n.status)return V;"dirty"!==s.status&&"dirty"!==n.status||t.dirty(),e.set(s.value,n.value)}return{status:t.value,value:e}}}};Be.create=(e,t,a)=>new Be({valueType:t,keyType:e,typeName:dt.ZodMap,...te(a)});var He=class e extends se{_parse(e){const{status:t,ctx:a}=this._processInputParams(e);if(a.parsedType!==N.set)return $(a,{code:I.invalid_type,expected:N.set,received:a.parsedType}),V;const s=this._def;null!==s.minSize&&a.data.size<s.minSize.value&&($(a,{code:I.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),null!==s.maxSize&&a.data.size>s.maxSize.value&&($(a,{code:I.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const n=this._def.valueType;function i(e){const a=new Set;for(const s of e){if("aborted"===s.status)return V;"dirty"===s.status&&t.dirty(),a.add(s.value)}return{status:t.value,value:a}}const o=[...a.data.values()].map(((e,t)=>n._parse(new X(a,e,a.path,t))));return a.common.async?Promise.all(o).then((e=>i(e))):i(o)}min(t,a){return new e({...this._def,minSize:{value:t,message:F.toString(a)}})}max(t,a){return new e({...this._def,maxSize:{value:t,message:F.toString(a)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}};He.create=(e,t)=>new He({valueType:e,minSize:null,maxSize:null,typeName:dt.ZodSet,...te(t)});var Ke=class extends se{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}};Ke.create=(e,t)=>new Ke({getter:e,typeName:dt.ZodLazy,...te(t)});var We=class extends se{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return $(t,{received:t.data,code:I.invalid_literal,expected:this._def.value}),V}return{status:"valid",value:e.data}}get value(){return this._def.value}};function Ye(e,t){return new Ge({values:e,typeName:dt.ZodEnum,...te(t)})}We.create=(e,t)=>new We({value:e,typeName:dt.ZodLiteral,...te(t)});var Ge=class e extends se{constructor(){super(...arguments),U.set(this,void 0)}_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),a=this._def.values;return $(t,{expected:O.joinValues(a),received:t.parsedType,code:I.invalid_type}),V}if(J(this,U,"f")||Q(this,U,new Set(this._def.values),"f"),!J(this,U,"f").has(e.data)){const t=this._getOrReturnCtx(e),a=this._def.values;return $(t,{received:t.data,code:I.invalid_enum_value,options:a}),V}return H(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(t,a=this._def){return e.create(t,{...this._def,...a})}exclude(t,a=this._def){return e.create(this.options.filter((e=>!t.includes(e))),{...this._def,...a})}};U=new WeakMap,Ge.create=Ye;var Je=class extends se{constructor(){super(...arguments),q.set(this,void 0)}_parse(e){const t=O.getValidEnumValues(this._def.values),a=this._getOrReturnCtx(e);if(a.parsedType!==N.string&&a.parsedType!==N.number){const e=O.objectValues(t);return $(a,{expected:O.joinValues(e),received:a.parsedType,code:I.invalid_type}),V}if(J(this,q,"f")||Q(this,q,new Set(O.getValidEnumValues(this._def.values)),"f"),!J(this,q,"f").has(e.data)){const e=O.objectValues(t);return $(a,{received:a.data,code:I.invalid_enum_value,options:e}),V}return H(e.data)}get enum(){return this._def.values}};q=new WeakMap,Je.create=(e,t)=>new Je({values:e,typeName:dt.ZodNativeEnum,...te(t)});var Qe=class extends se{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==N.promise&&!1===t.common.async)return $(t,{code:I.invalid_type,expected:N.promise,received:t.parsedType}),V;const a=t.parsedType===N.promise?t.data:Promise.resolve(t.data);return H(a.then((e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap}))))}};Qe.create=(e,t)=>new Qe({type:e,typeName:dt.ZodPromise,...te(t)});var Xe=class extends se{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===dt.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:a}=this._processInputParams(e),s=this._def.effect||null,n={addIssue:e=>{$(a,e),e.fatal?t.abort():t.dirty()},get path(){return a.path}};if(n.addIssue=n.addIssue.bind(n),"preprocess"===s.type){const e=s.transform(a.data,n);if(a.common.async)return Promise.resolve(e).then((async e=>{if("aborted"===t.value)return V;const s=await this._def.schema._parseAsync({data:e,path:a.path,parent:a});return"aborted"===s.status?V:"dirty"===s.status||"dirty"===t.value?B(s.value):s}));{if("aborted"===t.value)return V;const s=this._def.schema._parseSync({data:e,path:a.path,parent:a});return"aborted"===s.status?V:"dirty"===s.status||"dirty"===t.value?B(s.value):s}}if("refinement"===s.type){const e=e=>{const t=s.refinement(e,n);if(a.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===a.common.async){const s=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});return"aborted"===s.status?V:("dirty"===s.status&&t.dirty(),e(s.value),{status:t.value,value:s.value})}return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then((a=>"aborted"===a.status?V:("dirty"===a.status&&t.dirty(),e(a.value).then((()=>({status:t.value,value:a.value}))))))}if("transform"===s.type){if(!1===a.common.async){const e=this._def.schema._parseSync({data:a.data,path:a.path,parent:a});if(!Y(e))return e;const i=s.transform(e.value,n);if(i instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:i}}return this._def.schema._parseAsync({data:a.data,path:a.path,parent:a}).then((e=>Y(e)?Promise.resolve(s.transform(e.value,n)).then((e=>({status:t.value,value:e}))):e))}O.assertNever(s)}};Xe.create=(e,t,a)=>new Xe({schema:e,typeName:dt.ZodEffects,effect:t,...te(a)}),Xe.createWithPreprocess=(e,t,a)=>new Xe({schema:t,effect:{type:"preprocess",transform:e},typeName:dt.ZodEffects,...te(a)});var et=class extends se{_parse(e){return this._getType(e)===N.undefined?H(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};et.create=(e,t)=>new et({innerType:e,typeName:dt.ZodOptional,...te(t)});var tt=class extends se{_parse(e){return this._getType(e)===N.null?H(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};tt.create=(e,t)=>new tt({innerType:e,typeName:dt.ZodNullable,...te(t)});var at=class extends se{_parse(e){const{ctx:t}=this._processInputParams(e);let a=t.data;return t.parsedType===N.undefined&&(a=this._def.defaultValue()),this._def.innerType._parse({data:a,path:t.path,parent:t})}removeDefault(){return this._def.innerType}};at.create=(e,t)=>new at({innerType:e,typeName:dt.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...te(t)});var st=class extends se{_parse(e){const{ctx:t}=this._processInputParams(e),a={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:a.data,path:a.path,parent:{...a}});return G(s)?s.then((e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new Z(a.common.issues)},input:a.data})}))):{status:"valid",value:"valid"===s.status?s.value:this._def.catchValue({get error(){return new Z(a.common.issues)},input:a.data})}}removeCatch(){return this._def.innerType}};st.create=(e,t)=>new st({innerType:e,typeName:dt.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...te(t)});var nt=class extends se{_parse(e){if(this._getType(e)!==N.nan){const t=this._getOrReturnCtx(e);return $(t,{code:I.invalid_type,expected:N.nan,received:t.parsedType}),V}return{status:"valid",value:e.data}}};nt.create=e=>new nt({typeName:dt.ZodNaN,...te(e)});Symbol("zod_brand");var rt=class extends se{_parse(e){const{ctx:t}=this._processInputParams(e),a=t.data;return this._def.type._parse({data:a,path:t.path,parent:t})}unwrap(){return this._def.type}},it=class e extends se{_parse(e){const{status:t,ctx:a}=this._processInputParams(e);if(a.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:a.data,path:a.path,parent:a});return"aborted"===e.status?V:"dirty"===e.status?(t.dirty(),B(e.value)):this._def.out._parseAsync({data:e.value,path:a.path,parent:a})})()}{const e=this._def.in._parseSync({data:a.data,path:a.path,parent:a});return"aborted"===e.status?V:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:a.path,parent:a})}}static create(t,a){return new e({in:t,out:a,typeName:dt.ZodPipeline})}},ot=class extends se{_parse(e){const t=this._def.innerType._parse(e),a=e=>(Y(e)&&(e.value=Object.freeze(e.value)),e);return G(t)?t.then((e=>a(e))):a(t)}unwrap(){return this._def.innerType}};ot.create=(e,t)=>new ot({innerType:e,typeName:dt.ZodReadonly,...te(t)});var dt,ut;Me.lazycreate;(ut=dt||(dt={})).ZodString="ZodString",ut.ZodNumber="ZodNumber",ut.ZodNaN="ZodNaN",ut.ZodBigInt="ZodBigInt",ut.ZodBoolean="ZodBoolean",ut.ZodDate="ZodDate",ut.ZodSymbol="ZodSymbol",ut.ZodUndefined="ZodUndefined",ut.ZodNull="ZodNull",ut.ZodAny="ZodAny",ut.ZodUnknown="ZodUnknown",ut.ZodNever="ZodNever",ut.ZodVoid="ZodVoid",ut.ZodArray="ZodArray",ut.ZodObject="ZodObject",ut.ZodUnion="ZodUnion",ut.ZodDiscriminatedUnion="ZodDiscriminatedUnion",ut.ZodIntersection="ZodIntersection",ut.ZodTuple="ZodTuple",ut.ZodRecord="ZodRecord",ut.ZodMap="ZodMap",ut.ZodSet="ZodSet",ut.ZodFunction="ZodFunction",ut.ZodLazy="ZodLazy",ut.ZodLiteral="ZodLiteral",ut.ZodEnum="ZodEnum",ut.ZodEffects="ZodEffects",ut.ZodNativeEnum="ZodNativeEnum",ut.ZodOptional="ZodOptional",ut.ZodNullable="ZodNullable",ut.ZodDefault="ZodDefault",ut.ZodCatch="ZodCatch",ut.ZodPromise="ZodPromise",ut.ZodBranded="ZodBranded",ut.ZodPipeline="ZodPipeline",ut.ZodReadonly="ZodReadonly";Te.create,Ae.create,nt.create,Re.create,Ce.create,Ne.create,Se.create,Ie.create,Ze.create,je.create,Pe.create,De.create,Le.create,$e.create,Me.create,Me.strictCreate,Ue.create,ze.create,Ve.create,Be.create,He.create,Ke.create,We.create,Ge.create,Je.create,Qe.create,Xe.create,et.create,tt.create,Xe.createWithPreprocess,it.create;var ct={};function lt(e){switch(e.constructor.name){case"ZodString":default:return"string";case"ZodNumber":return"number";case"ZodBoolean":return"boolean";case"ZodObject":return"object";case"ZodArray":return"array"}}function ht(e){const t=[];return e.metadata?.openapi?.parameters?(t.push(...e.metadata.openapi.parameters),t):(e.query instanceof Me&&Object.entries(e.query.shape).forEach((([e,a])=>{a instanceof se&&t.push({name:e,in:"query",schema:{type:lt(a),..."minLength"in a&&a.minLength?{minLength:a.minLength}:{},description:a.description}})})),t)}function pt(e){if(e.metadata?.openapi?.requestBody)return e.metadata.openapi.requestBody;if(e.body&&(e.body instanceof Me||e.body instanceof et)){const t=e.body.shape;if(!t)return;const a={},s=[];return Object.entries(t).forEach((([e,t])=>{t instanceof se&&(a[e]={type:lt(t),description:t.description},t instanceof et||s.push(e))})),{required:!(e.body instanceof et)&&!!e.body,content:{"application/json":{schema:{type:"object",properties:a,required:s}}}}}}function mt(e){return{400:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Bad Request. Usually due to missing parameters, or invalid parameters."},401:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Unauthorized. Due to missing or invalid authentication."},403:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Forbidden. You do not have permission to access this resource or to perform this action."},404:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Not Found. The requested resource was not found."},429:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Too Many Requests. You have exceeded the rate limit. Try again later."},500:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Internal Server Error. This is a problem with the server that you cannot fix."},...e}}async function ft(e,t){Object.entries(e).forEach((([e,t])=>{const a=t.options;if(!a.metadata?.SERVER_ONLY&&("GET"===a.method&&(ct[t.path]={get:{tags:["Default",...a.metadata?.openapi?.tags||[]],description:a.metadata?.openapi?.description,operationId:a.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:ht(a),responses:mt(a.metadata?.openapi?.responses)}}),"POST"===a.method)){const e=pt(a);ct[t.path]={post:{tags:["Default",...a.metadata?.openapi?.tags||[]],description:a.metadata?.openapi?.description,operationId:a.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:ht(a),...e?{requestBody:e}:{requestBody:{content:{"application/json":{schema:{type:"object",properties:{}}}}}},responses:mt(a.metadata?.openapi?.responses)}}}}));return{openapi:"3.1.1",info:{title:"Better Auth",description:"API Reference for your Better Auth Instance",version:"1.1.0"},components:{schemas:{}},security:[{apiKeyCookie:[]}],servers:[{url:t?.url}],tags:[{name:"Default",description:"Default endpoints that are included with Better Auth by default. These endpoints are not part of any plugin."}],paths:ct}}var yt=(e,t)=>`<!doctype html>\n<html>\n  <head>\n    <title>Scalar API Reference</title>\n    <meta charset="utf-8" />\n    <meta\n      name="viewport"\n      content="width=device-width, initial-scale=1" />\n  </head>\n  <body>\n    <script\n      id="api-reference"\n      type="application/json">\n    ${JSON.stringify(e)}\n    <\/script>\n\t <script>\n      var configuration = {\n\t  \tfavicon: ${t?.logo?`data:image/svg+xml;utf8,${encodeURIComponent(t.logo)}`:void 0} ,\n\t   \ttheme: ${t?.theme||"saturn"},\n        metaData: {\n\t\t\ttitle: ${t?.title||"Open API Reference"},\n\t\t\tdescription: ${t?.description||"Better Call Open API"},\n\t\t}\n      }\n      document.getElementById('api-reference').dataset.configuration =\n        JSON.stringify(configuration)\n    <\/script>\n\t  <script src="https://cdn.jsdelivr.net/npm/@scalar/api-reference"><\/script>\n  </body>\n</html>`;_e.getHTML=yt;_e.createRouter=(e,a)=>{if(!a?.openapi?.disabled){const t={path:"/api/reference",...a?.openapi};e.openapi=C(t.path,{method:"GET"},(async a=>{const s=await ft(e);return new Response(yt(s,t.scalar),{headers:{"Content-Type":"text/html"}})}))}const s=(0,t.createRouter)(),o=(0,t.createRouter)();for(const a of Object.values(e)){if(!a.options)continue;if(a.options?.metadata?.SERVER_ONLY)continue;const e=Array.isArray(a.options?.method)?a.options.method:[a.options?.method];for(const n of e)(0,t.addRoute)(s,n,a.path,a)}if(a?.routerMiddleware?.length)for(const{path:e,middleware:s}of a.routerMiddleware)(0,t.addRoute)(o,"*",e,s);const u=async e=>{const u=new URL(e.url),l=a?.basePath?u.pathname.split(a.basePath)[1]:u.pathname;if(!l?.length)return a?.onError?.(new Error("NOT_FOUND")),new Response(null,{status:404,statusText:"Not Found"});const h=(0,t.findRoute)(s,e.method,l);if(!h?.data)return new Response(null,{status:404,statusText:"Not Found"});const p=h.data,m={path:l,method:e.method,headers:e.headers,params:h.params?JSON.parse(JSON.stringify(h.params)):{},request:e,body:await n(p.options.cloneRequest?e.clone():e),query:Object.fromEntries(u.searchParams),_flag:"router",asResponse:!0,context:a?.routerContext};try{const e=(0,t.findAllRoutes)(o,"*",l);if(e?.length)for(const{data:t,params:a}of e){const e=await t({...m,params:a,asResponse:!1});if(e instanceof Response)return e}return await p(m)}catch(e){return i(e)?c(e):(console.error("# SERVER_ERROR: ",e),new Response(null,{status:500,statusText:"Internal Server Error"}))}};return{handler:async e=>{const t=await(a?.onRequest?.(e));if(t instanceof Response)return t;const s=t instanceof Request?t:e,n=await u(s),i=await(a?.onResponse?.(n));return i instanceof Response?i:n},endpoints:e}}}),6977,[6978,6979]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.subtle=e.randomUUID=e.getRandomValues=e.default=void 0;var o=t(r(d[1]));const u=e.subtle=o.default.webcrypto?.subtle||{},l=()=>o.default.randomUUID();e.randomUUID=l;const n=t=>o.default.webcrypto.getRandomValues(t);e.getRandomValues=n;e.default={randomUUID:l,getRandomValues:n,subtle:u}}),6978,[16,468]);
__d((function(g,r,_i,a,_m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.addRoute=function(s,i="",c,m){const u=o(c);let l=s.root,h=0;const f=[];for(let o=0;o<u.length;o++){const s=u[o];if(s.startsWith("**")){l.wildcard||(l.wildcard={key:"**"}),l=l.wildcard,f.push([-o,s.split(":")[1]||"_",2===s.length]);break}if("*"===s||s.includes(":")){l.param||(l.param={key:"*"}),l=l.param;const t="*"===s;f.push([o,t?"_"+h++:n(s),t]);continue}const i=l.static?.[s];if(i)l=i;else{const o={key:s};l.static||(l.static=new t),l.static[s]=o,l=o}}const p=f.length>0;l.methods||(l.methods=new t);l.methods[i]||(l.methods[i]=[]);l.methods[i].push({data:m||null,paramsMap:p?f:void 0}),p||(s.static[c]=l)},e.createRouter=function(){return{root:{key:""},static:new t}},e.findAllRoutes=function(t,n="",i,c){"/"===i[i.length-1]&&(i=i.slice(0,-1));const m=o(i),l=u(t,t.root,n,m,0);if(!1===c?.params)return l;return l.map((t=>({data:t.data,params:t.paramsMap?s(m,t.paramsMap):void 0})))},e.findRoute=function(t,n="",c,m){"/"===c[c.length-1]&&(c=c.slice(0,-1));const u=t.static[c];if(u&&u.methods){const t=u.methods[n]||u.methods[""];if(void 0!==t)return t[0]}const l=o(c),h=i(t,t.root,n,l,0)?.[0];if(void 0===h)return;if(!1===m?.params)return h;return{data:h.data,params:h.paramsMap?s(l,h.paramsMap):void 0}},e.removeRoute=function(t,s,n){const i=o(n);return c(t.root,s||"",i,0)};const t=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function o(t){return t.split("/").filter(Boolean)}function s(o,s){const n=new t;for(const[t,i]of s){const s=t<0?o.slice(-1*t).join("/"):o[t];if("string"==typeof i)n[i]=s;else{const t=s.match(i);if(t)for(const o in t.groups)n[o]=t.groups[o]}}return n}function n(t){if(!t.includes(":",1))return t.slice(1);const o=t.replace(/:(\w+)/g,((t,o)=>`(?<${o}>\\w+)`));return new RegExp(`^${o}$`)}function i(t,o,s,n,c){if(c===n.length){if(o.methods){const t=o.methods[s]||o.methods[""];if(t)return t}if(o.param&&o.param.methods){const t=o.param.methods[s]||o.param.methods[""];if(t){const o=t[0].paramsMap;if(o?.[o?.length-1]?.[2])return t}}if(o.wildcard&&o.wildcard.methods){const t=o.wildcard.methods[s]||o.wildcard.methods[""];if(t){const o=t[0].paramsMap;if(o?.[o?.length-1]?.[2])return t}}return}const m=n[c];if(o.static){const u=o.static[m];if(u){const o=i(t,u,s,n,c+1);if(o)return o}}if(o.param){const m=i(t,o.param,s,n,c+1);if(m)return m}if(o.wildcard&&o.wildcard.methods)return o.wildcard.methods[s]||o.wildcard.methods[""]}function c(t,o,s,n){if(n===s.length)return void(t.methods&&o in t.methods&&(delete t.methods[o],0===Object.keys(t.methods).length&&(t.methods=void 0)));const i=s[n];if("*"===i)return void(t.param&&(c(t.param,o,s,n+1),m(t.param)&&(t.param=void 0)));if("**"===i)return void(t.wildcard&&(c(t.wildcard,o,s,n+1),m(t.wildcard)&&(t.wildcard=void 0)));const u=t.static?.[i];u&&(c(u,o,s,n+1),m(u)&&(delete t.static[i],0===Object.keys(t.static).length&&(t.static=void 0)))}function m(t){return void 0===t.methods&&void 0===t.static&&void 0===t.param&&void 0===t.wildcard}function u(t,o,s,n,i,c=[]){const m=n[i];if(o.wildcard&&o.wildcard.methods){const t=o.wildcard.methods[s]||o.wildcard.methods[""];t&&c.push(...t)}if(o.param&&(u(t,o.param,s,n,i+1,c),i===n.length&&o.param.methods)){const t=o.param.methods[s]||o.param.methods[""];t&&c.push(...t)}const l=o.static?.[m];if(l&&u(t,l,s,n,i+1,c),i===n.length&&o.methods){const t=o.methods[s]||o.methods[""];t&&c.push(...t)}return c}}),6979,[]);
__d((function(g,r,_i,_a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.c=_e.b=_e.a=_e.O=_e.N=_e.M=_e.L=_e.K=_e.J=_e.I=_e.H=_e.G=_e.F=_e.E=_e.D=_e.C=_e.B=_e.A=void 0,_e.d=C,_e.e=q,_e.g=_e.f=void 0,_e.h=z,_e.v=_e.u=_e.t=_e.s=_e.r=_e.q=_e.p=_e.o=_e.n=_e.m=_e.l=_e.k=_e.j=_e.i=void 0,_e.w=O,_e.z=_e.y=_e.x=void 0;var e=r(d[0]),t=r(d[1]),o=r(d[2]),s=r(d[3]);r(d[4]);var i=r(d[5]),n=r(d[6]),a=r(d[7]),c=r(d[8]),l=r(d[9]);r(d[10]),r(d[11]),r(d[12]),r(d[13]);var p=r(d[14]),u=r(d[15]);r(d[16]),r(d[17]),r(d[18]),r(d[19]);var f=r(d[20]),h=r(d[21]),w=r(d[22]),A=r(d[23]);r(d[24]),r(d[25]);var E=r(d[26]),y=r(d[27]),b=r(d[28]),k=r(d[29]);const I=_e.O=(0,o.createMiddleware)((async()=>({}))),T=_e.c=o.createMiddleware.create({use:[I,(0,o.createMiddleware)((async()=>({})))]}),x=_e.a=o.createEndpoint.create({use:[I]});function R(e){return"-"===e||"^"===e||"$"===e||"+"===e||"."===e||"("===e||")"===e||"|"===e||"["===e||"]"===e||"{"===e||"}"===e||"*"===e||"?"===e||"\\"===e?`\\${e}`:e}function U(e){let t="";for(let o=0;o<e.length;o++)t+=R(e[o]);return t}function _(e,t=!0){if(Array.isArray(e)){return`(?:${e.map((e=>`^${_(e,t)}$`)).join("|")})`}let o="",s="",i=".";!0===t?(o="/",s="[/\\\\]",i="[^/\\\\]"):t&&(o=t,s=U(o),s.length>1?(s=`(?:${s})`,i=`((?!${s}).)`):i=`[^${s}]`);let n=t?`${s}+?`:"",a=t?`${s}*?`:"",c=t?e.split(o):[e],l="";for(let e=0;e<c.length;e++){let o=c[e],s=c[e+1],p="";if(o||!(e>0))if(t&&(p=e===c.length-1?a:"**"!==s?n:""),t&&"**"===o)p&&(l+=0===e?"":p,l+=`(?:${i}*?${p})*?`);else{for(let e=0;e<o.length;e++){let t=o[e];"\\"===t?e<o.length-1&&(l+=R(o[e+1]),e++):l+="?"===t?i:"*"===t?`${i}*?`:R(t)}l+=p}}return l}function S(e,t){if("string"!=typeof t)throw new TypeError(`Sample must be a string, but ${typeof t} given`);return e.test(t)}function O(e,t){if("string"!=typeof e&&!Array.isArray(e))throw new TypeError(`The first argument must be a single pattern string or an array of patterns, but ${typeof e} given`);if("string"!=typeof t&&"boolean"!=typeof t||(t={separator:t}),2===arguments.length&&void 0!==t&&("object"!=typeof t||null===t||Array.isArray(t)))throw new TypeError(`The second argument must be an options object or a string/boolean separator, but ${typeof t} given`);if("\\"===(t=t||{}).separator)throw new Error("\\ is not a valid separator because it is used for escaping. Try setting the separator to `true` instead");let o=_(e,t.separator),s=new RegExp(`^${o}$`,t.flags),i=S.bind(null,s);return i.options=t,i.pattern=e,i.regexp=s,i}_e.i=T((async e=>{if("POST"!==e.request?.method||!e.request)return;const{body:t,query:s,context:i}=e,n=e.headers?.get("origin")||e.headers?.get("referer")||"",a=t?.callbackURL||s?.callbackURL,c=t?.redirectTo,l=t?.errorCallbackURL,p=t?.newUserCallbackURL,u=Array.isArray(i.options.trustedOrigins)?i.trustedOrigins:[...i.trustedOrigins,...await(i.options.trustedOrigins?.(e.request))||[]],f=e.headers?.has("cookie"),h=(e,t)=>{if(e.startsWith("/"))return!1;if(t.includes("*"))return O(t)((0,y.b)(e));const o=(0,y.c)(e);return"http:"!==o&&"https:"!==o&&o?e.startsWith(t):t===(0,y.g)(e)},w=(t,s)=>{if(!t)return;if(!u.some((e=>h(t,e)||t?.startsWith("/")&&"origin"!==s&&/^\/(?!\/|\\|%2f|%5c)[\w\-.\+/]*(?:\?[\w\-.\+/=&%]*)?$/.test(t))))throw e.context.logger.error(`Invalid ${s}: ${t}`),e.context.logger.info(`If it's a valid URL, please add ${t} to trustedOrigins in your auth config\n`,`Current list of trustedOrigins: ${u}`),new o.APIError("FORBIDDEN",{message:`Invalid ${s}`})};f&&!e.context.options.advanced?.disableCSRFCheck&&w(n,"origin"),a&&w(a,"callbackURL"),c&&w(c,"redirectURL"),l&&w(l,"errorCallbackURL"),p&&w(p,"newUserCallbackURL")}));const v=e=>T((async t=>{if(!t.request)return;const{context:s}=t,i=e(t),n=Array.isArray(s.options.trustedOrigins)?s.trustedOrigins:[...s.trustedOrigins,...await(s.options.trustedOrigins?.(t.request))||[]],a=(e,t)=>!e.startsWith("/")&&(t.includes("*")?O(t)((0,y.b)(e)):e.startsWith(t)),c=(e,s)=>{if(!e)return;if(!n.some((t=>a(e,t)||e?.startsWith("/")&&"origin"!==s&&/^\/(?!\/|\\|%2f|%5c)[\w\-.\+/]*(?:\?[\w\-.\+/=&%]*)?$/.test(e))))throw t.context.logger.error(`Invalid ${s}: ${e}`),t.context.logger.info(`If it's a valid URL, please add ${e} to trustedOrigins in your auth config\n`,`Current list of trustedOrigins: ${n}`),new o.APIError("FORBIDDEN",{message:`Invalid ${s}`})},l=Array.isArray(i)?i:[i];for(const e of l)c(e,"callbackURL")}));_e.o=v;const L=_e.H={isAction:!1},D=_e.B={USER_NOT_FOUND:"User not found",FAILED_TO_CREATE_USER:"Failed to create user",FAILED_TO_CREATE_SESSION:"Failed to create session",FAILED_TO_UPDATE_USER:"Failed to update user",FAILED_TO_GET_SESSION:"Failed to get session",INVALID_PASSWORD:"Invalid password",INVALID_EMAIL:"Invalid email",INVALID_EMAIL_OR_PASSWORD:"Invalid email or password",SOCIAL_ACCOUNT_ALREADY_LINKED:"Social account already linked",PROVIDER_NOT_FOUND:"Provider not found",INVALID_TOKEN:"invalid token",ID_TOKEN_NOT_SUPPORTED:"id_token not supported",FAILED_TO_GET_USER_INFO:"Failed to get user info",USER_EMAIL_NOT_FOUND:"User email not found",EMAIL_NOT_VERIFIED:"Email not verified",PASSWORD_TOO_SHORT:"Password too short",PASSWORD_TOO_LONG:"Password too long",USER_ALREADY_EXISTS:"User already exists",EMAIL_CAN_NOT_BE_UPDATED:"Email can not be updated",CREDENTIAL_ACCOUNT_NOT_FOUND:"Credential account not found",SESSION_EXPIRED:"Session expired. Re-authenticate to perform this action.",FAILED_TO_UNLINK_LAST_ACCOUNT:"You can't unlink your last account",ACCOUNT_NOT_FOUND:"Account not found"},P=()=>x("/get-session",{method:"GET",query:e.z.optional(e.z.object({disableCookieCache:e.z.optional(e.z.boolean({description:"Disable cookie cache and fetch session from database"}).or(e.z.string().transform((e=>"true"===e)))).optional(),disableRefresh:e.z.boolean({description:"Disable session refresh. Useful for checking session status, without updating the session"}).or(e.z.string().transform((e=>"true"===e))).optional()})),requireHeaders:!0,metadata:{openapi:{description:"Get the current session",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{session:{$ref:"#/components/schemas/Session"},user:{$ref:"#/components/schemas/User"}},required:["session","user"]}}}}}}}},(async e=>{try{const o=await e.getSignedCookie(e.context.authCookies.sessionToken.name,e.context.secret);if(!o)return null;const s=e.getCookie(e.context.authCookies.sessionData.name),i=s?(0,a.s)(k.binary.decode(p.base64.decode(s))):null;if(i){if(!await(0,A.createHMAC)("SHA-256","base64urlnopad").verify(e.context.secret,JSON.stringify({...i.session,expiresAt:i.expiresAt}),i.signature)){const t=e.context.authCookies.sessionData.name;e.setCookie(t,"",{maxAge:0})}}const n=await e.getSignedCookie(e.context.authCookies.dontRememberToken.name,e.context.secret);if(i?.session&&e.context.options.session?.cookieCache?.enabled&&!e.query?.disableCookieCache){const t=i.session;if(!(i.expiresAt<Date.now()||t.session.expiresAt<new Date))return e.json(t);{const t=e.context.authCookies.sessionData.name;e.setCookie(t,"",{maxAge:0})}}const l=await e.context.internalAdapter.findSession(o);if(e.context.session=l,!l||l.session.expiresAt<new Date)return(0,t.deleteSessionCookie)(e),l&&await e.context.internalAdapter.deleteSession(l.session.token),e.json(null);if(n||e.query?.disableRefresh)return e.json(l);const u=e.context.sessionConfig.expiresIn,f=e.context.sessionConfig.updateAge,h=l.session.expiresAt.valueOf()-1e3*u+1e3*f;if(h<=Date.now()&&(!e.query?.disableRefresh||!e.context.options.session?.disableSessionRefresh)){const o=await e.context.internalAdapter.updateSession(l.session.token,{expiresAt:(0,c.g)(e.context.sessionConfig.expiresIn,"sec")});if(!o)return(0,t.deleteSessionCookie)(e),e.json(null,{status:401});const s=(o.expiresAt.valueOf()-Date.now())/1e3;return await(0,t.setSessionCookie)(e,{session:o,user:l.user},!1,{maxAge:s}),e.json({session:o,user:l.user})}return await(0,t.setCookieCache)(e,l),e.json(l)}catch(t){throw e.context.logger.error("INTERNAL_SERVER_ERROR",t),new o.APIError("INTERNAL_SERVER_ERROR",{message:D.FAILED_TO_GET_SESSION})}}));_e.b=P;const N=async(e,t)=>{if(e.context.session)return e.context.session;const o=await P()({...e,asResponse:!1,headers:e.headers,returnHeaders:!1,query:{...t,...e.query}}).catch((e=>null));return e.context.session=o,o};_e.g=N;const j=_e.s=T((async e=>{const t=await N(e);if(!t?.session)throw new o.APIError("UNAUTHORIZED");return{session:t}})),V=(_e.N=T((async e=>{const t=await N(e);if(!t?.session&&(e.request||e.headers))throw new o.APIError("UNAUTHORIZED");return{session:t}})),_e.f=T((async e=>{const t=await N(e);if(!t?.session)throw new o.APIError("UNAUTHORIZED");if(0===e.context.sessionConfig.freshAge)return{session:t};const s=e.context.sessionConfig.freshAge,i=t.session.updatedAt?.valueOf()||t.session.createdAt.valueOf();if(!(Date.now()-i<1e3*s))throw new o.APIError("FORBIDDEN",{message:"Session is not fresh"});return{session:t}})));_e.l=()=>x("/list-sessions",{method:"GET",use:[j],requireHeaders:!0,metadata:{openapi:{description:"List all active sessions for the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"array",items:{$ref:"#/components/schemas/Session"}}}}}}}}},(async e=>{try{const t=(await e.context.internalAdapter.listSessions(e.context.session.user.id)).filter((e=>e.expiresAt>new Date));return e.json(t)}catch(t){throw e.context.logger.error(t),e.error("INTERNAL_SERVER_ERROR")}}));_e.x=x("/revoke-session",{method:"POST",body:e.z.object({token:e.z.string({description:"The token to revoke"})}),use:[j],requireHeaders:!0,metadata:{openapi:{description:"Revoke a single session",requestBody:{content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",description:"The token to revoke"}},required:["token"]}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the session was revoked successfully"}},required:["status"]}}}}}}}},(async e=>{const t=e.body.token,s=await e.context.internalAdapter.findSession(t);if(!s)throw new o.APIError("BAD_REQUEST",{message:"Session not found"});if(s.session.userId!==e.context.session.user.id)throw new o.APIError("UNAUTHORIZED");try{await e.context.internalAdapter.deleteSession(t)}catch(t){throw e.context.logger.error(t&&"object"==typeof t&&"name"in t?t.name:"",t),new o.APIError("INTERNAL_SERVER_ERROR")}return e.json({status:!0})})),_e.v=x("/revoke-sessions",{method:"POST",use:[j],requireHeaders:!0,metadata:{openapi:{description:"Revoke all sessions for the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if all sessions were revoked successfully"}},required:["status"]}}}}}}}},(async e=>{try{await e.context.internalAdapter.deleteSessions(e.context.session.user.id)}catch(t){throw e.context.logger.error(t&&"object"==typeof t&&"name"in t?t.name:"",t),new o.APIError("INTERNAL_SERVER_ERROR")}return e.json({status:!0})})),_e.t=x("/revoke-other-sessions",{method:"POST",requireHeaders:!0,use:[j],metadata:{openapi:{description:"Revoke all other sessions for the user except the current one",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if all other sessions were revoked successfully"}},required:["status"]}}}}}}}},(async e=>{const t=e.context.session;if(!t.user)throw new o.APIError("UNAUTHORIZED");const s=(await e.context.internalAdapter.listSessions(t.user.id)).filter((e=>e.expiresAt>new Date)).filter((t=>t.token!==e.context.session.session.token));return await Promise.all(s.map((t=>e.context.internalAdapter.deleteSession(t.token)))),e.json({status:!0})}));async function q(e,t,o,s=3600){return await(0,E.s)({email:t.toLowerCase(),updateTo:o},e,s)}async function C(e,t){if(!e.context.options.emailVerification?.sendVerificationEmail)throw e.context.logger.error("Verification email isn't enabled."),new o.APIError("BAD_REQUEST",{message:"Verification email isn't enabled"});const s=await q(e.context.secret,t.email,void 0,e.context.options.emailVerification?.expiresIn),i=`${e.context.baseURL}/verify-email?token=${s}&callbackURL=${e.body.callbackURL||"/"}`;await e.context.options.emailVerification.sendVerificationEmail({user:t,url:i,token:s},e.request)}_e.E=x("/send-verification-email",{method:"POST",body:e.z.object({email:e.z.string({description:"The email to send the verification email to"}).email(),callbackURL:e.z.string({description:"The URL to use for email verification callback"}).optional()}),metadata:{openapi:{description:"Send a verification email to the user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{email:{type:"string",description:"The email to send the verification email to",example:"user@example.com"},callbackURL:{type:"string",description:"The URL to use for email verification callback",example:"https://example.com/callback",nullable:!0}},required:["email"]}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the email was sent successfully",example:!0}}}}}},400:{description:"Bad Request",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string",description:"Error message",example:"Verification email isn't enabled"}}}}}}}}}},(async e=>{if(!e.context.options.emailVerification?.sendVerificationEmail)throw e.context.logger.error("Verification email isn't enabled."),new o.APIError("BAD_REQUEST",{message:"Verification email isn't enabled"});const{email:t}=e.body,s=await e.context.internalAdapter.findUserByEmail(t);if(!s)throw new o.APIError("BAD_REQUEST",{message:D.USER_NOT_FOUND});return await C(e,s.user),e.json({status:!0})})),_e.F=x("/verify-email",{method:"GET",query:e.z.object({token:e.z.string({description:"The token to verify the email"}),callbackURL:e.z.string({description:"The URL to redirect to after email verification"}).optional()}),use:[v((e=>e.query.callbackURL))],metadata:{openapi:{description:"Verify the email of the user",parameters:[{name:"token",in:"query",description:"The token to verify the email",required:!0,schema:{type:"string"}},{name:"callbackURL",in:"query",description:"The URL to redirect to after email verification",required:!1,schema:{type:"string"}}],responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",properties:{id:{type:"string",description:"User ID"},email:{type:"string",description:"User email"},name:{type:"string",description:"User name"},image:{type:"string",description:"User image URL"},emailVerified:{type:"boolean",description:"Indicates if the user email is verified"},createdAt:{type:"string",description:"User creation date"},updatedAt:{type:"string",description:"User update date"}},required:["id","email","name","image","emailVerified","createdAt","updatedAt"]},status:{type:"boolean",description:"Indicates if the email was verified successfully"},required:["user","status"]}}}}}}}}},(async s=>{function i(e){if(s.query.callbackURL){if(s.query.callbackURL.includes("?"))throw s.redirect(`${s.query.callbackURL}&error=${e}`);throw s.redirect(`${s.query.callbackURL}?error=${e}`)}throw new o.APIError("UNAUTHORIZED",{message:e})}const{token:n}=s.query;let a;try{a=await(0,u.jwtVerify)(n,(new TextEncoder).encode(s.context.secret),{algorithms:["HS256"]})}catch(e){return e instanceof b.JWTExpired?i("token_expired"):i("invalid_token")}const c=e.z.object({email:e.z.string().email(),updateTo:e.z.string().optional()}).parse(a.payload),l=await s.context.internalAdapter.findUserByEmail(c.email);if(!l)return i("user_not_found");if(c.updateTo){const e=await N(s);if(!e){if(s.query.callbackURL)throw s.redirect(`${s.query.callbackURL}?error=unauthorized`);return i("unauthorized")}if(e.user.email!==c.email){if(s.query.callbackURL)throw s.redirect(`${s.query.callbackURL}?error=unauthorized`);return i("unauthorized")}const o=await s.context.internalAdapter.updateUserByEmail(c.email,{email:c.updateTo,emailVerified:!1},s),n=await q(s.context.secret,c.updateTo);if(await(s.context.options.emailVerification?.sendVerificationEmail?.({user:o,url:`${s.context.baseURL}/verify-email?token=${n}&callbackURL=${s.query.callbackURL||"/"}`,token:n},s.request)),await(0,t.setSessionCookie)(s,{session:e.session,user:{...e.user,email:c.updateTo,emailVerified:!1}}),s.query.callbackURL)throw s.redirect(s.query.callbackURL);return s.json({status:!0,user:{id:o.id,email:o.email,name:o.name,image:o.image,emailVerified:o.emailVerified,createdAt:o.createdAt,updatedAt:o.updatedAt}})}if(await(s.context.options.emailVerification?.onEmailVerification?.(l.user,s.request)),await s.context.internalAdapter.updateUserByEmail(c.email,{emailVerified:!0},s),s.context.options.emailVerification?.autoSignInAfterVerification){const e=await N(s);if(e&&e.user.email===c.email)await(0,t.setSessionCookie)(s,{session:e.session,user:{...e.user,emailVerified:!0}});else{const e=await s.context.internalAdapter.createSession(l.user.id,s.headers);if(!e)throw new o.APIError("INTERNAL_SERVER_ERROR",{message:"Failed to create session"});await(0,t.setSessionCookie)(s,{session:e,user:{...l.user,emailVerified:!0}})}}if(s.query.callbackURL)throw s.redirect(s.query.callbackURL);return s.json({status:!0,user:null})}));async function z(e,{userInfo:t,account:s,callbackURL:i,disableSignUp:a,overrideUserInfo:c}){const l=await e.context.internalAdapter.findOAuthUser(t.email.toLowerCase(),s.accountId,s.providerId).catch((t=>{throw n.l.error("Better auth was unable to query your database.\nError: ",t),e.redirect(`${e.context.baseURL}/error?error=internal_server_error`)}));let p=l?.user,u=!p;if(l){const o=l.accounts.find((e=>e.providerId===s.providerId));if(o){const t=Object.fromEntries(Object.entries({accessToken:s.accessToken,idToken:s.idToken,refreshToken:s.refreshToken,accessTokenExpiresAt:s.accessTokenExpiresAt,refreshTokenExpiresAt:s.refreshTokenExpiresAt,scope:s.scope}).filter((([e,t])=>void 0!==t)));Object.keys(t).length>0&&await e.context.internalAdapter.updateAccount(o.id,t,e)}else{const o=e.context.options.account?.accountLinking?.trustedProviders,i=o?.includes(s.providerId);if(!i&&!t.emailVerified||!1===e.context.options.account?.accountLinking?.enabled)return w.b&&n.l.warn(`User already exist but account isn't linked to ${s.providerId}. To read more about how account linking works in Better Auth see https://www.better-auth.com/docs/concepts/users-accounts#account-linking.`),{error:"account not linked",data:null};try{await e.context.internalAdapter.linkAccount({providerId:s.providerId,accountId:t.id.toString(),userId:l.user.id,accessToken:s.accessToken,idToken:s.idToken,refreshToken:s.refreshToken,accessTokenExpiresAt:s.accessTokenExpiresAt,refreshTokenExpiresAt:s.refreshTokenExpiresAt,scope:s.scope},e)}catch(e){return n.l.error("Unable to link account",e),{error:"unable to link account",data:null}}}c&&await e.context.internalAdapter.updateUser(l.user.id,{...t,email:t.email.toLowerCase(),emailVerified:t.email.toLocaleLowerCase()===l.user.email&&l.user.emailVerified||t.emailVerified})}else{if(a)return{error:"signup disabled",data:null,isRegister:!1};try{const{id:o,...n}=t;if(p=await e.context.internalAdapter.createOAuthUser({...n,email:t.email.toLowerCase()},{accessToken:s.accessToken,idToken:s.idToken,refreshToken:s.refreshToken,accessTokenExpiresAt:s.accessTokenExpiresAt,refreshTokenExpiresAt:s.refreshTokenExpiresAt,scope:s.scope,providerId:s.providerId,accountId:t.id.toString()},e).then((e=>e?.user)),!t.emailVerified&&p&&e.context.options.emailVerification?.sendOnSignUp){const t=await q(e.context.secret,p.email,void 0,e.context.options.emailVerification?.expiresIn),o=`${e.context.baseURL}/verify-email?token=${t}&callbackURL=${i}`;await(e.context.options.emailVerification?.sendVerificationEmail?.({user:p,url:o,token:t},e.request))}}catch(e){return n.l.error(e),e instanceof o.APIError?{error:e.message,data:null,isRegister:!1}:{error:"unable to create user",data:null,isRegister:!1}}}if(!p)return{error:"unable to create user",data:null,isRegister:!1};const f=await e.context.internalAdapter.createSession(p.id,e.headers);return f?{data:{session:f,user:p},error:null,isRegister:u}:{error:"unable to create session",data:null,isRegister:!1}}_e.M=x("/sign-in/social",{method:"POST",body:e.z.object({callbackURL:e.z.string({description:"Callback URL to redirect to after the user has signed in"}).optional(),newUserCallbackURL:e.z.string().optional(),errorCallbackURL:e.z.string({description:"Callback URL to redirect to if an error happens"}).optional(),provider:s.SocialProviderListEnum,disableRedirect:e.z.boolean({description:"Disable automatic redirection to the provider. Useful for handling the redirection yourself"}).optional(),idToken:e.z.optional(e.z.object({token:e.z.string({description:"ID token from the provider"}),nonce:e.z.string({description:"Nonce used to generate the token"}).optional(),accessToken:e.z.string({description:"Access token from the provider"}).optional(),refreshToken:e.z.string({description:"Refresh token from the provider"}).optional(),expiresAt:e.z.number({description:"Expiry date of the token"}).optional()}),{description:"ID token from the provider to sign in the user with id token"}),scopes:e.z.array(e.z.string(),{description:"Array of scopes to request from the provider. This will override the default scopes passed."}).optional(),requestSignUp:e.z.boolean({description:"Explicitly request sign-up. Useful when disableImplicitSignUp is true for this provider"}).optional(),loginHint:e.z.string({description:"The login hint to use for the authorization code request"}).optional()}),metadata:{openapi:{description:"Sign in with a social provider",operationId:"socialSignIn",responses:{200:{description:"Success - Returns either session details or redirect URL",content:{"application/json":{schema:{type:"object",description:"Session response when idToken is provided",properties:{redirect:{type:"boolean",enum:[!1]},token:{type:"string",description:"Session token",url:{type:"null",nullable:!0},user:{type:"object",properties:{id:{type:"string"},email:{type:"string"},name:{type:"string",nullable:!0},image:{type:"string",nullable:!0},emailVerified:{type:"boolean"},createdAt:{type:"string",format:"date-time"},updatedAt:{type:"string",format:"date-time"}},required:["id","email","emailVerified","createdAt","updatedAt"]}},required:["redirect","token","user"]}}}}}}}}},(async e=>{const s=e.context.socialProviders.find((t=>t.id===e.body.provider));if(!s)throw e.context.logger.error("Provider not found. Make sure to add the provider in your auth config",{provider:e.body.provider}),new o.APIError("NOT_FOUND",{message:D.PROVIDER_NOT_FOUND});if(e.body.idToken){if(!s.verifyIdToken)throw e.context.logger.error("Provider does not support id token verification",{provider:e.body.provider}),new o.APIError("NOT_FOUND",{message:D.ID_TOKEN_NOT_SUPPORTED});const{token:i,nonce:n}=e.body.idToken;if(!await s.verifyIdToken(i,n))throw e.context.logger.error("Invalid id token",{provider:e.body.provider}),new o.APIError("UNAUTHORIZED",{message:D.INVALID_TOKEN});const a=await s.getUserInfo({idToken:i,accessToken:e.body.idToken.accessToken,refreshToken:e.body.idToken.refreshToken});if(!a||!a?.user)throw e.context.logger.error("Failed to get user info",{provider:e.body.provider}),new o.APIError("UNAUTHORIZED",{message:D.FAILED_TO_GET_USER_INFO});const c=await(s.options?.mapProfileToUser?.(a.user)),l={...a.user,...c};if(!l.email)throw e.context.logger.error("User email not found",{provider:e.body.provider}),new o.APIError("UNAUTHORIZED",{message:D.USER_EMAIL_NOT_FOUND});const p=await z(e,{userInfo:{...l,email:l.email,id:l.id,name:l.name||"",image:l.image,emailVerified:l.emailVerified||!1},account:{providerId:s.id,accountId:a.user.id,accessToken:e.body.idToken.accessToken},disableSignUp:s.disableImplicitSignUp&&!e.body.requestSignUp||s.disableSignUp});if(p.error)throw new o.APIError("UNAUTHORIZED",{message:p.error});return await(0,t.setSessionCookie)(e,p.data),e.json({redirect:!1,token:p.data.session.token,url:void 0,user:{id:p.data.user.id,email:p.data.user.email,name:p.data.user.name,image:p.data.user.image,emailVerified:p.data.user.emailVerified,createdAt:p.data.user.createdAt,updatedAt:p.data.user.updatedAt}})}const{codeVerifier:n,state:a}=await(0,i.g)(e),c=await s.createAuthorizationURL({state:a,codeVerifier:n,redirectURI:`${e.context.baseURL}/callback/${s.id}`,scopes:e.body.scopes,loginHint:e.body.loginHint});return e.json({url:c.toString(),redirect:!e.body.disableRedirect})})),_e.J=x("/sign-in/email",{method:"POST",body:e.z.object({email:e.z.string({description:"Email of the user"}),password:e.z.string({description:"Password of the user"}),callbackURL:e.z.string({description:"Callback URL to use as a redirect for email verification"}).optional(),rememberMe:e.z.boolean({description:"If this is false, the session will not be remembered. Default is `true`."}).default(!0).optional()}),metadata:{openapi:{description:"Sign in with email and password",responses:{200:{description:"Success - Returns either session details or redirect URL",content:{"application/json":{schema:{type:"object",description:"Session response when idToken is provided",properties:{redirect:{type:"boolean",enum:[!1]},token:{type:"string",description:"Session token"},url:{type:"null",nullable:!0},user:{type:"object",properties:{id:{type:"string"},email:{type:"string"},name:{type:"string",nullable:!0},image:{type:"string",nullable:!0},emailVerified:{type:"boolean"},createdAt:{type:"string",format:"date-time"},updatedAt:{type:"string",format:"date-time"}},required:["id","email","emailVerified","createdAt","updatedAt"]}},required:["redirect","token","user"]}}}}}}}},(async s=>{if(!s.context.options?.emailAndPassword?.enabled)throw s.context.logger.error("Email and password is not enabled. Make sure to enable it in the options on you `auth.ts` file. Check `https://better-auth.com/docs/authentication/email-password` for more!"),new o.APIError("BAD_REQUEST",{message:"Email and password is not enabled"});const{email:i,password:n}=s.body;if(!e.z.string().email().safeParse(i).success)throw new o.APIError("BAD_REQUEST",{message:D.INVALID_EMAIL});const a=await s.context.internalAdapter.findUserByEmail(i,{includeAccounts:!0});if(!a)throw await s.context.password.hash(n),s.context.logger.error("User not found",{email:i}),new o.APIError("UNAUTHORIZED",{message:D.INVALID_EMAIL_OR_PASSWORD});const c=a.accounts.find((e=>"credential"===e.providerId));if(!c)throw s.context.logger.error("Credential account not found",{email:i}),new o.APIError("UNAUTHORIZED",{message:D.INVALID_EMAIL_OR_PASSWORD});const l=c?.password;if(!l)throw s.context.logger.error("Password not found",{email:i}),new o.APIError("UNAUTHORIZED",{message:D.INVALID_EMAIL_OR_PASSWORD});if(!await s.context.password.verify({hash:l,password:n}))throw s.context.logger.error("Invalid password"),new o.APIError("UNAUTHORIZED",{message:D.INVALID_EMAIL_OR_PASSWORD});if(s.context.options?.emailAndPassword?.requireEmailVerification&&!a.user.emailVerified){if(!s.context.options?.emailVerification?.sendVerificationEmail)throw new o.APIError("FORBIDDEN",{message:D.EMAIL_NOT_VERIFIED});const e=await q(s.context.secret,a.user.email,void 0,s.context.options.emailVerification?.expiresIn),t=`${s.context.baseURL}/verify-email?token=${e}&callbackURL=${s.body.callbackURL||"/"}`;throw await s.context.options.emailVerification.sendVerificationEmail({user:a.user,url:t,token:e},s.request),new o.APIError("FORBIDDEN",{message:D.EMAIL_NOT_VERIFIED})}const p=await s.context.internalAdapter.createSession(a.user.id,s.headers,!1===s.body.rememberMe);if(!p)throw s.context.logger.error("Failed to create session"),new o.APIError("UNAUTHORIZED",{message:D.FAILED_TO_CREATE_SESSION});return await(0,t.setSessionCookie)(s,{session:p,user:a.user},!1===s.body.rememberMe),s.json({redirect:!!s.body.callbackURL,token:p.token,url:s.body.callbackURL,user:{id:a.user.id,email:a.user.email,name:a.user.name,image:a.user.image,emailVerified:a.user.emailVerified,createdAt:a.user.createdAt,updatedAt:a.user.updatedAt}})}));const $=e.z.object({code:e.z.string().optional(),error:e.z.string().optional(),device_id:e.z.string().optional(),error_description:e.z.string().optional(),state:e.z.string().optional(),user:e.z.string().optional()});_e.L=x("/callback/:id",{method:["GET","POST"],body:$.optional(),query:$.optional(),metadata:L},(async e=>{let o;const s=e.context.options.onAPIError?.errorURL||`${e.context.baseURL}/error`;try{if("GET"===e.method)o=$.parse(e.query);else{if("POST"!==e.method)throw new Error("Unsupported method");o=$.parse(e.body)}}catch(t){throw e.context.logger.error("INVALID_CALLBACK_REQUEST",t),e.redirect(`${s}?error=invalid_callback_request`)}const{code:n,error:c,state:l,error_description:p,device_id:u}=o;if(c)throw e.redirect(`${s}?error=${c}&error_description=${p}`);if(!l)throw e.context.logger.error("State not found",c),e.redirect(`${s}?error=state_not_found`);const{codeVerifier:f,callbackURL:h,link:w,errorURL:A,newUserURL:E,requestSignUp:y}=await(0,i.p)(e);function b(t){let o=A||s;throw o=o.includes("?")?`${o}&error=${t}`:`${o}?error=${t}`,e.redirect(o)}if(!n)throw e.context.logger.error("Code not found"),b("no_code");const k=e.context.socialProviders.find((t=>t.id===e.params.id));if(!k)throw e.context.logger.error("Oauth provider with id",e.params.id,"not found"),b("oauth_provider_not_found");let I;try{I=await k.validateAuthorizationCode({code:n,codeVerifier:f,deviceId:u,redirectURI:`${e.context.baseURL}/callback/${k.id}`})}catch(t){throw e.context.logger.error("",t),b("invalid_code")}const T=await k.getUserInfo({...I,user:e.body?.user?(0,a.s)(e.body.user):void 0}).then((e=>e?.user));if(!T)return e.context.logger.error("Unable to get user info"),b("unable_to_get_user_info");if(!T.email)return e.context.logger.error("Provider did not return email. This could be due to misconfiguration in the provider settings."),b("email_not_found");if(!h)throw e.context.logger.error("No callback URL found"),b("no_callback_url");if(w){const t=await e.context.internalAdapter.findAccount(T.id);if(t){if(t.userId.toString()!==w.userId.toString())return b("account_already_linked_to_different_user");const o=Object.fromEntries(Object.entries({accessToken:I.accessToken,idToken:I.idToken,refreshToken:I.refreshToken,accessTokenExpiresAt:I.accessTokenExpiresAt,refreshTokenExpiresAt:I.refreshTokenExpiresAt,scope:I.scopes?.join(",")}).filter((([e,t])=>void 0!==t)));await e.context.internalAdapter.updateAccount(t.id,o)}else{if(!await e.context.internalAdapter.createAccount({userId:w.userId,providerId:k.id,accountId:T.id,...I,scope:I.scopes?.join(",")},e))return b("unable_to_link_account")}let o;try{o=h.toString()}catch{o=h}throw e.redirect(o)}const x=await z(e,{userInfo:{...T,email:T.email,name:T.name||T.email},account:{providerId:k.id,accountId:T.id,...I,scope:I.scopes?.join(",")},callbackURL:h,disableSignUp:k.disableImplicitSignUp&&!y||k.options?.disableSignUp});if(x.error)return e.context.logger.error(x.error.split(" ").join("_")),b(x.error.split(" ").join("_"));const{session:R,user:U}=x.data;let _;await(0,t.setSessionCookie)(e,{session:R,user:U});try{_=(x.isRegister&&E||h).toString()}catch{_=x.isRegister&&E||h}throw e.redirect(_)})),_e.K=x("/sign-out",{method:"POST",requireHeaders:!0,metadata:{openapi:{description:"Sign out the current user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},(async e=>{const s=await e.getSignedCookie(e.context.authCookies.sessionToken.name,e.context.secret);if(!s)throw(0,t.deleteSessionCookie)(e),new o.APIError("BAD_REQUEST",{message:D.FAILED_TO_GET_SESSION});return await e.context.internalAdapter.deleteSession(s),(0,t.deleteSessionCookie)(e),e.json({success:!0})}));function B(e,t,o){const s=t?new URL(t,e.baseURL):new URL(`${e.baseURL}/error`);return o&&Object.entries(o).forEach((([e,t])=>s.searchParams.set(e,t))),s.href}function F(e,t,o){const s=new URL(t,e.baseURL);return o&&Object.entries(o).forEach((([e,t])=>s.searchParams.set(e,t))),s.href}_e.I=x("/forget-password",{method:"POST",body:e.z.object({email:e.z.string({description:"The email address of the user to send a password reset email to"}).email(),redirectTo:e.z.string({description:"The URL to redirect the user to reset their password. If the token isn't valid or expired, it'll be redirected with a query parameter `?error=INVALID_TOKEN`. If the token is valid, it'll be redirected with a query parameter `?token=VALID_TOKEN"}).optional()}),metadata:{openapi:{description:"Send a password reset email to the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},(async e=>{if(!e.context.options.emailAndPassword?.sendResetPassword)throw e.context.logger.error("Reset password isn't enabled.Please pass an emailAndPassword.sendResetPassword function in your auth config!"),new o.APIError("BAD_REQUEST",{message:"Reset password isn't enabled"});const{email:t,redirectTo:s}=e.body,i=await e.context.internalAdapter.findUserByEmail(t,{includeAccounts:!0});if(!i)return e.context.logger.error("Reset Password: User not found",{email:t}),e.json({status:!0});const n=(0,c.g)(e.context.options.emailAndPassword.resetPasswordTokenExpiresIn||3600,"sec"),a=(0,l.g)(24);await e.context.internalAdapter.createVerificationValue({value:i.user.id,identifier:`reset-password:${a}`,expiresAt:n});const p=`${e.context.baseURL}/reset-password/${a}?callbackURL=${s}`;return await e.context.options.emailAndPassword.sendResetPassword({user:i.user,url:p,token:a},e.request),e.json({status:!0})})),_e.y=x("/reset-password/:token",{method:"GET",query:e.z.object({callbackURL:e.z.string({description:"The URL to redirect the user to reset their password"})}),use:[v((e=>e.query.callbackURL))],metadata:{openapi:{description:"Redirects the user to the callback URL with the token",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string"}}}}}}}}}},(async e=>{const{token:t}=e.params,{callbackURL:o}=e.query;if(!t||!o)throw e.redirect(B(e.context,o,{error:"INVALID_TOKEN"}));const s=await e.context.internalAdapter.findVerificationValue(`reset-password:${t}`);if(!s||s.expiresAt<new Date)throw e.redirect(B(e.context,o,{error:"INVALID_TOKEN"}));throw e.redirect(F(e.context,o,{token:t}))})),_e.G=x("/reset-password",{method:"POST",query:e.z.object({token:e.z.string().optional()}).optional(),body:e.z.object({newPassword:e.z.string({description:"The new password to set"}),token:e.z.string({description:"The token to reset the password"}).optional()}),metadata:{openapi:{description:"Reset the password for a user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},(async e=>{const t=e.body.token||e.query?.token;if(!t)throw new o.APIError("BAD_REQUEST",{message:D.INVALID_TOKEN});const{newPassword:s}=e.body,i=e.context.password?.config.minPasswordLength,n=e.context.password?.config.maxPasswordLength;if(s.length<i)throw new o.APIError("BAD_REQUEST",{message:D.PASSWORD_TOO_SHORT});if(s.length>n)throw new o.APIError("BAD_REQUEST",{message:D.PASSWORD_TOO_LONG});const a=`reset-password:${t}`,c=await e.context.internalAdapter.findVerificationValue(a);if(!c||c.expiresAt<new Date)throw new o.APIError("BAD_REQUEST",{message:D.INVALID_TOKEN});const l=c.value,p=await e.context.password.hash(s);return(await e.context.internalAdapter.findAccounts(l)).find((e=>"credential"===e.providerId))?(await e.context.internalAdapter.updatePassword(l,p,e),await e.context.internalAdapter.deleteVerificationValue(c.id),e.json({status:!0})):(await e.context.internalAdapter.createAccount({userId:l,providerId:"credential",password:p,accountId:l},e),await e.context.internalAdapter.deleteVerificationValue(c.id),e.json({status:!0}))}));_e.u=()=>x("/update-user",{method:"POST",body:e.z.record(e.z.string(),e.z.any()),use:[j],metadata:{$Infer:{body:{}},openapi:{description:"Update the current user",requestBody:{content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"The name of the user"},image:{type:"string",description:"The image of the user"}}}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the update was successful"}}}}}}}}}},(async e=>{const s=e.body;if(s.email)throw new o.APIError("BAD_REQUEST",{message:D.EMAIL_CAN_NOT_BE_UPDATED});const{name:i,image:n,...a}=s,c=e.context.session;if(void 0===n&&void 0===i&&0===Object.keys(a).length)return e.json({status:!0});const l=(0,h.f)(e.context.options,a,"update"),p=await e.context.internalAdapter.updateUser(c.user.id,{name:i,image:n,...l},e);return await(0,t.setSessionCookie)(e,{session:c.session,user:p}),e.json({status:!0})}));_e.C=x("/change-password",{method:"POST",body:e.z.object({newPassword:e.z.string({description:"The new password to set"}),currentPassword:e.z.string({description:"The current password"}),revokeOtherSessions:e.z.boolean({description:"Revoke all other sessions"}).optional()}),use:[j],metadata:{openapi:{description:"Change the password of the user",responses:{200:{description:"Password successfully changed",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",nullable:!0,description:"New session token if other sessions were revoked"},user:{type:"object",properties:{id:{type:"string",description:"The unique identifier of the user"},email:{type:"string",format:"email",description:"The email address of the user"},name:{type:"string",description:"The name of the user"},image:{type:"string",format:"uri",nullable:!0,description:"The profile image URL of the user"},emailVerified:{type:"boolean",description:"Whether the email has been verified"},createdAt:{type:"string",format:"date-time",description:"When the user was created"},updatedAt:{type:"string",format:"date-time",description:"When the user was last updated"}},required:["id","email","name","emailVerified","createdAt","updatedAt"]}},required:["user"]}}}}}}}},(async e=>{const{newPassword:s,currentPassword:i,revokeOtherSessions:n}=e.body,a=e.context.session,c=e.context.password.config.minPasswordLength;if(s.length<c)throw e.context.logger.error("Password is too short"),new o.APIError("BAD_REQUEST",{message:D.PASSWORD_TOO_SHORT});const l=e.context.password.config.maxPasswordLength;if(s.length>l)throw e.context.logger.error("Password is too long"),new o.APIError("BAD_REQUEST",{message:D.PASSWORD_TOO_LONG});const p=(await e.context.internalAdapter.findAccounts(a.user.id)).find((e=>"credential"===e.providerId&&e.password));if(!p||!p.password)throw new o.APIError("BAD_REQUEST",{message:D.CREDENTIAL_ACCOUNT_NOT_FOUND});const u=await e.context.password.hash(s);if(!await e.context.password.verify({hash:p.password,password:i}))throw new o.APIError("BAD_REQUEST",{message:D.INVALID_PASSWORD});await e.context.internalAdapter.updateAccount(p.id,{password:u});let f=null;if(n){await e.context.internalAdapter.deleteSessions(a.user.id);const s=await e.context.internalAdapter.createSession(a.user.id,e.headers);if(!s)throw new o.APIError("INTERNAL_SERVER_ERROR",{message:D.FAILED_TO_GET_SESSION});await(0,t.setSessionCookie)(e,{session:s,user:a.user}),f=s.token}return e.json({token:f,user:{id:a.user.id,email:a.user.email,name:a.user.name,image:a.user.image,emailVerified:a.user.emailVerified,createdAt:a.user.createdAt,updatedAt:a.user.updatedAt}})})),_e.A=x("/set-password",{method:"POST",body:e.z.object({newPassword:e.z.string()}),metadata:{SERVER_ONLY:!0},use:[j]},(async e=>{const{newPassword:t}=e.body,s=e.context.session,i=e.context.password.config.minPasswordLength;if(t.length<i)throw e.context.logger.error("Password is too short"),new o.APIError("BAD_REQUEST",{message:D.PASSWORD_TOO_SHORT});const n=e.context.password.config.maxPasswordLength;if(t.length>n)throw e.context.logger.error("Password is too long"),new o.APIError("BAD_REQUEST",{message:D.PASSWORD_TOO_LONG});const a=(await e.context.internalAdapter.findAccounts(s.user.id)).find((e=>"credential"===e.providerId&&e.password)),c=await e.context.password.hash(t);if(!a)return await e.context.internalAdapter.linkAccount({userId:s.user.id,providerId:"credential",accountId:s.user.id,password:c},e),e.json({status:!0});throw new o.APIError("BAD_REQUEST",{message:"user already has a password"})})),_e.z=x("/delete-user",{method:"POST",use:[j],body:e.z.object({callbackURL:e.z.string().optional(),password:e.z.string().optional(),token:e.z.string().optional()}),metadata:{openapi:{description:"Delete the user",responses:{200:{description:"User deletion processed successfully",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean",description:"Indicates if the operation was successful"},message:{type:"string",enum:["User deleted","Verification email sent"],description:"Status message of the deletion process"}},required:["success","message"]}}}}}}}},(async e=>{if(!e.context.options.user?.deleteUser?.enabled)throw e.context.logger.error("Delete user is disabled. Enable it in the options",{session:e.context.session}),new o.APIError("NOT_FOUND");const s=e.context.session;if(e.body.password){const t=(await e.context.internalAdapter.findAccounts(s.user.id)).find((e=>"credential"===e.providerId&&e.password));if(!t||!t.password)throw new o.APIError("BAD_REQUEST",{message:D.CREDENTIAL_ACCOUNT_NOT_FOUND});if(!await e.context.password.verify({hash:t.password,password:e.body.password}))throw new o.APIError("BAD_REQUEST",{message:D.INVALID_PASSWORD})}else if(e.context.options.session?.freshAge){const t=s.session.createdAt.getTime(),i=e.context.options.session.freshAge;if(Date.now()-t>i)throw new o.APIError("BAD_REQUEST",{message:D.SESSION_EXPIRED})}if(e.body.token)return await H({...e,query:{token:e.body.token}}),e.json({success:!0,message:"User deleted"});if(e.context.options.user.deleteUser?.sendDeleteAccountVerification){const t=(0,f.g)(32,"0-9","a-z");await e.context.internalAdapter.createVerificationValue({value:s.user.id,identifier:`delete-account-${t}`,expiresAt:new Date(Date.now()+1e3*(e.context.options.user.deleteUser?.deleteTokenExpiresIn||86400))});const o=`${e.context.baseURL}/delete-user/callback?token=${t}&callbackURL=${e.body.callbackURL||"/"}`;return await e.context.options.user.deleteUser.sendDeleteAccountVerification({user:s.user,url:o,token:t},e.request),e.json({success:!0,message:"Verification email sent"})}const i=e.context.options.user.deleteUser?.beforeDelete;i&&await i(s.user,e.request),await e.context.internalAdapter.deleteUser(s.user.id),await e.context.internalAdapter.deleteSessions(s.user.id),await e.context.internalAdapter.deleteAccounts(s.user.id),(0,t.deleteSessionCookie)(e);const n=e.context.options.user.deleteUser?.afterDelete;return n&&await n(s.user,e.request),e.json({success:!0,message:"User deleted"})}));const H=_e.n=x("/delete-user/callback",{method:"GET",query:e.z.object({token:e.z.string(),callbackURL:e.z.string().optional()}),use:[v((e=>e.query.callbackURL))],metadata:{openapi:{description:"Callback to complete user deletion with verification token",responses:{200:{description:"User successfully deleted",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean",description:"Indicates if the deletion was successful"},message:{type:"string",enum:["User deleted"],description:"Confirmation message"}},required:["success","message"]}}}}}}}},(async e=>{if(!e.context.options.user?.deleteUser?.enabled)throw e.context.logger.error("Delete user is disabled. Enable it in the options"),new o.APIError("NOT_FOUND");const s=await N(e);if(!s)throw new o.APIError("NOT_FOUND",{message:D.FAILED_TO_GET_USER_INFO});const i=await e.context.internalAdapter.findVerificationValue(`delete-account-${e.query.token}`);if(!i||i.expiresAt<new Date)throw new o.APIError("NOT_FOUND",{message:D.INVALID_TOKEN});if(i.value!==s.user.id)throw new o.APIError("NOT_FOUND",{message:D.INVALID_TOKEN});const n=e.context.options.user.deleteUser?.beforeDelete;n&&await n(s.user,e.request),await e.context.internalAdapter.deleteUser(s.user.id),await e.context.internalAdapter.deleteSessions(s.user.id),await e.context.internalAdapter.deleteAccounts(s.user.id),await e.context.internalAdapter.deleteVerificationValue(i.id),(0,t.deleteSessionCookie)(e);const a=e.context.options.user.deleteUser?.afterDelete;if(a&&await a(s.user,e.request),e.query.callbackURL)throw e.redirect(e.query.callbackURL||"/");return e.json({success:!0,message:"User deleted"})}));_e.D=x("/change-email",{method:"POST",body:e.z.object({newEmail:e.z.string({description:"The new email to set"}).email(),callbackURL:e.z.string({description:"The URL to redirect to after email verification"}).optional()}),use:[j],metadata:{openapi:{responses:{200:{description:"Email change request processed successfully",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the request was successful"},message:{type:"string",enum:["Email updated","Verification email sent"],description:"Status message of the email change process",nullable:!0}},required:["status"]}}}}}}}},(async e=>{if(!e.context.options.user?.changeEmail?.enabled)throw e.context.logger.error("Change email is disabled."),new o.APIError("BAD_REQUEST",{message:"Change email is disabled"});const s=e.body.newEmail.toLowerCase();if(s===e.context.session.user.email)throw e.context.logger.error("Email is the same"),new o.APIError("BAD_REQUEST",{message:"Email is the same"});if(await e.context.internalAdapter.findUserByEmail(s))throw e.context.logger.error("Email already exists"),new o.APIError("BAD_REQUEST",{message:"Couldn't update your email"});if(!0!==e.context.session.user.emailVerified){if(await e.context.internalAdapter.findUserByEmail(s))throw new o.APIError("UNPROCESSABLE_ENTITY",{message:D.USER_ALREADY_EXISTS});if(await e.context.internalAdapter.updateUserByEmail(e.context.session.user.email,{email:s},e),await(0,t.setSessionCookie)(e,{session:e.context.session.session,user:{...e.context.session.user,email:s}}),e.context.options.emailVerification?.sendVerificationEmail){const t=await q(e.context.secret,s,void 0,e.context.options.emailVerification?.expiresIn),o=`${e.context.baseURL}/verify-email?token=${t}&callbackURL=${e.body.callbackURL||"/"}`;await e.context.options.emailVerification.sendVerificationEmail({user:{...e.context.session.user,email:s},url:o,token:t},e.request)}return e.json({status:!0})}if(!e.context.options.user.changeEmail.sendChangeEmailVerification)throw e.context.logger.error("Verification email isn't enabled."),new o.APIError("BAD_REQUEST",{message:"Verification email isn't enabled"});const i=await q(e.context.secret,e.context.session.user.email,s,e.context.options.emailVerification?.expiresIn),n=`${e.context.baseURL}/verify-email?token=${i}&callbackURL=${e.body.callbackURL||"/"}`;return await e.context.options.user.changeEmail.sendChangeEmailVerification({user:e.context.session.user,newEmail:s,url:n,token:i},e.request),e.json({status:!0})}));const Q=(e="Unknown")=>{return`<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Authentication Error</title>\n    <style>\n        :root {\n            --bg-color: #f8f9fa;\n            --text-color: #212529;\n            --accent-color: #000000;\n            --error-color: #dc3545;\n            --border-color: #e9ecef;\n        }\n        body {\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n            background-color: var(--bg-color);\n            color: var(--text-color);\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            height: 100vh;\n            margin: 0;\n            line-height: 1.5;\n        }\n        .error-container {\n            background-color: #ffffff;\n            border-radius: 12px;\n            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);\n            padding: 2.5rem;\n            text-align: center;\n            max-width: 90%;\n            width: 400px;\n        }\n        h1 {\n            color: var(--error-color);\n            font-size: 1.75rem;\n            margin-bottom: 1rem;\n            font-weight: 600;\n        }\n        p {\n            margin-bottom: 1.5rem;\n            color: #495057;\n        }\n        .btn {\n            background-color: var(--accent-color);\n            color: #ffffff;\n            text-decoration: none;\n            padding: 0.75rem 1.5rem;\n            border-radius: 6px;\n            transition: all 0.3s ease;\n            display: inline-block;\n            font-weight: 500;\n            border: 2px solid var(--accent-color);\n        }\n        .btn:hover {\n            background-color: #131721;\n        }\n        .error-code {\n            font-size: 0.875rem;\n            color: #6c757d;\n            margin-top: 1.5rem;\n            padding-top: 1.5rem;\n            border-top: 1px solid var(--border-color);\n        }\n        .icon {\n            font-size: 3rem;\n            margin-bottom: 1rem;\n        }\n    </style>\n</head>\n<body>\n    <div class="error-container">\n        <div class="icon">\u26a0\ufe0f</div>\n        <h1>Better Auth Error</h1>\n        <p>We encountered an issue while processing your request. Please try again or contact the application owner if the problem persists.</p>\n        <a href="/" id="returnLink" class="btn">Return to Application</a>\n        <div class="error-code">Error Code: <span id="errorCode">${t=e,t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}</span></div>\n    </div>\n</body>\n</html>`;var t};_e.j=x("/error",{method:"GET",metadata:{...L,openapi:{description:"Displays an error page",responses:{200:{description:"Success",content:{"text/html":{schema:{type:"string",description:"The HTML content of the error page"}}}}}}}},(async e=>{const t=new URL(e.request?.url||"").searchParams.get("error")||"Unknown";return new Response(Q(t),{headers:{"Content-Type":"text/html"}})})),_e.k=x("/ok",{method:"GET",metadata:{...L,openapi:{description:"Check if the API is working",responses:{200:{description:"API is working",content:{"application/json":{schema:{type:"object",properties:{ok:{type:"boolean",description:"Indicates if the API is working"}},required:["ok"]}}}}}}}},(async e=>e.json({ok:!0}))),_e.p=x("/list-accounts",{method:"GET",use:[j],metadata:{openapi:{description:"List all accounts linked to the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"array",items:{type:"object",properties:{id:{type:"string"},provider:{type:"string"},createdAt:{type:"string",format:"date-time"},updatedAt:{type:"string",format:"date-time"}},accountId:{type:"string"},scopes:{type:"array",items:{type:"string"}}},required:["id","provider","createdAt","updatedAt","accountId","scopes"]}}}}}}}},(async e=>{const t=e.context.session,o=await e.context.internalAdapter.findAccounts(t.user.id);return e.json(o.map((e=>({id:e.id,provider:e.providerId,createdAt:e.createdAt,updatedAt:e.updatedAt,accountId:e.accountId,scopes:e.scope?.split(",")||[]}))))})),_e.q=x("/link-social",{method:"POST",requireHeaders:!0,body:e.z.object({callbackURL:e.z.string({description:"The URL to redirect to after the user has signed in"}).optional(),provider:e.z.enum(s.socialProviderList,{description:"The OAuth2 provider to use"}),scopes:e.z.array(e.z.string(),{description:"Additional scopes to request from the provider"}).optional()}),use:[j],metadata:{openapi:{description:"Link a social account to the user",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{url:{type:"string",description:"The authorization URL to redirect the user to"},redirect:{type:"boolean",description:"Indicates if the user should be redirected to the authorization URL"}},required:["url","redirect"]}}}}}}}},(async e=>{const t=e.context.session,s=e.context.socialProviders.find((t=>t.id===e.body.provider));if(!s)throw e.context.logger.error("Provider not found. Make sure to add the provider in your auth config",{provider:e.body.provider}),new o.APIError("NOT_FOUND",{message:D.PROVIDER_NOT_FOUND});const n=await(0,i.g)(e,{userId:t.user.id,email:t.user.email}),a=await s.createAuthorizationURL({state:n.state,codeVerifier:n.codeVerifier,redirectURI:`${e.context.baseURL}/callback/${s.id}`,scopes:e.body.scopes});return e.json({url:a.toString(),redirect:!0})})),_e.m=x("/unlink-account",{method:"POST",body:e.z.object({providerId:e.z.string(),accountId:e.z.string().optional()}),use:[V],metadata:{openapi:{description:"Unlink an account",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},(async e=>{const{providerId:t,accountId:s}=e.body,i=await e.context.internalAdapter.findAccounts(e.context.session.user.id);if(1===i.length&&!e.context.options.account?.accountLinking?.allowUnlinkingAll)throw new o.APIError("BAD_REQUEST",{message:D.FAILED_TO_UNLINK_LAST_ACCOUNT});const n=i.find((e=>s?e.accountId===s&&e.providerId===t:e.providerId===t));if(!n)throw new o.APIError("BAD_REQUEST",{message:D.ACCOUNT_NOT_FOUND});return await e.context.internalAdapter.deleteAccount(n.id),e.json({status:!0})})),_e.r=x("/refresh-token",{method:"POST",body:e.z.object({providerId:e.z.string({description:"The provider ID for the OAuth provider"}),accountId:e.z.string({description:"The account ID associated with the refresh token"}).optional(),userId:e.z.string({description:"The user ID associated with the account"}).optional()}),metadata:{openapi:{description:"Refresh the access token using a refresh token",responses:{200:{description:"Access token refreshed successfully",content:{"application/json":{schema:{type:"object",properties:{tokenType:{type:"string"},idToken:{type:"string"},accessToken:{type:"string"},refreshToken:{type:"string"},accessTokenExpiresAt:{type:"string",format:"date-time"},refreshTokenExpiresAt:{type:"string",format:"date-time"}}}}}},400:{description:"Invalid refresh token or provider configuration"}}}}},(async e=>{const{providerId:t,accountId:s,userId:i}=e.body,n=e.request,a=await N(e);if(n&&!a)throw e.error("UNAUTHORIZED");let c=a?.user?.id||i;if(!c)throw new o.APIError("BAD_REQUEST",{message:"Either userId or session is required"});const l=(await e.context.internalAdapter.findAccounts(c)).find((e=>s?e.id===s&&e.providerId===t:e.providerId===t));if(!l)throw new o.APIError("BAD_REQUEST",{message:"Account not found"});const p=e.context.socialProviders.find((e=>e.id===t));if(!p)throw new o.APIError("BAD_REQUEST",{message:`Provider ${t} not found.`});if(!p.refreshAccessToken)throw new o.APIError("BAD_REQUEST",{message:`Provider ${t} does not support token refreshing.`});try{const t=await p.refreshAccessToken(l.refreshToken);return await e.context.internalAdapter.updateAccount(l.id,{accessToken:t.accessToken,accessTokenExpiresAt:t.accessTokenExpiresAt,refreshToken:t.refreshToken,refreshTokenExpiresAt:t.refreshTokenExpiresAt}),e.json(t)}catch(e){throw new o.APIError("BAD_REQUEST",{message:"Failed to refresh access token",cause:e})}}))}),6980,[3739,6981,6977,6987,7092,7094,7093,6986,6982,7095,7074,7075,7078,7080,6983,6988,7082,7090,6985,7086,7091,7096,910,6984,908,7097,7098,909,6996,7099]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.createCookieGetter=f,e.deleteSessionCookie=function(o,t){o.setCookie(o.context.authCookies.sessionToken.name,"",{...o.context.authCookies.sessionToken.options,maxAge:0}),o.setCookie(o.context.authCookies.sessionData.name,"",{...o.context.authCookies.sessionData.options,maxAge:0}),t||o.setCookie(o.context.authCookies.dontRememberToken.name,"",{...o.context.authCookies.dontRememberToken.options,maxAge:0})},e.getCookieCache=void 0,e.getCookies=function(o){const t=f(o),s=o.session?.expiresIn||k(7,"d").toSeconds(),n=t("session_token",{maxAge:s}),c=t("session_data",{maxAge:o.session?.cookieCache?.maxAge||300}),u=t("dont_remember");return{sessionToken:{name:n.name,options:n.attributes},sessionData:{name:c.name,options:c.attributes},dontRememberToken:{name:u.name,options:u.attributes}}},e.getSessionCookie=void 0,e.parseCookies=M,e.parseSetCookieHeader=p,e.setCookieCache=x,e.setCookieToHeader=function(o){return t=>{const s=t.response.headers.get("set-cookie");if(!s)return;const n=new Map;(o.get("cookie")||"").split(";").forEach((o=>{const[t,...s]=o.trim().split("=");t&&s.length>0&&n.set(t,s.join("="))}));s.split(",").forEach((o=>{p(o).forEach(((o,t)=>{n.set(t,o.value)}))}));const c=Array.from(n.entries()).map((([o,t])=>`${o}=${t}`)).join("; ");o.set("cookie",c)}},e.setSessionCookie=async function(o,t,s,n){const c=await o.getSignedCookie(o.context.authCookies.dontRememberToken.name,o.context.secret);s=void 0!==s?s:!!c;const u=o.context.authCookies.sessionToken.options,l=s?void 0:o.context.sessionConfig.expiresIn;await o.setSignedCookie(o.context.authCookies.sessionToken.name,t.session.token,o.context.secret,{...u,maxAge:l,...n}),s&&await o.setSignedCookie(o.context.authCookies.dontRememberToken.name,"true",o.context.secret,o.context.authCookies.dontRememberToken.options);await x(o,t),o.context.setNewSession(t),o.context.options.secondaryStorage&&await(o.context.secondaryStorage?.set(t.session.token,JSON.stringify({user:t.user,session:t.session}),Math.floor((new Date(t.session.expiresAt).getTime()-Date.now())/1e3)))};var o=r(d[0]),t=r(d[1]),s=r(d[2]),n=r(d[3]),c=r(d[4]),u=r(d[5]),l=r(d[6]);const k=(o,t)=>{const s={t:`${o}${t}`,value:o,tFormat:t,toMilliseconds:()=>{switch(t){case"ms":return o;case"s":return 1e3*o;case"m":return 1e3*o*60;case"h":return 1e3*o*60*60;case"d":return 1e3*o*60*60*24;case"w":return 1e3*o*60*60*24*7;case"y":return 1e3*o*60*60*24*365}},toSeconds:()=>s.toMilliseconds()/1e3,toMinutes:()=>s.toSeconds()/60,toHours:()=>s.toMinutes()/60,toDays:()=>s.toHours()/24,toWeeks:()=>s.toDays()/7,toYears:()=>s.toDays()/365,getDate:()=>new Date(Date.now()+s.toMilliseconds()),add:o=>{const t="string"==typeof o?h(o).toMilliseconds():o.toMilliseconds();return k(s.toMilliseconds()+t,"ms")},subtract:o=>{const t="string"==typeof o?h(o).toMilliseconds():o.toMilliseconds();return k(s.toMilliseconds()-t,"ms")},multiply:o=>k(s.toMilliseconds()*o,"ms"),divide:o=>k(s.toMilliseconds()/o,"ms"),equals:o=>{const t="string"==typeof o?h(o).toMilliseconds():o.toMilliseconds();return s.toMilliseconds()===t},lessThan:o=>{const t="string"==typeof o?h(o).toMilliseconds():o.toMilliseconds();return s.toMilliseconds()<t},greaterThan:o=>{const t="string"==typeof o?h(o).toMilliseconds():o.toMilliseconds();return s.toMilliseconds()>t},format:o=>{const t=s.getDate();return o.replace(/YYYY|MM|DD|HH|mm|ss/g,(o=>{switch(o){case"YYYY":return t.getFullYear().toString();case"MM":return(t.getMonth()+1).toString().padStart(2,"0");case"DD":return t.getDate().toString().padStart(2,"0");case"HH":return t.getHours().toString().padStart(2,"0");case"mm":return t.getMinutes().toString().padStart(2,"0");case"ss":return t.getSeconds().toString().padStart(2,"0");default:return o}}))},fromNow:()=>{const o=s.toMilliseconds();return o<0?s.ago():o<1e3?"in a few seconds":o<6e4?`in ${Math.round(o/1e3)} seconds`:o<36e5?`in ${Math.round(o/6e4)} minutes`:o<864e5?`in ${Math.round(o/36e5)} hours`:o<6048e5?`in ${Math.round(o/864e5)} days`:o<26298e5?`in ${Math.round(o/6048e5)} weeks`:o<315576e5?`in ${Math.round(o/26298e5)} months`:`in ${Math.round(o/315576e5)} years`},ago:()=>{const o=-s.toMilliseconds();return o<0?s.fromNow():o<1e3?"a few seconds ago":o<6e4?`${Math.round(o/1e3)} seconds ago`:o<36e5?`${Math.round(o/6e4)} minutes ago`:o<864e5?`${Math.round(o/36e5)} hours ago`:o<6048e5?`${Math.round(o/864e5)} days ago`:o<26298e5?`${Math.round(o/6048e5)} weeks ago`:o<315576e5?`${Math.round(o/26298e5)} months ago`:`${Math.round(o/315576e5)} years ago`}};return s},h=o=>{const t=o.match(/^(\d+)(ms|s|m|h|d|w|y)$/);if(!t)throw new Error("Invalid time format");return k(parseInt(t[1]),t[2])};function p(o){const t=new Map;return o.split(", ").forEach((o=>{const s=o.split(";").map((o=>o.trim())),[n,...c]=s,[u,...l]=n.split("="),k=l.join("=");if(!u||void 0===k)return;const h={value:k};c.forEach((o=>{const[t,...s]=o.split("="),n=s.join("="),c=t.trim().toLowerCase();switch(c){case"max-age":h["max-age"]=n?parseInt(n.trim(),10):void 0;break;case"expires":h.expires=n?new Date(n.trim()):void 0;break;case"domain":h.domain=n?n.trim():void 0;break;case"path":h.path=n?n.trim():void 0;break;case"secure":h.secure=!0;break;case"httponly":h.httponly=!0;break;case"samesite":h.samesite=n?n.trim().toLowerCase():void 0;break;default:h[c]=!n||n.trim()}})),t.set(u,h)})),t}function f(t){const n=(void 0!==t.advanced?.useSecureCookies?t.advanced?.useSecureCookies:void 0!==t.baseURL?!!t.baseURL.startsWith("https://"):s.a)?"__Secure-":"",c=!!t.advanced?.crossSubDomainCookies?.enabled,u=c?t.advanced?.crossSubDomainCookies?.domain||(t.baseURL?new URL(t.baseURL).hostname:void 0):void 0;if(c&&!u)throw new o.B("baseURL is required when crossSubdomainCookies are enabled");return function(o,s={}){const l=t.advanced?.cookiePrefix||"better-auth",k=t.advanced?.cookies?.[o]?.name||`${l}.${o}`,h=t.advanced?.cookies?.[o]?.attributes;return{name:`${n}${k}`,attributes:{secure:!!n,sameSite:"lax",path:"/",httpOnly:!0,...c?{domain:u}:{},...t.advanced?.defaultCookieAttributes,...s,...h}}}}async function x(s,u){const l=s.context.options.session?.cookieCache?.enabled;if(l){const l={session:Object.entries(u.session).reduce(((o,[t,n])=>{const c=s.context.options.session?.additionalFields?.[t];return c&&!1===c.returned||(o[t]=n),o}),{}),user:u.user},k=n.base64Url.encode(JSON.stringify({session:l,expiresAt:(0,t.g)(s.context.authCookies.sessionData.options.maxAge||60,"sec").getTime(),signature:await(0,c.createHMAC)("SHA-256","base64urlnopad").sign(s.context.secret,JSON.stringify({...l,expiresAt:(0,t.g)(s.context.authCookies.sessionData.options.maxAge||60,"sec").getTime()}))}),{padding:!1});if(k.length>4093)throw new o.B("Session data is too large to store in the cookie. Please disable session cookie caching or reduce the size of the session data");s.setCookie(s.context.authCookies.sessionData.name,k,s.context.authCookies.sessionData.options)}}function M(o){const t=o.split("; "),s=new Map;return t.forEach((o=>{const[t,n]=o.split("=");s.set(t,n)})),s}e.getSessionCookie=(o,t)=>{t?.cookiePrefix&&(t.cookieName?t.cookiePrefix=`${t.cookiePrefix}-`:t.cookiePrefix=`${t.cookiePrefix}.`);const s="headers"in o?o.headers:o,n=o instanceof Request?o:void 0;(0,l.a)(n?.url,t?.path,n);const c=s.get("cookie");if(!c)return null;const{cookieName:u="session_token",cookiePrefix:k="better-auth."}=t||{},h=`${k}${u}`,p=`__Secure-${h}`,f=M(c),x=f.get(h)||f.get(p);return x||null};e.getCookieCache=(o,t)=>{const n=(o instanceof Headers?o:o.headers).get("cookie");if(!n)return null;const{cookieName:c="session_data",cookiePrefix:l="better-auth"}=t||{},k=s.a?`__Secure-${l}.${c}`:`${l}.${c}`,h=M(n).get(k);return h?(0,u.s)(h):null}}),6981,[911,6982,910,6983,6984,6986,909]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.g=void 0;e.g=(n,o="ms")=>new Date(Date.now()+("sec"===o?1e3*n:n))}),6982,[]);
__d((function(g,r,_i,a,m,e,d){function n(n){return n?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"}function t(n,t,o){let c="",s=0,i=0;for(const o of n)for(s=s<<8|o,i+=8;i>=6;)i-=6,c+=t[s>>i&63];if(i>0&&(c+=t[s<<6-i&63]),o){const n=(4-c.length%4)%4;c+="=".repeat(n)}return c}function o(n,t){const o=new Map;for(let n=0;n<t.length;n++)o.set(t[n],n);const c=[];let s=0,i=0;for(const t of n){if("="===t)break;const n=o.get(t);if(void 0===n)throw new Error(`Invalid Base64 character: ${t}`);s=s<<6|n,i+=6,i>=8&&(i-=8,c.push(s>>i&255))}return Uint8Array.from(c)}Object.defineProperty(e,"__esModule",{value:!0}),e.base64Url=e.base64=void 0;e.base64={encode(o,c={}){const s=n(!1);return t("string"==typeof o?(new TextEncoder).encode(o):new Uint8Array(o),s,c.padding??!0)},decode(t){"string"!=typeof t&&(t=(new TextDecoder).decode(t));const c=t.includes("-")||t.includes("_");return o(t,n(c))}},e.base64Url={encode(o,c={}){const s=n(!0);return t("string"==typeof o?(new TextEncoder).encode(o):new Uint8Array(o),s,c.padding??!0)},decode(t){const c=t.includes("-")||t.includes("_");return o(t,n(c))}}}),6983,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.createHMAC=void 0;var n=r(d[0]),t=r(d[1]),o=r(d[2]);e.createHMAC=(s="SHA-256",c="none")=>{const y={importKey:async(t,o)=>n.subtle.importKey("raw","string"==typeof t?(new TextEncoder).encode(t):t,{name:"HMAC",hash:{name:s}},!1,[o]),sign:async(s,p)=>{"string"==typeof s&&(s=await y.importKey(s,"sign"));const b=await n.subtle.sign("HMAC",s,"string"==typeof p?(new TextEncoder).encode(p):p);return"hex"===c?t.hex.encode(b):"base64"===c||"base64url"===c||"base64urlnopad"===c?o.base64Url.encode(b,{padding:"base64urlnopad"!==c}):b},verify:async(s,p,b)=>("string"==typeof s&&(s=await y.importKey(s,"verify")),"hex"===c&&(b=t.hex.decode(b)),"base64"!==c&&"base64url"!==c&&"base64urlnopad"!==c||(b=await o.base64.decode(b)),n.subtle.verify("HMAC",s,"string"==typeof b?(new TextEncoder).encode(b):b,"string"==typeof p?(new TextEncoder).encode(p):p))};return y}}),6984,[6978,6985,6983]);
__d((function(g,r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.hex=void 0;e.hex={encode:t=>{if("string"==typeof t&&(t=(new TextEncoder).encode(t)),0===t.byteLength)return"";const n=new Uint8Array(t);let o="";for(const t of n)o+=t.toString(16).padStart(2,"0");return o},decode:t=>{if(!t)return"";if("string"==typeof t){if(t.length%2!=0)throw new Error("Invalid hexadecimal string");if(!new RegExp("^[0123456789abcdef]+$").test(t))throw new Error("Invalid hexadecimal string");const n=new Uint8Array(t.length/2);for(let o=0;o<t.length;o+=2)n[o/2]=parseInt(t.slice(o,o+2),16);return(new TextDecoder).decode(n)}return(new TextDecoder).decode(t)}}}),6985,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.s=function(t){try{return JSON.parse(t,(function(t,n){if("string"==typeof n&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(?:\.\d+)?Z$/.test(n)){const t=new Date(n);if(!isNaN(t.getTime()))return t}return n}))}catch{return null}}}),6986,[]);
__d((function(g,r,i,a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.zoom=_e.vk=_e.twitter=_e.twitch=_e.tiktok=_e.spotify=_e.socialProviders=_e.socialProviderList=_e.roblox=_e.reddit=_e.microsoft=_e.linkedin=_e.kick=_e.google=_e.gitlab=_e.github=_e.getApplePublicKey=_e.facebook=_e.dropbox=_e.discord=_e.apple=_e.SocialProviderListEnum=_e.LANG=void 0;var e=r(d[0]),t=r(d[1]),o=r(d[2]),n=r(d[3]);r(d[4]);var s=r(d[5]),c=r(d[6]);r(d[7]),r(d[8]),r(d[9]),r(d[10]),r(d[11]),r(d[12]),r(d[13]),r(d[14]);var p=r(d[15]),l=r(d[16]);r(d[17]),r(d[18]);const u=e=>({id:"apple",name:"Apple",async createAuthorizationURL({state:t,scopes:o,redirectURI:s}){const c=e.disableDefaultScope?[]:["email","name"];e.scope&&c.push(...e.scope),o&&c.push(...o);return await(0,n.c)({id:"apple",options:e,authorizationEndpoint:"https://appleid.apple.com/auth/authorize",scopes:c,state:t,redirectURI:s,responseMode:"form_post"})},validateAuthorizationCode:async({code:t,codeVerifier:o,redirectURI:s})=>(0,n.v)({code:t,codeVerifier:o,redirectURI:s,options:e,tokenEndpoint:"https://appleid.apple.com/auth/token"}),async verifyIdToken(t,n){if(e.disableIdTokenSignIn)return!1;if(e.verifyIdToken)return e.verifyIdToken(t,n);const s=(0,o.decodeProtectedHeader)(t),{kid:c,alg:p}=s;if(!c||!p)return!1;const l=await h(c),{payload:u}=await(0,o.jwtVerify)(t,l,{algorithms:[p],issuer:"https://appleid.apple.com",audience:e.appBundleIdentifier||e.clientId,maxTokenAge:"1h"});return["email_verified","is_private_email"].forEach((e=>{void 0!==u[e]&&(u[e]=Boolean(u[e]))})),(!n||u.nonce===n)&&!!u},refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>(0,n.r)({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://appleid.apple.com/auth/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);if(!t.idToken)return null;const n=(0,o.decodeJwt)(t.idToken);if(!n)return null;const s=t.user?`${t.user.name?.firstName} ${t.user.name?.lastName}`:n.name||n.email,c=await(e.mapProfileToUser?.(n));return{user:{id:n.sub,name:s,emailVerified:!1,email:n.email,...c},data:n}},options:e});_e.apple=u;const h=async n=>{const{data:s}=await(0,e.betterFetch)("https://appleid.apple.com/auth/keys");if(!s?.keys)throw new t.APIError("BAD_REQUEST",{message:"Keys not found"});const c=s.keys.find((e=>e.kid===n));if(!c)throw new Error(`JWK with kid ${n} not found`);return await(0,o.importJWK)(c,c.alg)};_e.getApplePublicKey=h;const f=t=>({id:"discord",name:"Discord",createAuthorizationURL({state:e,scopes:o,redirectURI:n}){const s=t.disableDefaultScope?[]:["identify","email"];return o&&s.push(...o),t.scope&&s.push(...t.scope),new URL(`https://discord.com/api/oauth2/authorize?scope=${s.join("+")}&response_type=code&client_id=${t.clientId}&redirect_uri=${encodeURIComponent(t.redirectURI||n)}&state=${e}&prompt=${t.prompt||"none"}`)},validateAuthorizationCode:async({code:e,redirectURI:o})=>(0,n.v)({code:e,redirectURI:o,options:t,tokenEndpoint:"https://discord.com/api/oauth2/token"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>(0,n.r)({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://discord.com/api/oauth2/token"}),async getUserInfo(o){if(t.getUserInfo)return t.getUserInfo(o);const{data:n,error:s}=await(0,e.betterFetch)("https://discord.com/api/users/@me",{headers:{authorization:`Bearer ${o.accessToken}`}});if(s)return null;if(null===n.avatar){const e="0"===n.discriminator?Number(BigInt(n.id)>>BigInt(22))%6:parseInt(n.discriminator)%5;n.image_url=`https://cdn.discordapp.com/embed/avatars/${e}.png`}else{const e=n.avatar.startsWith("a_")?"gif":"png";n.image_url=`https://cdn.discordapp.com/avatars/${n.id}/${n.avatar}.${e}`}const c=await(t.mapProfileToUser?.(n));return{user:{id:n.id,name:n.global_name||n.username||"",email:n.email,emailVerified:n.verified,image:n.image_url,...c},data:n}},options:t});_e.discord=f;const k=t=>({id:"facebook",name:"Facebook",async createAuthorizationURL({state:e,scopes:o,redirectURI:s,loginHint:c}){const p=t.disableDefaultScope?[]:["email","public_profile"];return t.scope&&p.push(...t.scope),o&&p.push(...o),await(0,n.c)({id:"facebook",options:t,authorizationEndpoint:"https://www.facebook.com/v21.0/dialog/oauth",scopes:p,state:e,redirectURI:s,loginHint:c,additionalParams:t.configId?{config_id:t.configId}:{}})},validateAuthorizationCode:async({code:e,redirectURI:o})=>(0,n.v)({code:e,redirectURI:o,options:t,tokenEndpoint:"https://graph.facebook.com/oauth/access_token"}),async verifyIdToken(e,n){if(t.disableIdTokenSignIn)return!1;if(t.verifyIdToken)return t.verifyIdToken(e,n);if(e.split(".").length)try{const{payload:s}=await(0,o.jwtVerify)(e,(0,o.createRemoteJWKSet)(new URL("https://www.facebook.com/.well-known/oauth/openid/jwks")),{algorithms:["RS256"],audience:t.clientId,issuer:"https://www.facebook.com"});return(!n||s.nonce===n)&&!!s}catch(e){return!1}return!0},refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>(0,n.r)({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://graph.facebook.com/v18.0/oauth/access_token"}),async getUserInfo(n){if(t.getUserInfo)return t.getUserInfo(n);if(n.idToken){const e=(0,o.decodeJwt)(n.idToken),s={id:e.sub,name:e.name,email:e.email,picture:{data:{url:e.picture,height:100,width:100,is_silhouette:!1}}},c=await(t.mapProfileToUser?.({...s,email_verified:!0}));return{user:{...s,emailVerified:!0,...c},data:e}}const s=["id","name","email","picture",...t?.fields||[]],{data:c,error:p}=await(0,e.betterFetch)("https://graph.facebook.com/me?fields="+s.join(","),{auth:{type:"Bearer",token:n.accessToken}});if(p)return null;const l=await(t.mapProfileToUser?.(c));return{user:{id:c.id,name:c.name,email:c.email,image:c.picture.data.url,emailVerified:c.email_verified,...l},data:c}},options:t});_e.facebook=k;const I=t=>({id:"github",name:"GitHub",createAuthorizationURL({state:e,scopes:o,loginHint:s,redirectURI:c}){const p=t.disableDefaultScope?[]:["read:user","user:email"];return t.scope&&p.push(...t.scope),o&&p.push(...o),(0,n.c)({id:"github",options:t,authorizationEndpoint:"https://github.com/login/oauth/authorize",scopes:p,state:e,redirectURI:c,loginHint:s})},validateAuthorizationCode:async({code:e,redirectURI:o})=>(0,n.v)({code:e,redirectURI:o,options:t,tokenEndpoint:"https://github.com/login/oauth/access_token"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>(0,n.r)({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://github.com/login/oauth/token"}),async getUserInfo(o){if(t.getUserInfo)return t.getUserInfo(o);const{data:n,error:s}=await(0,e.betterFetch)("https://api.github.com/user",{headers:{"User-Agent":"better-auth",authorization:`Bearer ${o.accessToken}`}});if(s)return null;const{data:c}=await(0,e.betterFetch)("https://api.github.com/user/emails",{headers:{Authorization:`Bearer ${o.accessToken}`,"User-Agent":"better-auth"}});!n.email&&c&&(n.email=(c.find((e=>e.primary))??c[0])?.email);const p=c?.find((e=>e.email===n.email))?.verified??!1,l=await(t.mapProfileToUser?.(n));return{user:{id:n.id.toString(),name:n.name||n.login,email:n.email,image:n.avatar_url,emailVerified:p,...l},data:n}},options:t});_e.github=I;const U=t=>({id:"google",name:"Google",async createAuthorizationURL({state:e,scopes:o,codeVerifier:s,redirectURI:c,loginHint:u,display:h}){if(!t.clientId||!t.clientSecret)throw l.l.error("Client Id and Client Secret is required for Google. Make sure to provide them in the options."),new p.B("CLIENT_ID_AND_SECRET_REQUIRED");if(!s)throw new p.B("codeVerifier is required for Google");const f=t.disableDefaultScope?[]:["email","profile","openid"];t.scope&&f.push(...t.scope),o&&f.push(...o);return await(0,n.c)({id:"google",options:t,authorizationEndpoint:"https://accounts.google.com/o/oauth2/auth",scopes:f,state:e,codeVerifier:s,redirectURI:c,prompt:t.prompt,accessType:t.accessType,display:h||t.display,loginHint:u,hd:t.hd})},validateAuthorizationCode:async({code:e,codeVerifier:o,redirectURI:s})=>(0,n.v)({code:e,codeVerifier:o,redirectURI:s,options:t,tokenEndpoint:"https://oauth2.googleapis.com/token"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>(0,n.r)({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://www.googleapis.com/oauth2/v4/token"}),async verifyIdToken(o,n){if(t.disableIdTokenSignIn)return!1;if(t.verifyIdToken)return t.verifyIdToken(o,n);const s=`https://www.googleapis.com/oauth2/v3/tokeninfo?id_token=${o}`,{data:c}=await(0,e.betterFetch)(s);if(!c)return!1;return c.aud===t.clientId&&("https://accounts.google.com"===c.iss||"accounts.google.com"===c.iss)},async getUserInfo(e){if(t.getUserInfo)return t.getUserInfo(e);if(!e.idToken)return null;const n=(0,o.decodeJwt)(e.idToken),s=await(t.mapProfileToUser?.(n));return{user:{id:n.sub,name:n.name,email:n.email,image:n.picture,emailVerified:n.email_verified,...s},data:n}},options:t});_e.google=U;const y=t=>{const c=t.tenantId||"common",p=`https://login.microsoftonline.com/${c}/oauth2/v2.0/authorize`,u=`https://login.microsoftonline.com/${c}/oauth2/v2.0/token`;return{id:"microsoft",name:"Microsoft EntraID",createAuthorizationURL(e){const o=t.disableDefaultScope?[]:["openid","profile","email","User.Read"];return t.scope&&o.push(...t.scope),e.scopes&&o.push(...o),(0,n.c)({id:"microsoft",options:t,authorizationEndpoint:p,state:e.state,codeVerifier:e.codeVerifier,scopes:o,redirectURI:e.redirectURI,prompt:t.prompt})},validateAuthorizationCode:({code:e,codeVerifier:o,redirectURI:s})=>(0,n.v)({code:e,codeVerifier:o,redirectURI:s,options:t,tokenEndpoint:u}),async getUserInfo(n){if(t.getUserInfo)return t.getUserInfo(n);if(!n.idToken)return null;const c=(0,o.decodeJwt)(n.idToken),p=t.profilePhotoSize||48;await(0,e.betterFetch)(`https://graph.microsoft.com/v1.0/me/photos/${p}x${p}/$value`,{headers:{Authorization:`Bearer ${n.accessToken}`},async onResponse(e){if(!t.disableProfilePhoto&&e.response.ok)try{const t=e.response.clone(),o=await t.arrayBuffer(),n=s.base64.encode(o);c.picture=`data:image/jpeg;base64, ${n}`}catch(e){l.l.error(e&&"object"==typeof e&&"name"in e?e.name:"",e)}}});const u=await(t.mapProfileToUser?.(c));return{user:{id:c.sub,name:c.name,email:c.email,image:c.picture,emailVerified:!0,...u},data:c}},options:t}};_e.microsoft=y;const w=t=>({id:"spotify",name:"Spotify",createAuthorizationURL({state:e,scopes:o,codeVerifier:s,redirectURI:c}){const p=t.disableDefaultScope?[]:["user-read-email"];return t.scope&&p.push(...t.scope),o&&p.push(...o),(0,n.c)({id:"spotify",options:t,authorizationEndpoint:"https://accounts.spotify.com/authorize",scopes:p,state:e,codeVerifier:s,redirectURI:c})},validateAuthorizationCode:async({code:e,codeVerifier:o,redirectURI:s})=>(0,n.v)({code:e,codeVerifier:o,redirectURI:s,options:t,tokenEndpoint:"https://accounts.spotify.com/api/token"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>(0,n.r)({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://accounts.spotify.com/api/token"}),async getUserInfo(o){if(t.getUserInfo)return t.getUserInfo(o);const{data:n,error:s}=await(0,e.betterFetch)("https://api.spotify.com/v1/me",{method:"GET",headers:{Authorization:`Bearer ${o.accessToken}`}});if(s)return null;const c=await(t.mapProfileToUser?.(n));return{user:{id:n.id,name:n.display_name,email:n.email,image:n.images[0]?.url,emailVerified:!1,...c},data:n}},options:t});_e.spotify=w;const T=e=>({id:"twitch",name:"Twitch",createAuthorizationURL({state:t,scopes:o,redirectURI:s}){const c=e.disableDefaultScope?[]:["user:read:email","openid"];return e.scope&&c.push(...e.scope),o&&c.push(...o),(0,n.c)({id:"twitch",redirectURI:s,options:e,authorizationEndpoint:"https://id.twitch.tv/oauth2/authorize",scopes:c,state:t,claims:e.claims||["email","email_verified","preferred_username","picture"]})},validateAuthorizationCode:async({code:t,redirectURI:o})=>(0,n.v)({code:t,redirectURI:o,options:e,tokenEndpoint:"https://id.twitch.tv/oauth2/token"}),refreshAccessToken:e.refreshAccessToken?e.refreshAccessToken:async t=>(0,n.r)({refreshToken:t,options:{clientId:e.clientId,clientKey:e.clientKey,clientSecret:e.clientSecret},tokenEndpoint:"https://id.twitch.tv/oauth2/token"}),async getUserInfo(t){if(e.getUserInfo)return e.getUserInfo(t);const n=t.idToken;if(!n)return l.l.error("No idToken found in token"),null;const s=(0,o.decodeJwt)(n),c=await(e.mapProfileToUser?.(s));return{user:{id:s.sub,name:s.preferred_username,email:s.email,image:s.picture,emailVerified:!1,...c},data:s}},options:e});_e.twitch=T;const R=t=>({id:"twitter",name:"Twitter",createAuthorizationURL(e){const o=t.disableDefaultScope?[]:["users.read","tweet.read","offline.access","users.email"];return t.scope&&o.push(...t.scope),e.scopes&&o.push(...e.scopes),(0,n.c)({id:"twitter",options:t,authorizationEndpoint:"https://x.com/i/oauth2/authorize",scopes:o,state:e.state,codeVerifier:e.codeVerifier,redirectURI:e.redirectURI})},validateAuthorizationCode:async({code:e,codeVerifier:o,redirectURI:s})=>(0,n.v)({code:e,codeVerifier:o,authentication:"basic",redirectURI:s,options:t,tokenEndpoint:"https://api.x.com/2/oauth2/token"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>(0,n.r)({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://api.twitter.com/2/oauth2/token"}),async getUserInfo(o){if(t.getUserInfo)return t.getUserInfo(o);const{data:n,error:s}=await(0,e.betterFetch)("https://api.x.com/2/users/me?user.fields=profile_image_url",{method:"GET",headers:{Authorization:`Bearer ${o.accessToken}`}});if(s)return null;const{data:c,error:p}=await(0,e.betterFetch)("https://api.x.com/2/users/me?user.fields=confirmed_email",{method:"GET",headers:{Authorization:`Bearer ${o.accessToken}`}});!p&&c?.data?.confirmed_email&&(n.data.email=c.data.confirmed_email);const l=await(t.mapProfileToUser?.(n));return{user:{id:n.data.id,name:n.data.name,email:n.data.email||n.data.username||null,image:n.data.profile_image_url,emailVerified:n.data.verified||!1,...l},data:n}},options:t});_e.twitter=R;const v=t=>({id:"dropbox",name:"Dropbox",createAuthorizationURL:async({state:e,scopes:o,codeVerifier:s,redirectURI:c})=>{const p=t.disableDefaultScope?[]:["account_info.read"];return t.scope&&p.push(...t.scope),o&&p.push(...o),await(0,n.c)({id:"dropbox",options:t,authorizationEndpoint:"https://www.dropbox.com/oauth2/authorize",scopes:p,state:e,redirectURI:c,codeVerifier:s})},validateAuthorizationCode:async({code:e,codeVerifier:o,redirectURI:s})=>await(0,n.v)({code:e,codeVerifier:o,redirectURI:s,options:t,tokenEndpoint:"https://api.dropboxapi.com/oauth2/token"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>(0,n.r)({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://api.dropbox.com/oauth2/token"}),async getUserInfo(o){if(t.getUserInfo)return t.getUserInfo(o);const{data:n,error:s}=await(0,e.betterFetch)("https://api.dropboxapi.com/2/users/get_current_account",{method:"POST",headers:{Authorization:`Bearer ${o.accessToken}`}});if(s)return null;const c=await(t.mapProfileToUser?.(n));return{user:{id:n.account_id,name:n.name?.display_name,email:n.email,emailVerified:n.email_verified||!1,image:n.profile_photo_url,...c},data:n}},options:t});_e.dropbox=v;const b=t=>{const o="https://www.linkedin.com/oauth/v2/accessToken";return{id:"linkedin",name:"Linkedin",createAuthorizationURL:async({state:e,scopes:o,redirectURI:s,loginHint:c})=>{const p=t.disableDefaultScope?[]:["profile","email","openid"];return t.scope&&p.push(...t.scope),o&&p.push(...o),await(0,n.c)({id:"linkedin",options:t,authorizationEndpoint:"https://www.linkedin.com/oauth/v2/authorization",scopes:p,state:e,loginHint:c,redirectURI:s})},validateAuthorizationCode:async({code:e,redirectURI:s})=>await(0,n.v)({code:e,redirectURI:s,options:t,tokenEndpoint:o}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>(0,n.r)({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:o}),async getUserInfo(o){if(t.getUserInfo)return t.getUserInfo(o);const{data:n,error:s}=await(0,e.betterFetch)("https://api.linkedin.com/v2/userinfo",{method:"GET",headers:{Authorization:`Bearer ${o.accessToken}`}});if(s)return null;const c=await(t.mapProfileToUser?.(n));return{user:{id:n.sub,name:n.name,email:n.email,emailVerified:n.email_verified||!1,image:n.picture,...c},data:n}},options:t}};_e.linkedin=b;const A=(e="")=>e.split("://").map((e=>e.replace(/\/{2,}/g,"/"))).join("://"),_=e=>{let t=e||"https://gitlab.com";return{authorizationEndpoint:A(`${t}/oauth/authorize`),tokenEndpoint:A(`${t}/oauth/token`),userinfoEndpoint:A(`${t}/api/v4/user`)}},z=t=>{const{authorizationEndpoint:o,tokenEndpoint:s,userinfoEndpoint:c}=_(t.issuer),p="gitlab";return{id:p,name:"Gitlab",createAuthorizationURL:async({state:e,scopes:s,codeVerifier:c,loginHint:l,redirectURI:u})=>{const h=t.disableDefaultScope?[]:["read_user"];return t.scope&&h.push(...t.scope),s&&h.push(...s),await(0,n.c)({id:p,options:t,authorizationEndpoint:o,scopes:h,state:e,redirectURI:u,codeVerifier:c,loginHint:l})},validateAuthorizationCode:async({code:e,redirectURI:o,codeVerifier:c})=>(0,n.v)({code:e,redirectURI:o,options:t,codeVerifier:c,tokenEndpoint:s}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>(0,n.r)({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://gitlab.com/oauth/token"}),async getUserInfo(o){if(t.getUserInfo)return t.getUserInfo(o);const{data:n,error:s}=await(0,e.betterFetch)(c,{headers:{authorization:`Bearer ${o.accessToken}`}});if(s||"active"!==n.state||n.locked)return null;const p=await(t.mapProfileToUser?.(n));return{user:{id:n.id.toString(),name:n.name??n.username,email:n.email,image:n.avatar_url,emailVerified:!0,...p},data:n}},options:t}};_e.gitlab=z;const S=t=>({id:"tiktok",name:"TikTok",createAuthorizationURL({state:e,scopes:o,redirectURI:n}){const s=t.disableDefaultScope?[]:["user.info.profile"];return t.scope&&s.push(...t.scope),o&&s.push(...o),new URL(`https://www.tiktok.com/v2/auth/authorize?scope=${s.join(",")}&response_type=code&client_key=${t.clientKey}&client_secret=${t.clientSecret}&redirect_uri=${encodeURIComponent(t.redirectURI||n)}&state=${e}`)},validateAuthorizationCode:async({code:e,redirectURI:o})=>(0,n.v)({code:e,redirectURI:t.redirectURI||o,options:t,tokenEndpoint:"https://open.tiktokapis.com/v2/oauth/token/"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>(0,n.r)({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://open.tiktokapis.com/v2/oauth/token/"}),async getUserInfo(o){if(t.getUserInfo)return t.getUserInfo(o);const{data:n,error:s}=await(0,e.betterFetch)(`https://open.tiktokapis.com/v2/user/info/?fields=${["open_id","avatar_large_url","display_name","username"].join(",")}`,{headers:{authorization:`Bearer ${o.accessToken}`}});return s?null:{user:{email:n.data.user.email||n.data.user.username,id:n.data.user.open_id,name:n.data.user.display_name||n.data.user.username,image:n.data.user.avatar_large_url,emailVerified:!!n.data.user.email},data:n}},options:t});_e.tiktok=S;const E=t=>({id:"reddit",name:"Reddit",createAuthorizationURL({state:e,scopes:o,redirectURI:s}){const c=t.disableDefaultScope?[]:["identity"];return t.scope&&c.push(...t.scope),o&&c.push(...o),(0,n.c)({id:"reddit",options:t,authorizationEndpoint:"https://www.reddit.com/api/v1/authorize",scopes:c,state:e,redirectURI:s,duration:t.duration})},validateAuthorizationCode:async({code:o,redirectURI:c})=>{const p=new URLSearchParams({grant_type:"authorization_code",code:o,redirect_uri:t.redirectURI||c}),l={"content-type":"application/x-www-form-urlencoded",accept:"text/plain","user-agent":"better-auth",Authorization:`Basic ${s.base64.encode(`${t.clientId}:${t.clientSecret}`)}`},{data:u,error:h}=await(0,e.betterFetch)("https://www.reddit.com/api/v1/access_token",{method:"POST",headers:l,body:p.toString()});if(h)throw h;return(0,n.b)(u)},refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>(0,n.r)({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://www.reddit.com/api/v1/access_token"}),async getUserInfo(o){if(t.getUserInfo)return t.getUserInfo(o);const{data:n,error:s}=await(0,e.betterFetch)("https://oauth.reddit.com/api/v1/me",{headers:{Authorization:`Bearer ${o.accessToken}`,"User-Agent":"better-auth"}});if(s)return null;const c=await(t.mapProfileToUser?.(n));return{user:{id:n.id,name:n.name,email:n.oauth_client_id,emailVerified:n.has_verified_email,image:n.icon_img?.split("?")[0],...c},data:n}},options:t});_e.reddit=E;const V=t=>({id:"roblox",name:"Roblox",createAuthorizationURL({state:e,scopes:o,redirectURI:n}){const s=t.disableDefaultScope?[]:["openid","profile"];return t.scope&&s.push(...t.scope),o&&s.push(...o),new URL(`https://apis.roblox.com/oauth/v1/authorize?scope=${s.join("+")}&response_type=code&client_id=${t.clientId}&redirect_uri=${encodeURIComponent(t.redirectURI||n)}&state=${e}&prompt=${t.prompt||"select_account+consent"}`)},validateAuthorizationCode:async({code:e,redirectURI:o})=>(0,n.v)({code:e,redirectURI:t.redirectURI||o,options:t,tokenEndpoint:"https://apis.roblox.com/oauth/v1/token",authentication:"post"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>(0,n.r)({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://apis.roblox.com/oauth/v1/token"}),async getUserInfo(o){if(t.getUserInfo)return t.getUserInfo(o);const{data:n,error:s}=await(0,e.betterFetch)("https://apis.roblox.com/oauth/v1/userinfo",{headers:{authorization:`Bearer ${o.accessToken}`}});if(s)return null;const c=await(t.mapProfileToUser?.(n));return{user:{id:n.sub,name:n.nickname||n.preferred_username||"",image:n.picture,email:n.preferred_username||null,emailVerified:!0,...c},data:{...n}}},options:t});_e.roblox=V;var $=_e.LANG=(e=>(e[e.RUS=0]="RUS",e[e.UKR=1]="UKR",e[e.ENG=3]="ENG",e[e.SPA=4]="SPA",e[e.GERMAN=6]="GERMAN",e[e.POL=15]="POL",e[e.FRA=16]="FRA",e[e.TURKEY=82]="TURKEY",e))($||{});const K=t=>({id:"vk",name:"VK",async createAuthorizationURL({state:e,scopes:o,codeVerifier:s,redirectURI:c}){const p=t.disableDefaultScope?[]:["email","phone"];t.scope&&p.push(...t.scope),o&&p.push(...o);return(0,n.c)({id:"vk",options:t,authorizationEndpoint:"https://id.vk.com/authorize",scopes:p,state:e,redirectURI:c,codeVerifier:s})},validateAuthorizationCode:async({code:e,codeVerifier:o,redirectURI:s,deviceId:c})=>(0,n.v)({code:e,codeVerifier:o,redirectURI:t.redirectURI||s,options:t,deviceId:c,tokenEndpoint:"https://id.vk.com/oauth2/auth"}),refreshAccessToken:t.refreshAccessToken?t.refreshAccessToken:async e=>(0,n.r)({refreshToken:e,options:{clientId:t.clientId,clientKey:t.clientKey,clientSecret:t.clientSecret},tokenEndpoint:"https://id.vk.com/oauth2/auth"}),async getUserInfo(o){if(t.getUserInfo)return t.getUserInfo(o);if(!o.accessToken)return null;const n=new URLSearchParams({access_token:o.accessToken,client_id:t.clientId}).toString(),{data:s,error:c}=await(0,e.betterFetch)("https://id.vk.com/oauth2/user_info",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n});if(c)return null;if(!s.user.email)return null;const p=await(t.mapProfileToUser?.(s));return{user:{id:s.user.user_id,first_name:s.user.first_name,last_name:s.user.last_name,email:s.user.email,image:s.user.avatar,emailVerified:!!s.user.email,birthday:s.user.birthday,sex:s.user.sex,...p},data:s}},options:t});_e.vk=K;const P=t=>({id:"kick",name:"Kick",createAuthorizationURL({state:e,scopes:o,redirectURI:s,codeVerifier:c}){const p=t.disableDefaultScope?[]:["user:read"];return t.scope&&p.push(...t.scope),o&&p.push(...o),(0,n.c)({id:"kick",redirectURI:s,options:t,authorizationEndpoint:"https://id.kick.com/oauth/authorize",scopes:p,codeVerifier:c,state:e})},validateAuthorizationCode:async({code:e,redirectURI:o,codeVerifier:s})=>(0,n.v)({code:e,redirectURI:o,options:t,tokenEndpoint:"https://id.kick.com/oauth/token",codeVerifier:s}),async getUserInfo(o){if(t.getUserInfo)return t.getUserInfo(o);const{data:n,error:s}=await(0,e.betterFetch)("https://api.kick.com/public/v1/users",{method:"GET",headers:{Authorization:`Bearer ${o.accessToken}`}});if(s)return null;const c=n.data[0],p=await(t.mapProfileToUser?.(c));return{user:{id:c.user_id,name:c.name,email:c.email,image:c.profile_picture,emailVerified:!0,...p},data:c}},options:t});_e.kick=P;const L=t=>{const o={pkce:!0,...t};return{id:"zoom",name:"Zoom",createAuthorizationURL:async({state:e,redirectURI:t,codeVerifier:s})=>{const c=new URLSearchParams({response_type:"code",redirect_uri:o.redirectURI?o.redirectURI:t,client_id:o.clientId,state:e});if(o.pkce){const e=await(0,n.g)(s);c.set("code_challenge_method","S256"),c.set("code_challenge",e)}const p=new URL("https://zoom.us/oauth/authorize");return p.search=c.toString(),p},validateAuthorizationCode:async({code:e,redirectURI:t,codeVerifier:s})=>(0,n.v)({code:e,redirectURI:o.redirectURI||t,codeVerifier:s,options:o,tokenEndpoint:"https://zoom.us/oauth/token",authentication:"post"}),async getUserInfo(t){if(o.getUserInfo)return o.getUserInfo(t);const{data:n,error:s}=await(0,e.betterFetch)("https://api.zoom.us/v2/users/me",{headers:{authorization:`Bearer ${t.accessToken}`}});if(s)return null;const c=await(o.mapProfileToUser?.(n));return{user:{id:n.id,name:n.display_name,image:n.pic_url,email:n.email,emailVerified:Boolean(n.verified),...c},data:{...n}}}}};_e.zoom=L;const x=_e.socialProviders={apple:u,discord:f,facebook:k,github:I,microsoft:y,google:U,spotify:w,twitch:T,twitter:R,dropbox:v,kick:P,linkedin:b,gitlab:z,tiktok:S,reddit:E,roblox:V,vk:K,zoom:L},B=_e.socialProviderList=Object.keys(x);_e.SocialProviderListEnum=c.z.enum(B,{description:"OAuth2 provider to use"})}),6987,[908,6977,6988,7073,7074,6983,3739,7075,7078,7080,7082,7090,6985,7086,7091,911,7093,7092,6982]);
__d((function(g,_r,_i,_a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),Object.defineProperty(_e,"CompactEncrypt",{enumerable:!0,get:function(){return p.CompactEncrypt}}),Object.defineProperty(_e,"CompactSign",{enumerable:!0,get:function(){return l.CompactSign}}),Object.defineProperty(_e,"EmbeddedJWK",{enumerable:!0,get:function(){return S.EmbeddedJWK}}),Object.defineProperty(_e,"EncryptJWT",{enumerable:!0,get:function(){return O.EncryptJWT}}),Object.defineProperty(_e,"FlattenedEncrypt",{enumerable:!0,get:function(){return b.FlattenedEncrypt}}),Object.defineProperty(_e,"FlattenedSign",{enumerable:!0,get:function(){return y.FlattenedSign}}),Object.defineProperty(_e,"GeneralEncrypt",{enumerable:!0,get:function(){return u.GeneralEncrypt}}),Object.defineProperty(_e,"GeneralSign",{enumerable:!0,get:function(){return P.GeneralSign}}),Object.defineProperty(_e,"SignJWT",{enumerable:!0,get:function(){return j.SignJWT}}),Object.defineProperty(_e,"UnsecuredJWT",{enumerable:!0,get:function(){return W.UnsecuredJWT}}),_e.base64url=void 0,Object.defineProperty(_e,"calculateJwkThumbprint",{enumerable:!0,get:function(){return J.calculateJwkThumbprint}}),Object.defineProperty(_e,"calculateJwkThumbprintUri",{enumerable:!0,get:function(){return J.calculateJwkThumbprintUri}}),Object.defineProperty(_e,"compactDecrypt",{enumerable:!0,get:function(){return t.compactDecrypt}}),Object.defineProperty(_e,"compactVerify",{enumerable:!0,get:function(){return c.compactVerify}}),Object.defineProperty(_e,"createLocalJWKSet",{enumerable:!0,get:function(){return K.createLocalJWKSet}}),Object.defineProperty(_e,"createRemoteJWKSet",{enumerable:!0,get:function(){return w.createRemoteJWKSet}}),Object.defineProperty(_e,"cryptoRuntime",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(_e,"decodeJwt",{enumerable:!0,get:function(){return _.decodeJwt}}),Object.defineProperty(_e,"decodeProtectedHeader",{enumerable:!0,get:function(){return C.decodeProtectedHeader}}),_e.errors=void 0,Object.defineProperty(_e,"experimental_jwksCache",{enumerable:!0,get:function(){return w.experimental_jwksCache}}),Object.defineProperty(_e,"exportJWK",{enumerable:!0,get:function(){return s.exportJWK}}),Object.defineProperty(_e,"exportPKCS8",{enumerable:!0,get:function(){return s.exportPKCS8}}),Object.defineProperty(_e,"exportSPKI",{enumerable:!0,get:function(){return s.exportSPKI}}),Object.defineProperty(_e,"flattenedDecrypt",{enumerable:!0,get:function(){return r.flattenedDecrypt}}),Object.defineProperty(_e,"flattenedVerify",{enumerable:!0,get:function(){return o.flattenedVerify}}),Object.defineProperty(_e,"generalDecrypt",{enumerable:!0,get:function(){return n.generalDecrypt}}),Object.defineProperty(_e,"generalVerify",{enumerable:!0,get:function(){return i.generalVerify}}),Object.defineProperty(_e,"generateKeyPair",{enumerable:!0,get:function(){return h.generateKeyPair}}),Object.defineProperty(_e,"generateSecret",{enumerable:!0,get:function(){return D.generateSecret}}),Object.defineProperty(_e,"importJWK",{enumerable:!0,get:function(){return v.importJWK}}),Object.defineProperty(_e,"importPKCS8",{enumerable:!0,get:function(){return v.importPKCS8}}),Object.defineProperty(_e,"importSPKI",{enumerable:!0,get:function(){return v.importSPKI}}),Object.defineProperty(_e,"importX509",{enumerable:!0,get:function(){return v.importX509}}),Object.defineProperty(_e,"jwksCache",{enumerable:!0,get:function(){return w.jwksCache}}),Object.defineProperty(_e,"jwtDecrypt",{enumerable:!0,get:function(){return f.jwtDecrypt}}),Object.defineProperty(_e,"jwtVerify",{enumerable:!0,get:function(){return a.jwtVerify}});var t=_r(d[1]),r=_r(d[2]),n=_r(d[3]),u=_r(d[4]),c=_r(d[5]),o=_r(d[6]),i=_r(d[7]),a=_r(d[8]),f=_r(d[9]),p=_r(d[10]),b=_r(d[11]),l=_r(d[12]),y=_r(d[13]),P=_r(d[14]),j=_r(d[15]),O=_r(d[16]),J=_r(d[17]),S=_r(d[18]),K=_r(d[19]),w=_r(d[20]),W=_r(d[21]),s=_r(d[22]),v=_r(d[23]),C=_r(d[24]),_=_r(d[25]),k=V(_r(d[26]));_e.errors=k;var h=_r(d[27]),D=_r(d[28]),E=V(_r(d[29]));_e.base64url=E;var T=e(_r(d[30]));function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(x=function(e){return e?r:t})(e)}function V(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=x(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in e)if("default"!==c&&{}.hasOwnProperty.call(e,c)){var o=u?Object.getOwnPropertyDescriptor(e,c):null;o&&(o.get||o.set)?Object.defineProperty(n,c,o):n[c]=e[c]}return n.default=e,r&&r.set(e,n),n}}),6988,[16,6989,6990,7029,7030,7036,7037,7044,7045,7049,7050,7031,7051,7052,7053,7054,7056,7057,7058,7059,7060,7064,7034,7021,7065,7067,6996,7068,7070,7066,7071]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.compactDecrypt=async function(c,p,y){c instanceof Uint8Array&&(c=o.decoder.decode(c));if('string'!=typeof c)throw new n.JWEInvalid('Compact JWE must be a string or Uint8Array');const{0:f,1:l,2:s,3:v,4:u,length:w}=c.split('.');if(5!==w)throw new n.JWEInvalid('Invalid Compact JWE');const _=await(0,t.flattenedDecrypt)({ciphertext:v,iv:s||void 0,protected:f,tag:u||void 0,encrypted_key:l||void 0},p,y),h={plaintext:_.plaintext,protectedHeader:_.protectedHeader};if('function'==typeof p)return{...h,key:_.key};return h};var t=r(d[0]),n=r(d[1]),o=r(d[2])}),6989,[6990,6996,6992]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.flattenedDecrypt=async function(t,f,y){if(!(0,p.default)(t))throw new c.JWEInvalid('Flattened JWE must be an object');if(void 0===t.protected&&void 0===t.header&&void 0===t.unprotected)throw new c.JWEInvalid('JOSE Header missing');if(void 0!==t.iv&&'string'!=typeof t.iv)throw new c.JWEInvalid('JWE Initialization Vector incorrect type');if('string'!=typeof t.ciphertext)throw new c.JWEInvalid('JWE Ciphertext missing or incorrect type');if(void 0!==t.tag&&'string'!=typeof t.tag)throw new c.JWEInvalid('JWE Authentication Tag incorrect type');if(void 0!==t.protected&&'string'!=typeof t.protected)throw new c.JWEInvalid('JWE Protected Header incorrect type');if(void 0!==t.encrypted_key&&'string'!=typeof t.encrypted_key)throw new c.JWEInvalid('JWE Encrypted Key incorrect type');if(void 0!==t.aad&&'string'!=typeof t.aad)throw new c.JWEInvalid('JWE AAD incorrect type');if(void 0!==t.header&&!(0,p.default)(t.header))throw new c.JWEInvalid('JWE Shared Unprotected Header incorrect type');if(void 0!==t.unprotected&&!(0,p.default)(t.unprotected))throw new c.JWEInvalid('JWE Per-Recipient Unprotected Header incorrect type');let J;if(t.protected)try{const n=(0,o.decode)(t.protected);J=JSON.parse(w.decoder.decode(n))}catch{throw new c.JWEInvalid('JWE Protected Header is invalid')}if(!(0,l.default)(J,t.header,t.unprotected))throw new c.JWEInvalid('JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint');const W={...J,...t.header,...t.unprotected};if((0,v.default)(c.JWEInvalid,new Map,y?.crit,J,W),void 0!==W.zip)throw new c.JOSENotSupported('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');const{alg:u,enc:I}=W;if('string'!=typeof u||!u)throw new c.JWEInvalid('missing JWE Algorithm (alg) in JWE Header');if('string'!=typeof I||!I)throw new c.JWEInvalid('missing JWE Encryption Algorithm (enc) in JWE Header');const A=y&&(0,E.default)('keyManagementAlgorithms',y.keyManagementAlgorithms),H=y&&(0,E.default)('contentEncryptionAlgorithms',y.contentEncryptionAlgorithms);if(A&&!A.has(u)||!A&&u.startsWith('PBES2'))throw new c.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter value not allowed');if(H&&!H.has(I))throw new c.JOSEAlgNotAllowed('"enc" (Encryption Algorithm) Header Parameter value not allowed');let P;if(void 0!==t.encrypted_key)try{P=(0,o.decode)(t.encrypted_key)}catch{throw new c.JWEInvalid('Failed to base64url decode the encrypted_key')}let S,b,_,k=!1;'function'==typeof f&&(f=await f(J,t),k=!0);try{S=await(0,h.default)(u,f,P,W,y)}catch(t){if(t instanceof TypeError||t instanceof c.JWEInvalid||t instanceof c.JOSENotSupported)throw t;S=(0,s.default)(I)}if(void 0!==t.iv)try{b=(0,o.decode)(t.iv)}catch{throw new c.JWEInvalid('Failed to base64url decode the iv')}if(void 0!==t.tag)try{_=(0,o.decode)(t.tag)}catch{throw new c.JWEInvalid('Failed to base64url decode the tag')}const O=w.encoder.encode(t.protected??'');let F,x;F=void 0!==t.aad?(0,w.concat)(O,w.encoder.encode('.'),w.encoder.encode(t.aad)):O;try{x=(0,o.decode)(t.ciphertext)}catch{throw new c.JWEInvalid('Failed to base64url decode the ciphertext')}const N={plaintext:await(0,n.default)(I,S,x,b,_,F)};void 0!==t.protected&&(N.protectedHeader=J);if(void 0!==t.aad)try{N.additionalAuthenticatedData=(0,o.decode)(t.aad)}catch{throw new c.JWEInvalid('Failed to base64url decode the aad')}void 0!==t.unprotected&&(N.sharedUnprotectedHeader=t.unprotected);void 0!==t.header&&(N.unprotectedHeader=t.header);if(k)return{...N,key:f};return N};var o=r(d[1]),n=t(r(d[2])),c=r(d[3]),l=t(r(d[4])),p=t(r(d[5])),h=t(r(d[6])),w=r(d[7]),s=t(r(d[8])),v=t(r(d[9])),E=t(r(d[10]))}),6990,[16,6991,6994,6996,7008,7009,7010,6992,7020,7027,7028]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.encodeBase64=e.encode=e.decodeBase64=e.decode=void 0;var o=r(d[0]),n=r(d[1]);function f(o){let f=o;return f instanceof Uint8Array&&(f=n.decoder.decode(f)),f}e.encode=n=>o.Buffer.from(n).toString('base64url');e.decodeBase64=n=>new Uint8Array(o.Buffer.from(n,'base64'));e.encodeBase64=n=>o.Buffer.from(n).toString('base64');e.decode=n=>new Uint8Array(o.Buffer.from(f(n),'base64url'))}),6991,[1621,6992]);
__d((function(g,r,_i,a,m,e,d){var n=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.concat=i,e.concatKdf=async function(n,o,c){const i=Math.ceil((o>>3)/32),u=new Uint8Array(32*i);for(let o=0;o<i;o++){const i=new Uint8Array(4+n.length+c.length);i.set(s(o+1)),i.set(n,4),i.set(c,4+n.length),u.set(await(0,t.default)('sha256',i),32*o)}return u.slice(0,o>>3)},e.encoder=e.decoder=void 0,e.lengthAndInput=function(n){return i(s(n.length),n)},e.p2s=function(n,t){return i(o.encode(n),new Uint8Array([0]),t)},e.uint32be=s,e.uint64be=function(n){const t=Math.floor(n/c),o=n%c,i=new Uint8Array(8);return u(i,t,0),u(i,o,4),i};var t=n(r(d[1]));const o=e.encoder=new TextEncoder,c=(e.decoder=new TextDecoder,4294967296);function i(...n){const t=n.reduce(((n,{length:t})=>n+t),0),o=new Uint8Array(t);let c=0;for(const t of n)o.set(t,c),c+=t.length;return o}function u(n,t,o){if(t<0||t>=c)throw new RangeError(`value must be >= 0 and <= 4294967295. Received ${t}`);n.set([t>>>24,t>>>16,t>>>8,255&t],o)}function s(n){const t=new Uint8Array(4);return u(t,n),t}}),6992,[16,6993]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=r(d[0]);e.default=(u,f)=>(0,t.createHash)(u).update(f).digest()}),6993,[468]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(d[1]),o=t(r(d[2])),c=t(r(d[3])),s=r(d[4]),u=r(d[5]),l=t(r(d[6])),p=t(r(d[7])),f=r(d[8]),y=r(d[9]),h=t(r(d[10])),w=t(r(d[11])),E=t(r(d[12])),A=r(d[13]);function C(t,o,c,f,y,w){const A=parseInt(t.slice(1,4),10);(0,h.default)(o)&&(o=o.export());const C=o.subarray(A>>3),J=o.subarray(0,A>>3),v=parseInt(t.slice(-3),10),S=`aes-${A}-cbc`;if(!(0,E.default)(S))throw new u.JOSENotSupported(`alg ${t} is not supported by your javascript runtime`);const b=(0,p.default)(w,f,c,v,J,A);let W,D;try{W=(0,l.default)(y,b)}catch{}if(!W)throw new u.JWEDecryptionFailed;try{const t=(0,n.createDecipheriv)(S,C,f);D=(0,s.concat)(t.update(c),t.final())}catch{}if(!D)throw new u.JWEDecryptionFailed;return D}function J(t,o,c,s,l,p){const f=`aes-${parseInt(t.slice(1,4),10)}-gcm`;if(!(0,E.default)(f))throw new u.JOSENotSupported(`alg ${t} is not supported by your javascript runtime`);try{const t=(0,n.createDecipheriv)(f,o,s,{authTagLength:16});t.setAuthTag(l),p.byteLength&&t.setAAD(p,{plaintextLength:c.length});const u=t.update(c);return t.final(),u}catch{throw new u.JWEDecryptionFailed}}e.default=(t,s,l,p,E,v)=>{let S;if((0,f.isCryptoKey)(s))(0,y.checkEncCryptoKey)(s,t,'decrypt'),S=n.KeyObject.from(s);else{if(!(s instanceof Uint8Array||(0,h.default)(s)))throw new TypeError((0,w.default)(s,...A.types,'Uint8Array'));S=s}if(!p)throw new u.JWEInvalid('JWE Initialization Vector missing');if(!E)throw new u.JWEInvalid('JWE Authentication Tag missing');switch((0,c.default)(t,S),(0,o.default)(t,p),t){case'A128CBC-HS256':case'A192CBC-HS384':case'A256CBC-HS512':return C(t,S,l,p,E,v);case'A128GCM':case'A192GCM':case'A256GCM':return J(t,S,l,p,E,v);default:throw new u.JOSENotSupported('Unsupported JWE Content Encryption Algorithm')}}}),6994,[16,468,6995,6999,6992,6996,7001,7002,7003,7004,7000,7005,7006,7007]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=r(d[0]),n=r(d[1]);e.default=(l,o)=>{if(o.length<<3!==(0,n.bitLength)(l))throw new t.JWEInvalid('Invalid Initialization Vector length')}}),6995,[6996,6997]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.JWTInvalid=e.JWTExpired=e.JWTClaimValidationFailed=e.JWSSignatureVerificationFailed=e.JWSInvalid=e.JWKSTimeout=e.JWKSNoMatchingKey=e.JWKSMultipleMatchingKeys=e.JWKSInvalid=e.JWKInvalid=e.JWEInvalid=e.JWEDecryptionFailed=e.JOSENotSupported=e.JOSEError=e.JOSEAlgNotAllowed=void 0;class t extends Error{static code='ERR_JOSE_GENERIC';code='ERR_JOSE_GENERIC';constructor(t,c){super(t,c),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}e.JOSEError=t;e.JWTClaimValidationFailed=class extends t{static code='ERR_JWT_CLAIM_VALIDATION_FAILED';code='ERR_JWT_CLAIM_VALIDATION_FAILED';constructor(t,c,s="unspecified",o="unspecified"){super(t,{cause:{claim:s,reason:o,payload:c}}),this.claim=s,this.reason=o,this.payload=c}};e.JWTExpired=class extends t{static code='ERR_JWT_EXPIRED';code='ERR_JWT_EXPIRED';constructor(t,c,s="unspecified",o="unspecified"){super(t,{cause:{claim:s,reason:o,payload:c}}),this.claim=s,this.reason=o,this.payload=c}};e.JOSEAlgNotAllowed=class extends t{static code='ERR_JOSE_ALG_NOT_ALLOWED';code='ERR_JOSE_ALG_NOT_ALLOWED'};e.JOSENotSupported=class extends t{static code='ERR_JOSE_NOT_SUPPORTED';code='ERR_JOSE_NOT_SUPPORTED'};e.JWEDecryptionFailed=class extends t{static code='ERR_JWE_DECRYPTION_FAILED';code='ERR_JWE_DECRYPTION_FAILED';constructor(t="decryption operation failed",c){super(t,c)}};e.JWEInvalid=class extends t{static code='ERR_JWE_INVALID';code='ERR_JWE_INVALID'};e.JWSInvalid=class extends t{static code='ERR_JWS_INVALID';code='ERR_JWS_INVALID'};e.JWTInvalid=class extends t{static code='ERR_JWT_INVALID';code='ERR_JWT_INVALID'};e.JWKInvalid=class extends t{static code='ERR_JWK_INVALID';code='ERR_JWK_INVALID'};e.JWKSInvalid=class extends t{static code='ERR_JWKS_INVALID';code='ERR_JWKS_INVALID'};e.JWKSNoMatchingKey=class extends t{static code='ERR_JWKS_NO_MATCHING_KEY';code='ERR_JWKS_NO_MATCHING_KEY';constructor(t="no applicable key found in the JSON Web Key Set",c){super(t,c)}};e.JWKSMultipleMatchingKeys=class extends t{static code='ERR_JWKS_MULTIPLE_MATCHING_KEYS';code='ERR_JWKS_MULTIPLE_MATCHING_KEYS';constructor(t="multiple matching keys found in the JSON Web Key Set",c){super(t,c)}};e.JWKSTimeout=class extends t{static code='ERR_JWKS_TIMEOUT';code='ERR_JWKS_TIMEOUT';constructor(t="request timed out",c){super(t,c)}};e.JWSSignatureVerificationFailed=class extends t{static code='ERR_JWS_SIGNATURE_VERIFICATION_FAILED';code='ERR_JWS_SIGNATURE_VERIFICATION_FAILED';constructor(t="signature verification failed",c){super(t,c)}}}),6996,[]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.bitLength=s,e.default=void 0;var c=r(d[1]),n=t(r(d[2]));function s(t){switch(t){case'A128GCM':case'A128GCMKW':case'A192GCM':case'A192GCMKW':case'A256GCM':case'A256GCMKW':return 96;case'A128CBC-HS256':case'A192CBC-HS384':case'A256CBC-HS512':return 128;default:throw new c.JOSENotSupported(`Unsupported JWE Algorithm: ${t}`)}}e.default=t=>(0,n.default)(new Uint8Array(s(t)>>3))}),6997,[16,6996,6998]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return n.randomFillSync}});var n=r(d[0])}),6998,[468]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(d[1]),o=t(r(d[2]));e.default=(t,s)=>{let c;switch(t){case'A128CBC-HS256':case'A192CBC-HS384':case'A256CBC-HS512':c=parseInt(t.slice(-3),10);break;case'A128GCM':case'A192GCM':case'A256GCM':c=parseInt(t.slice(1,4),10);break;default:throw new n.JOSENotSupported(`Content Encryption Algorithm ${t} is not supported either by JOSE or your javascript runtime`)}if(s instanceof Uint8Array){const t=s.byteLength<<3;if(t!==c)throw new n.JWEInvalid(`Invalid Content Encryption Key length. Expected ${c} bits, got ${t} bits`)}else{if(!(0,o.default)(s)||'secret'!==s.type)throw new TypeError('Invalid Content Encryption Key type');{const t=s.symmetricKeySize<<3;if(t!==c)throw new n.JWEInvalid(`Invalid Content Encryption Key length. Expected ${c} bits, got ${t} bits`)}}}}),6999,[16,6996,7000]);
__d((function(g,_r,_i,_a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var e=(function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=t(r);if(n&&n.has(e))return n.get(e);var u={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in e)if("default"!==f&&{}.hasOwnProperty.call(e,f)){var a=o?Object.getOwnPropertyDescriptor(e,f):null;a&&(a.get||a.set)?Object.defineProperty(u,f,a):u[f]=e[f]}return u.default=e,n&&n.set(e,u),u})(_r(d[0]));function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(t=function(e){return e?n:r})(e)}_e.default=t=>e.types.isKeyObject(t)}),7000,[467]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const t=r(d[0]).timingSafeEqual;e.default=t}),7001,[468]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(c,u,o,l,s,f){const _=(0,n.concat)(c,u,o,(0,n.uint64be)(c.length<<3)),b=(0,t.createHmac)(`sha${l}`,s);return b.update(_),b.digest().slice(0,f>>3)};var t=r(d[0]),n=r(d[1])}),7002,[468,6992]);
__d((function(g,_r,_i,_a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.isCryptoKey=_e.default=void 0;var e=n(_r(d[0])),t=n(_r(d[1]));function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(r=function(e){return e?n:t})(e)}function n(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=r(t);if(n&&n.has(e))return n.get(e);var o={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in e)if("default"!==f&&{}.hasOwnProperty.call(e,f)){var a=u?Object.getOwnPropertyDescriptor(e,f):null;a&&(a.get||a.set)?Object.defineProperty(o,f,a):o[f]=e[f]}return o.default=e,n&&n.set(e,o),o}const o=e.webcrypto;_e.default=o;_e.isCryptoKey=e=>t.types.isCryptoKey(e)}),7003,[468,467]);
__d((function(g,r,i,a,m,e,d){function t(t,o="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${o} must be ${t}`)}function o(t,o){return t.name===o}function s(t){return parseInt(t.name.slice(4),10)}function h(t){switch(t){case'ES256':return'P-256';case'ES384':return'P-384';case'ES512':return'P-521';default:throw new Error('unreachable')}}function n(t,o){if(o.length&&!o.some((o=>t.usages.includes(o)))){let t='CryptoKey does not support this operation, its usages must include ';if(o.length>2){const s=o.pop();t+=`one of ${o.join(', ')}, or ${s}.`}else 2===o.length?t+=`one of ${o[0]} or ${o[1]}.`:t+=`${o[0]}.`;throw new TypeError(t)}}Object.defineProperty(e,"__esModule",{value:!0}),e.checkEncCryptoKey=function(h,c,...S){switch(c){case'A128GCM':case'A192GCM':case'A256GCM':{if(!o(h.algorithm,'AES-GCM'))throw t('AES-GCM');const s=parseInt(c.slice(1,4),10);if(h.algorithm.length!==s)throw t(s,'algorithm.length');break}case'A128KW':case'A192KW':case'A256KW':{if(!o(h.algorithm,'AES-KW'))throw t('AES-KW');const s=parseInt(c.slice(1,4),10);if(h.algorithm.length!==s)throw t(s,'algorithm.length');break}case'ECDH':switch(h.algorithm.name){case'ECDH':case'X25519':case'X448':break;default:throw t('ECDH, X25519, or X448')}break;case'PBES2-HS256+A128KW':case'PBES2-HS384+A192KW':case'PBES2-HS512+A256KW':if(!o(h.algorithm,'PBKDF2'))throw t('PBKDF2');break;case'RSA-OAEP':case'RSA-OAEP-256':case'RSA-OAEP-384':case'RSA-OAEP-512':{if(!o(h.algorithm,'RSA-OAEP'))throw t('RSA-OAEP');const n=parseInt(c.slice(9),10)||1;if(s(h.algorithm.hash)!==n)throw t(`SHA-${n}`,'algorithm.hash');break}default:throw new TypeError('CryptoKey does not support this operation')}n(h,S)},e.checkSigCryptoKey=function(c,S,...l){switch(S){case'HS256':case'HS384':case'HS512':{if(!o(c.algorithm,'HMAC'))throw t('HMAC');const h=parseInt(S.slice(2),10);if(s(c.algorithm.hash)!==h)throw t(`SHA-${h}`,'algorithm.hash');break}case'RS256':case'RS384':case'RS512':{if(!o(c.algorithm,'RSASSA-PKCS1-v1_5'))throw t('RSASSA-PKCS1-v1_5');const h=parseInt(S.slice(2),10);if(s(c.algorithm.hash)!==h)throw t(`SHA-${h}`,'algorithm.hash');break}case'PS256':case'PS384':case'PS512':{if(!o(c.algorithm,'RSA-PSS'))throw t('RSA-PSS');const h=parseInt(S.slice(2),10);if(s(c.algorithm.hash)!==h)throw t(`SHA-${h}`,'algorithm.hash');break}case'EdDSA':if('Ed25519'!==c.algorithm.name&&'Ed448'!==c.algorithm.name)throw t('Ed25519 or Ed448');break;case'Ed25519':if(!o(c.algorithm,'Ed25519'))throw t('Ed25519');break;case'ES256':case'ES384':case'ES512':{if(!o(c.algorithm,'ECDSA'))throw t('ECDSA');const s=h(S);if(c.algorithm.namedCurve!==s)throw t(s,'algorithm.namedCurve');break}default:throw new TypeError('CryptoKey does not support this operation')}n(c,l)}}),7004,[]);
__d((function(g,r,i,a,m,e,d){function n(n,t,...o){if((o=o.filter(Boolean)).length>2){const t=o.pop();n+=`one of type ${o.join(', ')}, or ${t}.`}else 2===o.length?n+=`one of type ${o[0]} or ${o[1]}.`:n+=`of type ${o[0]}.`;return null==t?n+=` Received ${t}`:'function'==typeof t&&t.name?n+=` Received function ${t.name}`:'object'==typeof t&&null!=t&&t.constructor?.name&&(n+=` Received an instance of ${t.constructor.name}`),n}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.withAlg=function(t,o,...f){return n(`Key for the ${t} algorithm must be `,o,...f)};e.default=(t,...o)=>n('Key must be ',t,...o)}),7005,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=r(d[0]);let l;e.default=u=>(l||=new Set((0,t.getCiphers)()),l.has(u))}),7006,[468]);
__d((function(g,_r,_i,_a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.types=_e.default=void 0;var t=(function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var f=u?Object.getOwnPropertyDescriptor(e,a):null;f&&(f.get||f.set)?Object.defineProperty(o,a,f):o[a]=e[a]}return o.default=e,r&&r.set(e,o),o})(_r(d[1])),r=e(_r(d[2]));function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}_e.default=e=>(0,r.default)(e)||(0,t.isCryptoKey)(e);const o=_e.types=['KeyObject'];(globalThis.CryptoKey||t.default?.CryptoKey)&&o.push('CryptoKey')}),7007,[16,7003,7000]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=(...t)=>{const n=t.filter(Boolean);if(0===n.length||1===n.length)return!0;let o;for(const t of n){const n=Object.keys(t);if(o&&0!==o.size)for(const t of n){if(o.has(t))return!1;o.add(t)}else o=new Set(n)}return!0}}),7008,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){if(o=t,'object'!=typeof o||null===o||'[object Object]'!==Object.prototype.toString.call(t))return!1;var o;if(null===Object.getPrototypeOf(t))return!0;let c=t;for(;null!==Object.getPrototypeOf(c);)c=Object.getPrototypeOf(c);return Object.getPrototypeOf(t)===c}}),7009,[]);
__d((function(g,_r,_i,_a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var t=_r(d[1]),n=(function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=i?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(r,a,o):r[a]=e[a]}return r.default=e,n&&n.set(e,r),r})(_r(d[2])),r=_r(d[3]),i=_r(d[4]),a=_r(d[5]),o=e(_r(d[6])),c=_r(d[7]),l=_r(d[8]),s=_r(d[9]),E=e(_r(d[10])),p=e(_r(d[11])),u=_r(d[12]);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}_e.default=async function(e,v,w,f,y){switch((0,E.default)(e,v,'decrypt'),v=await(o.default.normalizePrivateKey?.(v,e))||v,e){case'dir':if(void 0!==w)throw new c.JWEInvalid('Encountered unexpected JWE Encrypted Key');return v;case'ECDH-ES':if(void 0!==w)throw new c.JWEInvalid('Encountered unexpected JWE Encrypted Key');case'ECDH-ES+A128KW':case'ECDH-ES+A192KW':case'ECDH-ES+A256KW':{if(!(0,p.default)(f.epk))throw new c.JWEInvalid("JOSE Header \"epk\" (Ephemeral Public Key) missing or invalid");if(!n.ecdhAllowed(v))throw new c.JOSENotSupported('ECDH with the provided key is not allowed or not supported by your javascript runtime');const r=await(0,s.importJWK)(f.epk,e);let i,o;if(void 0!==f.apu){if('string'!=typeof f.apu)throw new c.JWEInvalid("JOSE Header \"apu\" (Agreement PartyUInfo) invalid");try{i=(0,a.decode)(f.apu)}catch{throw new c.JWEInvalid('Failed to base64url decode the apu')}}if(void 0!==f.apv){if('string'!=typeof f.apv)throw new c.JWEInvalid("JOSE Header \"apv\" (Agreement PartyVInfo) invalid");try{o=(0,a.decode)(f.apv)}catch{throw new c.JWEInvalid('Failed to base64url decode the apv')}}const E=await n.deriveKey(r,v,'ECDH-ES'===e?f.enc:e,'ECDH-ES'===e?(0,l.bitLength)(f.enc):parseInt(e.slice(-5,-2),10),i,o);if('ECDH-ES'===e)return E;if(void 0===w)throw new c.JWEInvalid('JWE Encrypted Key missing');return(0,t.unwrap)(e.slice(-6),E,w)}case'RSA1_5':case'RSA-OAEP':case'RSA-OAEP-256':case'RSA-OAEP-384':case'RSA-OAEP-512':if(void 0===w)throw new c.JWEInvalid('JWE Encrypted Key missing');return(0,i.decrypt)(e,v,w);case'PBES2-HS256+A128KW':case'PBES2-HS384+A192KW':case'PBES2-HS512+A256KW':{if(void 0===w)throw new c.JWEInvalid('JWE Encrypted Key missing');if('number'!=typeof f.p2c)throw new c.JWEInvalid("JOSE Header \"p2c\" (PBES2 Count) missing or invalid");const t=y?.maxPBES2Count||1e4;if(f.p2c>t)throw new c.JWEInvalid("JOSE Header \"p2c\" (PBES2 Count) out is of acceptable bounds");if('string'!=typeof f.p2s)throw new c.JWEInvalid("JOSE Header \"p2s\" (PBES2 Salt) missing or invalid");let n;try{n=(0,a.decode)(f.p2s)}catch{throw new c.JWEInvalid('Failed to base64url decode the p2s')}return(0,r.decrypt)(e,v,w,f.p2c,n)}case'A128KW':case'A192KW':case'A256KW':if(void 0===w)throw new c.JWEInvalid('JWE Encrypted Key missing');return(0,t.unwrap)(e,v,w);case'A128GCMKW':case'A192GCMKW':case'A256GCMKW':{if(void 0===w)throw new c.JWEInvalid('JWE Encrypted Key missing');if('string'!=typeof f.iv)throw new c.JWEInvalid("JOSE Header \"iv\" (Initialization Vector) missing or invalid");if('string'!=typeof f.tag)throw new c.JWEInvalid("JOSE Header \"tag\" (Authentication Tag) missing or invalid");let t,n;try{t=(0,a.decode)(f.iv)}catch{throw new c.JWEInvalid('Failed to base64url decode the iv')}try{n=(0,a.decode)(f.tag)}catch{throw new c.JWEInvalid('Failed to base64url decode the tag')}return(0,u.unwrap)(e,v,w,t,n)}default:throw new c.JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}}}),7010,[16,7011,7012,7015,7017,6991,7019,6996,7020,7021,7024,7009,7025]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.wrap=e.unwrap=void 0;var n=r(d[1]),o=r(d[2]),c=r(d[3]),p=r(d[4]),u=r(d[5]),s=r(d[6]),f=t(r(d[7])),y=t(r(d[8])),l=t(r(d[9])),w=r(d[10]);function h(t,n){if(t.symmetricKeySize<<3!==parseInt(n.slice(1,4),10))throw new TypeError(`Invalid key size for alg: ${n}`)}function v(t,n,c){if((0,f.default)(t))return t;if(t instanceof Uint8Array)return(0,o.createSecretKey)(t);if((0,u.isCryptoKey)(t))return(0,s.checkEncCryptoKey)(t,n,c),o.KeyObject.from(t);throw new TypeError((0,y.default)(t,...w.types,'Uint8Array'))}e.wrap=(t,u,s)=>{const f=`aes${parseInt(t.slice(1,4),10)}-wrap`;if(!(0,l.default)(f))throw new c.JOSENotSupported(`alg ${t} is not supported either by JOSE or your javascript runtime`);const y=v(u,t,'wrapKey');h(y,t);const w=(0,o.createCipheriv)(f,y,n.Buffer.alloc(8,166));return(0,p.concat)(w.update(s),w.final())};e.unwrap=(t,u,s)=>{const f=`aes${parseInt(t.slice(1,4),10)}-wrap`;if(!(0,l.default)(f))throw new c.JOSENotSupported(`alg ${t} is not supported either by JOSE or your javascript runtime`);const y=v(u,t,'unwrapKey');h(y,t);const w=(0,o.createDecipheriv)(f,y,n.Buffer.alloc(8,166));return(0,p.concat)(w.update(s),w.final())}}),7011,[16,1621,468,6996,6992,7003,7004,7000,7005,7006,7007]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.deriveKey=async function(t,c,o,l,w=new Uint8Array(0),h=new Uint8Array(0)){let E,v;if((0,u.isCryptoKey)(t))(0,f.checkEncCryptoKey)(t,'ECDH'),E=n.KeyObject.from(t);else{if(!(0,p.default)(t))throw new TypeError((0,s.default)(t,...K.types));E=t}if((0,u.isCryptoKey)(c))(0,f.checkEncCryptoKey)(c,'ECDH','deriveBits'),v=n.KeyObject.from(c);else{if(!(0,p.default)(c))throw new TypeError((0,s.default)(c,...K.types));v=c}const C=(0,y.concat)((0,y.lengthAndInput)(y.encoder.encode(o)),(0,y.lengthAndInput)(w),(0,y.lengthAndInput)(h),(0,y.uint32be)(l)),A=(0,n.diffieHellman)({privateKey:v,publicKey:E});return(0,y.concatKdf)(A,l,C)},e.ecdhAllowed=void 0,e.generateEpk=async function(t){let c;if((0,u.isCryptoKey)(t))c=n.KeyObject.from(t);else{if(!(0,p.default)(t))throw new TypeError((0,s.default)(t,...K.types));c=t}switch(c.asymmetricKeyType){case'x25519':return w('x25519');case'x448':return w('x448');case'ec':{const t=(0,o.default)(c);return w('ec',{namedCurve:t})}default:throw new l.JOSENotSupported('Invalid or unsupported EPK')}};var n=r(d[1]),c=r(d[2]),o=t(r(d[3])),y=r(d[4]),l=r(d[5]),u=r(d[6]),f=r(d[7]),p=t(r(d[8])),s=t(r(d[9])),K=r(d[10]);const w=(0,c.promisify)(n.generateKeyPair);e.ecdhAllowed=t=>['P-256','P-384','P-521','X25519','X448'].includes((0,o.default)(t))}),7012,[16,468,467,7013,6992,6996,7003,7004,7000,7005,7007]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.weakMap=e.default=void 0;var s=r(d[1]),c=r(d[2]),o=r(d[3]),p=t(r(d[4])),y=t(r(d[5])),n=r(d[6]),u=r(d[7]);e.weakMap=new WeakMap;const f=t=>{switch(t){case'prime256v1':return'P-256';case'secp384r1':return'P-384';case'secp521r1':return'P-521';case'secp256k1':return'secp256k1';default:throw new c.JOSENotSupported('Unsupported key curve for this operation')}};e.default=(t,c)=>{let l;if((0,o.isCryptoKey)(t))l=s.KeyObject.from(t);else{if(!(0,p.default)(t)){if((0,u.isJWK)(t))return t.crv;throw new TypeError((0,y.default)(t,...n.types))}l=t}if('secret'===l.type)throw new TypeError('only "private" or "public" type keys can be used for this operation');switch(l.asymmetricKeyType){case'ed25519':case'ed448':return`Ed${l.asymmetricKeyType.slice(2)}`;case'x25519':case'x448':return`X${l.asymmetricKeyType.slice(1)}`;case'ec':{const t=l.asymmetricKeyDetails.namedCurve;return c?t:f(t)}default:throw new TypeError('Invalid asymmetric key type for this operation')}}}),7013,[16,468,6996,7003,7000,7005,7007,7014]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.isJWK=o,e.isPrivateJWK=function(t){return'oct'!==t.kty&&'string'==typeof t.d},e.isPublicJWK=function(t){return'oct'!==t.kty&&void 0===t.d},e.isSecretJWK=function(t){return o(t)&&'oct'===t.kty&&'string'==typeof t.k};var n=t(r(d[1]));function o(t){return(0,n.default)(t)&&'string'==typeof t.kty}}),7014,[16,7009]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.encrypt=e.decrypt=void 0;var n=r(d[1]),c=r(d[2]),s=t(r(d[3])),p=r(d[4]),y=r(d[5]),o=r(d[6]),f=t(r(d[7])),u=r(d[8]),l=r(d[9]),w=t(r(d[10])),v=t(r(d[11])),K=r(d[12]);const h=(0,n.promisify)(c.pbkdf2);function _(t,n){if((0,w.default)(t))return t.export();if(t instanceof Uint8Array)return t;if((0,u.isCryptoKey)(t))return(0,l.checkEncCryptoKey)(t,n,'deriveBits','deriveKey'),c.KeyObject.from(t).export();throw new TypeError((0,v.default)(t,...K.types,'Uint8Array'))}e.encrypt=async(t,n,c,u=2048,l=(0,s.default)(new Uint8Array(16)))=>{(0,f.default)(l);const w=(0,p.p2s)(t,l),v=parseInt(t.slice(13,16),10)>>3,K=_(n,t),b=await h(K,w,u,v,`sha${t.slice(8,11)}`);return{encryptedKey:await(0,o.wrap)(t.slice(-6),b,c),p2c:u,p2s:(0,y.encode)(l)}};e.decrypt=async(t,n,c,s,y)=>{(0,f.default)(y);const u=(0,p.p2s)(t,y),l=parseInt(t.slice(13,16),10)>>3,w=_(n,t),v=await h(w,u,s,l,`sha${t.slice(8,11)}`);return(0,o.unwrap)(t.slice(-6),v,c)}}),7015,[16,467,468,6998,6992,6991,7011,7016,7003,7004,7000,7005,7007]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(n){if(!(n instanceof Uint8Array)||n.length<8)throw new t.JWEInvalid('PBES2 Salt Input must be 8 or more octets')};var t=r(d[0])}),7016,[6996]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.encrypt=e.decrypt=void 0;var n=r(d[1]),c=r(d[2]),s=t(r(d[3])),y=r(d[4]),p=r(d[5]),o=t(r(d[6])),u=t(r(d[7])),A=r(d[8]);const h=(t,n)=>{if('rsa'!==t.asymmetricKeyType)throw new TypeError('Invalid key for this operation, its asymmetricKeyType must be rsa');(0,s.default)(t,n)},E=(0,c.deprecate)((()=>n.constants.RSA_PKCS1_PADDING),'The RSA1_5 "alg" (JWE Algorithm) is deprecated and will be removed in the next major revision.'),P=t=>{switch(t){case'RSA-OAEP':case'RSA-OAEP-256':case'RSA-OAEP-384':case'RSA-OAEP-512':return n.constants.RSA_PKCS1_OAEP_PADDING;case'RSA1_5':return E();default:return}},S=t=>{switch(t){case'RSA-OAEP':return'sha1';case'RSA-OAEP-256':return'sha256';case'RSA-OAEP-384':return'sha384';case'RSA-OAEP-512':return'sha512';default:return}};function f(t,c,...s){if((0,o.default)(t))return t;if((0,y.isCryptoKey)(t))return(0,p.checkEncCryptoKey)(t,c,...s),n.KeyObject.from(t);throw new TypeError((0,u.default)(t,...A.types))}e.encrypt=(t,c,s)=>{const y=P(t),p=S(t),o=f(c,t,'wrapKey','encrypt');return h(o,t),(0,n.publicEncrypt)({key:o,oaepHash:p,padding:y},s)};e.decrypt=(t,c,s)=>{const y=P(t),p=S(t),o=f(c,t,'unwrapKey','decrypt');return h(o,t),(0,n.privateDecrypt)({key:o,oaepHash:p,padding:y},s)}}),7017,[16,468,467,7018,7003,7004,7000,7005,7007]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=r(d[0]);e.default=(o,u)=>{let n;try{n=o instanceof t.KeyObject?o.asymmetricKeyDetails?.modulusLength:Buffer.from(o.n,'base64url').byteLength<<3}catch{}if('number'!=typeof n||n<2048)throw new TypeError(`${u} requires key modulusLength to be 2048 bits or larger`)}}),7018,[468]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={}}),7019,[]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.bitLength=c,e.default=void 0;var n=r(d[1]),u=t(r(d[2]));function c(t){switch(t){case'A128GCM':return 128;case'A192GCM':return 192;case'A256GCM':case'A128CBC-HS256':return 256;case'A192CBC-HS384':return 384;case'A256CBC-HS512':return 512;default:throw new n.JOSENotSupported(`Unsupported JWE Algorithm: ${t}`)}}e.default=t=>(0,u.default)(new Uint8Array(c(t)>>3))}),7020,[16,6996,6998]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.importJWK=async function(t,n){if(!(0,u.default)(t))throw new TypeError('JWK must be an object');switch(n||=t.alg,t.kty){case'oct':if('string'!=typeof t.k||!t.k)throw new TypeError('missing "k" (Key Value) Parameter value');return(0,o.decode)(t.k);case'RSA':if('oth'in t&&void 0!==t.oth)throw new s.JOSENotSupported('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case'EC':case'OKP':return(0,f.default)({...t,alg:n});default:throw new s.JOSENotSupported('Unsupported "kty" (Key Type) Parameter value')}},e.importPKCS8=async function(t,o,f){if('string'!=typeof t||0!==t.indexOf('-----BEGIN PRIVATE KEY-----'))throw new TypeError('"pkcs8" must be PKCS#8 formatted string');return(0,n.fromPKCS8)(t,o,f)},e.importSPKI=async function(t,o,f){if('string'!=typeof t||0!==t.indexOf('-----BEGIN PUBLIC KEY-----'))throw new TypeError('"spki" must be SPKI formatted string');return(0,n.fromSPKI)(t,o,f)},e.importX509=async function(t,o,f){if('string'!=typeof t||0!==t.indexOf('-----BEGIN CERTIFICATE-----'))throw new TypeError('"x509" must be X.509 formatted string');return(0,n.fromX509)(t,o,f)};var o=r(d[1]),n=r(d[2]),f=t(r(d[3])),s=r(d[4]),u=t(r(d[5]))}),7021,[16,6991,7022,7023,6996,7009]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.toSPKI=e.toPKCS8=e.fromX509=e.fromSPKI=e.fromPKCS8=void 0;var o=r(d[1]),f=r(d[2]),p=r(d[3]),y=t(r(d[4])),c=t(r(d[5])),s=r(d[6]);const K=(t,f,K)=>{let P;if((0,p.isCryptoKey)(K)){if(!K.extractable)throw new TypeError('CryptoKey is not extractable');P=o.KeyObject.from(K)}else{if(!(0,y.default)(K))throw new TypeError((0,c.default)(K,...s.types));P=K}if(P.type!==t)throw new TypeError(`key is not a ${t} key`);return P.export({format:'pem',type:f})};e.toSPKI=t=>K('public','spki',t);e.toPKCS8=t=>K('private','pkcs8',t);e.fromPKCS8=t=>(0,o.createPrivateKey)({key:f.Buffer.from(t.replace(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,''),'base64'),type:'pkcs8',format:'der'});e.fromSPKI=t=>(0,o.createPublicKey)({key:f.Buffer.from(t.replace(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,''),'base64'),type:'spki',format:'der'});e.fromX509=t=>(0,o.createPublicKey)({key:t,type:'spki',format:'pem'})}),7022,[16,468,1621,7003,7000,7005,7007]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=r(d[0]);e.default=f=>f.d?(0,t.createPrivateKey)({format:'jwk',key:f}):(0,t.createPublicKey)({format:'jwk',key:f})}),7023,[468]);
__d((function(g,_r,_i,_a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=_e.checkKeyTypeWithJwk=void 0;var e=_r(d[0]),r=o(_r(d[1])),t=o(_r(d[2]));function i(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(i=function(e){return e?t:r})(e)}function o(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i(r);if(t&&t.has(e))return t.get(e);var o={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&{}.hasOwnProperty.call(e,s)){var a=n?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(o,s,a):o[s]=e[s]}return o.default=e,t&&t.set(e,o),o}const n=e=>e?.[Symbol.toStringTag],s=(e,r,t)=>{if(void 0!==r.use&&'sig'!==r.use)throw new TypeError('Invalid key for this operation, when present its use must be sig');if(void 0!==r.key_ops&&!0!==r.key_ops.includes?.(t))throw new TypeError(`Invalid key for this operation, when present its key_ops must include ${t}`);if(void 0!==r.alg&&r.alg!==e)throw new TypeError(`Invalid key for this operation, when present its alg must be ${e}`);return!0},a=(i,o,a,y)=>{if(!(o instanceof Uint8Array)){if(y&&t.isJWK(o)){if(t.isSecretJWK(o)&&s(i,o,a))return;throw new TypeError("JSON Web Key for symmetric algorithms must have JWK \"kty\" (Key Type) equal to \"oct\" and the JWK \"k\" (Key Value) present")}if(!(0,r.default)(o))throw new TypeError((0,e.withAlg)(i,o,...r.types,'Uint8Array',y?'JSON Web Key':null));if('secret'!==o.type)throw new TypeError(`${n(o)} instances for symmetric algorithms must be of type "secret"`)}},y=(i,o,a,y)=>{if(y&&t.isJWK(o))switch(a){case'sign':if(t.isPrivateJWK(o)&&s(i,o,a))return;throw new TypeError("JSON Web Key for this operation be a private JWK");case'verify':if(t.isPublicJWK(o)&&s(i,o,a))return;throw new TypeError("JSON Web Key for this operation be a public JWK")}if(!(0,r.default)(o))throw new TypeError((0,e.withAlg)(i,o,...r.types,y?'JSON Web Key':null));if('secret'===o.type)throw new TypeError(`${n(o)} instances for asymmetric algorithms must not be of type "secret"`);if('sign'===a&&'public'===o.type)throw new TypeError(`${n(o)} instances for asymmetric algorithm signing must be of type "private"`);if('decrypt'===a&&'public'===o.type)throw new TypeError(`${n(o)} instances for asymmetric algorithm decryption must be of type "private"`);if(o.algorithm&&'verify'===a&&'private'===o.type)throw new TypeError(`${n(o)} instances for asymmetric algorithm verifying must be of type "public"`);if(o.algorithm&&'encrypt'===a&&'private'===o.type)throw new TypeError(`${n(o)} instances for asymmetric algorithm encryption must be of type "public"`)};function p(e,r,t,i){r.startsWith('HS')||'dir'===r||r.startsWith('PBES2')||/^A\d{3}(?:GCM)?KW$/.test(r)?a(r,t,i,e):y(r,t,i,e)}_e.default=p.bind(void 0,!1);_e.checkKeyTypeWithJwk=p.bind(void 0,!0)}),7024,[7005,7007,7014]);
__d((function(g,r,i,a,m,e,d){var n=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.unwrap=async function(n,t,u,o,s){const y=n.slice(0,7);return(0,c.default)(y,t,u,o,s,new Uint8Array(0))},e.wrap=async function(n,c,o,s){const y=n.slice(0,7),f=await(0,t.default)(y,o,c,s,new Uint8Array(0));return{encryptedKey:f.ciphertext,iv:(0,u.encode)(f.iv),tag:(0,u.encode)(f.tag)}};var t=n(r(d[1])),c=n(r(d[2])),u=r(d[3])}),7025,[16,7026,6994,6991]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(d[1]),o=t(r(d[2])),c=t(r(d[3])),u=r(d[4]),s=t(r(d[5])),p=r(d[6]),l=r(d[7]),f=t(r(d[8])),y=t(r(d[9])),h=t(r(d[10])),C=r(d[11]),A=t(r(d[12])),v=r(d[13]);function w(t,o,c,p,l){const y=parseInt(t.slice(1,4),10);(0,f.default)(c)&&(c=c.export());const h=c.subarray(y>>3),v=c.subarray(0,y>>3),w=`aes-${y}-cbc`;if(!(0,A.default)(w))throw new C.JOSENotSupported(`alg ${t} is not supported by your javascript runtime`);const S=(0,n.createCipheriv)(w,h,p),b=(0,u.concat)(S.update(o),S.final()),E=parseInt(t.slice(-3),10);return{ciphertext:b,tag:(0,s.default)(l,p,b,E,v,y),iv:p}}function S(t,o,c,u,s){const p=`aes-${parseInt(t.slice(1,4),10)}-gcm`;if(!(0,A.default)(p))throw new C.JOSENotSupported(`alg ${t} is not supported by your javascript runtime`);const l=(0,n.createCipheriv)(p,c,u,{authTagLength:16});s.byteLength&&l.setAAD(s,{plaintextLength:o.length});const f=l.update(o);l.final();return{ciphertext:f,tag:l.getAuthTag(),iv:u}}e.default=(t,u,s,A,b)=>{let E;if((0,p.isCryptoKey)(s))(0,l.checkEncCryptoKey)(s,t,'encrypt'),E=n.KeyObject.from(s);else{if(!(s instanceof Uint8Array||(0,f.default)(s)))throw new TypeError((0,y.default)(s,...v.types,'Uint8Array'));E=s}switch((0,c.default)(t,E),A?(0,o.default)(t,A):A=(0,h.default)(t),t){case'A128CBC-HS256':case'A192CBC-HS384':case'A256CBC-HS512':return w(t,u,E,A,b);case'A128GCM':case'A192GCM':case'A256GCM':return S(t,u,E,A,b);default:throw new C.JOSENotSupported('Unsupported JWE Content Encryption Algorithm')}}}),7026,[16,468,6995,6999,6992,7002,7003,7004,7000,7005,6997,6996,7006,7007]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=r(d[0]);e.default=function(n,o,c,s,f){if(void 0!==f.crit&&void 0===s?.crit)throw new n('"crit" (Critical) Header Parameter MUST be integrity protected');if(!s||void 0===s.crit)return new Set;if(!Array.isArray(s.crit)||0===s.crit.length||s.crit.some((t=>'string'!=typeof t||0===t.length)))throw new n('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let w;w=void 0!==c?new Map([...Object.entries(c),...o.entries()]):o;for(const o of s.crit){if(!w.has(o))throw new t.JOSENotSupported(`Extension Header Parameter "${o}" is not recognized`);if(void 0===f[o])throw new n(`Extension Header Parameter "${o}" is missing`);if(w.get(o)&&void 0===s[o])throw new n(`Extension Header Parameter "${o}" MUST be integrity protected`)}return new Set(s.crit)}}),7027,[6996]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=(t,o)=>{if(void 0!==o&&(!Array.isArray(o)||o.some((t=>'string'!=typeof t))))throw new TypeError(`"${t}" option must be an array of strings`);if(o)return new Set(o)}}),7028,[]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.generalDecrypt=async function(t,p,s){if(!(0,o.default)(t))throw new c.JWEInvalid('General JWE must be an object');if(!Array.isArray(t.recipients)||!t.recipients.every(o.default))throw new c.JWEInvalid('JWE Recipients missing or incorrect type');if(!t.recipients.length)throw new c.JWEInvalid('JWE Recipients has no members');for(const c of t.recipients)try{return await(0,n.flattenedDecrypt)({aad:t.aad,ciphertext:t.ciphertext,encrypted_key:c.encrypted_key,header:c.header,iv:t.iv,protected:t.protected,tag:t.tag,unprotected:t.unprotected},p,s)}catch{}throw new c.JWEDecryptionFailed};var n=r(d[1]),c=r(d[2]),o=t(r(d[3]))}),7029,[16,6990,6996,7009]);
__d((function(g,r,_i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.GeneralEncrypt=void 0;var n=r(d[1]),i=r(d[2]),c=r(d[3]),o=t(r(d[4])),p=t(r(d[5])),s=t(r(d[6])),h=r(d[7]),l=t(r(d[8]));class u{constructor(t,n,i){this.parent=t,this.key=n,this.options=i}setUnprotectedHeader(t){if(this.unprotectedHeader)throw new TypeError('setUnprotectedHeader can only be called once');return this.unprotectedHeader=t,this}addRecipient(...t){return this.parent.addRecipient(...t)}encrypt(...t){return this.parent.encrypt(...t)}done(){return this.parent}}e.GeneralEncrypt=class{_recipients=[];constructor(t){this._plaintext=t}addRecipient(t,n){const i=new u(this,t,{crit:n?.crit});return this._recipients.push(i),i}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError('setProtectedHeader can only be called once');return this._protectedHeader=t,this}setSharedUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError('setSharedUnprotectedHeader can only be called once');return this._unprotectedHeader=t,this}setAdditionalAuthenticatedData(t){return this._aad=t,this}async encrypt(){if(!this._recipients.length)throw new c.JWEInvalid('at least one recipient must be added');if(1===this._recipients.length){const[t]=this._recipients,i=await new n.FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(t.unprotectedHeader).encrypt(t.key,{...t.options}),c={ciphertext:i.ciphertext,iv:i.iv,recipients:[{}],tag:i.tag};return i.aad&&(c.aad=i.aad),i.protected&&(c.protected=i.protected),i.unprotected&&(c.unprotected=i.unprotected),i.encrypted_key&&(c.recipients[0].encrypted_key=i.encrypted_key),i.header&&(c.recipients[0].header=i.header),c}let t;for(let n=0;n<this._recipients.length;n++){const i=this._recipients[n];if(!(0,p.default)(this._protectedHeader,this._unprotectedHeader,i.unprotectedHeader))throw new c.JWEInvalid('JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint');const o={...this._protectedHeader,...this._unprotectedHeader,...i.unprotectedHeader},{alg:s}=o;if('string'!=typeof s||!s)throw new c.JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if('dir'===s||'ECDH-ES'===s)throw new c.JWEInvalid('"dir" and "ECDH-ES" alg may only be used with a single recipient');if('string'!=typeof o.enc||!o.enc)throw new c.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(t){if(t!==o.enc)throw new c.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients')}else t=o.enc;if((0,l.default)(c.JWEInvalid,new Map,i.options.crit,this._protectedHeader,o),void 0!==o.zip)throw new c.JOSENotSupported('JWE "zip" (Compression Algorithm) Header Parameter is not supported.')}const u=(0,o.default)(t),H={ciphertext:'',iv:'',recipients:[],tag:''};for(let c=0;c<this._recipients.length;c++){const o=this._recipients[c],p={};H.recipients.push(p);const l={...this._protectedHeader,...this._unprotectedHeader,...o.unprotectedHeader}.alg.startsWith('PBES2')?2048+c:void 0;if(0===c){const t=await new n.FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(u).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(o.unprotectedHeader).setKeyManagementParameters({p2c:l}).encrypt(o.key,{...o.options,[i.unprotected]:!0});H.ciphertext=t.ciphertext,H.iv=t.iv,H.tag=t.tag,t.aad&&(H.aad=t.aad),t.protected&&(H.protected=t.protected),t.unprotected&&(H.unprotected=t.unprotected),p.encrypted_key=t.encrypted_key,t.header&&(p.header=t.header);continue}const{encryptedKey:y,parameters:_}=await(0,s.default)(o.unprotectedHeader?.alg||this._protectedHeader?.alg||this._unprotectedHeader?.alg,t,o.key,u,{p2c:l});p.encrypted_key=(0,h.encode)(y),(o.unprotectedHeader||_)&&(p.header={...o.unprotectedHeader,..._})}return H}}}),7030,[16,7031,7032,6996,7020,7008,7033,6991,7027]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.FlattenedEncrypt=void 0;var n=r(d[1]),o=r(d[2]),c=t(r(d[3])),s=t(r(d[4])),h=r(d[5]),p=t(r(d[6])),l=r(d[7]),_=t(r(d[8]));e.FlattenedEncrypt=class{constructor(t){if(!(t instanceof Uint8Array))throw new TypeError('plaintext must be an instance of Uint8Array');this._plaintext=t}setKeyManagementParameters(t){if(this._keyManagementParameters)throw new TypeError('setKeyManagementParameters can only be called once');return this._keyManagementParameters=t,this}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError('setProtectedHeader can only be called once');return this._protectedHeader=t,this}setSharedUnprotectedHeader(t){if(this._sharedUnprotectedHeader)throw new TypeError('setSharedUnprotectedHeader can only be called once');return this._sharedUnprotectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError('setUnprotectedHeader can only be called once');return this._unprotectedHeader=t,this}setAdditionalAuthenticatedData(t){return this._aad=t,this}setContentEncryptionKey(t){if(this._cek)throw new TypeError('setContentEncryptionKey can only be called once');return this._cek=t,this}setInitializationVector(t){if(this._iv)throw new TypeError('setInitializationVector can only be called once');return this._iv=t,this}async encrypt(t,H){if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new h.JWEInvalid('either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()');if(!(0,p.default)(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new h.JWEInvalid('JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint');const y={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if((0,_.default)(h.JWEInvalid,new Map,H?.crit,this._protectedHeader,y),void 0!==y.zip)throw new h.JOSENotSupported('JWE "zip" (Compression Algorithm) Header Parameter is not supported.');const{alg:u,enc:w}=y;if('string'!=typeof u||!u)throw new h.JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if('string'!=typeof w||!w)throw new h.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');let E,f,v,U,P;if(this._cek&&('dir'===u||'ECDH-ES'===u))throw new TypeError(`setContentEncryptionKey cannot be called with JWE "alg" (Algorithm) Header ${u}`);{let n;({cek:f,encryptedKey:E,parameters:n}=await(0,s.default)(u,w,t,this._cek,this._keyManagementParameters)),n&&(H&&o.unprotected in H?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...n}:this.setUnprotectedHeader(n):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...n}:this.setProtectedHeader(n))}U=this._protectedHeader?l.encoder.encode((0,n.encode)(JSON.stringify(this._protectedHeader))):l.encoder.encode(''),this._aad?(P=(0,n.encode)(this._aad),v=(0,l.concat)(U,l.encoder.encode('.'),l.encoder.encode(P))):v=U;const{ciphertext:J,tag:b,iv:W}=await(0,c.default)(w,this._plaintext,f,this._iv,v),k={ciphertext:(0,n.encode)(J)};return W&&(k.iv=(0,n.encode)(W)),b&&(k.tag=(0,n.encode)(b)),E&&(k.encrypted_key=(0,n.encode)(E)),P&&(k.aad=P),this._protectedHeader&&(k.protected=l.decoder.decode(U)),this._sharedUnprotectedHeader&&(k.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(k.header=this._unprotectedHeader),k}}}),7031,[16,6991,7032,7026,7033,6996,7008,6992,7027]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.unprotected=void 0;e.unprotected=Symbol()}),7032,[]);
__d((function(g,_r,_i,_a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var t=_r(d[1]),a=y(_r(d[2])),r=_r(d[3]),n=_r(d[4]),c=_r(d[5]),o=e(_r(d[6])),p=y(_r(d[7])),i=_r(d[8]),u=_r(d[9]),s=e(_r(d[10])),l=_r(d[11]);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(f=function(e){return e?a:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=f(t);if(a&&a.has(e))return a.get(e);var r={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in e)if("default"!==c&&{}.hasOwnProperty.call(e,c)){var o=n?Object.getOwnPropertyDescriptor(e,c):null;o&&(o.get||o.set)?Object.defineProperty(r,c,o):r[c]=e[c]}return r.default=e,a&&a.set(e,r),r}_e.default=async function(e,f,y,E,w={}){let A,S,v;switch((0,s.default)(e,y,'encrypt'),y=await(o.default.normalizePublicKey?.(y,e))||y,e){case'dir':v=y;break;case'ECDH-ES':case'ECDH-ES+A128KW':case'ECDH-ES+A192KW':case'ECDH-ES+A256KW':{if(!a.ecdhAllowed(y))throw new i.JOSENotSupported('ECDH with the provided key is not allowed or not supported by your javascript runtime');const{apu:r,apv:n}=w;let{epk:o}=w;o||=(await a.generateEpk(y)).privateKey;const{x:s,y:l,crv:K,kty:k}=await(0,u.exportJWK)(o),W=await a.deriveKey(y,o,'ECDH-ES'===e?f:e,'ECDH-ES'===e?(0,p.bitLength)(f):parseInt(e.slice(-5,-2),10),r,n);if(S={epk:{x:s,crv:K,kty:k}},'EC'===k&&(S.epk.y=l),r&&(S.apu=(0,c.encode)(r)),n&&(S.apv=(0,c.encode)(n)),'ECDH-ES'===e){v=W;break}v=E||(0,p.default)(f);const b=e.slice(-6);A=await(0,t.wrap)(b,W,v);break}case'RSA1_5':case'RSA-OAEP':case'RSA-OAEP-256':case'RSA-OAEP-384':case'RSA-OAEP-512':v=E||(0,p.default)(f),A=await(0,n.encrypt)(e,y,v);break;case'PBES2-HS256+A128KW':case'PBES2-HS384+A192KW':case'PBES2-HS512+A256KW':{v=E||(0,p.default)(f);const{p2c:t,p2s:a}=w;({encryptedKey:A,...S}=await(0,r.encrypt)(e,y,v,t,a));break}case'A128KW':case'A192KW':case'A256KW':v=E||(0,p.default)(f),A=await(0,t.wrap)(e,y,v);break;case'A128GCMKW':case'A192GCMKW':case'A256GCMKW':{v=E||(0,p.default)(f);const{iv:t}=w;({encryptedKey:A,...S}=await(0,l.wrap)(e,y,v,t));break}default:throw new i.JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:v,encryptedKey:A,parameters:S}}}),7033,[16,7011,7012,7015,7017,6991,7019,7020,6996,7034,7024,7025]);
__d((function(g,r,i,a,m,e,d){var n=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.exportJWK=async function(n){return(0,o.default)(n)},e.exportPKCS8=async function(n){return(0,t.toPKCS8)(n)},e.exportSPKI=async function(n){return(0,t.toSPKI)(n)};var t=r(d[1]),o=n(r(d[2]))}),7034,[16,7022,7035]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r(d[1]),y=r(d[2]),n=r(d[3]),f=r(d[4]),p=t(r(d[5])),c=t(r(d[6])),s=r(d[7]);e.default=t=>{let u;if((0,f.isCryptoKey)(t)){if(!t.extractable)throw new TypeError('CryptoKey is not extractable');u=o.KeyObject.from(t)}else{if(!(0,p.default)(t)){if(t instanceof Uint8Array)return{kty:'oct',k:(0,y.encode)(t)};throw new TypeError((0,c.default)(t,...s.types,'Uint8Array'))}u=t}if('secret'!==u.type&&!['rsa','ec','ed25519','x25519','ed448','x448'].includes(u.asymmetricKeyType))throw new n.JOSENotSupported('Unsupported key asymmetricKeyType');return u.export({format:'jwk'})}}),7035,[16,468,6991,6996,7003,7000,7005,7007]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.compactVerify=async function(c,f,p){c instanceof Uint8Array&&(c=o.decoder.decode(c));if('string'!=typeof c)throw new n.JWSInvalid('Compact JWS must be a string or Uint8Array');const{0:y,1:l,2:s,length:u}=c.split('.');if(3!==u)throw new n.JWSInvalid('Invalid Compact JWS');const v=await(0,t.flattenedVerify)({payload:l,protected:y,signature:s},f,p),w={payload:v.payload,protectedHeader:v.protectedHeader};if('function'==typeof f)return{...w,key:v.key};return w};var t=r(d[0]),n=r(d[1]),o=r(d[2])}),7036,[7037,6996,6992]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.flattenedVerify=async function(t,S,W){if(!(0,p.default)(t))throw new l.JWSInvalid('Flattened JWS must be an object');if(void 0===t.protected&&void 0===t.header)throw new l.JWSInvalid('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==t.protected&&'string'!=typeof t.protected)throw new l.JWSInvalid('JWS Protected Header incorrect type');if(void 0===t.payload)throw new l.JWSInvalid('JWS Payload missing');if('string'!=typeof t.signature)throw new l.JWSInvalid('JWS Signature missing or incorrect type');if(void 0!==t.header&&!(0,p.default)(t.header))throw new l.JWSInvalid('JWS Unprotected Header incorrect type');let v={};if(t.protected)try{const n=(0,o.decode)(t.protected);v=JSON.parse(c.decoder.decode(n))}catch{throw new l.JWSInvalid('JWS Protected Header is invalid')}if(!(0,s.default)(v,t.header))throw new l.JWSInvalid('JWS Protected and JWS Unprotected Header Parameter names must be disjoint');const u={...v,...t.header},b=(0,f.default)(l.JWSInvalid,new Map([['b64',!0]]),W?.crit,v,u);let I=!0;if(b.has('b64')&&(I=v.b64,'boolean'!=typeof I))throw new l.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:P}=u;if('string'!=typeof P||!P)throw new l.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');const H=W&&(0,h.default)('algorithms',W.algorithms);if(H&&!H.has(P))throw new l.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter value not allowed');if(I){if('string'!=typeof t.payload)throw new l.JWSInvalid('JWS Payload must be a string')}else if('string'!=typeof t.payload&&!(t.payload instanceof Uint8Array))throw new l.JWSInvalid('JWS Payload must be a string or an Uint8Array instance');let A=!1;'function'==typeof S?(S=await S(v,t),A=!0,(0,y.checkKeyTypeWithJwk)(P,S,'verify'),(0,w.isJWK)(S)&&(S=await(0,J.importJWK)(S,P))):(0,y.checkKeyTypeWithJwk)(P,S,'verify');const k=(0,c.concat)(c.encoder.encode(t.protected??''),c.encoder.encode('.'),'string'==typeof t.payload?c.encoder.encode(t.payload):t.payload);let F;try{F=(0,o.decode)(t.signature)}catch{throw new l.JWSInvalid('Failed to base64url decode the signature')}if(!await(0,n.default)(P,S,F,k))throw new l.JWSSignatureVerificationFailed;let K;if(I)try{K=(0,o.decode)(t.payload)}catch{throw new l.JWSInvalid('Failed to base64url decode the payload')}else K='string'==typeof t.payload?c.encoder.encode(t.payload):t.payload;const U={payload:K};void 0!==t.protected&&(U.protectedHeader=v);void 0!==t.header&&(U.unprotectedHeader=t.header);if(A)return{...U,key:S};return U};var o=r(d[1]),n=t(r(d[2])),l=r(d[3]),c=r(d[4]),s=t(r(d[5])),p=t(r(d[6])),y=r(d[7]),f=t(r(d[8])),h=t(r(d[9])),w=r(d[10]),J=r(d[11])}),7037,[16,6991,7038,6996,6992,7008,7009,7024,7027,7028,7014,7021]);
__d((function(g,_r,_i,_a,m,_e,d){var t=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var e=(function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var r=o(e);if(r&&r.has(t))return r.get(t);var n={__proto__:null},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in t)if("default"!==u&&{}.hasOwnProperty.call(t,u)){var f=a?Object.getOwnPropertyDescriptor(t,u):null;f&&(f.get||f.set)?Object.defineProperty(n,u,f):n[u]=t[u]}return n.default=t,r&&r.set(t,n),n})(_r(d[1])),r=_r(d[2]),n=t(_r(d[3])),a=t(_r(d[4])),u=t(_r(d[5])),f=t(_r(d[6]));function o(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,r=new WeakMap;return(o=function(t){return t?r:e})(t)}const i=(0,r.promisify)(e.verify);_e.default=async(t,r,o,c)=>{const l=(0,f.default)(t,r,'verify');if(t.startsWith('HS')){const r=await(0,u.default)(t,l,c),n=o;try{return e.timingSafeEqual(n,r)}catch{return!1}}const p=(0,n.default)(t),s=(0,a.default)(t,l);try{return await i(p,c,s,o)}catch{return!1}}}),7038,[16,468,467,7039,7040,7041,7043]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){switch(t){case'PS256':case'RS256':case'ES256':case'ES256K':return'sha256';case'PS384':case'RS384':case'ES384':return'sha384';case'PS512':case'RS512':case'ES512':return'sha512';case'Ed25519':case'EdDSA':return;default:throw new s.JOSENotSupported(`alg ${t} is not supported either by JOSE or your javascript runtime`)}};var s=r(d[0])}),7039,[6996]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,p){let f,h,S,l;if(p instanceof s.KeyObject)f=p.asymmetricKeyType,h=p.asymmetricKeyDetails;else switch(S=!0,p.kty){case'RSA':f='rsa';break;case'EC':f='ec';break;case'OKP':if('Ed25519'===p.crv){f='ed25519';break}if('Ed448'===p.crv){f='ed448';break}throw new TypeError('Invalid key for this operation, its crv must be Ed25519 or Ed448');default:throw new TypeError('Invalid key for this operation, its kty must be RSA, OKP, or EC')}switch(t){case'Ed25519':if('ed25519'!==f)throw new TypeError("Invalid key for this operation, its asymmetricKeyType must be ed25519");break;case'EdDSA':if(!['ed25519','ed448'].includes(f))throw new TypeError('Invalid key for this operation, its asymmetricKeyType must be ed25519 or ed448');break;case'RS256':case'RS384':case'RS512':if('rsa'!==f)throw new TypeError('Invalid key for this operation, its asymmetricKeyType must be rsa');(0,y.default)(p,t);break;case'PS256':case'PS384':case'PS512':if('rsa-pss'===f){const{hashAlgorithm:s,mgf1HashAlgorithm:o,saltLength:n}=h,y=parseInt(t.slice(-3),10);if(void 0!==s&&(s!==`sha${y}`||o!==s))throw new TypeError(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${t}`);if(void 0!==n&&n>y>>3)throw new TypeError(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${t}`)}else if('rsa'!==f)throw new TypeError('Invalid key for this operation, its asymmetricKeyType must be rsa or rsa-pss');(0,y.default)(p,t),l={padding:s.constants.RSA_PKCS1_PSS_PADDING,saltLength:s.constants.RSA_PSS_SALTLEN_DIGEST};break;case'ES256':case'ES256K':case'ES384':case'ES512':{if('ec'!==f)throw new TypeError('Invalid key for this operation, its asymmetricKeyType must be ec');const s=(0,o.default)(p),n=c.get(t);if(s!==n)throw new TypeError(`Invalid key curve for the algorithm, its curve must be ${n}, got ${s}`);l={dsaEncoding:'ieee-p1363'};break}default:throw new n.JOSENotSupported(`alg ${t} is not supported either by JOSE or your javascript runtime`)}if(S)return{format:'jwk',key:p,...l};return l?{...l,key:p}:p};var s=r(d[1]),o=t(r(d[2])),n=r(d[3]),y=t(r(d[4]));const c=new Map([['ES256','P-256'],['ES256K','secp256k1'],['ES384','P-384'],['ES512','P-521']])}),7040,[16,468,7013,6996,7018]);
__d((function(g,_r,_i,_a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var t=(function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var f=u?Object.getOwnPropertyDescriptor(e,a):null;f&&(f.get||f.set)?Object.defineProperty(n,a,f):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n})(_r(d[1])),r=_r(d[2]),n=e(_r(d[3])),u=e(_r(d[4])),a=e(_r(d[5])),f=e(_r(d[6]));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}const i=(0,r.promisify)(t.sign);_e.default=async(e,r,o)=>{const l=(0,f.default)(e,r,'sign');if(e.startsWith('HS')){const r=t.createHmac((0,u.default)(e),l);return r.update(o),r.digest()}return i((0,n.default)(e),o,(0,a.default)(e,l))}}),7041,[16,468,467,7039,7042,7040,7043]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(u){switch(u){case'HS256':return'sha256';case'HS384':return'sha384';case'HS512':return'sha512';default:throw new t.JOSENotSupported(`alg ${u} is not supported either by JOSE or your javascript runtime`)}};var t=r(d[0])}),7042,[6996]);
__d((function(g,_r,_i,_a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=function(e,a,i){if(a instanceof Uint8Array){if(!e.startsWith('HS'))throw new TypeError((0,f.default)(a,...o.types));return(0,r.createSecretKey)(a)}if(a instanceof r.KeyObject)return a;if((0,t.isCryptoKey)(a))return(0,n.checkSigCryptoKey)(a,e,i),r.KeyObject.from(a);if(u.isJWK(a))return e.startsWith('HS')?(0,r.createSecretKey)(Buffer.from(a.k,'base64url')):a;throw new TypeError((0,f.default)(a,...o.types,'Uint8Array','JSON Web Key'))};var r=_r(d[1]),t=_r(d[2]),n=_r(d[3]),f=e(_r(d[4])),o=_r(d[5]),u=(function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=a(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var u=f?Object.getOwnPropertyDescriptor(e,o):null;u&&(u.get||u.set)?Object.defineProperty(n,o,u):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n})(_r(d[6]));function a(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(a=function(e){return e?t:r})(e)}}),7043,[16,468,7003,7004,7005,7007,7014]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.generalVerify=async function(t,u,c){if(!(0,s.default)(t))throw new o.JWSInvalid('General JWS must be an object');if(!Array.isArray(t.signatures)||!t.signatures.every(s.default))throw new o.JWSInvalid('JWS Signatures missing or incorrect type');for(const o of t.signatures)try{return await(0,n.flattenedVerify)({header:o.header,payload:t.payload,protected:o.protected,signature:o.signature},u,c)}catch{}throw new o.JWSSignatureVerificationFailed};var n=r(d[1]),o=r(d[2]),s=t(r(d[3]))}),7044,[16,7037,6996,7009]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.jwtVerify=async function(t,p,u){const f=await(0,o.compactVerify)(t,p,u);if(f.protectedHeader.crit?.includes('b64')&&!1===f.protectedHeader.b64)throw new n.JWTInvalid('JWTs MUST NOT use unencoded payload');const y={payload:(0,c.default)(f.protectedHeader,f.payload,u),protectedHeader:f.protectedHeader};if('function'==typeof p)return{...y,key:f.key};return y};var o=r(d[1]),c=t(r(d[2])),n=r(d[3])}),7045,[16,7036,7046,6996]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=r(d[1]),n=r(d[2]),o=t(r(d[3])),c=t(r(d[4])),s=t(r(d[5]));const f=t=>t.toLowerCase().replace(/^application\//,'');e.default=(t,u,p={})=>{let h;try{h=JSON.parse(n.decoder.decode(u))}catch{}if(!(0,s.default)(h))throw new l.JWTInvalid('JWT Claims Set must be a top-level JSON object');const{typ:w}=p;if(w&&('string'!=typeof t.typ||f(t.typ)!==f(w)))throw new l.JWTClaimValidationFailed('unexpected "typ" JWT header value',h,'typ','check_failed');const{requiredClaims:b=[],issuer:v,subject:y,audience:T,maxTokenAge:k}=p,J=[...b];void 0!==k&&J.push('iat'),void 0!==T&&J.push('aud'),void 0!==y&&J.push('sub'),void 0!==v&&J.push('iss');for(const t of new Set(J.reverse()))if(!(t in h))throw new l.JWTClaimValidationFailed(`missing required "${t}" claim`,h,t,'missing');if(v&&!(Array.isArray(v)?v:[v]).includes(h.iss))throw new l.JWTClaimValidationFailed('unexpected "iss" claim value',h,'iss','check_failed');if(y&&h.sub!==y)throw new l.JWTClaimValidationFailed('unexpected "sub" claim value',h,'sub','check_failed');if(T&&(W=h.aud,x='string'==typeof T?[T]:T,!('string'==typeof W?x.includes(W):Array.isArray(W)&&x.some(Set.prototype.has.bind(new Set(W))))))throw new l.JWTClaimValidationFailed('unexpected "aud" claim value',h,'aud','check_failed');var W,x;let C;switch(typeof p.clockTolerance){case'string':C=(0,c.default)(p.clockTolerance);break;case'number':C=p.clockTolerance;break;case'undefined':C=0;break;default:throw new TypeError('Invalid clockTolerance option type')}const{currentDate:_}=p,F=(0,o.default)(_||new Date);if((void 0!==h.iat||k)&&'number'!=typeof h.iat)throw new l.JWTClaimValidationFailed('"iat" claim must be a number',h,'iat','invalid');if(void 0!==h.nbf){if('number'!=typeof h.nbf)throw new l.JWTClaimValidationFailed('"nbf" claim must be a number',h,'nbf','invalid');if(h.nbf>F+C)throw new l.JWTClaimValidationFailed('"nbf" claim timestamp check failed',h,'nbf','check_failed')}if(void 0!==h.exp){if('number'!=typeof h.exp)throw new l.JWTClaimValidationFailed('"exp" claim must be a number',h,'exp','invalid');if(h.exp<=F-C)throw new l.JWTExpired('"exp" claim timestamp check failed',h,'exp','check_failed')}if(k){const t=F-h.iat;if(t-C>('number'==typeof k?k:(0,c.default)(k)))throw new l.JWTExpired('"iat" claim timestamp check failed (too far in the past)',h,'iat','check_failed');if(t<0-C)throw new l.JWTClaimValidationFailed('"iat" claim timestamp check failed (it should be in the past)',h,'iat','check_failed')}return h}}),7046,[16,6996,6992,7047,7048,7009]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=t=>Math.floor(t.getTime()/1e3)}),7047,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;const s=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i;e.default=c=>{const o=s.exec(c);if(!o||o[4]&&o[1])throw new TypeError('Invalid time period format');const t=parseFloat(o[2]);let n;switch(o[3].toLowerCase()){case'sec':case'secs':case'second':case'seconds':case's':n=Math.round(t);break;case'minute':case'minutes':case'min':case'mins':case'm':n=Math.round(60*t);break;case'hour':case'hours':case'hr':case'hrs':case'h':n=Math.round(3600*t);break;case'day':case'days':case'd':n=Math.round(86400*t);break;case'week':case'weeks':case'w':n=Math.round(604800*t);break;default:n=Math.round(31557600*t)}return'-'===o[1]||'ago'===o[4]?-n:n}}),7048,[]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.jwtDecrypt=async function(t,n,l){const u=await(0,s.compactDecrypt)(t,n,l),p=(0,c.default)(u.protectedHeader,u.plaintext,l),{protectedHeader:f}=u;if(void 0!==f.iss&&f.iss!==p.iss)throw new o.JWTClaimValidationFailed('replicated "iss" claim header parameter mismatch',p,'iss','mismatch');if(void 0!==f.sub&&f.sub!==p.sub)throw new o.JWTClaimValidationFailed('replicated "sub" claim header parameter mismatch',p,'sub','mismatch');if(void 0!==f.aud&&JSON.stringify(f.aud)!==JSON.stringify(p.aud))throw new o.JWTClaimValidationFailed('replicated "aud" claim header parameter mismatch',p,'aud','mismatch');const h={payload:p,protectedHeader:f};if('function'==typeof n)return{...h,key:u.key};return h};var s=r(d[1]),c=t(r(d[2])),o=r(d[3])}),7049,[16,6989,7046,6996]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.CompactEncrypt=void 0;var t=r(d[0]);e.CompactEncrypt=class{constructor(n){this._flattened=new t.FlattenedEncrypt(n)}setContentEncryptionKey(t){return this._flattened.setContentEncryptionKey(t),this}setInitializationVector(t){return this._flattened.setInitializationVector(t),this}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}setKeyManagementParameters(t){return this._flattened.setKeyManagementParameters(t),this}async encrypt(t,n){const s=await this._flattened.encrypt(t,n);return[s.protected,s.encrypted_key,s.iv,s.ciphertext,s.tag].join('.')}}}),7050,[7031]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.CompactSign=void 0;var t=r(d[0]);e.CompactSign=class{constructor(n){this._flattened=new t.FlattenedSign(n)}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}async sign(t,n){const o=await this._flattened.sign(t,n);if(void 0===o.payload)throw new TypeError('use the flattened module for creating JWS with b64: false');return`${o.protected}.${o.payload}.${o.signature}`}}}),7051,[7052]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.FlattenedSign=void 0;var o=r(d[1]),n=t(r(d[2])),c=t(r(d[3])),s=r(d[4]),l=r(d[5]),p=r(d[6]),h=t(r(d[7]));e.FlattenedSign=class{constructor(t){if(!(t instanceof Uint8Array))throw new TypeError('payload must be an instance of Uint8Array');this._payload=t}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError('setProtectedHeader can only be called once');return this._protectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError('setUnprotectedHeader can only be called once');return this._unprotectedHeader=t,this}async sign(t,H){if(!this._protectedHeader&&!this._unprotectedHeader)throw new s.JWSInvalid('either setProtectedHeader or setUnprotectedHeader must be called before #sign()');if(!(0,c.default)(this._protectedHeader,this._unprotectedHeader))throw new s.JWSInvalid('JWS Protected and JWS Unprotected Header Parameter names must be disjoint');const u={...this._protectedHeader,...this._unprotectedHeader};let _=!0;if((0,h.default)(s.JWSInvalid,new Map([['b64',!0]]),H?.crit,this._protectedHeader,u).has('b64')&&(_=this._protectedHeader.b64,'boolean'!=typeof _))throw new s.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');const{alg:y}=u;if('string'!=typeof y||!y)throw new s.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');(0,p.checkKeyTypeWithJwk)(y,t,'sign');let f,w=this._payload;_&&(w=l.encoder.encode((0,o.encode)(w))),f=this._protectedHeader?l.encoder.encode((0,o.encode)(JSON.stringify(this._protectedHeader))):l.encoder.encode('');const b=(0,l.concat)(f,l.encoder.encode('.'),w),S=await(0,n.default)(y,t,b),v={signature:(0,o.encode)(S),payload:''};return _&&(v.payload=l.decoder.decode(w)),this._unprotectedHeader&&(v.header=this._unprotectedHeader),this._protectedHeader&&(v.protected=l.decoder.decode(f)),v}}}),7052,[16,6991,7041,7008,6996,6992,7024,7027]);
__d((function(g,r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.GeneralSign=void 0;var t=r(d[0]),n=r(d[1]);class s{constructor(t,n,s){this.parent=t,this.key=n,this.options=s}setProtectedHeader(t){if(this.protectedHeader)throw new TypeError('setProtectedHeader can only be called once');return this.protectedHeader=t,this}setUnprotectedHeader(t){if(this.unprotectedHeader)throw new TypeError('setUnprotectedHeader can only be called once');return this.unprotectedHeader=t,this}addSignature(...t){return this.parent.addSignature(...t)}sign(...t){return this.parent.sign(...t)}done(){return this.parent}}e.GeneralSign=class{_signatures=[];constructor(t){this._payload=t}addSignature(t,n){const i=new s(this,t,n);return this._signatures.push(i),i}async sign(){if(!this._signatures.length)throw new n.JWSInvalid('at least one signature must be added');const s={signatures:[],payload:''};for(let i=0;i<this._signatures.length;i++){const o=this._signatures[i],c=new t.FlattenedSign(this._payload);c.setProtectedHeader(o.protectedHeader),c.setUnprotectedHeader(o.unprotectedHeader);const{payload:u,...h}=await c.sign(o.key,o.options);if(0===i)s.payload=u;else if(s.payload!==u)throw new n.JWSInvalid('inconsistent use of JWS Unencoded Payload (RFC7797)');s.signatures.push(h)}return s}}}),7053,[7052,6996]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.SignJWT=void 0;var t=r(d[0]),n=r(d[1]),s=r(d[2]),c=r(d[3]);class o extends c.ProduceJWT{setProtectedHeader(t){return this._protectedHeader=t,this}async sign(c,o){const _=new t.CompactSign(s.encoder.encode(JSON.stringify(this._payload)));if(_.setProtectedHeader(this._protectedHeader),Array.isArray(this._protectedHeader?.crit)&&this._protectedHeader.crit.includes('b64')&&!1===this._protectedHeader.b64)throw new n.JWTInvalid('JWTs MUST NOT use unencoded payload');return _.sign(c,o)}}e.SignJWT=o}),7054,[7051,6996,6992,7055]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.ProduceJWT=void 0;var s=t(r(d[1])),o=t(r(d[2])),l=t(r(d[3]));function p(t,s){if(!Number.isFinite(s))throw new TypeError(`Invalid ${t} input`);return s}e.ProduceJWT=class{constructor(t={}){if(!(0,o.default)(t))throw new TypeError('JWT Claims Set MUST be an object');this._payload=t}setIssuer(t){return this._payload={...this._payload,iss:t},this}setSubject(t){return this._payload={...this._payload,sub:t},this}setAudience(t){return this._payload={...this._payload,aud:t},this}setJti(t){return this._payload={...this._payload,jti:t},this}setNotBefore(t){return'number'==typeof t?this._payload={...this._payload,nbf:p('setNotBefore',t)}:t instanceof Date?this._payload={...this._payload,nbf:p('setNotBefore',(0,s.default)(t))}:this._payload={...this._payload,nbf:(0,s.default)(new Date)+(0,l.default)(t)},this}setExpirationTime(t){return'number'==typeof t?this._payload={...this._payload,exp:p('setExpirationTime',t)}:t instanceof Date?this._payload={...this._payload,exp:p('setExpirationTime',(0,s.default)(t))}:this._payload={...this._payload,exp:(0,s.default)(new Date)+(0,l.default)(t)},this}setIssuedAt(t){return void 0===t?this._payload={...this._payload,iat:(0,s.default)(new Date)}:t instanceof Date?this._payload={...this._payload,iat:p('setIssuedAt',(0,s.default)(t))}:this._payload='string'==typeof t?{...this._payload,iat:p('setIssuedAt',(0,s.default)(new Date)+(0,l.default)(t))}:{...this._payload,iat:p('setIssuedAt',t)},this}}}),7055,[16,7047,7009,7048]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.EncryptJWT=void 0;var t=r(d[0]),s=r(d[1]),n=r(d[2]);class c extends n.ProduceJWT{setProtectedHeader(t){if(this._protectedHeader)throw new TypeError('setProtectedHeader can only be called once');return this._protectedHeader=t,this}setKeyManagementParameters(t){if(this._keyManagementParameters)throw new TypeError('setKeyManagementParameters can only be called once');return this._keyManagementParameters=t,this}setContentEncryptionKey(t){if(this._cek)throw new TypeError('setContentEncryptionKey can only be called once');return this._cek=t,this}setInitializationVector(t){if(this._iv)throw new TypeError('setInitializationVector can only be called once');return this._iv=t,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(n,c){const o=new t.CompactEncrypt(s.encoder.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),o.setProtectedHeader(this._protectedHeader),this._iv&&o.setInitializationVector(this._iv),this._cek&&o.setContentEncryptionKey(this._cek),this._keyManagementParameters&&o.setKeyManagementParameters(this._keyManagementParameters),o.encrypt(n,c)}}e.EncryptJWT=c}),7056,[7050,6992,7055]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.calculateJwkThumbprint=k,e.calculateJwkThumbprintUri=async function(t,n){n??='sha256';const o=await k(t,n);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${n.slice(-3)}:${o}`};var n=t(r(d[1])),o=r(d[2]),c=r(d[3]),s=r(d[4]),u=t(r(d[5]));const y=(t,n)=>{if('string'!=typeof t||!t)throw new c.JWKInvalid(`${n} missing or invalid`)};async function k(t,k){if(!(0,u.default)(t))throw new TypeError('JWK must be an object');if(k??='sha256','sha256'!==k&&'sha384'!==k&&'sha512'!==k)throw new TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');let h;switch(t.kty){case'EC':y(t.crv,'"crv" (Curve) Parameter'),y(t.x,'"x" (X Coordinate) Parameter'),y(t.y,'"y" (Y Coordinate) Parameter'),h={crv:t.crv,kty:t.kty,x:t.x,y:t.y};break;case'OKP':y(t.crv,'"crv" (Subtype of Key Pair) Parameter'),y(t.x,'"x" (Public Key) Parameter'),h={crv:t.crv,kty:t.kty,x:t.x};break;case'RSA':y(t.e,'"e" (Exponent) Parameter'),y(t.n,'"n" (Modulus) Parameter'),h={e:t.e,kty:t.kty,n:t.n};break;case'oct':y(t.k,'"k" (Key Value) Parameter'),h={k:t.k,kty:t.kty};break;default:throw new c.JOSENotSupported('"kty" (Key Type) Parameter missing or unsupported')}const l=s.encoder.encode(JSON.stringify(h));return(0,o.encode)(await(0,n.default)(k,l))}}),7057,[16,6993,6991,6996,6992,7009]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.EmbeddedJWK=async function(t,u){const b={...t,...u?.header};if(!(0,o.default)(b.jwk))throw new c.JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a JSON object');const w=await(0,n.importJWK)({...b.jwk,ext:!0},b.alg);if(w instanceof Uint8Array||'public'!==w.type)throw new c.JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a public key');return w};var n=r(d[1]),o=t(r(d[2])),c=r(d[3])}),7058,[16,7021,7009,6996]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.createLocalJWKSet=function(t){const n=new l(t),c=async(t,c)=>n.getKey(t,c);return Object.defineProperties(c,{jwks:{value:()=>f(n._jwks),enumerable:!0,configurable:!1,writable:!1}}),c};var n=r(d[1]),c=r(d[2]),s=t(r(d[3]));function o(t){switch('string'==typeof t&&t.slice(0,2)){case'RS':case'PS':return'RSA';case'ES':return'EC';case'Ed':return'OKP';default:throw new c.JOSENotSupported('Unsupported "alg" value for a JSON Web Key Set')}}function u(t){return t&&'object'==typeof t&&Array.isArray(t.keys)&&t.keys.every(y)}function y(t){return(0,s.default)(t)}function f(t){return'function'==typeof structuredClone?structuredClone(t):JSON.parse(JSON.stringify(t))}class l{_cached=new WeakMap;constructor(t){if(!u(t))throw new c.JWKSInvalid('JSON Web Key Set malformed');this._jwks=f(t)}async getKey(t,n){const{alg:s,kid:u}={...t,...n?.header},y=o(s),f=this._jwks.keys.filter((t=>{let n=y===t.kty;if(n&&'string'==typeof u&&(n=u===t.kid),n&&'string'==typeof t.alg&&(n=s===t.alg),n&&'string'==typeof t.use&&(n='sig'===t.use),n&&Array.isArray(t.key_ops)&&(n=t.key_ops.includes('verify')),n)switch(s){case'ES256':n='P-256'===t.crv;break;case'ES256K':n='secp256k1'===t.crv;break;case'ES384':n='P-384'===t.crv;break;case'ES512':n='P-521'===t.crv;break;case'Ed25519':n='Ed25519'===t.crv;break;case'EdDSA':n='Ed25519'===t.crv||'Ed448'===t.crv}return n})),{0:l,length:p}=f;if(0===p)throw new c.JWKSNoMatchingKey;if(1!==p){const t=new c.JWKSMultipleMatchingKeys,{_cached:n}=this;throw t[Symbol.asyncIterator]=async function*(){for(const t of f)try{yield await S(n,t,s)}catch{}},t}return S(this._cached,l,s)}}async function S(t,s,o){const u=t.get(s)||t.set(s,{}).get(s);if(void 0===u[o]){const t=await(0,n.importJWK)({...s,ext:!0},o);if(t instanceof Uint8Array||'public'!==t.type)throw new c.JWKSInvalid('JSON Web Key Set members must be public keys');u[o]=t}return u[o]}}),7059,[16,7021,6996,7009]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.createRemoteJWKSet=function(t,n){const o=new u(t,n),s=async(t,n)=>o.getKey(t,n);return Object.defineProperties(s,{coolingDown:{get:()=>o.coolingDown(),enumerable:!0,configurable:!1},fresh:{get:()=>o.fresh(),enumerable:!0,configurable:!1},reload:{value:()=>o.reload(),enumerable:!0,configurable:!1,writable:!1},reloading:{get:()=>!!o._pendingFetch,enumerable:!0,configurable:!1},jwks:{value:()=>o._local?.jwks(),enumerable:!0,configurable:!1,writable:!1}}),s},e.jwksCache=e.experimental_jwksCache=void 0;var n=t(r(d[1])),o=r(d[2]),s=r(d[3]),c=t(r(d[4]));let h;if('undefined'==typeof navigator||!navigator.userAgent?.startsWith?.('Mozilla/5.0 ')){h=`${'jose'}/${'v5.10.0'}`}const l=e.jwksCache=Symbol();class u{constructor(t,n){if(!(t instanceof URL))throw new TypeError('url must be an instance of URL');var o,h;this._url=new URL(t.href),this._options={agent:n?.agent,headers:n?.headers},this._timeoutDuration='number'==typeof n?.timeoutDuration?n?.timeoutDuration:5e3,this._cooldownDuration='number'==typeof n?.cooldownDuration?n?.cooldownDuration:3e4,this._cacheMaxAge='number'==typeof n?.cacheMaxAge?n?.cacheMaxAge:6e5,void 0!==n?.[l]&&(this._cache=n?.[l],o=n?.[l],h=this._cacheMaxAge,'object'==typeof o&&null!==o&&'uat'in o&&'number'==typeof o.uat&&!(Date.now()-o.uat>=h)&&'jwks'in o&&(0,c.default)(o.jwks)&&Array.isArray(o.jwks.keys)&&Array.prototype.every.call(o.jwks.keys,c.default)&&(this._jwksTimestamp=this._cache.uat,this._local=(0,s.createLocalJWKSet)(this._cache.jwks)))}coolingDown(){return'number'==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cooldownDuration}fresh(){return'number'==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cacheMaxAge}async getKey(t,n){this._local&&this.fresh()||await this.reload();try{return await this._local(t,n)}catch(s){if(s instanceof o.JWKSNoMatchingKey&&!1===this.coolingDown())return await this.reload(),this._local(t,n);throw s}}async reload(){this._pendingFetch&&('undefined'!=typeof WebSocketPair||'undefined'!=typeof navigator&&'Cloudflare-Workers'===navigator.userAgent||'undefined'!=typeof EdgeRuntime&&'vercel'===EdgeRuntime)&&(this._pendingFetch=void 0);const t=new Headers(this._options.headers);h&&!t.has('User-Agent')&&(t.set('User-Agent',h),this._options.headers=Object.fromEntries(t.entries())),this._pendingFetch||=(0,n.default)(this._url,this._timeoutDuration,this._options).then((t=>{this._local=(0,s.createLocalJWKSet)(t),this._cache&&(this._cache.uat=Date.now(),this._cache.jwks=t),this._jwksTimestamp=Date.now(),this._pendingFetch=void 0})).catch((t=>{throw this._pendingFetch=void 0,t})),await this._pendingFetch}}e.experimental_jwksCache=l}),7060,[16,7061,6996,7059,7009]);
__d((function(g,_r,_i,_a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.default=void 0;var e=c(_r(d[0])),t=c(_r(d[1])),r=_r(d[2]),o=_r(d[3]),n=_r(d[4]);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}function c(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in e)if("default"!==c&&{}.hasOwnProperty.call(e,c)){var s=n?Object.getOwnPropertyDescriptor(e,c):null;s&&(s.get||s.set)?Object.defineProperty(o,c,s):o[c]=e[c]}return o.default=e,r&&r.set(e,o),o}_e.default=async(a,c,s)=>{let u;switch(a.protocol){case'https:':u=t.get;break;case'http:':u=e.get;break;default:throw new TypeError('Unsupported URL protocol.')}const{agent:f,headers:p}=s,i=u(a.href,{agent:f,timeout:c,headers:p}),[l]=await Promise.race([(0,r.once)(i,'response'),(0,r.once)(i,'timeout')]);if(!l)throw i.destroy(),new o.JWKSTimeout;if(200!==l.statusCode)throw new o.JOSEError('Expected 200 OK from the JSON Web Key Set HTTP response');const h=[];for await(const e of l)h.push(e);try{return JSON.parse(n.decoder.decode((0,n.concat)(...h)))}catch{throw new o.JOSEError('Failed to parse the JSON Web Key Set HTTP response as JSON')}}}),7061,[7062,7063,6928,6996,6992]);
__d((function(g,r,i,a,m,e,d){m.exports=$$require_external('node:http')}),7062,[]);
__d((function(g,r,i,a,m,e,d){m.exports=$$require_external('node:https')}),7063,[]);
__d((function(g,_r,_i,_a,m,_e,d){var e=_r(d[0]);Object.defineProperty(_e,"__esModule",{value:!0}),_e.UnsecuredJWT=void 0;var r=(function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=i(r);if(t&&t.has(e))return t.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var c=o?Object.getOwnPropertyDescriptor(e,a):null;c&&(c.get||c.set)?Object.defineProperty(n,a,c):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n})(_r(d[1])),t=_r(d[2]),n=_r(d[3]),o=e(_r(d[4])),a=_r(d[5]);function i(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,t=new WeakMap;return(i=function(e){return e?t:r})(e)}class c extends a.ProduceJWT{encode(){return`${r.encode(JSON.stringify({alg:'none'}))}.${r.encode(JSON.stringify(this._payload))}.`}static decode(e,a){if('string'!=typeof e)throw new n.JWTInvalid('Unsecured JWT must be a string');const{0:i,1:c,2:u,length:l}=e.split('.');if(3!==l||''!==u)throw new n.JWTInvalid('Invalid Unsecured JWT');let f;try{if(f=JSON.parse(t.decoder.decode(r.decode(i))),'none'!==f.alg)throw new Error}catch{throw new n.JWTInvalid('Invalid Unsecured JWT')}return{payload:(0,o.default)(f,r.decode(c),a),header:f}}}_e.UnsecuredJWT=c}),7064,[16,6991,6992,6996,7046,7055]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.decodeProtectedHeader=function(t){let f;if('string'==typeof t){const o=t.split('.');3!==o.length&&5!==o.length||([f]=o)}else if('object'==typeof t&&t){if(!('protected'in t))throw new TypeError('Token does not contain a Protected Header');f=t.protected}try{if('string'!=typeof f||!f)throw new Error;const t=JSON.parse(n.decoder.decode((0,o.decode)(f)));if(!(0,c.default)(t))throw new Error;return t}catch{throw new TypeError('Invalid Token or Protected Header formatting')}};var o=r(d[1]),n=r(d[2]),c=t(r(d[3]))}),7065,[16,7066,6992,7009]);
__d((function(g,_r,_i,_a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.encode=_e.decode=void 0;var e=(function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=t(r);if(n&&n.has(e))return n.get(e);var o={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in e)if("default"!==c&&{}.hasOwnProperty.call(e,c)){var f=u?Object.getOwnPropertyDescriptor(e,c):null;f&&(f.get||f.set)?Object.defineProperty(o,c,f):o[c]=e[c]}return o.default=e,n&&n.set(e,o),o})(_r(d[0]));function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(t=function(e){return e?n:r})(e)}_e.encode=e.encode,_e.decode=e.decode}),7066,[6991]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.decodeJwt=function(t){if('string'!=typeof t)throw new s.JWTInvalid('JWTs must use Compact JWS serialization, JWT must be a string');const{1:c,length:J}=t.split('.');if(5===J)throw new s.JWTInvalid('Only JWTs using Compact JWS serialization can be decoded');if(3!==J)throw new s.JWTInvalid('Invalid JWT');if(!c)throw new s.JWTInvalid('JWTs must contain a payload');let w,W;try{w=(0,n.decode)(c)}catch{throw new s.JWTInvalid('Failed to base64url decode the payload')}try{W=JSON.parse(o.decoder.decode(w))}catch{throw new s.JWTInvalid('Failed to parse the decoded payload as JSON')}if(!(0,l.default)(W))throw new s.JWTInvalid('Invalid JWT Claims Set');return W};var n=r(d[1]),o=r(d[2]),l=t(r(d[3])),s=r(d[4])}),7067,[16,7066,6992,7009,6996]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.generateKeyPair=async function(t,u){return(0,n.generateKeyPair)(t,u)};var n=r(d[0])}),7068,[7069]);
__d((function(g,r,i,a,m,e,d){var s=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.generateKeyPair=async function(s,t){switch(s){case'RS256':case'RS384':case'RS512':case'PS256':case'PS384':case'PS512':case'RSA-OAEP':case'RSA-OAEP-256':case'RSA-OAEP-384':case'RSA-OAEP-512':case'RSA1_5':{const s=t?.modulusLength??2048;if('number'!=typeof s||s<2048)throw new u.JOSENotSupported('Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used');return await o('rsa',{modulusLength:s,publicExponent:65537})}case'ES256':return o('ec',{namedCurve:'P-256'});case'ES256K':return o('ec',{namedCurve:'secp256k1'});case'ES384':return o('ec',{namedCurve:'P-384'});case'ES512':return o('ec',{namedCurve:'P-521'});case'Ed25519':return o('ed25519');case'EdDSA':switch(t?.crv){case void 0:case'Ed25519':return o('ed25519');case'Ed448':return o('ed448');default:throw new u.JOSENotSupported('Invalid or unsupported crv option provided, supported values are Ed25519 and Ed448')}case'ECDH-ES':case'ECDH-ES+A128KW':case'ECDH-ES+A192KW':case'ECDH-ES+A256KW':{const s=t?.crv??'P-256';switch(s){case void 0:case'P-256':case'P-384':case'P-521':return o('ec',{namedCurve:s});case'X25519':return o('x25519');case'X448':return o('x448');default:throw new u.JOSENotSupported('Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448')}}default:throw new u.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}},e.generateSecret=async function(s,c){let o;switch(s){case'HS256':case'HS384':case'HS512':case'A128CBC-HS256':case'A192CBC-HS384':case'A256CBC-HS512':o=parseInt(s.slice(-3),10);break;case'A128KW':case'A192KW':case'A256KW':case'A128GCMKW':case'A192GCMKW':case'A256GCMKW':case'A128GCM':case'A192GCM':case'A256GCM':o=parseInt(s.slice(1,4),10);break;default:throw new u.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return(0,t.createSecretKey)((0,n.default)(new Uint8Array(o>>3)))};var t=r(d[1]),c=r(d[2]),n=s(r(d[3])),u=r(d[4]);const o=(0,c.promisify)(t.generateKeyPair)}),7069,[16,468,467,6998,6996]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.generateSecret=async function(t,c){return(0,n.generateSecret)(t,c)};var n=r(d[0])}),7070,[7069]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=t(r(d[1]));e.default=u.default}),7071,[16,7072]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default='node:crypto'}),7072,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.a=async function(s,n){const{data:c,error:p}=await(0,t.betterFetch)(n,{method:"GET",headers:{accept:"application/json","user-agent":"better-auth"}});if(p)throw p;const h=c.keys,l=JSON.parse(atob(s.split(".")[0])),_=h.find((t=>t.kid===l.kid));if(!_)throw new Error("Key not found");return await(0,o.jwtVerify)(s,_)},e.b=h,e.c=async function({id:t,options:s,authorizationEndpoint:n,state:c,codeVerifier:o,scopes:h,claims:l,redirectURI:_,duration:f,prompt:u,accessType:y,responseType:k,display:w,loginHint:P,hd:T,responseMode:b,additionalParams:S,scopeJoiner:U}){const I=new URL(n);if(I.searchParams.set("response_type",k||"code"),I.searchParams.set("client_id",s.clientId),I.searchParams.set("state",c),I.searchParams.set("scope",h.join(U||" ")),I.searchParams.set("redirect_uri",s.redirectURI||_),f&&I.searchParams.set("duration",f),w&&I.searchParams.set("display",w),P&&I.searchParams.set("login_hint",P),u&&I.searchParams.set("prompt",u),T&&I.searchParams.set("hd",T),y&&I.searchParams.set("access_type",y),b&&I.searchParams.set("response_mode",b),o){const t=await p(o);I.searchParams.set("code_challenge_method","S256"),I.searchParams.set("code_challenge",t)}if(l){const t=l.reduce(((t,s)=>(t[s]=null,t)),{});I.searchParams.set("claims",JSON.stringify({id_token:{email:null,email_verified:null,...t}}))}S&&Object.entries(S).forEach((([t,s])=>{I.searchParams.set(t,s)}));return I},e.e=void 0,e.g=p,e.r=async function({refreshToken:s,options:n,tokenEndpoint:o,authentication:p,extraParams:h,grantType:l="refresh_token"}){const _=new URLSearchParams,f={"content-type":"application/x-www-form-urlencoded",accept:"application/json"};if(_.set("grant_type",l),_.set("refresh_token",s),"basic"===p){const t=c.base64Url.encode(`${n.clientId}:${n.clientSecret}`);f.authorization=`Basic ${t}`}else _.set("client_id",n.clientId),_.set("client_secret",n.clientSecret);if(h)for(const[t,s]of Object.entries(h))_.set(t,s);const{data:u,error:y}=await(0,t.betterFetch)(o,{method:"POST",body:_,headers:f});if(y)throw y;const k={accessToken:u.access_token,refreshToken:u.refresh_token,tokenType:u.token_type,scopes:u.scope?.split(" "),idToken:u.id_token};if(u.expires_in){const t=new Date;k.accessTokenExpiresAt=new Date(t.getTime()+1e3*u.expires_in)}return k},e.v=async function({code:s,codeVerifier:n,redirectURI:o,options:p,tokenEndpoint:l,authentication:_,deviceId:f}){const u=new URLSearchParams,y={"content-type":"application/x-www-form-urlencoded",accept:"application/json","user-agent":"better-auth"};if(u.set("grant_type","authorization_code"),u.set("code",s),n&&u.set("code_verifier",n),p.clientKey&&u.set("client_key",p.clientKey),f&&u.set("device_id",f),u.set("redirect_uri",p.redirectURI||o),"basic"===_){const t=c.base64Url.encode(`${p.clientId}:${p.clientSecret}`);y.authorization=`Basic ${t}`}else u.set("client_id",p.clientId),u.set("client_secret",p.clientSecret);const{data:k,error:w}=await(0,t.betterFetch)(l,{method:"POST",body:u,headers:y});if(w)throw w;return h(k)};var t=r(d[0]),s=r(d[1]),n=r(d[2]),c=r(d[3]),o=r(d[4]);async function p(t){const s=await(0,n.createHash)("SHA-256").digest(t);return c.base64Url.encode(new Uint8Array(s),{padding:!1})}function h(t){return{tokenType:t.token_type,accessToken:t.access_token,refreshToken:t.refresh_token,accessTokenExpiresAt:t.expires_in?(0,s.g)(t.expires_in,"sec"):void 0,scopes:t?.scope?"string"==typeof t.scope?t.scope.split(" "):t.scope:[],idToken:t.id_token}}e.e=t=>encodeURIComponent(t).replace(/%20/g,"+")}),7073,[908,6982,7074,6983,6988]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.createHash=function(o,s){return{digest:async u=>{const c=new TextEncoder,l="string"==typeof u?c.encode(u):u,b=await n.subtle.digest(o,l);if("hex"===s){return Array.from(new Uint8Array(b)).map((n=>n.toString(16).padStart(2,"0"))).join("")}if("base64"===s||"base64url"===s||"base64urlnopad"===s){if(s.includes("url"))return t.base64Url.encode(b,{padding:"base64urlnopad"!==s});return t.base64.encode(b)}return b}}};var n=r(d[0]),t=r(d[1])}),7074,[6978,6983]);
__d((function(g,_r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.chacha8=e.chacha20poly1305=e.chacha20orig=e.chacha20=e.chacha12=e._poly1305_aead=void 0,e.hchacha=c,e.xchacha20poly1305=e.xchacha20=void 0;var t=_r(d[0]),r=_r(d[1]),o=_r(d[2]),l=_r(d[3]);function n(r,o,l,n,c,h=20){let i=r[0],s=r[1],u=r[2],y=r[3],p=o[0],w=o[1],b=o[2],f=o[3],L=o[4],_=o[5],C=o[6],U=o[7],v=c,x=l[0],A=l[1],B=l[2],R=i,S=s,K=u,k=y,z=p,E=w,I=b,j=f,q=L,F=_,M=C,N=U,O=v,P=x,V=A,D=B;for(let r=0;r<h;r+=2)R=R+z|0,O=(0,t.rotl)(O^R,16),q=q+O|0,z=(0,t.rotl)(z^q,12),R=R+z|0,O=(0,t.rotl)(O^R,8),q=q+O|0,z=(0,t.rotl)(z^q,7),S=S+E|0,P=(0,t.rotl)(P^S,16),F=F+P|0,E=(0,t.rotl)(E^F,12),S=S+E|0,P=(0,t.rotl)(P^S,8),F=F+P|0,E=(0,t.rotl)(E^F,7),K=K+I|0,V=(0,t.rotl)(V^K,16),M=M+V|0,I=(0,t.rotl)(I^M,12),K=K+I|0,V=(0,t.rotl)(V^K,8),M=M+V|0,I=(0,t.rotl)(I^M,7),k=k+j|0,D=(0,t.rotl)(D^k,16),N=N+D|0,j=(0,t.rotl)(j^N,12),k=k+j|0,D=(0,t.rotl)(D^k,8),N=N+D|0,j=(0,t.rotl)(j^N,7),R=R+E|0,D=(0,t.rotl)(D^R,16),M=M+D|0,E=(0,t.rotl)(E^M,12),R=R+E|0,D=(0,t.rotl)(D^R,8),M=M+D|0,E=(0,t.rotl)(E^M,7),S=S+I|0,O=(0,t.rotl)(O^S,16),N=N+O|0,I=(0,t.rotl)(I^N,12),S=S+I|0,O=(0,t.rotl)(O^S,8),N=N+O|0,I=(0,t.rotl)(I^N,7),K=K+j|0,P=(0,t.rotl)(P^K,16),q=q+P|0,j=(0,t.rotl)(j^q,12),K=K+j|0,P=(0,t.rotl)(P^K,8),q=q+P|0,j=(0,t.rotl)(j^q,7),k=k+z|0,V=(0,t.rotl)(V^k,16),F=F+V|0,z=(0,t.rotl)(z^F,12),k=k+z|0,V=(0,t.rotl)(V^k,8),F=F+V|0,z=(0,t.rotl)(z^F,7);let G=0;n[G++]=i+R|0,n[G++]=s+S|0,n[G++]=u+K|0,n[G++]=y+k|0,n[G++]=p+z|0,n[G++]=w+E|0,n[G++]=b+I|0,n[G++]=f+j|0,n[G++]=L+q|0,n[G++]=_+F|0,n[G++]=C+M|0,n[G++]=U+N|0,n[G++]=v+O|0,n[G++]=x+P|0,n[G++]=A+V|0,n[G++]=B+D|0}function c(r,o,l,n){let c=r[0],h=r[1],i=r[2],s=r[3],u=o[0],y=o[1],p=o[2],w=o[3],b=o[4],f=o[5],L=o[6],_=o[7],C=l[0],U=l[1],v=l[2],x=l[3];for(let r=0;r<20;r+=2)c=c+u|0,C=(0,t.rotl)(C^c,16),b=b+C|0,u=(0,t.rotl)(u^b,12),c=c+u|0,C=(0,t.rotl)(C^c,8),b=b+C|0,u=(0,t.rotl)(u^b,7),h=h+y|0,U=(0,t.rotl)(U^h,16),f=f+U|0,y=(0,t.rotl)(y^f,12),h=h+y|0,U=(0,t.rotl)(U^h,8),f=f+U|0,y=(0,t.rotl)(y^f,7),i=i+p|0,v=(0,t.rotl)(v^i,16),L=L+v|0,p=(0,t.rotl)(p^L,12),i=i+p|0,v=(0,t.rotl)(v^i,8),L=L+v|0,p=(0,t.rotl)(p^L,7),s=s+w|0,x=(0,t.rotl)(x^s,16),_=_+x|0,w=(0,t.rotl)(w^_,12),s=s+w|0,x=(0,t.rotl)(x^s,8),_=_+x|0,w=(0,t.rotl)(w^_,7),c=c+y|0,x=(0,t.rotl)(x^c,16),L=L+x|0,y=(0,t.rotl)(y^L,12),c=c+y|0,x=(0,t.rotl)(x^c,8),L=L+x|0,y=(0,t.rotl)(y^L,7),h=h+p|0,C=(0,t.rotl)(C^h,16),_=_+C|0,p=(0,t.rotl)(p^_,12),h=h+p|0,C=(0,t.rotl)(C^h,8),_=_+C|0,p=(0,t.rotl)(p^_,7),i=i+w|0,U=(0,t.rotl)(U^i,16),b=b+U|0,w=(0,t.rotl)(w^b,12),i=i+w|0,U=(0,t.rotl)(U^i,8),b=b+U|0,w=(0,t.rotl)(w^b,7),s=s+u|0,v=(0,t.rotl)(v^s,16),f=f+v|0,u=(0,t.rotl)(u^f,12),s=s+u|0,v=(0,t.rotl)(v^s,8),f=f+v|0,u=(0,t.rotl)(u^f,7);let A=0;n[A++]=c,n[A++]=h,n[A++]=i,n[A++]=s,n[A++]=C,n[A++]=U,n[A++]=v,n[A++]=x}e.chacha20orig=(0,t.createCipher)(n,{counterRight:!1,counterLength:8,allowShortKeys:!0});const h=e.chacha20=(0,t.createCipher)(n,{counterRight:!1,counterLength:4,allowShortKeys:!1}),i=e.xchacha20=(0,t.createCipher)(n,{counterRight:!1,counterLength:8,extendNonceFn:c,allowShortKeys:!1}),s=(e.chacha8=(0,t.createCipher)(n,{counterRight:!1,counterLength:4,rounds:8}),e.chacha12=(0,t.createCipher)(n,{counterRight:!1,counterLength:4,rounds:12}),new Uint8Array(16)),u=(t,r)=>{t.update(r);const o=r.length%16;o&&t.update(s.subarray(o))},y=new Uint8Array(32);function p(t,r,n,c,h){const i=t(r,n,y),s=o.poly1305.create(i);h&&u(s,h),u(s,c);const p=new Uint8Array(16),w=(0,l.createView)(p);(0,l.setBigUint64)(w,0,BigInt(h?h.length:0),!0),(0,l.setBigUint64)(w,8,BigInt(c.length),!0),s.update(p);const b=s.digest();return(0,l.clean)(i,p),b}const w=t=>(o,n,c)=>((0,r.bytes)(o,32),(0,r.bytes)(n),{encrypt(h,i){const s=h.length,u=s+16;i?(0,r.bytes)(i,u):i=new Uint8Array(u),t(o,n,h,i,1);const y=p(t,o,n,i.subarray(0,-16),c);return i.set(y,s),(0,l.clean)(y),i},decrypt(h,i){const s=h.length,u=s-16;if(s<16)throw new Error("encrypted data must be at least 16 bytes");i?(0,r.bytes)(i,u):i=new Uint8Array(u);const y=h.subarray(0,-16),w=h.subarray(-16),b=p(t,o,n,y,c);if(!(0,l.equalBytes)(w,b))throw new Error('invalid tag');return t(o,n,y,i,1),(0,l.clean)(b),i}});e._poly1305_aead=w;e.chacha20poly1305=(0,l.wrapCipher)({blockSize:64,nonceLength:12,tagLength:16},w(h)),e.xchacha20poly1305=(0,l.wrapCipher)({blockSize:64,nonceLength:24,tagLength:16},w(i))}),7075,[7076,7077,7079,7078]);
__d((function(g,r,i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.createCipher=function(o,s){const{allowShortKeys:u,extendNonceFn:l,counterLength:f,counterRight:w,rounds:p}=(0,n.checkOpts)({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},s);if('function'!=typeof o)throw new Error('core must be a function');return(0,t.number)(f),(0,t.number)(p),(0,t.bool)(w),(0,t.bool)(u),(s,x,v,E,A=0)=>{(0,t.bytes)(s),(0,t.bytes)(x),(0,t.bytes)(v);const U=v.length;if(void 0===E&&(E=new Uint8Array(U)),(0,t.bytes)(E),(0,t.number)(A),A<0||A>=y)throw new Error('arx: counter overflow');if(E.length<U)throw new Error(`arx: output (${E.length}) is shorter than data (${U})`);const k=[];let $,_,O=s.length;if(32===O)k.push($=(0,n.copyBytes)(s)),_=a;else{if(16!==O||!u)throw new Error(`arx: invalid 32-byte key, got length=${O}`);$=new Uint8Array(32),$.set(s),$.set(s,16),_=c,k.push($)}h(x)||k.push(x=(0,n.copyBytes)(x));const B=(0,n.u32)($);if(l){if(24!==x.length)throw new Error("arx: extended nonce must be 24 bytes");l(_,B,(0,n.u32)(x.subarray(0,16)),B),x=x.subarray(16)}const C=16-f;if(C!==x.length)throw new Error(`arx: nonce must be ${C} or 16 bytes`);if(12!==C){const t=new Uint8Array(12);t.set(x,w?0:12-x.length),x=t,k.push(x)}const K=(0,n.u32)(x);return b(o,_,B,K,v,E,A,p),(0,n.clean)(...k),E}},e.rotl=function(t,n){return t<<n|t>>>32-n},e.sigma=void 0;var t=r(d[0]),n=r(d[1]);const o=t=>Uint8Array.from(t.split('').map((t=>t.charCodeAt(0)))),s=o('expand 16-byte k'),u=o('expand 32-byte k'),c=(0,n.u32)(s),a=(0,n.u32)(u);e.sigma=a.slice();function h(t){return t.byteOffset%4==0}const l=64,f=16,y=4294967295,w=new Uint32Array;function b(t,o,s,u,c,a,b,p){const x=c.length,v=new Uint8Array(l),E=(0,n.u32)(v),A=h(c)&&h(a),U=A?(0,n.u32)(c):w,k=A?(0,n.u32)(a):w;for(let n=0;n<x;b++){if(t(o,s,u,E,b,p),b>=y)throw new Error('arx: counter overflow');const h=Math.min(l,x-n);if(A&&h===l){const t=n/4;if(n%4!=0)throw new Error('arx: invalid block position');for(let n,o=0;o<f;o++)n=t+o,k[n]=U[n]^E[o];n+=l}else{for(let t,o=0;o<h;o++)t=n+o,a[t]=c[t]^v[o];n+=h}}}}),7076,[7077,7078]);
__d((function(g,r,i,_a,m,e,d){function t(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}function n(t){if('boolean'!=typeof t)throw new Error(`boolean expected, not ${t}`)}function o(t){return t instanceof Uint8Array||null!=t&&'object'==typeof t&&'Uint8Array'===t.constructor.name}function u(t,...n){if(!o(t))throw new Error('Uint8Array expected');if(n.length>0&&!n.includes(t.length))throw new Error(`Uint8Array expected of length ${n}, not of length=${t.length}`)}function s(n){if('function'!=typeof n||'function'!=typeof n.create)throw new Error('hash must be wrapped by utils.wrapConstructor');t(n.outputLen),t(n.blockLen)}function f(t,n=!0){if(t.destroyed)throw new Error('Hash instance has been destroyed');if(n&&t.finished)throw new Error('Hash#digest() has already been called')}function a(t,n){u(t);const o=n.outputLen;if(t.length<o)throw new Error(`digestInto() expects output buffer of length at least ${o}`)}Object.defineProperty(e,"__esModule",{value:!0}),e.bool=n,e.bytes=u,e.default=void 0,e.exists=f,e.hash=s,e.isBytes=o,e.number=t,e.output=a;const c={number:t,bool:n,bytes:u,hash:s,exists:f,output:a};e.default=c}),7077,[]);
__d((function(g,r,_i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.Hash=void 0,e.asyncLoop=async function(t,n,o){let i=Date.now();for(let f=0;f<t;f++){o(f);const t=Date.now()-i;t>=0&&t<n||(await a(),i+=t)}},e.bytesToHex=i,e.bytesToNumberBE=function(t){return u(i(t))},e.bytesToUtf8=function(t){return(new TextDecoder).decode(t)},e.checkOpts=function(t,n){if(null==n||'object'!=typeof n)throw new Error('options must be defined');return Object.assign(t,n)},e.clean=function(...t){for(let n=0;n<t.length;n++)t[n].fill(0)},e.concatBytes=function(...n){let o=0;for(let i=0;i<n.length;i++){const f=n[i];(0,t.bytes)(f),o+=f.length}const i=new Uint8Array(o);for(let t=0,o=0;t<n.length;t++){const f=n[t];i.set(f,o),o+=f.length}return i},e.copyBytes=l,e.createView=void 0,e.equalBytes=function(t,n){if(t.length!==n.length)return!1;let o=0;for(let i=0;i<t.length;i++)o|=t[i]^n[i];return 0===o},e.hexToBytes=c,e.hexToNumber=u,e.isAligned32=function(t){return t.byteOffset%4==0},e.nextTick=e.isLE=void 0,e.numberToBytesBE=function(t,n){return c(t.toString(16).padStart(2*n,'0'))},e.setBigUint64=h,e.toBytes=function(n){if('string'==typeof n)n=y(n);else{if(!(0,t.isBytes)(n))throw new Error("Uint8Array expected, got "+typeof n);n=l(n)}return n},e.u32=e.u16=void 0,e.u64Lengths=function(t,o){const i=new Uint8Array(16),f=n(i);return h(f,0,BigInt(o?o.length:0),!0),h(f,8,BigInt(t.length),!0),i},e.u8=void 0,e.utf8ToBytes=y,e.wrapCipher=void 0;var t=r(d[0]);
/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */e.u8=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength);e.u16=t=>new Uint16Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/2));e.u32=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));const n=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);e.createView=n;if(!(e.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error('Non little-endian hardware is not supported');const o=Array.from({length:256},((t,n)=>n.toString(16).padStart(2,'0')));function i(n){(0,t.bytes)(n);let i='';for(let t=0;t<n.length;t++)i+=o[n[t]];return i}const f={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function s(t){return t>=f._0&&t<=f._9?t-f._0:t>=f._A&&t<=f._F?t-(f._A-10):t>=f._a&&t<=f._f?t-(f._a-10):void 0}function c(t){if('string'!=typeof t)throw new Error('hex string expected, got '+typeof t);const n=t.length,o=n/2;if(n%2)throw new Error('padded hex string expected, got unpadded hex of length '+n);const i=new Uint8Array(o);for(let n=0,f=0;n<o;n++,f+=2){const o=s(t.charCodeAt(f)),c=s(t.charCodeAt(f+1));if(void 0===o||void 0===c){const n=t[f]+t[f+1];throw new Error('hex string expected, got non-hex character "'+n+'" at index '+f)}i[n]=16*o+c}return i}function u(t){if('string'!=typeof t)throw new Error('hex string expected, got '+typeof t);return BigInt(''===t?'0':`0x${t}`)}const a=async()=>{};function y(t){if('string'!=typeof t)throw new Error("string expected, got "+typeof t);return new Uint8Array((new TextEncoder).encode(t))}e.nextTick=a;e.Hash=class{};function h(t,n,o,i){if('function'==typeof t.setBigUint64)return t.setBigUint64(n,o,i);const f=BigInt(32),s=BigInt(4294967295),c=Number(o>>f&s),u=Number(o&s),a=i?4:0,y=i?0:4;t.setUint32(n+a,c,i),t.setUint32(n+y,u,i)}function l(t){return Uint8Array.from(t)}e.wrapCipher=(t,n)=>(Object.assign(n,t),n)}),7078,[7077]);
__d((function(_g,_r,_i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.poly1305=void 0,e.wrapConstructorWithKey=o;var t=_r(d[0]),s=_r(d[1]);const i=(t,s)=>255&t[s++]|(255&t[s++])<<8;class r{constructor(r){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,r=(0,s.toBytes)(r),(0,t.bytes)(r,32);const o=i(r,0),h=i(r,2),n=i(r,4),l=i(r,6),c=i(r,8),f=i(r,10),u=i(r,12),p=i(r,14);this.r[0]=8191&o,this.r[1]=8191&(o>>>13|h<<3),this.r[2]=7939&(h>>>10|n<<6),this.r[3]=8191&(n>>>7|l<<9),this.r[4]=255&(l>>>4|c<<12),this.r[5]=c>>>1&8190,this.r[6]=8191&(c>>>14|f<<2),this.r[7]=8065&(f>>>11|u<<5),this.r[8]=8191&(u>>>8|p<<8),this.r[9]=p>>>5&127;for(let t=0;t<8;t++)this.pad[t]=i(r,16+2*t)}process(t,s,r=!1){const o=r?0:2048,{h:h,r:n}=this,l=n[0],c=n[1],f=n[2],u=n[3],p=n[4],a=n[5],y=n[6],b=n[7],w=n[8],L=n[9],A=i(t,s+0),U=i(t,s+2),g=i(t,s+4),k=i(t,s+6),_=i(t,s+8),v=i(t,s+10),B=i(t,s+12),x=i(t,s+14);let z=h[0]+(8191&A),I=h[1]+(8191&(A>>>13|U<<3)),M=h[2]+(8191&(U>>>10|g<<6)),j=h[3]+(8191&(g>>>7|k<<9)),C=h[4]+(8191&(k>>>4|_<<12)),K=h[5]+(_>>>1&8191),O=h[6]+(8191&(_>>>14|v<<2)),P=h[7]+(8191&(v>>>11|B<<5)),W=h[8]+(8191&(B>>>8|x<<8)),q=h[9]+(x>>>5|o),D=0,E=D+z*l+I*(5*L)+M*(5*w)+j*(5*b)+C*(5*y);D=E>>>13,E&=8191,E+=K*(5*a)+O*(5*p)+P*(5*u)+W*(5*f)+q*(5*c),D+=E>>>13,E&=8191;let F=D+z*c+I*l+M*(5*L)+j*(5*w)+C*(5*b);D=F>>>13,F&=8191,F+=K*(5*y)+O*(5*a)+P*(5*p)+W*(5*u)+q*(5*f),D+=F>>>13,F&=8191;let G=D+z*f+I*c+M*l+j*(5*L)+C*(5*w);D=G>>>13,G&=8191,G+=K*(5*b)+O*(5*y)+P*(5*a)+W*(5*p)+q*(5*u),D+=G>>>13,G&=8191;let H=D+z*u+I*f+M*c+j*l+C*(5*L);D=H>>>13,H&=8191,H+=K*(5*w)+O*(5*b)+P*(5*y)+W*(5*a)+q*(5*p),D+=H>>>13,H&=8191;let J=D+z*p+I*u+M*f+j*c+C*l;D=J>>>13,J&=8191,J+=K*(5*L)+O*(5*w)+P*(5*b)+W*(5*y)+q*(5*a),D+=J>>>13,J&=8191;let N=D+z*a+I*p+M*u+j*f+C*c;D=N>>>13,N&=8191,N+=K*l+O*(5*L)+P*(5*w)+W*(5*b)+q*(5*y),D+=N>>>13,N&=8191;let Q=D+z*y+I*a+M*p+j*u+C*f;D=Q>>>13,Q&=8191,Q+=K*c+O*l+P*(5*L)+W*(5*w)+q*(5*b),D+=Q>>>13,Q&=8191;let R=D+z*b+I*y+M*a+j*p+C*u;D=R>>>13,R&=8191,R+=K*f+O*c+P*l+W*(5*L)+q*(5*w),D+=R>>>13,R&=8191;let S=D+z*w+I*b+M*y+j*a+C*p;D=S>>>13,S&=8191,S+=K*u+O*f+P*c+W*l+q*(5*L),D+=S>>>13,S&=8191;let T=D+z*L+I*w+M*b+j*y+C*a;D=T>>>13,T&=8191,T+=K*p+O*u+P*f+W*c+q*l,D+=T>>>13,T&=8191,D=(D<<2)+D|0,D=D+E|0,E=8191&D,D>>>=13,F+=D,h[0]=E,h[1]=F,h[2]=G,h[3]=H,h[4]=J,h[5]=N,h[6]=Q,h[7]=R,h[8]=S,h[9]=T}finalize(){const{h:t,pad:i}=this,r=new Uint16Array(10);let o=t[1]>>>13;t[1]&=8191;for(let s=2;s<10;s++)t[s]+=o,o=t[s]>>>13,t[s]&=8191;t[0]+=5*o,o=t[0]>>>13,t[0]&=8191,t[1]+=o,o=t[1]>>>13,t[1]&=8191,t[2]+=o,r[0]=t[0]+5,o=r[0]>>>13,r[0]&=8191;for(let s=1;s<10;s++)r[s]=t[s]+o,o=r[s]>>>13,r[s]&=8191;r[9]-=8192;let h=(1^o)-1;for(let t=0;t<10;t++)r[t]&=h;h=~h;for(let s=0;s<10;s++)t[s]=t[s]&h|r[s];t[0]=65535&(t[0]|t[1]<<13),t[1]=65535&(t[1]>>>3|t[2]<<10),t[2]=65535&(t[2]>>>6|t[3]<<7),t[3]=65535&(t[3]>>>9|t[4]<<4),t[4]=65535&(t[4]>>>12|t[5]<<1|t[6]<<14),t[5]=65535&(t[6]>>>2|t[7]<<11),t[6]=65535&(t[7]>>>5|t[8]<<8),t[7]=65535&(t[8]>>>8|t[9]<<5);let n=t[0]+i[0];t[0]=65535&n;for(let s=1;s<8;s++)n=(t[s]+i[s]|0)+(n>>>16)|0,t[s]=65535&n;(0,s.clean)(r)}update(i){(0,t.exists)(this);const{buffer:r,blockLen:o}=this,h=(i=(0,s.toBytes)(i)).length;for(let t=0;t<h;){const s=Math.min(o-this.pos,h-t);if(s!==o)r.set(i.subarray(t,t+s),this.pos),this.pos+=s,t+=s,this.pos===o&&(this.process(r,0,!1),this.pos=0);else for(;o<=h-t;t+=o)this.process(i,t)}return this}destroy(){(0,s.clean)(this.h,this.r,this.buffer,this.pad)}digestInto(s){(0,t.exists)(this),(0,t.output)(s,this),this.finished=!0;const{buffer:i,h:r}=this;let{pos:o}=this;if(o){for(i[o++]=1;o<16;o++)i[o]=0;this.process(i,0,!0)}this.finalize();let h=0;for(let t=0;t<8;t++)s[h++]=r[t]>>>0,s[h++]=r[t]>>>8;return s}digest(){const{buffer:t,outputLen:s}=this;this.digestInto(t);const i=t.slice(0,s);return this.destroy(),i}}function o(t){const i=(i,r)=>t(r).update((0,s.toBytes)(i)).digest(),r=t(new Uint8Array(32));return i.outputLen=r.outputLen,i.blockLen=r.blockLen,i.create=s=>t(s),i}e.poly1305=o((t=>new r(t)))}),7079,[7077,7078]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.gcm=e.ctr=e.cbc=void 0,e.getWebcryptoSubtle=y,e.managedNonce=function(t){return(0,n.number)(t.nonceLength),(n,...y)=>({encrypt(u,...p){const{nonceLength:s}=t,l=o(s),b=t(n,l,...y).encrypt(u,...p),f=(0,c.concatBytes)(l,b);return b.fill(0),f},decrypt(c,...o){const{nonceLength:u}=t,p=c.subarray(0,u),s=c.subarray(u);return t(n,p,...y).decrypt(s,...o)}})},e.randomBytes=o,e.utils=void 0;var t=r(d[0]),n=r(d[1]),c=r(d[2]);function o(n=32){if(t.crypto&&'function'==typeof t.crypto.getRandomValues)return t.crypto.getRandomValues(new Uint8Array(n));throw new Error('crypto.getRandomValues must be defined')}function y(){if(t.crypto&&'object'==typeof t.crypto.subtle&&null!=t.crypto.subtle)return t.crypto.subtle;throw new Error('crypto.subtle must be defined')}const u=e.utils={async encrypt(t,n,c,o){const u=y(),p=await u.importKey('raw',t,n,!0,['encrypt']),s=await u.encrypt(c,p,o);return new Uint8Array(s)},async decrypt(t,n,c,o){const u=y(),p=await u.importKey('raw',t,n,!0,['decrypt']),s=await u.decrypt(c,p,o);return new Uint8Array(s)}},p='AES-CBC',s='AES-CTR',l='AES-GCM';function b(t,n,c){if(t===p)return{name:p,iv:n};if(t===s)return{name:s,counter:n,length:64};if(t===l)return c?{name:l,iv:n,additionalData:c}:{name:l,iv:n};throw new Error('unknown aes block mode')}function f(t){return(c,o,y)=>{(0,n.bytes)(c),(0,n.bytes)(o);const p={name:t,length:8*c.length},s=b(t,o,y);return{encrypt:t=>((0,n.bytes)(t),u.encrypt(c,p,s,t)),decrypt:t=>((0,n.bytes)(t),u.decrypt(c,p,s,t))}}}e.cbc=f(p),e.ctr=f(s),e.gcm=f(l)}),7080,[7081,7077,7078]);
__d((function(g,_r,_i,_a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.crypto=void 0;var e=(function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=t(r);if(n&&n.has(e))return n.get(e);var o={__proto__:null},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in e)if("default"!==f&&{}.hasOwnProperty.call(e,f)){var c=u?Object.getOwnPropertyDescriptor(e,f):null;c&&(c.get||c.set)?Object.defineProperty(o,f,c):o[f]=e[f]}return o.default=e,n&&n.set(e,o),o})(_r(d[0]));function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(t=function(e){return e?n:r})(e)}_e.crypto=e&&'object'==typeof e&&'webcrypto'in e?e.webcrypto:void 0}),7081,[468]);
__d((function(g,_r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.scrypt=function(t,r,o){const{N:l,r:f,p:p,dkLen:u,blockSize32:b,V:y,B32:k,B:w,tmp:h,blockMixCb:L}=s(t,r,o);n.isLE||(0,n.byteSwap32)(k);for(let t=0;t<p;t++){const r=b*t;for(let t=0;t<b;t++)y[t]=k[r+t];for(let t=0,r=0;t<l-1;t++)c(y,r,y,r+=b,f),L();c(y,(l-1)*b,k,r,f),L();for(let t=0;t<l;t++){const t=k[r+b-16]%l;for(let o=0;o<b;o++)h[o]=k[r+o]^y[t*b+o];c(h,0,k,r,f),L()}}n.isLE||(0,n.byteSwap32)(k);return i(t,u,w,y,h)},e.scryptAsync=async function(t,r,o){const{N:l,r:f,p:p,dkLen:u,blockSize32:b,V:y,B32:k,B:w,tmp:h,blockMixCb:L,asyncTick:S}=s(t,r,o);n.isLE||(0,n.byteSwap32)(k);for(let t=0;t<p;t++){const r=b*t;for(let t=0;t<b;t++)y[t]=k[r+t];let o=0;await(0,n.asyncLoop)(l-1,S,(()=>{c(y,o,y,o+=b,f),L()})),c(y,(l-1)*b,k,r,f),L(),await(0,n.asyncLoop)(l,S,(()=>{const t=k[r+b-16]%l;for(let o=0;o<b;o++)h[o]=k[r+o]^y[t*b+o];c(h,0,k,r,f),L()}))}n.isLE||(0,n.byteSwap32)(k);return i(t,u,w,y,h)};var t=_r(d[0]),r=_r(d[1]),o=_r(d[2]),n=_r(d[3]);function l(t,r,o,l,c,s){let i=t[r++]^o[l++],f=t[r++]^o[l++],p=t[r++]^o[l++],u=t[r++]^o[l++],b=t[r++]^o[l++],y=t[r++]^o[l++],k=t[r++]^o[l++],w=t[r++]^o[l++],h=t[r++]^o[l++],L=t[r++]^o[l++],S=t[r++]^o[l++],E=t[r++]^o[l++],x=t[r++]^o[l++],M=t[r++]^o[l++],B=t[r++]^o[l++],N=t[r++]^o[l++],v=i,C=f,T=p,_=u,z=b,A=y,V=k,q=w,O=h,P=L,U=S,j=E,D=x,F=M,G=B,H=N;for(let t=0;t<8;t+=2)z^=(0,n.rotl)(v+D|0,7),O^=(0,n.rotl)(z+v|0,9),D^=(0,n.rotl)(O+z|0,13),v^=(0,n.rotl)(D+O|0,18),P^=(0,n.rotl)(A+C|0,7),F^=(0,n.rotl)(P+A|0,9),C^=(0,n.rotl)(F+P|0,13),A^=(0,n.rotl)(C+F|0,18),G^=(0,n.rotl)(U+V|0,7),T^=(0,n.rotl)(G+U|0,9),V^=(0,n.rotl)(T+G|0,13),U^=(0,n.rotl)(V+T|0,18),_^=(0,n.rotl)(H+j|0,7),q^=(0,n.rotl)(_+H|0,9),j^=(0,n.rotl)(q+_|0,13),H^=(0,n.rotl)(j+q|0,18),C^=(0,n.rotl)(v+_|0,7),T^=(0,n.rotl)(C+v|0,9),_^=(0,n.rotl)(T+C|0,13),v^=(0,n.rotl)(_+T|0,18),V^=(0,n.rotl)(A+z|0,7),q^=(0,n.rotl)(V+A|0,9),z^=(0,n.rotl)(q+V|0,13),A^=(0,n.rotl)(z+q|0,18),j^=(0,n.rotl)(U+P|0,7),O^=(0,n.rotl)(j+U|0,9),P^=(0,n.rotl)(O+j|0,13),U^=(0,n.rotl)(P+O|0,18),D^=(0,n.rotl)(H+G|0,7),F^=(0,n.rotl)(D+H|0,9),G^=(0,n.rotl)(F+D|0,13),H^=(0,n.rotl)(G+F|0,18);c[s++]=i+v|0,c[s++]=f+C|0,c[s++]=p+T|0,c[s++]=u+_|0,c[s++]=b+z|0,c[s++]=y+A|0,c[s++]=k+V|0,c[s++]=w+q|0,c[s++]=h+O|0,c[s++]=L+P|0,c[s++]=S+U|0,c[s++]=E+j|0,c[s++]=x+D|0,c[s++]=M+F|0,c[s++]=B+G|0,c[s++]=N+H|0}function c(t,r,o,n,c){let s=n+0,i=n+16*c;for(let n=0;n<16;n++)o[i+n]=t[r+16*(2*c-1)+n];for(let n=0;n<c;n++,s+=16,r+=16)l(o,i,t,r,o,s),n>0&&(i+=16),l(o,s,t,r+=16,o,i)}function s(l,c,s){const i=(0,n.checkOpts)({dkLen:32,asyncTick:10,maxmem:1073742848},s),{N:f,r:p,p:u,dkLen:b,asyncTick:y,maxmem:k,onProgress:w}=i;if((0,t.anumber)(f),(0,t.anumber)(p),(0,t.anumber)(u),(0,t.anumber)(b),(0,t.anumber)(y),(0,t.anumber)(k),void 0!==w&&'function'!=typeof w)throw new Error('progressCb should be function');const h=128*p,L=h/4;if(f<=1||f&f-1||f>4294967296)throw new Error('Scrypt: N must be larger than 1, a power of 2, and less than 2^32');if(u<0||u>137438953440/h)throw new Error('Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)');if(b<0||b>137438953440)throw new Error('Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32');if(h*(f+u)>k)throw new Error('Scrypt: memused is bigger than maxMem. Expected 128 * r * (N + p) > maxmem of '+k);const S=(0,r.pbkdf2)(o.sha256,l,c,{c:1,dkLen:h*u}),E=(0,n.u32)(S),x=(0,n.u32)(new Uint8Array(h*f)),M=(0,n.u32)(new Uint8Array(h));let B=()=>{};if(w){const t=2*f*u,r=Math.max(Math.floor(t/1e4),1);let o=0;B=()=>{o++,!w||o%r&&o!==t||w(o/t)}}return{N:f,r:p,p:u,dkLen:b,blockSize32:L,V:x,B32:E,B:S,tmp:M,blockMixCb:B,asyncTick:y}}function i(t,n,l,c,s){const i=(0,r.pbkdf2)(o.sha256,t,l,{c:1,dkLen:n});return l.fill(0),c.fill(0),s.fill(0),i}}),7082,[7083,7084,7088,7086]);
__d((function(g,r,i,_a,m,e,d){function t(t){if(!Number.isSafeInteger(t)||t<0)throw new Error('positive integer expected, got '+t)}function n(t,...n){if(!((o=t)instanceof Uint8Array||ArrayBuffer.isView(o)&&'Uint8Array'===o.constructor.name))throw new Error('Uint8Array expected');var o;if(n.length>0&&!n.includes(t.length))throw new Error('Uint8Array expected of length '+n+', got length='+t.length)}Object.defineProperty(e,"__esModule",{value:!0}),e.abytes=n,e.aexists=function(t,n=!0){if(t.destroyed)throw new Error('Hash instance has been destroyed');if(n&&t.finished)throw new Error('Hash#digest() has already been called')},e.ahash=function(n){if('function'!=typeof n||'function'!=typeof n.create)throw new Error('Hash should be wrapped by utils.wrapConstructor');t(n.outputLen),t(n.blockLen)},e.anumber=t,e.aoutput=function(t,o){n(t);const a=o.outputLen;if(t.length<a)throw new Error('digestInto() expects output buffer of length at least '+a)}}),7083,[]);
__d((function(g,r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.pbkdf2=function(t,n,u,i){const{c:l,dkLen:y,DK:p,PRF:f,PRFSalt:k}=c(t,n,u,i);let L;const b=new Uint8Array(4),I=(0,o.createView)(b),h=new Uint8Array(f.outputLen);for(let t=1,n=0;n<y;t++,n+=f.outputLen){const o=p.subarray(n,n+f.outputLen);I.setInt32(0,t,!1),(L=k._cloneInto(L)).update(b).digestInto(h),o.set(h.subarray(0,o.length));for(let t=1;t<l;t++){f._cloneInto(L).update(h).digestInto(h);for(let t=0;t<o.length;t++)o[t]^=h[t]}}return s(f,k,p,L,h)},e.pbkdf2Async=async function(t,n,u,i){const{c:l,dkLen:y,asyncTick:p,DK:f,PRF:k,PRFSalt:L}=c(t,n,u,i);let b;const I=new Uint8Array(4),h=(0,o.createView)(I),w=new Uint8Array(k.outputLen);for(let t=1,n=0;n<y;t++,n+=k.outputLen){const c=f.subarray(n,n+k.outputLen);h.setInt32(0,t,!1),(b=L._cloneInto(b)).update(I).digestInto(w),c.set(w.subarray(0,c.length)),await(0,o.asyncLoop)(l-1,p,(()=>{k._cloneInto(b).update(w).digestInto(w);for(let t=0;t<c.length;t++)c[t]^=w[t]}))}return s(k,L,f,b,w)};var t=r(d[0]),n=r(d[1]),o=r(d[2]);function c(c,s,u,i){(0,t.ahash)(c);const l=(0,o.checkOpts)({dkLen:32,asyncTick:10},i),{c:y,dkLen:p,asyncTick:f}=l;if((0,t.anumber)(y),(0,t.anumber)(p),(0,t.anumber)(f),y<1)throw new Error('PBKDF2: iterations (c) should be >= 1');const k=(0,o.toBytes)(s),L=(0,o.toBytes)(u),b=new Uint8Array(p),I=n.hmac.create(c,k),h=I._cloneInto().update(L);return{c:y,dkLen:p,asyncTick:f,DK:b,PRF:I,PRFSalt:h}}function s(t,n,o,c,s){return t.destroy(),n.destroy(),c&&c.destroy(),s.fill(0),o}}),7084,[7083,7085,7086]);
__d((function(g,r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.hmac=e.HMAC=void 0;var t=r(d[0]),s=r(d[1]);class i extends s.Hash{constructor(i,h){super(),this.finished=!1,this.destroyed=!1,(0,t.ahash)(i);const o=(0,s.toBytes)(h);if(this.iHash=i.create(),'function'!=typeof this.iHash.update)throw new Error('Expected instance of class which extends utils.Hash');this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,c=new Uint8Array(n);c.set(o.length>n?i.create().update(o).digest():o);for(let t=0;t<c.length;t++)c[t]^=54;this.iHash.update(c),this.oHash=i.create();for(let t=0;t<c.length;t++)c[t]^=106;this.oHash.update(c),c.fill(0)}update(s){return(0,t.aexists)(this),this.iHash.update(s),this}digestInto(s){(0,t.aexists)(this),(0,t.abytes)(s,this.outputLen),this.finished=!0,this.iHash.digestInto(s),this.oHash.update(s),this.oHash.digestInto(s),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:s,iHash:i,finished:h,destroyed:o,blockLen:n,outputLen:c}=this;return t.finished=h,t.destroyed=o,t.blockLen=n,t.outputLen=c,t.oHash=s._cloneInto(t.oHash),t.iHash=i._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}e.HMAC=i;const h=(t,s,h)=>new i(t,s).update(h).digest();e.hmac=h,h.create=(t,s)=>new i(t,s)}),7085,[7083,7086]);
__d((function(g,r,_i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.Hash=void 0,e.asyncLoop=async function(t,n,o){let c=Date.now();for(let i=0;i<t;i++){o(i);const t=Date.now()-c;t>=0&&t<n||(await s(),c+=t)}},e.byteSwap=c,e.byteSwap32=function(t){for(let n=0;n<t.length;n++)t[n]=c(t[n])},e.byteSwapIfBE=void 0,e.bytesToHex=function(t){if((0,n.abytes)(t),i)return t.toHex();let o='';for(let n=0;n<t.length;n++)o+=u[t[n]];return o},e.checkOpts=function(t,n){if(void 0!==n&&'[object Object]'!=={}.toString.call(n))throw new Error('Options should be object or undefined');return Object.assign(t,n)},e.concatBytes=function(...t){let o=0;for(let c=0;c<t.length;c++){const i=t[c];(0,n.abytes)(i),o+=i.length}const c=new Uint8Array(o);for(let n=0,o=0;n<t.length;n++){const i=t[n];c.set(i,o),o+=i.length}return c},e.createView=function(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)},e.hexToBytes=function(t){if('string'!=typeof t)throw new Error('hex string expected, got '+typeof t);if(i)return Uint8Array.fromHex(t);const n=t.length,o=n/2;if(n%2)throw new Error('hex string expected, got unpadded hex of length '+n);const c=new Uint8Array(o);for(let n=0,i=0;n<o;n++,i+=2){const o=a(t.charCodeAt(i)),u=a(t.charCodeAt(i+1));if(void 0===o||void 0===u){const n=t[i]+t[i+1];throw new Error('hex string expected, got non-hex character "'+n+'" at index '+i)}c[n]=16*o+u}return c},e.isBytes=
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
function(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&'Uint8Array'===t.constructor.name},e.nextTick=e.isLE=void 0,e.randomBytes=function(n=32){if(t.crypto&&'function'==typeof t.crypto.getRandomValues)return t.crypto.getRandomValues(new Uint8Array(n));if(t.crypto&&'function'==typeof t.crypto.randomBytes)return Uint8Array.from(t.crypto.randomBytes(n));throw new Error('crypto.getRandomValues must be defined')},e.rotl=function(t,n){return t<<n|t>>>32-n>>>0},e.rotr=function(t,n){return t<<32-n|t>>>n},e.toBytes=p,e.u32=function(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))},e.u8=function(t){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},e.utf8ToBytes=y,e.wrapConstructor=function(t){const n=n=>t().update(p(n)).digest(),o=t();return n.outputLen=o.outputLen,n.blockLen=o.blockLen,n.create=()=>t(),n},e.wrapConstructorWithOpts=function(t){const n=(n,o)=>t(o).update(p(n)).digest(),o=t({});return n.outputLen=o.outputLen,n.blockLen=o.blockLen,n.create=n=>t(n),n},e.wrapXOFConstructorWithOpts=function(t){const n=(n,o)=>t(o).update(p(n)).digest(),o=t({});return n.outputLen=o.outputLen,n.blockLen=o.blockLen,n.create=n=>t(n),n};var t=r(d[0]),n=r(d[1]);const o=e.isLE=(()=>68===new Uint8Array(new Uint32Array([287454020]).buffer)[0])();function c(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}e.byteSwapIfBE=o?t=>t:t=>c(t);const i='function'==typeof Uint8Array.from([]).toHex&&'function'==typeof Uint8Array.fromHex,u=Array.from({length:256},((t,n)=>n.toString(16).padStart(2,'0')));const f={_0:48,_9:57,A:65,F:70,a:97,f:102};function a(t){return t>=f._0&&t<=f._9?t-f._0:t>=f.A&&t<=f.F?t-(f.A-10):t>=f.a&&t<=f.f?t-(f.a-10):void 0}const s=async()=>{};function y(t){if('string'!=typeof t)throw new Error('utf8ToBytes expected string, got '+typeof t);return new Uint8Array((new TextEncoder).encode(t))}function p(t){return'string'==typeof t&&(t=y(t)),(0,n.abytes)(t),t}e.nextTick=s;e.Hash=class{clone(){return this._cloneInto()}}}),7086,[7087,7083]);
__d((function(g,_r,_i,_a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.crypto=void 0;var e=(function(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=t(r);if(n&&n.has(e))return n.get(e);var o={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&{}.hasOwnProperty.call(e,u)){var c=f?Object.getOwnPropertyDescriptor(e,u):null;c&&(c.get||c.set)?Object.defineProperty(o,u,c):o[u]=e[u]}return o.default=e,n&&n.set(e,o),o})(_r(d[0]));function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(t=function(e){return e?n:r})(e)}_e.crypto=e&&'object'==typeof e&&'webcrypto'in e?e.webcrypto:e&&'object'==typeof e&&'randomBytes'in e?e:void 0}),7087,[468]);
__d((function(g,r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.sha256=e.sha224=e.SHA256=void 0;var t=r(d[0]),s=r(d[1]);const i=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),h=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),o=new Uint32Array(64);class n extends t.HashMD{constructor(t=32){super(64,t,8,!1),this.A=0|h[0],this.B=0|h[1],this.C=0|h[2],this.D=0|h[3],this.E=0|h[4],this.F=0|h[5],this.G=0|h[6],this.H=0|h[7]}get(){const{A:t,B:s,C:i,D:h,E:o,F:n,G:c,H:l}=this;return[t,s,i,h,o,n,c,l]}set(t,s,i,h,o,n,c,l){this.A=0|t,this.B=0|s,this.C=0|i,this.D=0|h,this.E=0|o,this.F=0|n,this.G=0|c,this.H=0|l}process(h,n){for(let t=0;t<16;t++,n+=4)o[t]=h.getUint32(n,!1);for(let t=16;t<64;t++){const i=o[t-15],h=o[t-2],n=(0,s.rotr)(i,7)^(0,s.rotr)(i,18)^i>>>3,c=(0,s.rotr)(h,17)^(0,s.rotr)(h,19)^h>>>10;o[t]=c+o[t-7]+n+o[t-16]|0}let{A:c,B:l,C:u,D:A,E:C,F:f,G:H,H:w}=this;for(let h=0;h<64;h++){const n=w+((0,s.rotr)(C,6)^(0,s.rotr)(C,11)^(0,s.rotr)(C,25))+(0,t.Chi)(C,f,H)+i[h]+o[h]|0,D=((0,s.rotr)(c,2)^(0,s.rotr)(c,13)^(0,s.rotr)(c,22))+(0,t.Maj)(c,l,u)|0;w=H,H=f,f=C,C=A+n|0,A=u,u=l,l=c,c=n+D|0}c=c+this.A|0,l=l+this.B|0,u=u+this.C|0,A=A+this.D|0,C=C+this.E|0,f=f+this.F|0,H=H+this.G|0,w=w+this.H|0,this.set(c,l,u,A,C,f,H,w)}roundClean(){o.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}e.SHA256=n;class c extends n{constructor(){super(28),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868}}e.sha256=(0,s.wrapConstructor)((()=>new n)),e.sha224=(0,s.wrapConstructor)((()=>new c))}),7088,[7089,7086]);
__d((function(g,r,_i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.Chi=function(t,s,i){return t&s^~t&i},e.HashMD=void 0,e.Maj=function(t,s,i){return t&s^t&i^s&i},e.setBigUint64=i;var t=r(d[0]),s=r(d[1]);function i(t,s,i,n){if('function'==typeof t.setBigUint64)return t.setBigUint64(s,i,n);const o=BigInt(32),h=BigInt(4294967295),u=Number(i>>o&h),f=Number(i&h),c=n?4:0,a=n?0:4;t.setUint32(s+c,u,n),t.setUint32(s+a,f,n)}class n extends s.Hash{constructor(t,i,n,o){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=i,this.padOffset=n,this.isLE=o,this.buffer=new Uint8Array(t),this.view=(0,s.createView)(this.buffer)}update(i){(0,t.aexists)(this);const{view:n,buffer:o,blockLen:h}=this,u=(i=(0,s.toBytes)(i)).length;for(let t=0;t<u;){const f=Math.min(h-this.pos,u-t);if(f!==h)o.set(i.subarray(t,t+f),this.pos),this.pos+=f,t+=f,this.pos===h&&(this.process(n,0),this.pos=0);else{const n=(0,s.createView)(i);for(;h<=u-t;t+=h)this.process(n,t)}}return this.length+=i.length,this.roundClean(),this}digestInto(n){(0,t.aexists)(this),(0,t.aoutput)(n,this),this.finished=!0;const{buffer:o,view:h,blockLen:u,isLE:f}=this;let{pos:c}=this;o[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>u-c&&(this.process(h,0),c=0);for(let t=c;t<u;t++)o[t]=0;i(h,u-8,BigInt(8*this.length),f),this.process(h,0);const a=(0,s.createView)(n),l=this.outputLen;if(l%4)throw new Error('_sha2: outputLen should be aligned to 32bit');const p=l/4,b=this.get();if(p>b.length)throw new Error('_sha2: outputLen bigger than state');for(let t=0;t<p;t++)a.setUint32(4*t,b[t],f)}digest(){const{buffer:t,outputLen:s}=this;this.digestInto(t);const i=t.slice(0,s);return this.destroy(),i}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:s,buffer:i,length:n,finished:o,destroyed:h,pos:u}=this;return t.length=n,t.pos=u,t.finished=o,t.destroyed=h,n%s&&t.buffer.set(i),t}}e.HashMD=n}),7089,[7083,7086]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0});var n=r(d[0]);Object.keys(n).forEach((function(t){"default"!==t&&"__esModule"!==t&&(t in e&&e[t]===n[t]||Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}}))}))}),7090,[6978]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.g=void 0;var n=r(d[0]);e.g=(0,n.createRandomStringGenerator)("a-z","0-9","A-Z","-_")}),7091,[7092]);
__d((function(g,r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.createRandomStringGenerator=function(...o){const i=o.map(n).join("");if(0===i.length)throw new Error("No valid characters provided for random string generation.");const c=i.length;return(o,...s)=>{if(o<=0)throw new Error("Length must be a positive integer.");let u=i,l=c;s.length>0&&(u=s.map(n).join(""),l=u.length);const h=new Uint8Array(o);(0,t.getRandomValues)(h);let f="";for(let t=0;t<o;t++){f+=u[h[t]%l]}return f}};var t=r(d[0]);function n(t){switch(t){case"a-z":return"abcdefghijklmnopqrstuvwxyz";case"A-Z":return"ABCDEFGHIJKLMNOPQRSTUVWXYZ";case"0-9":return"0123456789";case"-_":return"-_";default:throw new Error(`Unsupported alphabet: ${t}`)}}}),7092,[6978]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.l=e.c=e.a=void 0,e.s=o;const n=e.a=["info","success","warn","error","debug"];function o(o,t){return n.indexOf(t)<=n.indexOf(o)}const t="\x1b[0m",s="\x1b[1m",c="\x1b[2m",l={red:"\x1b[31m",green:"\x1b[32m",yellow:"\x1b[33m",blue:"\x1b[34m",magenta:"\x1b[35m"},u={info:l.blue,success:l.green,warn:l.yellow,error:l.red,debug:l.magenta},f=(n,o)=>{const l=(new Date).toISOString();return`${c}${l}${t} ${u[n]}${n.toUpperCase()}${t} ${s}[Better Auth]:${t} ${o}`},$=t=>{const s=!0!==t?.disabled,c=t?.level??"error",l=(n,l,u=[])=>{if(!s||!o(c,n))return;const $=f(n,l);t&&"function"==typeof t.log?t.log("success"===n?"info":n,l,...u):"error"===n?console.error($,...u):"warn"===n?console.warn($,...u):console.log($,...u)};return Object.fromEntries(n.map((n=>[n,(...[o,...t])=>l(n,o,t)])))};e.c=$;e.l=$()}),7093,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.g=async function(t,s){const c=t.body?.callbackURL||t.context.options.baseURL;if(!c)throw new n.APIError("BAD_REQUEST",{message:"callbackURL is required"});const l=(0,o.g)(128),p=(0,o.g)(32),b=JSON.stringify({callbackURL:c,codeVerifier:l,errorURL:t.body?.errorCallbackURL,newUserURL:t.body?.newUserCallbackURL,link:s,expiresAt:Date.now()+6e5,requestSignUp:t.body?.requestSignUp}),U=new Date;U.setMinutes(U.getMinutes()+10);const f=await t.context.internalAdapter.createVerificationValue({value:b,identifier:p,expiresAt:U});if(!f)throw t.context.logger.error("Unable to create verification. Make sure the database adapter is properly working and there is a verification table in the database"),new n.APIError("INTERNAL_SERVER_ERROR",{message:"Unable to create verification"});return{state:f.identifier,codeVerifier:l}},e.p=async function(n){const o=n.query.state||n.body.state,s=await n.context.internalAdapter.findVerificationValue(o);if(!s)throw n.context.logger.error("State Mismatch. Verification not found",{state:o}),n.redirect(`${n.context.baseURL}/error?error=please_restart_the_process`);const c=t.z.object({callbackURL:t.z.string(),codeVerifier:t.z.string(),errorURL:t.z.string().optional(),newUserURL:t.z.string().optional(),expiresAt:t.z.number(),link:t.z.object({email:t.z.string(),userId:t.z.coerce.string()}).optional(),requestSignUp:t.z.boolean().optional()}).parse(JSON.parse(s.value));c.errorURL||(c.errorURL=`${n.context.baseURL}/error`);if(c.expiresAt<Date.now())throw await n.context.internalAdapter.deleteVerificationValue(s.id),n.redirect(`${n.context.baseURL}/error?error=please_restart_the_process`);return await n.context.internalAdapter.deleteVerificationValue(s.id),c};var t=r(d[0]),n=r(d[1]);r(d[2]),r(d[3]),r(d[4]),r(d[5]),r(d[6]),r(d[7]),r(d[8]),r(d[9]),r(d[10]),r(d[11]);var o=r(d[12])}),7094,[3739,6977,7074,7075,7078,7080,6983,6988,7082,7090,6985,7086,7091]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.g=void 0;var n=r(d[0]);e.g=o=>(0,n.createRandomStringGenerator)("a-z","A-Z","0-9")(o||32)}),7095,[7092]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.a=void 0,e.b=function(t,n){const u=o(t,"user");return s(n,{fields:u})},e.c=function(t,n){const u=o(t,"account");return s(n,{fields:u})},e.d=function(t,n){const u=o(t,"session");return s(n,{fields:u})},e.e=u,e.f=function(t,n,s){const l=o(t,"user");return u(n||{},{fields:l,action:s})},e.g=o,e.h=function(t,n){const s=o(t,"user");return u(n||{},{fields:s})},e.i=function(t,n){const s=o(t,"account");return u(n,{fields:s})},e.j=function(t,n){const s=o(t,"session");return u(n,{fields:s})},e.m=function(t,n){if(!n)return t;for(const s in n){const o=n[s]?.modelName;o&&(t[s].modelName=o);for(const o in t[s].fields){const u=n[s]?.fields?.[o];u&&(t[s].fields[o].fieldName=u)}}return t},e.p=s,e.v=e.u=e.s=void 0;var t=r(d[0]),n=r(d[1]);e.a=t.z.object({id:t.z.string(),providerId:t.z.string(),accountId:t.z.string(),userId:t.z.coerce.string(),accessToken:t.z.string().nullish(),refreshToken:t.z.string().nullish(),idToken:t.z.string().nullish(),accessTokenExpiresAt:t.z.date().nullish(),refreshTokenExpiresAt:t.z.date().nullish(),scope:t.z.string().nullish(),password:t.z.string().nullish(),createdAt:t.z.date().default((()=>new Date)),updatedAt:t.z.date().default((()=>new Date))}),e.u=t.z.object({id:t.z.string(),email:t.z.string().transform((t=>t.toLowerCase())),emailVerified:t.z.boolean().default(!1),name:t.z.string(),image:t.z.string().nullish(),createdAt:t.z.date().default((()=>new Date)),updatedAt:t.z.date().default((()=>new Date))}),e.s=t.z.object({id:t.z.string(),userId:t.z.coerce.string(),expiresAt:t.z.date(),createdAt:t.z.date().default((()=>new Date)),updatedAt:t.z.date().default((()=>new Date)),token:t.z.string(),ipAddress:t.z.string().nullish(),userAgent:t.z.string().nullish()}),e.v=t.z.object({id:t.z.string(),value:t.z.string(),createdAt:t.z.date().default((()=>new Date)),updatedAt:t.z.date().default((()=>new Date)),expiresAt:t.z.date(),identifier:t.z.string()});function s(t,n){const s=n.fields,o={};for(const n in t){const u=s[n];u?!1!==u.returned&&(o[n]=t[n]):o[n]=t[n]}return o}function o(t,n){let s={..."user"===n?t.user?.additionalFields:{},..."session"===n?t.session?.additionalFields:{}};for(const o of t.plugins||[])o.schema&&o.schema[n]&&(s={...s,...o.schema[n].fields});return s}function u(t,s){const o=s.action||"create",u=s.fields,l={};for(const s in u)if(s in t){if(!1===u[s].input){if(u[s].defaultValue){l[s]=u[s].defaultValue;continue}continue}if(u[s].validator?.input&&void 0!==t[s]){l[s]=u[s].validator.input.parse(t[s]);continue}if(u[s].transform?.input&&void 0!==t[s]){l[s]=u[s].transform?.input(t[s]);continue}l[s]=t[s]}else if(u[s].defaultValue&&"create"===o)l[s]=u[s].defaultValue;else if(u[s].required&&"create"===o)throw new n.APIError("BAD_REQUEST",{message:`${s} is required`});return l}}),7096,[3739,6977]);
__d((function(g,r,i,a,m,e,d){function t(t){if(null===t||"object"!=typeof t)return!1;const n=Object.getPrototypeOf(t);return(null===n||n===Object.prototype||null===Object.getPrototypeOf(n))&&(!(Symbol.iterator in t)&&(!(Symbol.toStringTag in t)||"[object Module]"===Object.prototype.toString.call(t)))}function n(o,u,f=".",c){if(!t(u))return n(o,{},f,c);const y=Object.assign({},u);for(const u in o){if("__proto__"===u||"constructor"===u)continue;const l=o[u];null!=l&&(c&&c(y,u,l,f)||(Array.isArray(l)&&Array.isArray(y[u])?y[u]=[...l,...y[u]]:t(l)&&t(y[u])?y[u]=n(l,y[u],(f?`${f}.`:"")+u.toString(),c):y[u]=l))}return y}function o(t){return(...o)=>o.reduce(((o,u)=>n(o,u,"",t)),{})}Object.defineProperty(e,"__esModule",{value:!0}),e.createDefu=o,e.defuFn=e.defuArrayFn=e.defu=e.default=void 0;e.defu=e.default=o(),e.defuFn=o(((t,n,o)=>{if(void 0!==t[n]&&"function"==typeof o)return t[n]=o(t[n]),!0})),e.defuArrayFn=o(((t,n,o)=>{if(Array.isArray(t[n])&&"function"==typeof o)return t[n]=o(t[n]),!0}))}),7097,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.s=async function(n,o,s=3600){return await new t.SignJWT(n).setProtectedHeader({alg:"HS256"}).setIssuedAt().setExpirationTime(Math.floor(Date.now()/1e3)+s).sign((new TextEncoder).encode(o))};var t=r(d[0])}),7098,[6988]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.binary=void 0;const n=new Map,o=new TextEncoder;e.binary={decode:(o,t="utf-8")=>{n.has(t)||n.set(t,new TextDecoder(t));return n.get(t).decode(o)},encode:o.encode}}),7099,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.g=function(s,f){if(f.advanced?.ipAddress?.disableIpTracking)return null;if(t.i)return"127.0.0.1";const o="headers"in s?s.headers:s,u=f.advanced?.ipAddress?.ipAddressHeaders||["x-forwarded-for"];for(const t of u){const s="get"in o?o.get(t):o[t];if("string"==typeof s){const t=s.split(",")[0].trim();if(n(t))return t}}return null};var t=r(d[0]);function n(t){if(/^(\d{1,3}\.){3}\d{1,3}$/.test(t)){return t.split(".").map(Number).every((t=>t>=0&&t<=255))}return/^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$/.test(t)}}),7100,[910]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"BetterAuthError",{enumerable:!0,get:function(){return P.B}}),Object.defineProperty(e,"HIDE_METADATA",{enumerable:!0,get:function(){return w.H}}),Object.defineProperty(e,"MissingDependencyError",{enumerable:!0,get:function(){return P.M}}),e.betterAuth=void 0,Object.defineProperty(e,"capitalizeFirstLetter",{enumerable:!0,get:function(){return R.c}}),Object.defineProperty(e,"createLogger",{enumerable:!0,get:function(){return l.c}}),Object.defineProperty(e,"generateId",{enumerable:!0,get:function(){return b.g}}),Object.defineProperty(e,"generateState",{enumerable:!0,get:function(){return v.g}}),Object.defineProperty(e,"levels",{enumerable:!0,get:function(){return l.a}}),Object.defineProperty(e,"logger",{enumerable:!0,get:function(){return l.l}}),Object.defineProperty(e,"parseState",{enumerable:!0,get:function(){return v.p}}),Object.defineProperty(e,"shouldPublishLog",{enumerable:!0,get:function(){return l.s}});var t=r(d[0]),n=r(d[1]),s=r(d[2]),o=r(d[3]),c=r(d[4]);r(d[5]),r(d[6]);var u=r(d[7]),l=r(d[8]),p=r(d[9]),b=r(d[10]);r(d[11]),r(d[12]),r(d[13]),r(d[14]),r(d[15]),r(d[16]),r(d[17]),r(d[18]);var f=r(d[19]),h=r(d[20]),y=r(d[21]),P=r(d[22]),w=r(d[23]),R=r(d[24]),v=r(d[25]);r(d[26]),r(d[27]),r(d[28]),r(d[29]),r(d[30]),r(d[31]),r(d[32]),r(d[33]),r(d[34]),r(d[35]),r(d[36]),r(d[37]),r(d[38]),r(d[39]),r(d[40]),r(d[41]),r(d[42]),r(d[43]),r(d[44]);const O="better-auth-secret-123456789",A=async t=>{const n=await(0,o.a)(t),w=t.plugins||[],R=E(t),v=(0,l.c)(t.logger),A=(0,y.a)(t.baseURL,t.basePath),U=t.secret||f.e.BETTER_AUTH_SECRET||f.e.AUTH_SECRET||O;U===O&&f.a&&v.error("You are using the default secret. Please set `BETTER_AUTH_SECRET` in your environment variables or pass `secret` in your auth config."),t={...t,secret:U,baseURL:A?new URL(A).origin:"",basePath:t.basePath||"/api/auth",plugins:w.concat(R)};const I=(0,u.getCookies)(t),T=(0,c.g)(t),_=Object.keys(t.socialProviders||{}).map((n=>{const s=t.socialProviders?.[n];if(!s||!1===s.enabled)return null;s.clientId||v.warn(`Social provider ${n} is missing clientId or clientSecret`);const o=p.socialProviders[n](s);return o.disableImplicitSignUp=s.disableImplicitSignUp,o})).filter((t=>null!==t)),j={appName:t.appName||"Better Auth",socialProviders:_,options:t,tables:T,trustedOrigins:S(t),baseURL:A||"",sessionConfig:{updateAge:void 0!==t.session?.updateAge?t.session.updateAge:86400,expiresIn:t.session?.expiresIn||604800,freshAge:void 0===t.session?.freshAge?86400:t.session.freshAge},secret:U,rateLimit:{...t.rateLimit,enabled:t.rateLimit?.enabled??f.a,window:t.rateLimit?.window||10,max:t.rateLimit?.max||100,storage:t.rateLimit?.storage||(t.secondaryStorage?"secondary-storage":"memory")},authCookies:I,logger:v,generateId:({model:n,size:s})=>"function"==typeof t.advanced?.generateId?t.advanced.generateId({model:n,size:s}):"function"==typeof t?.advanced?.database?.generateId?t.advanced.database.generateId({model:n,size:s}):(0,b.g)(s),session:null,secondaryStorage:t.secondaryStorage,password:{hash:t.emailAndPassword?.password?.hash||s.h,verify:t.emailAndPassword?.password?.verify||s.v,config:{minPasswordLength:t.emailAndPassword?.minPasswordLength||8,maxPasswordLength:t.emailAndPassword?.maxPasswordLength||128},checkPassword:h.c},setNewSession(t){this.newSession=t},newSession:null,adapter:n,internalAdapter:(0,o.c)(n,{options:t,hooks:t.databaseHooks?[t.databaseHooks]:[]}),createAuthCookie:(0,u.createCookieGetter)(t),async runMigrations(){if(!t.database||"updateMany"in t.database)throw new P.B("Database is not provided or it's an adapter. Migrations are only supported with a database instance.");const{runMigrations:n}=await(0,o.e)(t);await n()}};let{context:k}=L(j);return k};function L(t){let s=t.options;const c=s.plugins||[];let u=t;const l=[];for(const o of c)if(o.init){const c=o.init(t);if("object"==typeof c){if(c.options){const{databaseHooks:t,...o}=c.options;t&&l.push(t),s=(0,n.defu)(s,o)}c.context&&(u={...u,...c.context})}}return l.push(s.databaseHooks),u.internalAdapter=(0,o.c)(t.adapter,{options:s,hooks:l.filter((t=>void 0!==t)),generateId:t.generateId}),u.options=s,{context:u}}function E(t){return t.advanced,[]}function S(t){const n=(0,y.a)(t.baseURL,t.basePath);if(!n)return[];const s=[new URL(n).origin];t.trustedOrigins&&Array.isArray(t.trustedOrigins)&&s.push(...t.trustedOrigins);const o=f.e.BETTER_AUTH_TRUSTED_ORIGINS;return o&&s.push(...o.split(",")),s}e.betterAuth=n=>{const s=A(n),{api:o}=(0,t.getEndpoints)(s,n),c=n.plugins?.reduce(((t,n)=>n.$ERROR_CODES?{...t,...n.$ERROR_CODES}:t),{});return{handler:async o=>{const c=await s,u=c.options.basePath||"/api/auth";if(!c.options.baseURL){const t=(0,y.a)(void 0,u,o);if(!t)throw new P.B("Could not get base URL from request. Please provide a valid base URL.");c.baseURL=t,c.options.baseURL=(0,y.g)(c.baseURL)||void 0}c.trustedOrigins=[...n.trustedOrigins?Array.isArray(n.trustedOrigins)?n.trustedOrigins:await n.trustedOrigins(o):[],c.options.baseURL];const{handler:l}=(0,t.router)(c,n);return l(o)},api:o,options:n,$context:s,$Infer:{},$ERROR_CODES:{...c,...w.B}}}}),7101,[6976,7097,7102,7103,7104,3739,7096,6981,7093,6987,7095,6977,7074,7075,7078,7080,6983,6988,7091,910,7357,909,911,6980,7358,7094,7100,7082,7090,6985,7086,6982,6986,7092,7105,7106,7354,7355,7356,6984,908,7073,7098,6996,7099]);
__d((function(g,r,_i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.c=c,e.v=e.h=void 0;var n=r(d[0]),t=r(d[1]),a=r(d[2]),o=r(d[3]);function c(n,t){const a=new Uint8Array(n),o=new Uint8Array(t);if(a.length!==o.length)return!1;let c=0;for(let n=0;n<a.length;n++)c|=a[n]^o[n];return 0===c}const s=16384,i=16,u=1,h=64;async function l(t,a){return await(0,n.scryptAsync)(t.normalize("NFKC"),a,{N:s,p:u,r:i,dkLen:h,maxmem:128*s*i*2})}e.h=async n=>{const o=a.hex.encode((0,t.getRandomValues)(new Uint8Array(16))),c=await l(n,o);return`${o}:${a.hex.encode(c)}`};e.v=async({hash:n,password:t})=>{const[a,s]=n.split(":");return c(await l(t,a),(0,o.hexToBytes)(s))}}),7102,[7082,7090,6985,7086]);
__d((function(g,r,i,a,_m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.a=async function(t){if(!t.database){const n=(0,u.g)(t),s=Object.keys(n).reduce(((t,n)=>(t[n]=[],t)),{});return c.l.warn("No database configuration provided. Using memory adapter in development"),(0,m.m)(s)(t)}if("function"==typeof t.database)return t.database(t);const{kysely:n,databaseType:s}=await(0,w.c)(t);if(!n)throw new f.B("Failed to initialize database adapter");return(0,w.k)(n,{type:s||"sqlite"})(t)},e.b=function(t,n){let s=n.id?{id:n.id}:{};for(const o in t){const l=t[o],c=n[o];void 0!==c&&(s[l.fieldName||o]=c)}return s},e.c=void 0,e.d=function(t,n){if(!n)return null;let s={id:n.id};for(const[o,l]of Object.entries(t))s[o]=n[l.fieldName||o];return s},e.e=async function(t){const n=y(t),s=(0,c.c)(t.logger);let{kysely:o,databaseType:l}=await(0,w.c)(t);l||(s.warn("Could not determine database type, defaulting to sqlite. Please provide a type in the database options to avoid this."),l="sqlite");o||(s.error("Only kysely adapter is supported for migrations. You can use `generate` command to generate the schema, if you're using a different adapter."),process.exit(1));const u=await o.introspection.getTables(),f=[],m=[];for(const[t,o]of Object.entries(n)){const n=u.find((n=>n.name===t));if(!n){const n=f.findIndex((n=>n.table===t)),s={table:t,fields:o.fields,order:o.order||1/0},l=f.findIndex((t=>(t.order||1/0)>s.order));-1===l?-1===n?f.push(s):f[n].fields={...f[n].fields,...o.fields}:f.splice(l,0,s);continue}let c={};for(const[u,f]of Object.entries(o.fields)){const o=n.columns.find((t=>t.name===u));o?v(o.dataType,f.type,l)||s.warn(`Field ${u} in table ${t} has a different type in the database. Expected ${f.type} but got ${o.dataType}.`):c[u]=f}Object.keys(c).length>0&&m.push({table:t,fields:c,order:o.order||1/0})}const p=[];function b(n,s){const o=n.type,c={string:{sqlite:"text",postgres:"text",mysql:n.unique?"varchar(255)":n.references?"varchar(36)":"text",mssql:n.unique||n.sortable?"varchar(255)":n.references?"varchar(36)":"text"},boolean:{sqlite:"integer",postgres:"boolean",mysql:"boolean",mssql:"smallint"},number:{sqlite:n.bigint?"bigint":"integer",postgres:n.bigint?"bigint":"integer",mysql:n.bigint?"bigint":"integer",mssql:n.bigint?"bigint":"integer"},date:{sqlite:"date",postgres:"timestamp",mysql:"datetime",mssql:"datetime"},id:{postgres:t.advanced?.database?.useNumberId?"serial":"text",mysql:t.advanced?.database?.useNumberId?"integer":"varchar(36)",mssql:t.advanced?.database?.useNumberId?"integer":"varchar(36)",sqlite:t.advanced?.database?.useNumberId?"integer":"text"}};return"id"===s||"id"===n.references?.field?c.id[l]:"sqlite"!==l||"string[]"!==o&&"number[]"!==o?"string[]"===o||"number[]"===o?"jsonb":Array.isArray(o)?"text":c[o][l||"sqlite"]:"text"}if(m.length)for(const t of m)for(const[n,s]of Object.entries(t.fields)){const l=b(s,n),c=o.schema.alterTable(t.table).addColumn(n,l,(t=>(t=!1!==s.required?t.notNull():t,s.references&&(t=t.references(`${s.references.model}.${s.references.field}`)),s.unique&&(t=t.unique()),t)));p.push(c)}if(f.length)for(const n of f){let s=o.schema.createTable(n.table).addColumn("id",t.advanced?.database?.useNumberId?"postgres"===l?"serial":"integer":"mysql"===l||"mssql"===l?"varchar(36)":"text",(n=>t.advanced?.database?.useNumberId?"postgres"===l?n.primaryKey().notNull():n.autoIncrement().primaryKey().notNull():n.primaryKey().notNull()));for(const[t,o]of Object.entries(n.fields)){const n=b(o,t);s=s.addColumn(t,n,(t=>(t=!1!==o.required?t.notNull():t,o.references&&(t=t.references(`${o.references.model}.${o.references.field}`)),o.unique&&(t=t.unique()),t)))}p.push(s)}return{toBeCreated:f,toBeAdded:m,runMigrations:async function(){for(const t of p)await t.execute()},compileMigrations:async function(){return p.map((t=>t.compile().sql)).join(";\n\n")+";"}}},e.f=y,e.g=p,e.m=v;var t=r(d[0]),n=r(d[1]),s=r(d[2]),o=r(d[3]),l=r(d[4]);r(d[5]),r(d[6]),r(d[7]),r(d[8]),r(d[9]),r(d[10]),r(d[11]),r(d[12]),r(d[13]),r(d[14]),r(d[15]),r(d[16]),r(d[17]);var c=r(d[18]);r(d[19]),r(d[20]);var u=r(d[21]),f=r(d[22]),w=r(d[23]),m=r(d[24]);function p(t,n){const s=n.hooks;return{createWithHooks:async function(n,o,l,c){let u=n;for(const t of s||[]){const n=t[o]?.create?.before;if(n){const t=await n(u,c);if(!1===t)return null;"object"==typeof t&&"data"in t&&(u={...u,...t.data})}}const f=l?await l.fn(u):null,w=!l||l.executeMainFn?await t.create({model:o,data:u}):f;for(const t of s||[]){const n=t[o]?.create?.after;n&&await n(w,c)}return w},updateWithHooks:async function(n,o,l,c,u){let f=n;for(const t of s||[]){const s=t[l]?.update?.before;if(s){const t=await s(n,u);if(!1===t)return null;f="object"==typeof t?t.data:t}}const w=c?await c.fn(f):null,m=!c||c.executeMainFn?await t.update({model:l,update:f,where:o}):w;for(const t of s||[]){const n=t[l]?.update?.after;n&&await n(m,u)}return m},updateManyWithHooks:async function(n,o,l,c,u){let f=n;for(const t of s||[]){const s=t[l]?.update?.before;if(s){const t=await s(n,u);if(!1===t)return null;f="object"==typeof t?t.data:t}}const w=c?await c.fn(f):null,m=!c||c.executeMainFn?await t.updateMany({model:l,update:f,where:o}):w;for(const t of s||[]){const n=t[l]?.update?.after;n&&await n(m,u)}return m}}}r(d[25]);function y(t){const n=(0,u.g)(t);let s={};for(const t in n){const o=n[t],l=o.fields;let c={};Object.entries(l).forEach((([t,s])=>{if(c[s.fieldName||t]=s,s.references){const o=n[s.references.model];o&&(c[s.fieldName||t].references={model:o.modelName,field:s.references.field})}})),s[o.modelName]?s[o.modelName].fields={...s[o.modelName].fields,...c}:s[o.modelName]={fields:c,order:o.order||1/0}}return s}e.c=(c,u)=>{const f=u.options,w=f.secondaryStorage,m=f.session?.expiresIn||604800,{createWithHooks:y,updateWithHooks:b,updateManyWithHooks:v}=p(c,u);return{createOAuthUser:async(t,n,s)=>{const o=await y({createdAt:new Date,updatedAt:new Date,...t},"user",void 0,s);return{user:o,account:await y({...n,userId:o.id||t.id,createdAt:new Date,updatedAt:new Date},"account",void 0,s)}},createUser:async(t,n)=>await y({createdAt:new Date,updatedAt:new Date,emailVerified:!1,...t,email:t.email?.toLowerCase()},"user",void 0,n),createAccount:async(t,n)=>await y({createdAt:new Date,updatedAt:new Date,...t},"account",void 0,n),listSessions:async t=>{if(w){const s=await w.get(`active-sessions-${t}`);if(!s)return[];const l=(0,o.s)(s)||[],c=Date.now(),f=l.filter((t=>t.expiresAt>c)),m=[];for(const t of f){const s=await w.get(t.token);if(s){const t=JSON.parse(s),o=(0,n.d)(u.options,{...t.session,expiresAt:new Date(t.session.expiresAt)});m.push(o)}}return m}return await c.findMany({model:"session",where:[{field:"userId",value:t}]})},listUsers:async(t,n,s,o)=>await c.findMany({model:"user",limit:t,offset:n,sortBy:s,where:o}),countTotalUsers:async t=>{const n=await c.count({model:"user",where:t});return"string"==typeof n?parseInt(n):n},deleteUser:async t=>{w&&await w.delete(`active-sessions-${t}`),w&&!f.session?.storeSessionInDatabase||await c.deleteMany({model:"session",where:[{field:"userId",value:t}]}),await c.deleteMany({model:"account",where:[{field:"userId",value:t}]}),await c.delete({model:"user",where:[{field:"id",value:t}]})},createSession:async(n,c,p,b,v,h)=>{const A=c&&"headers"in c?c.headers:c,{id:I,...D}=b||{},q={ipAddress:c&&(0,s.g)(c,u.options)||"",userAgent:A?.get("user-agent")||"",...D,expiresAt:p?(0,t.g)(86400,"sec"):(0,t.g)(m,"sec"),userId:n,token:(0,l.g)(32),createdAt:new Date,updatedAt:new Date,...h?D:{}};return await y(q,"session",w?{fn:async t=>{const s=await w.get(`active-sessions-${n}`);let l=[];const c=Date.now();return s&&(l=(0,o.s)(s)||[],l=l.filter((t=>t.expiresAt>c))),l.push({token:q.token,expiresAt:c+1e3*m}),await w.set(`active-sessions-${n}`,JSON.stringify(l),m),t},executeMainFn:f.session?.storeSessionInDatabase}:void 0,v)},findSession:async t=>{if(w){const s=await w.get(t);if(!s&&!f.session?.storeSessionInDatabase)return null;if(s){const t=JSON.parse(s);return{session:(0,n.d)(u.options,{...t.session,expiresAt:new Date(t.session.expiresAt),createdAt:new Date(t.session.createdAt),updatedAt:new Date(t.session.updatedAt)}),user:(0,n.b)(u.options,{...t.user,createdAt:new Date(t.user.createdAt),updatedAt:new Date(t.user.updatedAt)})}}}const s=await c.findOne({model:"session",where:[{value:t,field:"token"}]});if(!s)return null;const o=await c.findOne({model:"user",where:[{value:s.userId,field:"id"}]});if(!o)return null;return{session:(0,n.d)(u.options,s),user:(0,n.b)(u.options,o)}},findSessions:async t=>{if(w){const n=[];for(const s of t){const t=await w.get(s);if(t){const s=JSON.parse(t),o={session:{...s.session,expiresAt:new Date(s.session.expiresAt)},user:{...s.user,createdAt:new Date(s.user.createdAt),updatedAt:new Date(s.user.updatedAt)}};n.push(o)}}return n}const n=await c.findMany({model:"session",where:[{field:"token",value:t,operator:"in"}]}),s=n.map((t=>t.userId));if(!s.length)return[];const o=await c.findMany({model:"user",where:[{field:"id",value:s,operator:"in"}]});return n.map((t=>{const n=o.find((n=>n.id===t.userId));return n?{session:t,user:n}:null}))},updateSession:async(t,n,s)=>await b(n,[{field:"token",value:t}],"session",w?{async fn(n){const s=await w.get(t);let o=null;if(s){return o={...JSON.parse(s).session,...n},o}return null},executeMainFn:f.session?.storeSessionInDatabase}:void 0,s),deleteSession:async t=>{w&&(await w.delete(t),!f.session?.storeSessionInDatabase||u.options.session?.preserveSessionInDatabase)||await c.delete({model:"session",where:[{field:"token",value:t}]})},deleteAccounts:async t=>{await c.deleteMany({model:"account",where:[{field:"userId",value:t}]})},deleteAccount:async t=>{await c.delete({model:"account",where:[{field:"id",value:t}]})},deleteSessions:async t=>{if(w){if("string"==typeof t){const n=await w.get(`active-sessions-${t}`),s=n?(0,o.s)(n):[];if(!s)return;for(const t of s)await w.delete(t.token)}else for(const n of t){await w.get(n)&&await w.delete(n)}if(!f.session?.storeSessionInDatabase||u.options.session?.preserveSessionInDatabase)return}await c.deleteMany({model:"session",where:[{field:Array.isArray(t)?"token":"userId",value:t,operator:Array.isArray(t)?"in":void 0}]})},findOAuthUser:async(t,n,s)=>{const o=await c.findOne({model:"account",where:[{value:n,field:"accountId"},{value:s,field:"providerId"}]});if(o){const t=await c.findOne({model:"user",where:[{value:o.userId,field:"id"}]});return t?{user:t,accounts:[o]}:null}{const n=await c.findOne({model:"user",where:[{value:t.toLowerCase(),field:"email"}]});if(n){return{user:n,accounts:await c.findMany({model:"account",where:[{value:n.id,field:"userId"}]})||[]}}return null}},findUserByEmail:async(t,n)=>{const s=await c.findOne({model:"user",where:[{value:t.toLowerCase(),field:"email"}]});if(!s)return null;if(n?.includeAccounts){return{user:s,accounts:await c.findMany({model:"account",where:[{value:s.id,field:"userId"}]})}}return{user:s,accounts:[]}},findUserById:async t=>await c.findOne({model:"user",where:[{field:"id",value:t}]}),linkAccount:async(t,n)=>await y({...t,createdAt:new Date,updatedAt:new Date},"account",void 0,n),updateUser:async(t,n,s)=>await b(n,[{field:"id",value:t}],"user",void 0,s),updateUserByEmail:async(t,n,s)=>await b(n,[{field:"email",value:t.toLowerCase()}],"user",void 0,s),updatePassword:async(t,n,s)=>{await v({password:n},[{field:"userId",value:t},{field:"providerId",value:"credential"}],"account",void 0,s)},findAccounts:async t=>await c.findMany({model:"account",where:[{field:"userId",value:t}]}),findAccount:async t=>await c.findOne({model:"account",where:[{field:"accountId",value:t}]}),findAccountByUserId:async t=>await c.findMany({model:"account",where:[{field:"userId",value:t}]}),updateAccount:async(t,n,s)=>await b(n,[{field:"id",value:t}],"account",void 0,s),createVerificationValue:async(t,n)=>await y({createdAt:new Date,updatedAt:new Date,...t},"verification",void 0,n),findVerificationValue:async t=>{const n=await c.findMany({model:"verification",where:[{field:"identifier",value:t}],sortBy:{field:"createdAt",direction:"desc"},limit:1});f.verification?.disableCleanup||await c.deleteMany({model:"verification",where:[{field:"expiresAt",value:new Date,operator:"lt"}]});return n[0]},deleteVerificationValue:async t=>{await c.delete({model:"verification",where:[{field:"id",value:t}]})},deleteVerificationByIdentifier:async t=>{await c.delete({model:"verification",where:[{field:"identifier",value:t}]})},updateVerificationValue:async(t,n,s)=>await b(n,[{field:"id",value:t}],"verification",void 0,s)}};const b={postgres:{string:["character varying","text"],number:["int4","integer","bigint","smallint","numeric","real","double precision"],boolean:["bool","boolean"],date:["timestamp","date"]},mysql:{string:["varchar","text"],number:["integer","int","bigint","smallint","decimal","float","double"],boolean:["boolean","tinyint"],date:["timestamp","datetime","date"]},sqlite:{string:["TEXT"],number:["INTEGER","REAL"],boolean:["INTEGER","BOOLEAN"],date:["DATE","INTEGER"]},mssql:{string:["text","varchar"],number:["int","bigint","smallint","decimal","float","double"],boolean:["bit","smallint"],date:["datetime","date"]}};function v(t,n,s){if("string[]"===n||"number[]"===n)return t.toLowerCase().includes("json");const o=b[s];return(Array.isArray(n)?o.string.map((t=>t.toLowerCase())):o[n].map((t=>t.toLowerCase()))).includes(t.toLowerCase())}}),7103,[6982,7096,7100,6986,7095,3739,6977,7074,7075,7078,7080,6983,6988,7082,7090,6985,7086,7091,7093,910,7092,7104,911,7105,7356,7106]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.g=void 0;e.g=t=>{const s=t.plugins?.reduce(((t,s)=>{const l=s.schema;if(!l)return t;for(const[s,n]of Object.entries(l))t[s]={fields:{...t[s]?.fields,...n.fields},modelName:n.modelName||s};return t}),{}),l="database"===t.rateLimit?.storage,n={rateLimit:{modelName:t.rateLimit?.modelName||"rateLimit",fields:{key:{type:"string",fieldName:t.rateLimit?.fields?.key||"key"},count:{type:"number",fieldName:t.rateLimit?.fields?.count||"count"},lastRequest:{type:"number",bigint:!0,fieldName:t.rateLimit?.fields?.lastRequest||"lastRequest"}}}},{user:u,session:o,account:f,...c}=s||{},p={session:{modelName:t.session?.modelName||"session",fields:{expiresAt:{type:"date",required:!0,fieldName:t.session?.fields?.expiresAt||"expiresAt"},token:{type:"string",required:!0,fieldName:t.session?.fields?.token||"token",unique:!0},createdAt:{type:"date",required:!0,fieldName:t.session?.fields?.createdAt||"createdAt"},updatedAt:{type:"date",required:!0,fieldName:t.session?.fields?.updatedAt||"updatedAt"},ipAddress:{type:"string",required:!1,fieldName:t.session?.fields?.ipAddress||"ipAddress"},userAgent:{type:"string",required:!1,fieldName:t.session?.fields?.userAgent||"userAgent"},userId:{type:"string",fieldName:t.session?.fields?.userId||"userId",references:{model:t.user?.modelName||"user",field:"id",onDelete:"cascade"},required:!0},...o?.fields,...t.session?.additionalFields},order:2}};return{user:{modelName:t.user?.modelName||"user",fields:{name:{type:"string",required:!0,fieldName:t.user?.fields?.name||"name",sortable:!0},email:{type:"string",unique:!0,required:!0,fieldName:t.user?.fields?.email||"email",sortable:!0},emailVerified:{type:"boolean",defaultValue:()=>!1,required:!0,fieldName:t.user?.fields?.emailVerified||"emailVerified"},image:{type:"string",required:!1,fieldName:t.user?.fields?.image||"image"},createdAt:{type:"date",defaultValue:()=>new Date,required:!0,fieldName:t.user?.fields?.createdAt||"createdAt"},updatedAt:{type:"date",defaultValue:()=>new Date,required:!0,fieldName:t.user?.fields?.updatedAt||"updatedAt"},...u?.fields,...t.user?.additionalFields},order:1},...!t.secondaryStorage||t.session?.storeSessionInDatabase?p:{},account:{modelName:t.account?.modelName||"account",fields:{accountId:{type:"string",required:!0,fieldName:t.account?.fields?.accountId||"accountId"},providerId:{type:"string",required:!0,fieldName:t.account?.fields?.providerId||"providerId"},userId:{type:"string",references:{model:t.user?.modelName||"user",field:"id",onDelete:"cascade"},required:!0,fieldName:t.account?.fields?.userId||"userId"},accessToken:{type:"string",required:!1,fieldName:t.account?.fields?.accessToken||"accessToken"},refreshToken:{type:"string",required:!1,fieldName:t.account?.fields?.refreshToken||"refreshToken"},idToken:{type:"string",required:!1,fieldName:t.account?.fields?.idToken||"idToken"},accessTokenExpiresAt:{type:"date",required:!1,fieldName:t.account?.fields?.accessTokenExpiresAt||"accessTokenExpiresAt"},refreshTokenExpiresAt:{type:"date",required:!1,fieldName:t.account?.fields?.accessTokenExpiresAt||"refreshTokenExpiresAt"},scope:{type:"string",required:!1,fieldName:t.account?.fields?.scope||"scope"},password:{type:"string",required:!1,fieldName:t.account?.fields?.password||"password"},createdAt:{type:"date",required:!0,fieldName:t.account?.fields?.createdAt||"createdAt"},updatedAt:{type:"date",required:!0,fieldName:t.account?.fields?.updatedAt||"updatedAt"},...f?.fields},order:3},verification:{modelName:t.verification?.modelName||"verification",fields:{identifier:{type:"string",required:!0,fieldName:t.verification?.fields?.identifier||"identifier"},value:{type:"string",required:!0,fieldName:t.verification?.fields?.value||"value"},expiresAt:{type:"date",required:!0,fieldName:t.verification?.fields?.expiresAt||"expiresAt"},createdAt:{type:"date",required:!1,defaultValue:()=>new Date,fieldName:t.verification?.fields?.createdAt||"createdAt"},updatedAt:{type:"date",required:!1,defaultValue:()=>new Date,fieldName:t.verification?.fields?.updatedAt||"updatedAt"}},order:4},...c,...l?n:{}}}}),7104,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.k=e.c=void 0;var t=r(d[0]),n=r(d[1]);function l(n){if(!n)return null;if("dialect"in n)return l(n.dialect);if("createDriver"in n){if(n instanceof t.SqliteDialect)return"sqlite";if(n instanceof t.MysqlDialect)return"mysql";if(n instanceof t.PostgresDialect)return"postgres";if(n instanceof t.MssqlDialect)return"mssql"}return"aggregate"in n?"sqlite":"getConnection"in n?"mysql":"connect"in n?"postgres":null}e.c=async n=>{const s=n.database;if(!s)return{kysely:null,databaseType:null};if("db"in s)return{kysely:s.db,databaseType:s.type};if("dialect"in s)return{kysely:new t.Kysely({dialect:s.dialect}),databaseType:s.type};let o;const c=l(s);return"createDriver"in s&&(o=s),"aggregate"in s&&(o=new t.SqliteDialect({database:s})),"getConnection"in s&&(o=new t.MysqlDialect(s)),"connect"in s&&(o=new t.PostgresDialect({pool:s})),{kysely:o?new t.Kysely({dialect:o}):null,databaseType:c}};e.k=(t,l)=>(0,n.c)({config:{adapterId:"kysely",adapterName:"Kysely Adapter",usePlural:l?.usePlural,debugLogs:l?.debugLogs,supportsBooleans:!("sqlite"===l?.type||"mssql"===l?.type||!l?.type),supportsDates:!("sqlite"===l?.type||"mssql"===l?.type||!l?.type),supportsJSON:!1},adapter:({getFieldName:n,schema:s})=>{const o=async(s,o,c,u)=>{let y;if("mysql"===l?.type){await o.execute();const l=s.id?"id":u.length>0&&u[0].field?u[0].field:"id";if(!s.id&&0===u.length)return y=await t.selectFrom(c).selectAll().orderBy(n({model:c,field:l}),"desc").limit(1).executeTakeFirst(),y;const p=s[l]||u[0].value;return y=await t.selectFrom(c).selectAll().orderBy(n({model:c,field:l}),"desc").where(n({model:c,field:l}),"=",p).limit(1).executeTakeFirst(),y}return"mssql"===l?.type?(y=await o.outputAll("inserted").executeTakeFirst(),y):(y=await o.returningAll().executeTakeFirst(),y)};function c(t,n,o){if("id"===o)return t;const{type:c="sqlite"}=l||{};let u=s[n]?.fields[o];return u||(u=Object.values(s).find((t=>t.modelName===n))),"boolean"!==u.type||"sqlite"!==c&&"mssql"!==c||null==t?"date"===u.type&&t&&t instanceof Date&&"sqlite"===c?t.toISOString():t:t?1:0}function u(t,l){if(!l)return{and:null,or:null};const s={and:[],or:[]};return l.forEach((l=>{let{field:o,value:u,operator:y="=",connector:p="AND"}=l;const f=n({model:t,field:o});u=c(u,t,o);const w=t=>"in"===y.toLowerCase()?t(f,"in",Array.isArray(u)?u:[u]):"contains"===y?t(f,"like",`%${u}%`):"starts_with"===y?t(f,"like",`${u}%`):"ends_with"===y?t(f,"like",`%${u}`):t(f,"eq"===y?"=":"ne"===y?"<>":"gt"===y?">":"gte"===y?">=":"lt"===y?"<":"lte"===y?"<=":y,u);"OR"===p?s.or.push(w):s.and.push(w)})),{and:s.and.length?s.and:null,or:s.or.length?s.or:null}}return{async create({data:n,model:l}){const s=t.insertInto(l).values(n);return await o(n,s,l,[])},async findOne({model:n,where:l,select:s}){const{and:o,or:c}=u(n,l);let y=t.selectFrom(n).selectAll();o&&(y=y.where((t=>t.and(o.map((n=>n(t))))))),c&&(y=y.where((t=>t.or(c.map((n=>n(t)))))));const p=await y.executeTakeFirst();return p||null},async findMany({model:s,where:o,limit:c,offset:y,sortBy:p}){const{and:f,or:w}=u(s,o);let h=t.selectFrom(s);f&&(h=h.where((t=>t.and(f.map((n=>n(t))))))),w&&(h=h.where((t=>t.or(w.map((n=>n(t))))))),"mssql"===l?.type?y||(h=h.top(c||100)):h=h.limit(c||100),p&&(h=h.orderBy(n({model:s,field:p.field}),p.direction)),y&&("mssql"===l?.type?(p||(h=h.orderBy(n({model:s,field:"id"}))),h=h.offset(y).fetch(c||100)):h=h.offset(y));const q=await h.selectAll().execute();return q||[]},async update({model:n,where:l,update:s}){const{and:c,or:y}=u(n,l);let p=t.updateTable(n).set(s);return c&&(p=p.where((t=>t.and(c.map((n=>n(t))))))),y&&(p=p.where((t=>t.or(y.map((n=>n(t))))))),await o(s,p,n,l)},async updateMany({model:n,where:l,update:s}){const{and:o,or:c}=u(n,l);let y=t.updateTable(n).set(s);o&&(y=y.where((t=>t.and(o.map((n=>n(t))))))),c&&(y=y.where((t=>t.or(c.map((n=>n(t)))))));return(await y.execute()).length},async count({model:n,where:l}){const{and:s,or:o}=u(n,l);let c=t.selectFrom(n).select(t.fn.count("id").as("count"));s&&(c=c.where((t=>t.and(s.map((n=>n(t))))))),o&&(c=c.where((t=>t.or(o.map((n=>n(t)))))));return(await c.execute())[0].count},async delete({model:n,where:l}){const{and:s,or:o}=u(n,l);let c=t.deleteFrom(n);s&&(c=c.where((t=>t.and(s.map((n=>n(t))))))),o&&(c=c.where((t=>t.or(o.map((n=>n(t))))))),await c.execute()},async deleteMany({model:n,where:l}){const{and:s,or:o}=u(n,l);let c=t.deleteFrom(n);return s&&(c=c.where((t=>t.and(s.map((n=>n(t))))))),o&&(c=c.where((t=>t.or(o.map((n=>n(t))))))),(await c.execute()).length},options:l}}})}),7105,[7106,7354]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0});var t={expressionBuilder:!0,logOnce:!0};Object.defineProperty(e,"expressionBuilder",{enumerable:!0,get:function(){return u.expressionBuilder}}),Object.defineProperty(e,"logOnce",{enumerable:!0,get:function(){return Qr.logOnce}});var n=r(d[0]);Object.keys(n).forEach((function(o){"default"!==o&&"__esModule"!==o&&(Object.prototype.hasOwnProperty.call(t,o)||o in e&&e[o]===n[o]||Object.defineProperty(e,o,{enumerable:!0,get:function(){return n[o]}}))}));var o=r(d[1]);Object.keys(o).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===o[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return o[n]}}))}));var c=r(d[2]);Object.keys(c).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===c[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return c[n]}}))}));var u=r(d[3]),l=r(d[4]);Object.keys(l).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===l[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return l[n]}}))}));var f=r(d[5]);Object.keys(f).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===f[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return f[n]}}))}));var p=r(d[6]);Object.keys(p).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===p[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return p[n]}}))}));var O=r(d[7]);Object.keys(O).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===O[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return O[n]}}))}));var b=r(d[8]);Object.keys(b).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===b[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return b[n]}}))}));var y=r(d[9]);Object.keys(y).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===y[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return y[n]}}))}));var s=r(d[10]);Object.keys(s).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===s[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return s[n]}}))}));var j=r(d[11]);Object.keys(j).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===j[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return j[n]}}))}));var _=r(d[12]);Object.keys(_).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===_[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return _[n]}}))}));var P=r(d[13]);Object.keys(P).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===P[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return P[n]}}))}));var h=r(d[14]);Object.keys(h).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===h[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return h[n]}}))}));var v=r(d[15]);Object.keys(v).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===v[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return v[n]}}))}));var M=r(d[16]);Object.keys(M).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===M[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return M[n]}}))}));var k=r(d[17]);Object.keys(k).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===k[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return k[n]}}))}));var w=r(d[18]);Object.keys(w).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===w[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return w[n]}}))}));var E=r(d[19]);Object.keys(E).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===E[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return E[n]}}))}));var x=r(d[20]);Object.keys(x).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===x[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return x[n]}}))}));var B=r(d[21]);Object.keys(B).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===B[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return B[n]}}))}));var q=r(d[22]);Object.keys(q).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===q[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return q[n]}}))}));var z=r(d[23]);Object.keys(z).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===z[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return z[n]}}))}));var A=r(d[24]);Object.keys(A).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===A[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return A[n]}}))}));var C=r(d[25]);Object.keys(C).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===C[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return C[n]}}))}));var D=r(d[26]);Object.keys(D).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===D[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return D[n]}}))}));var F=r(d[27]);Object.keys(F).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===F[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return F[n]}}))}));var G=r(d[28]);Object.keys(G).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===G[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return G[n]}}))}));var H=r(d[29]);Object.keys(H).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===H[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return H[n]}}))}));var I=r(d[30]);Object.keys(I).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===I[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return I[n]}}))}));var J=r(d[31]);Object.keys(J).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===J[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return J[n]}}))}));var K=r(d[32]);Object.keys(K).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===K[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return K[n]}}))}));var L=r(d[33]);Object.keys(L).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===L[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return L[n]}}))}));var N=r(d[34]);Object.keys(N).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===N[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return N[n]}}))}));var Q=r(d[35]);Object.keys(Q).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Q[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Q[n]}}))}));var R=r(d[36]);Object.keys(R).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===R[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return R[n]}}))}));var S=r(d[37]);Object.keys(S).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===S[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return S[n]}}))}));var T=r(d[38]);Object.keys(T).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===T[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return T[n]}}))}));var U=r(d[39]);Object.keys(U).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===U[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return U[n]}}))}));var V=r(d[40]);Object.keys(V).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===V[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return V[n]}}))}));var W=r(d[41]);Object.keys(W).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===W[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return W[n]}}))}));var X=r(d[42]);Object.keys(X).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===X[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return X[n]}}))}));var Y=r(d[43]);Object.keys(Y).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Y[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Y[n]}}))}));var Z=r(d[44]);Object.keys(Z).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Z[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Z[n]}}))}));var $=r(d[45]);Object.keys($).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===$[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return $[n]}}))}));var ee=r(d[46]);Object.keys(ee).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===ee[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ee[n]}}))}));var te=r(d[47]);Object.keys(te).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===te[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return te[n]}}))}));var re=r(d[48]);Object.keys(re).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===re[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return re[n]}}))}));var ne=r(d[49]);Object.keys(ne).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===ne[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ne[n]}}))}));var oe=r(d[50]);Object.keys(oe).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===oe[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return oe[n]}}))}));var ce=r(d[51]);Object.keys(ce).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===ce[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ce[n]}}))}));var ue=r(d[52]);Object.keys(ue).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===ue[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ue[n]}}))}));var ae=r(d[53]);Object.keys(ae).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===ae[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ae[n]}}))}));var le=r(d[54]);Object.keys(le).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===le[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return le[n]}}))}));var fe=r(d[55]);Object.keys(fe).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===fe[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return fe[n]}}))}));var ie=r(d[56]);Object.keys(ie).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===ie[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ie[n]}}))}));var pe=r(d[57]);Object.keys(pe).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===pe[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return pe[n]}}))}));var Oe=r(d[58]);Object.keys(Oe).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Oe[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Oe[n]}}))}));var be=r(d[59]);Object.keys(be).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===be[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return be[n]}}))}));var ye=r(d[60]);Object.keys(ye).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===ye[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ye[n]}}))}));var de=r(d[61]);Object.keys(de).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===de[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return de[n]}}))}));var se=r(d[62]);Object.keys(se).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===se[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return se[n]}}))}));var je=r(d[63]);Object.keys(je).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===je[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return je[n]}}))}));var _e=r(d[64]);Object.keys(_e).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===_e[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return _e[n]}}))}));var Pe=r(d[65]);Object.keys(Pe).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Pe[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Pe[n]}}))}));var he=r(d[66]);Object.keys(he).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===he[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return he[n]}}))}));var ge=r(d[67]);Object.keys(ge).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===ge[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ge[n]}}))}));var ve=r(d[68]);Object.keys(ve).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===ve[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ve[n]}}))}));var me=r(d[69]);Object.keys(me).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===me[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return me[n]}}))}));var Me=r(d[70]);Object.keys(Me).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Me[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Me[n]}}))}));var ke=r(d[71]);Object.keys(ke).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===ke[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ke[n]}}))}));var we=r(d[72]);Object.keys(we).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===we[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return we[n]}}))}));var Ee=r(d[73]);Object.keys(Ee).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Ee[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ee[n]}}))}));var xe=r(d[74]);Object.keys(xe).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===xe[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return xe[n]}}))}));var Be=r(d[75]);Object.keys(Be).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Be[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Be[n]}}))}));var qe=r(d[76]);Object.keys(qe).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===qe[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return qe[n]}}))}));var ze=r(d[77]);Object.keys(ze).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===ze[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ze[n]}}))}));var Ae=r(d[78]);Object.keys(Ae).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Ae[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ae[n]}}))}));var Ce=r(d[79]);Object.keys(Ce).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Ce[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ce[n]}}))}));var De=r(d[80]);Object.keys(De).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===De[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return De[n]}}))}));var Fe=r(d[81]);Object.keys(Fe).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Fe[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Fe[n]}}))}));var Ge=r(d[82]);Object.keys(Ge).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Ge[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ge[n]}}))}));var He=r(d[83]);Object.keys(He).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===He[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return He[n]}}))}));var Ie=r(d[84]);Object.keys(Ie).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Ie[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ie[n]}}))}));var Je=r(d[85]);Object.keys(Je).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Je[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Je[n]}}))}));var Ke=r(d[86]);Object.keys(Ke).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Ke[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ke[n]}}))}));var Le=r(d[87]);Object.keys(Le).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Le[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Le[n]}}))}));var Ne=r(d[88]);Object.keys(Ne).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Ne[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ne[n]}}))}));var Qe=r(d[89]);Object.keys(Qe).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Qe[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Qe[n]}}))}));var Re=r(d[90]);Object.keys(Re).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Re[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Re[n]}}))}));var Se=r(d[91]);Object.keys(Se).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Se[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Se[n]}}))}));var Te=r(d[92]);Object.keys(Te).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Te[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Te[n]}}))}));var Ue=r(d[93]);Object.keys(Ue).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Ue[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ue[n]}}))}));var Ve=r(d[94]);Object.keys(Ve).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Ve[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ve[n]}}))}));var We=r(d[95]);Object.keys(We).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===We[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return We[n]}}))}));var Xe=r(d[96]);Object.keys(Xe).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Xe[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Xe[n]}}))}));var Ye=r(d[97]);Object.keys(Ye).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Ye[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ye[n]}}))}));var Ze=r(d[98]);Object.keys(Ze).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Ze[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ze[n]}}))}));var $e=r(d[99]);Object.keys($e).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===$e[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return $e[n]}}))}));var et=r(d[100]);Object.keys(et).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===et[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return et[n]}}))}));var tt=r(d[101]);Object.keys(tt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===tt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return tt[n]}}))}));var rt=r(d[102]);Object.keys(rt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===rt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return rt[n]}}))}));var nt=r(d[103]);Object.keys(nt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===nt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return nt[n]}}))}));var ot=r(d[104]);Object.keys(ot).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===ot[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ot[n]}}))}));var ct=r(d[105]);Object.keys(ct).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===ct[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ct[n]}}))}));var ut=r(d[106]);Object.keys(ut).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===ut[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ut[n]}}))}));var at=r(d[107]);Object.keys(at).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===at[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return at[n]}}))}));var lt=r(d[108]);Object.keys(lt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===lt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return lt[n]}}))}));var ft=r(d[109]);Object.keys(ft).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===ft[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ft[n]}}))}));var it=r(d[110]);Object.keys(it).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===it[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return it[n]}}))}));var pt=r(d[111]);Object.keys(pt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===pt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return pt[n]}}))}));var Ot=r(d[112]);Object.keys(Ot).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Ot[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ot[n]}}))}));var bt=r(d[113]);Object.keys(bt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===bt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return bt[n]}}))}));var yt=r(d[114]);Object.keys(yt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===yt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return yt[n]}}))}));var dt=r(d[115]);Object.keys(dt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===dt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return dt[n]}}))}));var st=r(d[116]);Object.keys(st).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===st[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return st[n]}}))}));var jt=r(d[117]);Object.keys(jt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===jt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return jt[n]}}))}));var _t=r(d[118]);Object.keys(_t).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===_t[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return _t[n]}}))}));var Pt=r(d[119]);Object.keys(Pt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Pt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Pt[n]}}))}));var ht=r(d[120]);Object.keys(ht).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===ht[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ht[n]}}))}));var gt=r(d[121]);Object.keys(gt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===gt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return gt[n]}}))}));var vt=r(d[122]);Object.keys(vt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===vt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return vt[n]}}))}));var mt=r(d[123]);Object.keys(mt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===mt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return mt[n]}}))}));var Mt=r(d[124]);Object.keys(Mt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Mt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Mt[n]}}))}));var kt=r(d[125]);Object.keys(kt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===kt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return kt[n]}}))}));var wt=r(d[126]);Object.keys(wt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===wt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return wt[n]}}))}));var Et=r(d[127]);Object.keys(Et).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Et[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Et[n]}}))}));var xt=r(d[128]);Object.keys(xt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===xt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return xt[n]}}))}));var Bt=r(d[129]);Object.keys(Bt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Bt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Bt[n]}}))}));var qt=r(d[130]);Object.keys(qt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===qt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return qt[n]}}))}));var zt=r(d[131]);Object.keys(zt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===zt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return zt[n]}}))}));var At=r(d[132]);Object.keys(At).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===At[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return At[n]}}))}));var Ct=r(d[133]);Object.keys(Ct).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Ct[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ct[n]}}))}));var Dt=r(d[134]);Object.keys(Dt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Dt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Dt[n]}}))}));var Ft=r(d[135]);Object.keys(Ft).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Ft[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ft[n]}}))}));var Gt=r(d[136]);Object.keys(Gt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Gt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Gt[n]}}))}));var Ht=r(d[137]);Object.keys(Ht).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Ht[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ht[n]}}))}));var It=r(d[138]);Object.keys(It).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===It[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return It[n]}}))}));var Jt=r(d[139]);Object.keys(Jt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Jt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Jt[n]}}))}));var Kt=r(d[140]);Object.keys(Kt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Kt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Kt[n]}}))}));var Lt=r(d[141]);Object.keys(Lt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Lt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Lt[n]}}))}));var Nt=r(d[142]);Object.keys(Nt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Nt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Nt[n]}}))}));var Qt=r(d[143]);Object.keys(Qt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Qt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Qt[n]}}))}));var Rt=r(d[144]);Object.keys(Rt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Rt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Rt[n]}}))}));var St=r(d[145]);Object.keys(St).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===St[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return St[n]}}))}));var Tt=r(d[146]);Object.keys(Tt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Tt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Tt[n]}}))}));var Ut=r(d[147]);Object.keys(Ut).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Ut[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ut[n]}}))}));var Vt=r(d[148]);Object.keys(Vt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Vt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Vt[n]}}))}));var Wt=r(d[149]);Object.keys(Wt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Wt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Wt[n]}}))}));var Xt=r(d[150]);Object.keys(Xt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Xt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Xt[n]}}))}));var Yt=r(d[151]);Object.keys(Yt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Yt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Yt[n]}}))}));var Zt=r(d[152]);Object.keys(Zt).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Zt[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Zt[n]}}))}));var $t=r(d[153]);Object.keys($t).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===$t[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return $t[n]}}))}));var er=r(d[154]);Object.keys(er).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===er[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return er[n]}}))}));var tr=r(d[155]);Object.keys(tr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===tr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return tr[n]}}))}));var rr=r(d[156]);Object.keys(rr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===rr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return rr[n]}}))}));var nr=r(d[157]);Object.keys(nr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===nr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return nr[n]}}))}));var or=r(d[158]);Object.keys(or).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===or[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return or[n]}}))}));var cr=r(d[159]);Object.keys(cr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===cr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return cr[n]}}))}));var ur=r(d[160]);Object.keys(ur).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===ur[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ur[n]}}))}));var ar=r(d[161]);Object.keys(ar).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===ar[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ar[n]}}))}));var lr=r(d[162]);Object.keys(lr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===lr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return lr[n]}}))}));var fr=r(d[163]);Object.keys(fr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===fr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return fr[n]}}))}));var ir=r(d[164]);Object.keys(ir).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===ir[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return ir[n]}}))}));var pr=r(d[165]);Object.keys(pr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===pr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return pr[n]}}))}));var Or=r(d[166]);Object.keys(Or).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Or[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Or[n]}}))}));var br=r(d[167]);Object.keys(br).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===br[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return br[n]}}))}));var yr=r(d[168]);Object.keys(yr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===yr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return yr[n]}}))}));var dr=r(d[169]);Object.keys(dr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===dr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return dr[n]}}))}));var sr=r(d[170]);Object.keys(sr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===sr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return sr[n]}}))}));var jr=r(d[171]);Object.keys(jr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===jr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return jr[n]}}))}));var _r=r(d[172]);Object.keys(_r).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===_r[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return _r[n]}}))}));var Pr=r(d[173]);Object.keys(Pr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Pr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Pr[n]}}))}));var hr=r(d[174]);Object.keys(hr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===hr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return hr[n]}}))}));var gr=r(d[175]);Object.keys(gr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===gr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return gr[n]}}))}));var vr=r(d[176]);Object.keys(vr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===vr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return vr[n]}}))}));var mr=r(d[177]);Object.keys(mr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===mr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return mr[n]}}))}));var Mr=r(d[178]);Object.keys(Mr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Mr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Mr[n]}}))}));var kr=r(d[179]);Object.keys(kr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===kr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return kr[n]}}))}));var wr=r(d[180]);Object.keys(wr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===wr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return wr[n]}}))}));var Er=r(d[181]);Object.keys(Er).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Er[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Er[n]}}))}));var xr=r(d[182]);Object.keys(xr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===xr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return xr[n]}}))}));var Br=r(d[183]);Object.keys(Br).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Br[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Br[n]}}))}));var qr=r(d[184]);Object.keys(qr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===qr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return qr[n]}}))}));var zr=r(d[185]);Object.keys(zr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===zr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return zr[n]}}))}));var Ar=r(d[186]);Object.keys(Ar).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Ar[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ar[n]}}))}));var Cr=r(d[187]);Object.keys(Cr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Cr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Cr[n]}}))}));var Dr=r(d[188]);Object.keys(Dr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Dr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Dr[n]}}))}));var Fr=r(d[189]);Object.keys(Fr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Fr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Fr[n]}}))}));var Gr=r(d[190]);Object.keys(Gr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Gr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Gr[n]}}))}));var Hr=r(d[191]);Object.keys(Hr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Hr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Hr[n]}}))}));var Ir=r(d[192]);Object.keys(Ir).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Ir[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Ir[n]}}))}));var Jr=r(d[193]);Object.keys(Jr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Jr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Jr[n]}}))}));var Kr=r(d[194]);Object.keys(Kr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Kr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Kr[n]}}))}));var Lr=r(d[195]);Object.keys(Lr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Lr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Lr[n]}}))}));var Nr=r(d[196]);Object.keys(Nr).forEach((function(n){"default"!==n&&"__esModule"!==n&&(Object.prototype.hasOwnProperty.call(t,n)||n in e&&e[n]===Nr[n]||Object.defineProperty(e,n,{enumerable:!0,get:function(){return Nr[n]}}))}));var Qr=r(d[197])}),7106,[7107,7165,7123,7125,7221,7292,7293,7294,7295,7126,7166,7195,7192,7187,7160,7224,7186,7193,7196,7188,7227,7230,7232,7208,7215,7296,7297,7298,7285,7211,7299,7300,7302,7108,7268,7278,7272,7280,7265,7270,7267,7271,7243,7251,7238,7273,7276,7256,7283,7289,7303,7304,7284,7288,7305,7306,7307,7308,7309,7310,7317,7311,7318,7319,7320,7321,7327,7322,7324,7325,7326,7328,7329,7330,7312,7313,7316,7331,7332,7333,7334,7335,7336,7337,7314,7338,7339,7340,7343,7204,7345,7239,7253,7262,7225,7120,7257,7109,7131,7134,7231,7237,7244,7240,7137,7184,7198,7200,7346,7111,7113,7114,7279,7274,7236,7171,7248,7175,7241,7255,7115,7117,7118,7281,7277,7179,7223,7252,7157,7226,7247,7218,7158,7159,7112,7172,7129,7145,7233,7146,7144,7194,7347,7210,7180,7250,7216,7189,7185,7130,7124,7206,7301,7348,7135,7132,7142,7154,7182,7153,7151,7164,7155,7261,7148,7173,7143,7138,7245,7242,7178,7116,7139,7127,7156,7168,7220,7349,7121,7191,7234,7229,7254,7174,7176,7149,7150,7170,7181,7177,7201,7350,7291,7351,7352,7290,7353,7214]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.TransactionBuilder=e.Transaction=e.Kysely=e.ConnectionBuilder=void 0,e.isKyselyProps=S;var t=r(d[0]),o=r(d[1]),n=r(d[2]),s=r(d[3]),c=r(d[4]),u=r(d[5]),p=r(d[6]),l=r(d[7]),h=r(d[8]),w=r(d[9]),x=r(d[10]),y=r(d[11]),v=r(d[12]),P=r(d[13]),T=r(d[14]),f=r(d[15]),C=r(d[16]),b=r(d[17]);class L extends s.QueryCreator{#e;constructor(t){let o,s;if(S(t))o={executor:t.executor},s={...t};else{const u=t.dialect,l=u.createDriver(),h=u.createQueryCompiler(),w=u.createAdapter(),x=new y.Log(t.log??[]),v=new p.RuntimeDriver(l,x),P=new n.DefaultConnectionProvider(v),T=new c.DefaultQueryExecutor(h,w,P,t.plugins??[]);o={executor:T},s={config:t,executor:T,dialect:u,driver:v}}super(o),this.#e=(0,u.freeze)(s)}get schema(){return new t.SchemaModule(this.#e.executor)}get dynamic(){return new o.DynamicModule}get introspection(){return this.#e.dialect.createIntrospector(this.withoutPlugins())}case(t){return new T.CaseBuilder({node:f.CaseNode.create((0,u.isUndefined)(t)?void 0:(0,C.parseExpression)(t))})}get fn(){return(0,x.createFunctionModule)()}transaction(){return new A({...this.#e})}connection(){return new O({...this.#e})}withPlugin(t){return new L({...this.#e,executor:this.#e.executor.withPlugin(t)})}withoutPlugins(){return new L({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(t){return new L({...this.#e,executor:this.#e.executor.withPluginAtFront(new b.WithSchemaPlugin(t))})}withTables(){return new L({...this.#e})}async destroy(){await this.#e.driver.destroy()}get isTransaction(){return!1}getExecutor(){return this.#e.executor}executeQuery(t,o=(0,v.createQueryId)()){const n=(0,P.isCompilable)(t)?t.compile():t;return this.getExecutor().executeQuery(n,o)}}e.Kysely=L;class E extends L{#e;constructor(t){super(t),this.#e=t}get isTransaction(){return!0}transaction(){throw new Error('calling the transaction method for a Transaction is not supported')}connection(){throw new Error('calling the connection method for a Transaction is not supported')}async destroy(){throw new Error('calling the destroy method for a Transaction is not supported')}withPlugin(t){return new E({...this.#e,executor:this.#e.executor.withPlugin(t)})}withoutPlugins(){return new E({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(t){return new E({...this.#e,executor:this.#e.executor.withPluginAtFront(new b.WithSchemaPlugin(t))})}withTables(){return new E({...this.#e})}}function S(t){return(0,u.isObject)(t)&&(0,u.isObject)(t.config)&&(0,u.isObject)(t.driver)&&(0,u.isObject)(t.executor)&&(0,u.isObject)(t.dialect)}e.Transaction=E;class O{#e;constructor(t){this.#e=(0,u.freeze)(t)}async execute(t){return this.#e.executor.provideConnection((async o=>{const n=this.#e.executor.withConnectionProvider(new l.SingleConnectionProvider(o)),s=new L({...this.#e,executor:n});return await t(s)}))}}e.ConnectionBuilder=O,(0,w.preventAwait)(O,"don't await ConnectionBuilder instances directly. To execute the query you need to call the `execute` method");class A{#e;constructor(t){this.#e=(0,u.freeze)(t)}setIsolationLevel(t){return new A({...this.#e,isolationLevel:t})}async execute(t){const{isolationLevel:o,...n}=this.#e,s={isolationLevel:o};return B(s),this.#e.executor.provideConnection((async o=>{const c=this.#e.executor.withConnectionProvider(new l.SingleConnectionProvider(o)),u=new E({...n,executor:c});try{await this.#e.driver.beginTransaction(o,s);const n=await t(u);return await this.#e.driver.commitTransaction(o),n}catch(t){throw await this.#e.driver.rollbackTransaction(o),t}}))}}function B(t){if(t.isolationLevel&&!h.TRANSACTION_ISOLATION_LEVELS.includes(t.isolationLevel))throw new Error(`invalid transaction isolation level ${t.isolationLevel}`)}e.TransactionBuilder=A,(0,w.preventAwait)(A,"don't await TransactionBuilder instances directly. To execute the transaction you need to call the `execute` method")}),7107,[7108,7283,7284,7165,7285,7110,7286,7288,7289,7161,7224,7290,7202,7291,7230,7231,7122,7204]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.SchemaModule=void 0;var t=r(d[0]),u=r(d[1]),o=r(d[2]),c=r(d[3]),n=r(d[4]),l=r(d[5]),h=r(d[6]),x=r(d[7]),I=r(d[8]),y=r(d[9]),p=r(d[10]),w=r(d[11]),s=r(d[12]),T=r(d[13]),b=r(d[14]),S=r(d[15]),q=r(d[16]),B=r(d[17]),N=r(d[18]),Q=r(d[19]),C=r(d[20]),D=r(d[21]),P=r(d[22]),V=r(d[23]),f=r(d[24]),_=r(d[25]);class v{#e;constructor(t){this.#e=t}createTable(t){return new w.CreateTableBuilder({queryId:(0,S.createQueryId)(),executor:this.#e,node:c.CreateTableNode.create((0,x.parseTable)(t))})}dropTable(t){return new b.DropTableBuilder({queryId:(0,S.createQueryId)(),executor:this.#e,node:h.DropTableNode.create((0,x.parseTable)(t))})}createIndex(t){return new y.CreateIndexBuilder({queryId:(0,S.createQueryId)(),executor:this.#e,node:u.CreateIndexNode.create(t)})}dropIndex(t){return new s.DropIndexBuilder({queryId:(0,S.createQueryId)(),executor:this.#e,node:n.DropIndexNode.create(t)})}createSchema(t){return new p.CreateSchemaBuilder({queryId:(0,S.createQueryId)(),executor:this.#e,node:o.CreateSchemaNode.create(t)})}dropSchema(t){return new T.DropSchemaBuilder({queryId:(0,S.createQueryId)(),executor:this.#e,node:l.DropSchemaNode.create(t)})}alterTable(u){return new I.AlterTableBuilder({queryId:(0,S.createQueryId)(),executor:this.#e,node:t.AlterTableNode.create((0,x.parseTable)(u))})}createView(t){return new B.CreateViewBuilder({queryId:(0,S.createQueryId)(),executor:this.#e,node:N.CreateViewNode.create(t)})}dropView(t){return new Q.DropViewBuilder({queryId:(0,S.createQueryId)(),executor:this.#e,node:C.DropViewNode.create(t)})}createType(t){return new D.CreateTypeBuilder({queryId:(0,S.createQueryId)(),executor:this.#e,node:V.CreateTypeNode.create((0,_.parseSchemableIdentifier)(t))})}dropType(t){return new P.DropTypeBuilder({queryId:(0,S.createQueryId)(),executor:this.#e,node:f.DropTypeNode.create((0,_.parseSchemableIdentifier)(t))})}withPlugin(t){return new v(this.#e.withPlugin(t))}withoutPlugins(){return new v(this.#e.withoutPlugins())}withSchema(t){return new v(this.#e.withPluginAtFront(new q.WithSchemaPlugin(t)))}}e.SchemaModule=v}),7108,[7109,7111,7113,7114,7115,7117,7118,7119,7238,7265,7267,7268,7270,7271,7272,7202,7204,7273,7274,7276,7277,7278,7280,7279,7281,7282]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.AlterTableNode=void 0;var l=r(d[0]);e.AlterTableNode=(0,l.freeze)({is:l=>'AlterTableNode'===l.kind,create:o=>(0,l.freeze)({kind:'AlterTableNode',table:o}),cloneWithTableProps:(o,t)=>(0,l.freeze)({...o,...t}),cloneWithColumnAlteration:(o,t)=>(0,l.freeze)({...o,columnAlterations:o.columnAlterations?[...o.columnAlterations,t]:[t]})})}),7109,[7110]);
__d((function(g,r,_i,a,m,e,d){function t(t){return'string'==typeof t}function n(t){return t instanceof Date}function u(t){return'undefined'!=typeof Buffer&&Buffer.isBuffer(t)}function f(t){return'object'==typeof t&&null!==t}function i(t){return Object.freeze(t)}function o(t){return Array.isArray(t)}function c(t,n){return o(t)&&o(n)?l(t,n):f(t)&&f(n)?s(t,n):t===n}function l(t,n){if(t.length!==n.length)return!1;for(let u=0;u<t.length;++u)if(!c(t[u],n[u]))return!1;return!0}function s(t,f){return u(t)&&u(f)?(o=t,c=f,0===Buffer.compare(o,c)):n(t)&&n(f)?(i=f,t.getTime()===i.getTime()):y(t,f);var i,o,c}function y(t,n){const u=Object.keys(t),f=Object.keys(n);if(u.length!==f.length)return!1;for(const f of u)if(!c(t[f],n[f]))return!1;return!0}Object.defineProperty(e,"__esModule",{value:!0}),e.asArray=function(t){return o(t)?t:[t]},e.asReadonlyArray=function(t){return o(t)?t:i([t])},e.compare=c,e.freeze=i,e.getLast=function(t){return t[t.length-1]},e.isArrayBufferOrView=function(t){return t instanceof ArrayBuffer||ArrayBuffer.isView(t)},e.isBigInt=function(t){return'bigint'==typeof t},e.isBoolean=function(t){return'boolean'==typeof t},e.isBuffer=u,e.isDate=n,e.isEmpty=function(n){if(Array.isArray(n)||t(n)||u(n))return 0===n.length;if(n)return 0===Object.keys(n).length;return!1},e.isFunction=function(t){return'function'==typeof t},e.isNull=function(t){return null===t},e.isNumber=function(t){return'number'==typeof t},e.isObject=f,e.isPlainObject=function(t){if(!f(t)||'[object Object]'!==p(t))return!1;if(null===Object.getPrototypeOf(t))return!0;let n=t;for(;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(t)===n},e.isReadonlyArray=o,e.isString=t,e.isUndefined=function(t){return void 0===t||void 0===t},e.noop=function(t){return t};const b=Object.prototype.toString;function p(t){return null==t?void 0===t?'[object Undefined]':'[object Null]':b.call(t)}}),7110,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.CreateIndexNode=void 0;var n=r(d[0]),o=r(d[1]);e.CreateIndexNode=(0,n.freeze)({is:n=>'CreateIndexNode'===n.kind,create:t=>(0,n.freeze)({kind:'CreateIndexNode',name:o.IdentifierNode.create(t)}),cloneWith:(o,t)=>(0,n.freeze)({...o,...t}),cloneWithColumns:(o,t)=>(0,n.freeze)({...o,columns:[...o.columns||[],...t]})})}),7111,[7110,7112]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.IdentifierNode=void 0;var n=r(d[0]);e.IdentifierNode=(0,n.freeze)({is:n=>'IdentifierNode'===n.kind,create:f=>(0,n.freeze)({kind:'IdentifierNode',name:f})})}),7112,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.CreateSchemaNode=void 0;var t=r(d[0]),c=r(d[1]);e.CreateSchemaNode=(0,t.freeze)({is:t=>'CreateSchemaNode'===t.kind,create:(o,n)=>(0,t.freeze)({kind:'CreateSchemaNode',schema:c.IdentifierNode.create(o),...n}),cloneWith:(c,o)=>(0,t.freeze)({...c,...o})})}),7113,[7110,7112]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ON_COMMIT_ACTIONS=e.CreateTableNode=void 0;var o=r(d[0]);e.ON_COMMIT_ACTIONS=['preserve rows','delete rows','drop'],e.CreateTableNode=(0,o.freeze)({is:o=>'CreateTableNode'===o.kind,create:n=>(0,o.freeze)({kind:'CreateTableNode',table:n,columns:(0,o.freeze)([])}),cloneWithColumn:(n,f)=>(0,o.freeze)({...n,columns:(0,o.freeze)([...n.columns,f])}),cloneWithConstraint:(n,f)=>(0,o.freeze)({...n,constraints:n.constraints?(0,o.freeze)([...n.constraints,f]):(0,o.freeze)([f])}),cloneWithFrontModifier:(n,f)=>(0,o.freeze)({...n,frontModifiers:n.frontModifiers?(0,o.freeze)([...n.frontModifiers,f]):(0,o.freeze)([f])}),cloneWithEndModifier:(n,f)=>(0,o.freeze)({...n,endModifiers:n.endModifiers?(0,o.freeze)([...n.endModifiers,f]):(0,o.freeze)([f])}),cloneWith:(n,f)=>(0,o.freeze)({...n,...f})})}),7114,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.DropIndexNode=void 0;var o=r(d[0]),n=r(d[1]);e.DropIndexNode=(0,o.freeze)({is:o=>'DropIndexNode'===o.kind,create:(t,c)=>(0,o.freeze)({kind:'DropIndexNode',name:n.SchemableIdentifierNode.create(t),...c}),cloneWith:(n,t)=>(0,o.freeze)({...n,...t})})}),7115,[7110,7116]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.SchemableIdentifierNode=void 0;var t=r(d[0]),n=r(d[1]);e.SchemableIdentifierNode=(0,t.freeze)({is:t=>'SchemableIdentifierNode'===t.kind,create:f=>(0,t.freeze)({kind:'SchemableIdentifierNode',identifier:n.IdentifierNode.create(f)}),createWithSchema:(f,c)=>(0,t.freeze)({kind:'SchemableIdentifierNode',schema:n.IdentifierNode.create(f),identifier:n.IdentifierNode.create(c)})})}),7116,[7110,7112]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.DropSchemaNode=void 0;var o=r(d[0]),c=r(d[1]);e.DropSchemaNode=(0,o.freeze)({is:o=>'DropSchemaNode'===o.kind,create:(n,t)=>(0,o.freeze)({kind:'DropSchemaNode',schema:c.IdentifierNode.create(n),...t}),cloneWith:(c,n)=>(0,o.freeze)({...c,...n})})}),7117,[7110,7112]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.DropTableNode=void 0;var o=r(d[0]);e.DropTableNode=(0,o.freeze)({is:o=>'DropTableNode'===o.kind,create:(l,b)=>(0,o.freeze)({kind:'DropTableNode',table:l,...b}),cloneWith:(l,b)=>(0,o.freeze)({...l,...b})})}),7118,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.parseAliasedTable=l,e.parseTable=p,e.parseTableExpression=u,e.parseTableExpressionOrList=function(t){return(0,n.isReadonlyArray)(t)?t.map((n=>u(n))):[u(t)]};var n=r(d[0]),t=r(d[1]),s=r(d[2]),o=r(d[3]),c=r(d[4]);function u(t){return(0,n.isString)(t)?l(t):(0,o.parseAliasedExpression)(t)}function l(n){const s=' as ';if(n.includes(s)){const[o,u]=n.split(s).map(f);return t.AliasNode.create(p(o),c.IdentifierNode.create(u))}return p(n)}function p(n){if(n.includes(".")){const[t,o]=n.split(".").map(f);return s.TableNode.createWithSchema(t,o)}return s.TableNode.create(n)}function f(n){return n.trim()}}),7119,[7110,7120,7121,7122,7112]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.AliasNode=void 0;var o=r(d[0]);e.AliasNode=(0,o.freeze)({is:o=>'AliasNode'===o.kind,create:(l,s)=>(0,o.freeze)({kind:'AliasNode',node:l,alias:s})})}),7120,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.TableNode=void 0;var t=r(d[0]),l=r(d[1]);e.TableNode=(0,t.freeze)({is:t=>'TableNode'===t.kind,create:o=>(0,t.freeze)({kind:'TableNode',table:l.SchemableIdentifierNode.create(o)}),createWithSchema:(o,b)=>(0,t.freeze)({kind:'TableNode',table:l.SchemableIdentifierNode.createWithSchema(o,b)})})}),7121,[7110,7116]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.isExpressionOrFactory=function(o){return(0,n.isExpression)(o)||(0,n.isAliasedExpression)(o)||(0,t.isFunction)(o)},e.parseAliasedExpression=function(n){if((0,o.isOperationNodeSource)(n))return n.toOperationNode();if((0,t.isFunction)(n))return n((0,s.expressionBuilder)()).toOperationNode();throw new Error(`invalid aliased expression: ${JSON.stringify(n)}`)},e.parseExpression=function(n){if((0,o.isOperationNodeSource)(n))return n.toOperationNode();if((0,t.isFunction)(n))return n((0,s.expressionBuilder)()).toOperationNode();throw new Error(`invalid expression: ${JSON.stringify(n)}`)};var n=r(d[0]),o=r(d[1]),s=r(d[2]),t=r(d[3])}),7122,[7123,7124,7125,7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.isAliasedExpression=function(o){return(0,s.isObject)(o)&&'expression'in o&&(0,s.isString)(o.alias)&&(0,n.isOperationNodeSource)(o)},e.isExpression=function(o){return(0,s.isObject)(o)&&'expressionType'in o&&(0,n.isOperationNodeSource)(o)};var n=r(d[0]),s=r(d[1])}),7123,[7124,7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.isOperationNodeSource=function(n){return(0,o.isObject)(n)&&(0,o.isFunction)(n.toOperationNode)};var o=r(d[0])}),7124,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.createExpressionBuilder=T,e.expressionBuilder=function(n){return T()};var n=r(d[0]),s=r(d[1]),p=r(d[2]),o=r(d[3]),t=r(d[4]),c=r(d[5]),u=r(d[6]),l=r(d[7]),x=r(d[8]),E=r(d[9]),w=r(d[10]),f=r(d[11]),N=r(d[12]),O=r(d[13]),y=r(d[14]),W=r(d[15]),b=r(d[16]),R=r(d[17]),S=r(d[18]),B=r(d[19]),P=r(d[20]),h=r(d[21]),V=r(d[22]),F=r(d[23]);function T(v=O.NOOP_QUERY_EXECUTOR){function _(n,s){return new E.ExpressionWrapper((0,f.parseUnaryOperation)(n,s))}const j=Object.assign((function(n,s,p){return new E.ExpressionWrapper((0,l.parseValueBinaryOperation)(n,s,p))}),{fn:void 0,eb:void 0,selectFrom:o=>(0,n.createSelectQueryBuilder)({queryId:(0,t.createQueryId)(),executor:v,queryNode:s.SelectQueryNode.createFrom((0,p.parseTableExpressionOrList)(o))}),case:n=>new y.CaseBuilder({node:W.CaseNode.create((0,b.isUndefined)(n)?void 0:(0,u.parseReferenceExpression)(n))}),ref:(n,s)=>(0,b.isUndefined)(s)?new E.ExpressionWrapper((0,u.parseStringReference)(n)):new R.JSONPathBuilder((0,u.parseJSONReference)(n,s)),jsonPath:()=>new R.JSONPathBuilder(h.JSONPathNode.create()),table:n=>new E.ExpressionWrapper((0,p.parseTable)(n)),val:n=>new E.ExpressionWrapper((0,N.parseValueExpression)(n)),refTuple:(...n)=>new E.ExpressionWrapper(P.TupleNode.create(n.map(u.parseReferenceExpression))),tuple:(...n)=>new E.ExpressionWrapper(P.TupleNode.create(n.map(N.parseValueExpression))),lit:n=>new E.ExpressionWrapper((0,N.parseSafeImmediateValue)(n)),unary:_,not:n=>_('not',n),exists:n=>_('exists',n),neg:n=>_('-',n),between:(n,s,p)=>new E.ExpressionWrapper(S.BinaryOperationNode.create((0,u.parseReferenceExpression)(n),w.OperatorNode.create('between'),B.AndNode.create((0,N.parseValueExpression)(s),(0,N.parseValueExpression)(p)))),betweenSymmetric:(n,s,p)=>new E.ExpressionWrapper(S.BinaryOperationNode.create((0,u.parseReferenceExpression)(n),w.OperatorNode.create('between symmetric'),B.AndNode.create((0,N.parseValueExpression)(s),(0,N.parseValueExpression)(p)))),and:n=>(0,b.isReadonlyArray)(n)?new E.ExpressionWrapper((0,l.parseFilterList)(n,'and')):new E.ExpressionWrapper((0,l.parseFilterObject)(n,'and')),or:n=>(0,b.isReadonlyArray)(n)?new E.ExpressionWrapper((0,l.parseFilterList)(n,'or')):new E.ExpressionWrapper((0,l.parseFilterObject)(n,'or')),parens(...n){const s=(0,l.parseValueBinaryOperationOrExpression)(n);return x.ParensNode.is(s)?new E.ExpressionWrapper(s):new E.ExpressionWrapper(x.ParensNode.create(s))},cast:(n,s)=>new E.ExpressionWrapper(F.CastNode.create((0,u.parseReferenceExpression)(n),(0,V.parseDataTypeExpression)(s))),withSchema:n=>T(v.withPluginAtFront(new o.WithSchemaPlugin(n)))});return j.fn=(0,c.createFunctionModule)(),j.eb=j,j}}),7125,[7126,7156,7119,7204,7202,7224,7136,7133,7151,7221,7135,7228,7147,7211,7230,7231,7110,7232,7134,7131,7234,7146,7235,7237]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.createSelectQueryBuilder=function(o){return new M(o)};var o=r(d[0]),t=r(d[1]),s=r(d[2]),n=r(d[3]),p=r(d[4]),u=r(d[5]),y=r(d[6]),h=r(d[7]),c=r(d[8]),l=r(d[9]),N=r(d[10]),q=r(d[11]),w=r(d[12]),S=r(d[13]),f=r(d[14]),Q=r(d[15]),W=r(d[16]),O=r(d[17]),x=r(d[18]),B=r(d[19]),J=r(d[20]),E=r(d[21]);class M{#e;constructor(o){this.#e=(0,w.freeze)(o)}get expressionType(){}get isSelectQueryBuilder(){return!0}where(...o){return new M({...this.#e,queryNode:h.QueryNode.cloneWithWhere(this.#e.queryNode,(0,O.parseValueBinaryOperationOrExpression)(o))})}whereRef(o,t,s){return new M({...this.#e,queryNode:h.QueryNode.cloneWithWhere(this.#e.queryNode,(0,O.parseReferentialBinaryOperation)(o,t,s))})}having(...o){return new M({...this.#e,queryNode:y.SelectQueryNode.cloneWithHaving(this.#e.queryNode,(0,O.parseValueBinaryOperationOrExpression)(o))})}havingRef(o,t,s){return new M({...this.#e,queryNode:y.SelectQueryNode.cloneWithHaving(this.#e.queryNode,(0,O.parseReferentialBinaryOperation)(o,t,s))})}select(o){return new M({...this.#e,queryNode:y.SelectQueryNode.cloneWithSelections(this.#e.queryNode,(0,p.parseSelectArg)(o))})}distinctOn(o){return new M({...this.#e,queryNode:y.SelectQueryNode.cloneWithDistinctOn(this.#e.queryNode,(0,u.parseReferenceExpressionOrList)(o))})}modifyFront(o){return new M({...this.#e,queryNode:y.SelectQueryNode.cloneWithFrontModifier(this.#e.queryNode,t.SelectModifierNode.createWithExpression(o.toOperationNode()))})}modifyEnd(o){return new M({...this.#e,queryNode:h.QueryNode.cloneWithEndModifier(this.#e.queryNode,t.SelectModifierNode.createWithExpression(o.toOperationNode()))})}distinct(){return new M({...this.#e,queryNode:y.SelectQueryNode.cloneWithFrontModifier(this.#e.queryNode,t.SelectModifierNode.create('Distinct'))})}forUpdate(o){return new M({...this.#e,queryNode:h.QueryNode.cloneWithEndModifier(this.#e.queryNode,t.SelectModifierNode.create('ForUpdate',o?(0,w.asArray)(o).map(n.parseTable):void 0))})}forShare(o){return new M({...this.#e,queryNode:h.QueryNode.cloneWithEndModifier(this.#e.queryNode,t.SelectModifierNode.create('ForShare',o?(0,w.asArray)(o).map(n.parseTable):void 0))})}forKeyShare(o){return new M({...this.#e,queryNode:h.QueryNode.cloneWithEndModifier(this.#e.queryNode,t.SelectModifierNode.create('ForKeyShare',o?(0,w.asArray)(o).map(n.parseTable):void 0))})}forNoKeyUpdate(o){return new M({...this.#e,queryNode:h.QueryNode.cloneWithEndModifier(this.#e.queryNode,t.SelectModifierNode.create('ForNoKeyUpdate',o?(0,w.asArray)(o).map(n.parseTable):void 0))})}skipLocked(){return new M({...this.#e,queryNode:h.QueryNode.cloneWithEndModifier(this.#e.queryNode,t.SelectModifierNode.create('SkipLocked'))})}noWait(){return new M({...this.#e,queryNode:h.QueryNode.cloneWithEndModifier(this.#e.queryNode,t.SelectModifierNode.create('NoWait'))})}selectAll(o){return new M({...this.#e,queryNode:y.SelectQueryNode.cloneWithSelections(this.#e.queryNode,(0,p.parseSelectAll)(o))})}innerJoin(...o){return new M({...this.#e,queryNode:h.QueryNode.cloneWithJoin(this.#e.queryNode,(0,s.parseJoin)('InnerJoin',o))})}leftJoin(...o){return new M({...this.#e,queryNode:h.QueryNode.cloneWithJoin(this.#e.queryNode,(0,s.parseJoin)('LeftJoin',o))})}rightJoin(...o){return new M({...this.#e,queryNode:h.QueryNode.cloneWithJoin(this.#e.queryNode,(0,s.parseJoin)('RightJoin',o))})}fullJoin(...o){return new M({...this.#e,queryNode:h.QueryNode.cloneWithJoin(this.#e.queryNode,(0,s.parseJoin)('FullJoin',o))})}innerJoinLateral(...o){return new M({...this.#e,queryNode:h.QueryNode.cloneWithJoin(this.#e.queryNode,(0,s.parseJoin)('LateralInnerJoin',o))})}leftJoinLateral(...o){return new M({...this.#e,queryNode:h.QueryNode.cloneWithJoin(this.#e.queryNode,(0,s.parseJoin)('LateralLeftJoin',o))})}orderBy(...o){return new M({...this.#e,queryNode:y.SelectQueryNode.cloneWithOrderByItems(this.#e.queryNode,(0,c.parseOrderBy)(o))})}groupBy(o){return new M({...this.#e,queryNode:y.SelectQueryNode.cloneWithGroupByItems(this.#e.queryNode,(0,S.parseGroupBy)(o))})}limit(o){return new M({...this.#e,queryNode:y.SelectQueryNode.cloneWithLimit(this.#e.queryNode,N.LimitNode.create((0,B.parseValueExpression)(o)))})}offset(o){return new M({...this.#e,queryNode:y.SelectQueryNode.cloneWithOffset(this.#e.queryNode,q.OffsetNode.create((0,B.parseValueExpression)(o)))})}fetch(o,t="only"){return new M({...this.#e,queryNode:y.SelectQueryNode.cloneWithFetch(this.#e.queryNode,(0,J.parseFetch)(o,t))})}top(o,t){return new M({...this.#e,queryNode:h.QueryNode.cloneWithTop(this.#e.queryNode,(0,E.parseTop)(o,t))})}union(o){return new M({...this.#e,queryNode:y.SelectQueryNode.cloneWithSetOperations(this.#e.queryNode,(0,W.parseSetOperations)('union',o,!1))})}unionAll(o){return new M({...this.#e,queryNode:y.SelectQueryNode.cloneWithSetOperations(this.#e.queryNode,(0,W.parseSetOperations)('union',o,!0))})}intersect(o){return new M({...this.#e,queryNode:y.SelectQueryNode.cloneWithSetOperations(this.#e.queryNode,(0,W.parseSetOperations)('intersect',o,!1))})}intersectAll(o){return new M({...this.#e,queryNode:y.SelectQueryNode.cloneWithSetOperations(this.#e.queryNode,(0,W.parseSetOperations)('intersect',o,!0))})}except(o){return new M({...this.#e,queryNode:y.SelectQueryNode.cloneWithSetOperations(this.#e.queryNode,(0,W.parseSetOperations)('except',o,!1))})}exceptAll(o){return new M({...this.#e,queryNode:y.SelectQueryNode.cloneWithSetOperations(this.#e.queryNode,(0,W.parseSetOperations)('except',o,!0))})}as(o){return new T(this,o)}clearSelect(){return new M({...this.#e,queryNode:y.SelectQueryNode.cloneWithoutSelections(this.#e.queryNode)})}clearWhere(){return new M({...this.#e,queryNode:h.QueryNode.cloneWithoutWhere(this.#e.queryNode)})}clearLimit(){return new M({...this.#e,queryNode:y.SelectQueryNode.cloneWithoutLimit(this.#e.queryNode)})}clearOffset(){return new M({...this.#e,queryNode:y.SelectQueryNode.cloneWithoutOffset(this.#e.queryNode)})}clearOrderBy(){return new M({...this.#e,queryNode:y.SelectQueryNode.cloneWithoutOrderBy(this.#e.queryNode)})}clearGroupBy(){return new M({...this.#e,queryNode:y.SelectQueryNode.cloneWithoutGroupBy(this.#e.queryNode)})}$call(o){return o(this)}$if(o,t){return o?t(this):new M({...this.#e})}$castTo(){return new M(this.#e)}$narrowType(){return new M(this.#e)}$assertType(){return new M(this.#e)}$asTuple(){return new x.ExpressionWrapper(this.toOperationNode())}withPlugin(o){return new M({...this.#e,executor:this.#e.executor.withPlugin(o)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const o=this.compile();return(await this.#e.executor.executeQuery(o,this.#e.queryId)).rows}async executeTakeFirst(){const[o]=await this.execute();return o}async executeTakeFirstOrThrow(o=f.NoResultError){const t=await this.executeTakeFirst();if(void 0===t){throw(0,f.isNoResultErrorConstructor)(o)?new o(this.toOperationNode()):o(this.toOperationNode())}return t}async*stream(o=100){const t=this.compile(),s=this.#e.executor.stream(t,o,this.#e.queryId);for await(const o of s)yield*o.rows}async explain(o,t){const s=new M({...this.#e,queryNode:h.QueryNode.cloneWithExplain(this.#e.queryNode,o,t)});return await s.execute()}}(0,l.preventAwait)(M,"don't await SelectQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.");class T{#r;#o;constructor(o,t){this.#r=o,this.#o=t}get expression(){return this.#r}get alias(){return this.#o}get isAliasedSelectQueryBuilder(){return!0}toOperationNode(){return o.AliasNode.create(this.#r.toOperationNode(),Q.IdentifierNode.create(this.#o))}}(0,l.preventAwait)(T,"don't await AliasedSelectQueryBuilder instances directly. AliasedSelectQueryBuilder should never be executed directly since it's always a part of another query.")}),7126,[7120,7127,7128,7119,7167,7136,7156,7173,7140,7161,7194,7216,7110,7217,7187,7112,7219,7133,7221,7147,7222,7190]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.SelectModifierNode=void 0;var o=r(d[0]);e.SelectModifierNode=(0,o.freeze)({is:o=>'SelectModifierNode'===o.kind,create:(f,t)=>(0,o.freeze)({kind:'SelectModifierNode',modifier:f,of:t}),createWithExpression:f=>(0,o.freeze)({kind:'SelectModifierNode',rawModifier:f})})}),7127,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.parseJoin=function(n,t){if(3===t.length)return l(n,t[0],t[1],t[2]);if(2===t.length)return f(n,t[0],t[1]);throw new Error('not implemented')};var n=r(d[0]),t=r(d[1]),o=r(d[2]),u=r(d[3]);function f(n,t,o){return o((0,u.createJoinBuilder)(n,t)).toOperationNode()}function l(u,f,l,p){return n.JoinNode.createWithOn(u,(0,t.parseTableExpression)(f),(0,o.parseReferentialBinaryOperation)(l,'=',p))}}),7128,[7129,7119,7133,7152]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.JoinNode=void 0;var o=r(d[0]),n=r(d[1]);e.JoinNode=(0,o.freeze)({is:o=>'JoinNode'===o.kind,create:(n,t)=>(0,o.freeze)({kind:'JoinNode',joinType:n,table:t,on:void 0}),createWithOn:(t,c,N)=>(0,o.freeze)({kind:'JoinNode',joinType:t,table:c,on:n.OnNode.create(N)}),cloneWithOn:(t,c)=>(0,o.freeze)({...t,on:t.on?n.OnNode.cloneWithOperation(t.on,'And',c):n.OnNode.create(c)})})}),7129,[7110,7130]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.OnNode=void 0;var n=r(d[0]),o=r(d[1]),t=r(d[2]);e.OnNode=(0,n.freeze)({is:n=>'OnNode'===n.kind,create:o=>(0,n.freeze)({kind:'OnNode',on:o}),cloneWithOperation:(O,c,N)=>(0,n.freeze)({...O,on:'And'===c?o.AndNode.create(O.on,N):t.OrNode.create(O.on,N)})})}),7130,[7110,7131,7132]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.AndNode=void 0;var n=r(d[0]);e.AndNode=(0,n.freeze)({is:n=>'AndNode'===n.kind,create:(o,t)=>(0,n.freeze)({kind:'AndNode',left:o,right:t})})}),7131,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.OrNode=void 0;var o=r(d[0]);e.OrNode=(0,o.freeze)({is:o=>'OrNode'===o.kind,create:(t,f)=>(0,o.freeze)({kind:'OrNode',left:t,right:f})})}),7132,[7110]);
__d((function(g,r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.parseFilterList=N,e.parseFilterObject=function(n,i){return N(Object.entries(n).filter((([,n])=>!(0,t.isUndefined)(n))).map((([n,t])=>O(n,E(t)?'is':'=',t))),i)},e.parseReferentialBinaryOperation=function(t,i,o){return n.BinaryOperationNode.create((0,s.parseReferenceExpression)(t),B(i),(0,s.parseReferenceExpression)(o))},e.parseValueBinaryOperation=O,e.parseValueBinaryOperationOrExpression=function(n){if(3===n.length)return O(n[0],n[1],n[2]);if(1===n.length)return(0,u.parseValueExpression)(n[0]);throw new Error(`invalid arguments: ${JSON.stringify(n)}`)};var n=r(d[0]),t=r(d[1]),i=r(d[2]),o=r(d[3]),s=r(d[4]),u=r(d[5]),p=r(d[6]),c=r(d[7]),f=r(d[8]),l=r(d[9]);function O(t,i,o){return y(i)&&E(o)?n.BinaryOperationNode.create((0,s.parseReferenceExpression)(t),B(i),p.ValueNode.createImmediate(o)):n.BinaryOperationNode.create((0,s.parseReferenceExpression)(t),B(i),(0,u.parseValueExpressionOrList)(o))}function N(t,i,s=!0){const u='and'===i?c.AndNode.create:l.OrNode.create;if(0===t.length)return n.BinaryOperationNode.create(p.ValueNode.createImmediate(1),o.OperatorNode.create('='),p.ValueNode.createImmediate('and'===i?1:0));let O=h(t[0]);for(let n=1;n<t.length;++n)O=u(O,h(t[n]));return t.length>1&&s?f.ParensNode.create(O):O}function y(n){return'is'===n||'is not'===n}function E(n){return(0,t.isNull)(n)||(0,t.isBoolean)(n)}function B(n){if((0,t.isString)(n)&&o.OPERATORS.includes(n))return o.OperatorNode.create(n);if((0,i.isOperationNodeSource)(n))return n.toOperationNode();throw new Error(`invalid operator ${JSON.stringify(n)}`)}function h(n){return(0,i.isOperationNodeSource)(n)?n.toOperationNode():n}}),7133,[7134,7110,7124,7135,7136,7147,7150,7131,7151,7132]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.BinaryOperationNode=void 0;var n=r(d[0]);e.BinaryOperationNode=(0,n.freeze)({is:n=>'BinaryOperationNode'===n.kind,create:(o,t,p)=>(0,n.freeze)({kind:'BinaryOperationNode',leftOperand:o,operator:t,rightOperand:p})})}),7134,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.UNARY_OPERATORS=e.UNARY_FILTER_OPERATORS=e.OperatorNode=e.OPERATORS=e.JSON_OPERATORS=e.COMPARISON_OPERATORS=e.BINARY_OPERATORS=e.ARITHMETIC_OPERATORS=void 0,e.isArithmeticOperator=function(n){return(0,t.isString)(n)&&O.includes(n)},e.isBinaryOperator=function(n){return(0,t.isString)(n)&&o.includes(n)},e.isComparisonOperator=function(O){return(0,t.isString)(O)&&n.includes(O)},e.isJSONOperator=function(n){return(0,t.isString)(n)&&R.includes(n)},e.isOperator=function(n){return(0,t.isString)(n)&&S.includes(n)};var t=r(d[0]);const n=e.COMPARISON_OPERATORS=['=','==','!=','<>','>','>=','<','<=','in','not in','is','is not','like','not like','match','ilike','not ilike','@>','<@','^@','&&','?','?&','?|','!<','!>','<=>','!~','~','~*','!~*','@@','@@@','!!','<->','regexp','is distinct from','is not distinct from'],O=e.ARITHMETIC_OPERATORS=['+','-','*','/','%','^','&','|','#','<<','>>'],R=e.JSON_OPERATORS=['->','->>'],o=e.BINARY_OPERATORS=[...n,...O,'&&','||'],s=e.UNARY_FILTER_OPERATORS=['exists','not exists'],A=e.UNARY_OPERATORS=['not','-',...s],S=e.OPERATORS=[...o,...R,...A,'between','between symmetric'];e.OperatorNode=(0,t.freeze)({is:t=>'OperatorNode'===t.kind,create:n=>(0,t.freeze)({kind:'OperatorNode',operator:n})})}),7135,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.parseAliasedStringReference=function(t){const o=' as ';if(t.includes(o)){const[c,s]=t.split(o).map(x);return n.AliasNode.create(E(c),f.IdentifierNode.create(s))}return E(t)},e.parseColumnName=J,e.parseJSONReference=function(n,t){const o=E(n);if((0,N.isJSONOperator)(t))return l.JSONReferenceNode.create(o,O.JSONOperatorChainNode.create(N.OperatorNode.create(t)));const c=t.slice(0,-1);if((0,N.isJSONOperator)(c))return l.JSONReferenceNode.create(o,S.JSONPathNode.create(N.OperatorNode.create(c)));throw new Error(`Invalid JSON operator: ${t}`)},e.parseOrderedColumnName=function(n){if(n.includes(" ")){const[t,o]=n.split(" ").map(x);if(!(0,p.isOrderByDirection)(o))throw new Error(`invalid order direction "${o}" next to "${t}"`);return(0,p.parseOrderBy)([t,o])[0]}return J(n)},e.parseReferenceExpression=h,e.parseReferenceExpressionOrList=function(n){return(0,s.isReadonlyArray)(n)?n.map((n=>h(n))):[h(n)]},e.parseSimpleReferenceExpression=R,e.parseStringReference=E;var n=r(d[0]),t=r(d[1]),o=r(d[2]),c=r(d[3]),s=r(d[4]),u=r(d[5]),f=r(d[6]),p=r(d[7]),N=r(d[8]),l=r(d[9]),O=r(d[10]),S=r(d[11]);function R(n){return(0,s.isString)(n)?E(n):n.toOperationNode()}function h(n){return(0,u.isExpressionOrFactory)(n)?(0,u.parseExpression)(n):R(n)}function E(n){if(!n.includes("."))return o.ReferenceNode.create(t.ColumnNode.create(n));const c=n.split(".").map(x);if(3===c.length)return C(c);if(2===c.length)return w(c);throw new Error(`invalid column reference ${n}`)}function J(n){return t.ColumnNode.create(n)}function C(n){const[s,u,f]=n;return o.ReferenceNode.create(t.ColumnNode.create(f),c.TableNode.createWithSchema(s,u))}function w(n){const[s,u]=n;return o.ReferenceNode.create(t.ColumnNode.create(u),c.TableNode.create(s))}function x(n){return n.trim()}}),7136,[7120,7137,7138,7121,7110,7122,7112,7140,7135,7144,7145,7146]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ColumnNode=void 0;var o=r(d[0]),n=r(d[1]);e.ColumnNode=(0,o.freeze)({is:o=>'ColumnNode'===o.kind,create:u=>(0,o.freeze)({kind:'ColumnNode',column:n.IdentifierNode.create(u)})})}),7137,[7110,7112]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ReferenceNode=void 0;var c=r(d[0]),n=r(d[1]);e.ReferenceNode=(0,n.freeze)({is:c=>'ReferenceNode'===c.kind,create:(c,l)=>(0,n.freeze)({kind:'ReferenceNode',table:l,column:c}),createSelectAll:l=>(0,n.freeze)({kind:'ReferenceNode',table:l,column:c.SelectAllNode.create()})})}),7138,[7139,7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.SelectAllNode=void 0;var l=r(d[0]);e.SelectAllNode=(0,l.freeze)({is:l=>'SelectAllNode'===l.kind,create:()=>(0,l.freeze)({kind:'SelectAllNode'})})}),7139,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.isOrderByDirection=f,e.parseOrderBy=function(n){if(2===n.length)return[u(n[0],n[1])];if(1===n.length){const[t]=n;return Array.isArray(t)?t.map((n=>u(n))):[u(t)]}throw new Error(`Invalid number of arguments at order by! expected 1-2, received ${n.length}`)},e.parseOrderByItem=u;var n=r(d[0]),t=r(d[1]),o=r(d[2]),c=r(d[3]),s=r(d[4]);function f(n){return'asc'===n||'desc'===n}function u(n,o){const c=p(n);if(t.OrderByItemNode.is(c)){if(o)throw new Error('Cannot specify direction twice!');return c}return t.OrderByItemNode.create(c,y(o))}function p(o){if((0,c.isExpressionOrFactory)(o))return(0,c.parseExpression)(o);if((0,n.isDynamicReferenceBuilder)(o))return o.toOperationNode();const[u,p]=o.split(' ');if(p){if(!f(p))throw new Error(`Invalid order by direction: ${p}`);return t.OrderByItemNode.create((0,s.parseStringReference)(u),y(p))}return(0,s.parseStringReference)(o)}function y(n){if(n)return'asc'===n||'desc'===n?o.RawNode.createWithSql(n):n.toOperationNode()}}),7140,[7141,7142,7143,7122,7136]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.DynamicReferenceBuilder=void 0,e.isDynamicReferenceBuilder=function(c){return(0,t.isObject)(c)&&(0,n.isOperationNodeSource)(c)&&(0,t.isString)(c.dynamicReference)};var n=r(d[0]),c=r(d[1]),t=r(d[2]);e.DynamicReferenceBuilder=class{#e;get dynamicReference(){return this.#e}get refType(){}constructor(n){this.#e=n}toOperationNode(){return(0,c.parseSimpleReferenceExpression)(this.#e)}}}),7141,[7124,7136,7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.OrderByItemNode=void 0;var o=r(d[0]);e.OrderByItemNode=(0,o.freeze)({is:o=>'OrderByItemNode'===o.kind,create:(t,n)=>(0,o.freeze)({kind:'OrderByItemNode',orderBy:t,direction:n})})}),7142,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.RawNode=void 0;var t=r(d[0]);const c=e.RawNode=(0,t.freeze)({is:t=>'RawNode'===t.kind,create:(c,n)=>(0,t.freeze)({kind:'RawNode',sqlFragments:(0,t.freeze)(c),parameters:(0,t.freeze)(n)}),createWithSql:t=>c.create([t],[]),createWithChild:t=>c.create(['',''],[t]),createWithChildren:t=>c.create(new Array(t.length+1).fill(''),t)})}),7143,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.JSONReferenceNode=void 0;var n=r(d[0]);e.JSONReferenceNode=(0,n.freeze)({is:n=>'JSONReferenceNode'===n.kind,create:(f,c)=>(0,n.freeze)({kind:'JSONReferenceNode',reference:f,traversal:c}),cloneWithTraversal:(f,c)=>(0,n.freeze)({...f,traversal:c})})}),7144,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.JSONOperatorChainNode=void 0;var o=r(d[0]);e.JSONOperatorChainNode=(0,o.freeze)({is:o=>'JSONOperatorChainNode'===o.kind,create:n=>(0,o.freeze)({kind:'JSONOperatorChainNode',operator:n,values:(0,o.freeze)([])}),cloneWithValue:(n,t)=>(0,o.freeze)({...n,values:(0,o.freeze)([...n.values,t])})})}),7145,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.JSONPathNode=void 0;var t=r(d[0]);e.JSONPathNode=(0,t.freeze)({is:t=>'JSONPathNode'===t.kind,create:o=>(0,t.freeze)({kind:'JSONPathNode',inOperator:o,pathLegs:(0,t.freeze)([])}),cloneWithLeg:(o,h)=>(0,t.freeze)({...o,pathLegs:(0,t.freeze)([...o.pathLegs,h])})})}),7146,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.isSafeImmediateValue=c,e.parseSafeImmediateValue=function(t){if(!c(t))throw new Error(`unsafe immediate value ${JSON.stringify(t)}`);return s.ValueNode.createImmediate(t)},e.parseValueExpression=l,e.parseValueExpressionOrList=function(t){if((0,u.isReadonlyArray)(t))return f(t);return l(t)};var t=r(d[0]),n=r(d[1]),s=r(d[2]),u=r(d[3]),o=r(d[4]);function l(t){return(0,o.isExpressionOrFactory)(t)?(0,o.parseExpression)(t):s.ValueNode.create(t)}function c(t){return(0,u.isNumber)(t)||(0,u.isBoolean)(t)||(0,u.isNull)(t)}function f(s){return s.some(o.isExpressionOrFactory)?n.ValueListNode.create(s.map((t=>l(t)))):t.PrimitiveValueListNode.create(s)}}),7147,[7148,7149,7150,7110,7122]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PrimitiveValueListNode=void 0;var t=r(d[0]);e.PrimitiveValueListNode=(0,t.freeze)({is:t=>'PrimitiveValueListNode'===t.kind,create:o=>(0,t.freeze)({kind:'PrimitiveValueListNode',values:(0,t.freeze)([...o])})})}),7148,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueListNode=void 0;var o=r(d[0]);e.ValueListNode=(0,o.freeze)({is:o=>'ValueListNode'===o.kind,create:t=>(0,o.freeze)({kind:'ValueListNode',values:(0,o.freeze)(t)})})}),7149,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueNode=void 0;var u=r(d[0]);e.ValueNode=(0,u.freeze)({is:u=>'ValueNode'===u.kind,create:l=>(0,u.freeze)({kind:'ValueNode',value:l}),createImmediate:l=>(0,u.freeze)({kind:'ValueNode',value:l,immediate:!0})})}),7150,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ParensNode=void 0;var n=r(d[0]);e.ParensNode=(0,n.freeze)({is:n=>'ParensNode'===n.kind,create:o=>(0,n.freeze)({kind:'ParensNode',node:o})})}),7151,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.createJoinBuilder=function(u,o){return new n.JoinBuilder({joinNode:t.JoinNode.create(u,(0,E.parseTableExpression)(o))})},e.createOverBuilder=function(){return new c.OverBuilder({overNode:u.OverNode.create()})},e.createQueryCreator=function(){return new O.QueryCreator({executor:y.NOOP_QUERY_EXECUTOR})},e.createSelectQueryBuilder=function(){return(0,l.createSelectQueryBuilder)({queryId:(0,s.createQueryId)(),executor:y.NOOP_QUERY_EXECUTOR,queryNode:o.SelectQueryNode.createFrom((0,E.parseTableExpressionOrList)([]))})};var t=r(d[0]),u=r(d[1]),o=r(d[2]),n=r(d[3]),c=r(d[4]),l=r(d[5]),O=r(d[6]),y=r(d[7]),s=r(d[8]),E=r(d[9])}),7152,[7129,7153,7156,7160,7162,7126,7165,7211,7202,7119]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.OverNode=void 0;var t=r(d[0]),o=r(d[1]),n=r(d[2]);e.OverNode=(0,t.freeze)({is:t=>'OverNode'===t.kind,create:()=>(0,t.freeze)({kind:'OverNode'}),cloneWithOrderByItems:(n,y)=>(0,t.freeze)({...n,orderBy:n.orderBy?o.OrderByNode.cloneWithItems(n.orderBy,y):o.OrderByNode.create(y)}),cloneWithPartitionByItems:(o,y)=>(0,t.freeze)({...o,partitionBy:o.partitionBy?n.PartitionByNode.cloneWithItems(o.partitionBy,y):n.PartitionByNode.create(y)})})}),7153,[7110,7154,7155]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.OrderByNode=void 0;var o=r(d[0]);e.OrderByNode=(0,o.freeze)({is:o=>'OrderByNode'===o.kind,create:t=>(0,o.freeze)({kind:'OrderByNode',items:(0,o.freeze)([...t])}),cloneWithItems:(t,f)=>(0,o.freeze)({...t,items:(0,o.freeze)([...t.items,...f])})})}),7154,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PartitionByNode=void 0;var t=r(d[0]);e.PartitionByNode=(0,t.freeze)({is:t=>'PartitionByNode'===t.kind,create:o=>(0,t.freeze)({kind:'PartitionByNode',items:(0,t.freeze)(o)}),cloneWithItems:(o,n)=>(0,t.freeze)({...o,items:(0,t.freeze)([...o.items,...n])})})}),7155,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.SelectQueryNode=void 0;var t=r(d[0]),o=r(d[1]),n=r(d[2]),f=r(d[3]),c=r(d[4]);e.SelectQueryNode=(0,t.freeze)({is:t=>'SelectQueryNode'===t.kind,create:o=>(0,t.freeze)({kind:'SelectQueryNode',...o&&{with:o}}),createFrom:(n,f)=>(0,t.freeze)({kind:'SelectQueryNode',from:o.FromNode.create(n),...f&&{with:f}}),cloneWithSelections:(o,n)=>(0,t.freeze)({...o,selections:o.selections?(0,t.freeze)([...o.selections,...n]):(0,t.freeze)(n)}),cloneWithDistinctOn:(o,n)=>(0,t.freeze)({...o,distinctOn:o.distinctOn?(0,t.freeze)([...o.distinctOn,...n]):(0,t.freeze)(n)}),cloneWithFrontModifier:(o,n)=>(0,t.freeze)({...o,frontModifiers:o.frontModifiers?(0,t.freeze)([...o.frontModifiers,n]):(0,t.freeze)([n])}),cloneWithOrderByItems:(o,n)=>(0,t.freeze)({...o,orderBy:o.orderBy?c.OrderByNode.cloneWithItems(o.orderBy,n):c.OrderByNode.create(n)}),cloneWithGroupByItems:(o,f)=>(0,t.freeze)({...o,groupBy:o.groupBy?n.GroupByNode.cloneWithItems(o.groupBy,f):n.GroupByNode.create(f)}),cloneWithLimit:(o,n)=>(0,t.freeze)({...o,limit:n}),cloneWithOffset:(o,n)=>(0,t.freeze)({...o,offset:n}),cloneWithFetch:(o,n)=>(0,t.freeze)({...o,fetch:n}),cloneWithHaving:(o,n)=>(0,t.freeze)({...o,having:o.having?f.HavingNode.cloneWithOperation(o.having,'And',n):f.HavingNode.create(n)}),cloneWithSetOperations:(o,n)=>(0,t.freeze)({...o,setOperations:o.setOperations?(0,t.freeze)([...o.setOperations,...n]):(0,t.freeze)([...n])}),cloneWithoutSelections:o=>(0,t.freeze)({...o,selections:[]}),cloneWithoutLimit:o=>(0,t.freeze)({...o,limit:void 0}),cloneWithoutOffset:o=>(0,t.freeze)({...o,offset:void 0}),cloneWithoutOrderBy:o=>(0,t.freeze)({...o,orderBy:void 0}),cloneWithoutGroupBy:o=>(0,t.freeze)({...o,groupBy:void 0})})}),7156,[7110,7157,7158,7159,7154]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.FromNode=void 0;var o=r(d[0]);e.FromNode=(0,o.freeze)({is:o=>'FromNode'===o.kind,create:f=>(0,o.freeze)({kind:'FromNode',froms:(0,o.freeze)(f)}),cloneWithFroms:(f,n)=>(0,o.freeze)({...f,froms:(0,o.freeze)([...f.froms,...n])})})}),7157,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.GroupByNode=void 0;var o=r(d[0]);e.GroupByNode=(0,o.freeze)({is:o=>'GroupByNode'===o.kind,create:t=>(0,o.freeze)({kind:'GroupByNode',items:(0,o.freeze)(t)}),cloneWithItems:(t,f)=>(0,o.freeze)({...t,items:(0,o.freeze)([...t.items,...f])})})}),7158,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.HavingNode=void 0;var n=r(d[0]),o=r(d[1]),v=r(d[2]);e.HavingNode=(0,n.freeze)({is:n=>'HavingNode'===n.kind,create:o=>(0,n.freeze)({kind:'HavingNode',having:o}),cloneWithOperation:(t,c,N)=>(0,n.freeze)({...t,having:'And'===c?o.AndNode.create(t.having,N):v.OrNode.create(t.having,N)})})}),7159,[7110,7131,7132]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.JoinBuilder=void 0;var o=r(d[0]),n=r(d[1]),t=r(d[2]),s=r(d[3]),p=r(d[4]);class u{#e;constructor(o){this.#e=(0,s.freeze)(o)}on(...n){return new u({...this.#e,joinNode:o.JoinNode.cloneWithOn(this.#e.joinNode,(0,t.parseValueBinaryOperationOrExpression)(n))})}onRef(n,s,p){return new u({...this.#e,joinNode:o.JoinNode.cloneWithOn(this.#e.joinNode,(0,t.parseReferentialBinaryOperation)(n,s,p))})}onTrue(){return new u({...this.#e,joinNode:o.JoinNode.cloneWithOn(this.#e.joinNode,n.RawNode.createWithSql('true'))})}$call(o){return o(this)}toOperationNode(){return this.#e.joinNode}}e.JoinBuilder=u,(0,p.preventAwait)(u,"don't await JoinBuilder instances. They are never executed directly and are always just a part of a query.")}),7160,[7129,7143,7133,7110,7161]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.preventAwait=function(t,n){Object.defineProperties(t.prototype,{then:{enumerable:!1,value:()=>{throw new Error(n)}}})}}),7161,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.OverBuilder=void 0;var t=r(d[0]),o=r(d[1]),n=r(d[2]),s=r(d[3]),p=r(d[4]);class v{#e;constructor(t){this.#e=(0,s.freeze)(t)}orderBy(n,s){return new v({overNode:t.OverNode.cloneWithOrderByItems(this.#e.overNode,(0,o.parseOrderBy)([n,s]))})}partitionBy(o){return new v({overNode:t.OverNode.cloneWithPartitionByItems(this.#e.overNode,(0,n.parsePartitionBy)(o))})}$call(t){return t(this)}toOperationNode(){return this.#e.overNode}}e.OverBuilder=v,(0,p.preventAwait)(v,"don't await OverBuilder instances. They are never executed directly and are always just a part of a query.")}),7162,[7153,7140,7163,7110,7161]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.parsePartitionBy=function(o){return(0,n.parseReferenceExpressionOrList)(o).map(t.PartitionByItemNode.create)};var t=r(d[0]),n=r(d[1])}),7163,[7164,7136]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PartitionByItemNode=void 0;var t=r(d[0]);e.PartitionByItemNode=(0,t.freeze)({is:t=>'PartitionByItemNode'===t.kind,create:o=>(0,t.freeze)({kind:'PartitionByItemNode',partitionBy:o})})}),7164,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.QueryCreator=void 0;var t=r(d[0]),o=r(d[1]),s=r(d[2]),u=r(d[3]),p=r(d[4]),c=r(d[5]),h=r(d[6]),n=r(d[7]),l=r(d[8]),y=r(d[9]),N=r(d[10]),w=r(d[11]),x=r(d[12]),Q=r(d[13]),I=r(d[14]),q=r(d[15]),b=r(d[16]);class S{#e;constructor(t){this.#e=(0,Q.freeze)(t)}selectFrom(o){return(0,t.createSelectQueryBuilder)({queryId:(0,w.createQueryId)(),executor:this.#e.executor,queryNode:h.SelectQueryNode.createFrom((0,l.parseTableExpressionOrList)(o),this.#e.withNode)})}selectNoFrom(o){return(0,t.createSelectQueryBuilder)({queryId:(0,w.createQueryId)(),executor:this.#e.executor,queryNode:h.SelectQueryNode.cloneWithSelections(h.SelectQueryNode.create(this.#e.withNode),(0,I.parseSelectArg)(o))})}insertInto(t){return new o.InsertQueryBuilder({queryId:(0,w.createQueryId)(),executor:this.#e.executor,queryNode:c.InsertQueryNode.create((0,l.parseTable)(t),this.#e.withNode)})}replaceInto(t){return new o.InsertQueryBuilder({queryId:(0,w.createQueryId)(),executor:this.#e.executor,queryNode:c.InsertQueryNode.create((0,l.parseTable)(t),this.#e.withNode,!0)})}deleteFrom(t){return new s.DeleteQueryBuilder({queryId:(0,w.createQueryId)(),executor:this.#e.executor,queryNode:p.DeleteQueryNode.create((0,l.parseTableExpressionOrList)(t),this.#e.withNode)})}updateTable(t){return new u.UpdateQueryBuilder({queryId:(0,w.createQueryId)(),executor:this.#e.executor,queryNode:n.UpdateQueryNode.create((0,l.parseTableExpression)(t),this.#e.withNode)})}mergeInto(t){return new q.MergeQueryBuilder({queryId:(0,w.createQueryId)(),executor:this.#e.executor,queryNode:b.MergeQueryNode.create((0,l.parseAliasedTable)(t),this.#e.withNode)})}with(t,o){const s=(0,y.parseCommonTableExpression)(t,o);return new S({...this.#e,withNode:this.#e.withNode?N.WithNode.cloneWithExpression(this.#e.withNode,s):N.WithNode.create(s)})}withRecursive(t,o){const s=(0,y.parseCommonTableExpression)(t,o);return new S({...this.#e,withNode:this.#e.withNode?N.WithNode.cloneWithExpression(this.#e.withNode,s):N.WithNode.create(s,{recursive:!0})})}withPlugin(t){return new S({...this.#e,executor:this.#e.executor.withPlugin(t)})}withoutPlugins(){return new S({...this.#e,executor:this.#e.executor.withoutPlugins()})}withSchema(t){return new S({...this.#e,executor:this.#e.executor.withPluginAtFront(new x.WithSchemaPlugin(t))})}}e.QueryCreator=S}),7165,[7126,7166,7192,7195,7175,7172,7156,7174,7119,7197,7201,7202,7204,7110,7167,7208,7180]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.InsertQueryBuilder=void 0;var t=r(d[0]),o=r(d[1]),s=r(d[2]),u=r(d[3]),n=r(d[4]),p=r(d[5]),c=r(d[6]),h=r(d[7]),y=r(d[8]),l=r(d[9]),N=r(d[10]),w=r(d[11]),q=r(d[12]),x=r(d[13]),Q=r(d[14]);class f{#e;constructor(t){this.#e=(0,c.freeze)(t)}values(t){const[u,n]=(0,o.parseInsertExpression)(t);return new f({...this.#e,queryNode:s.InsertQueryNode.cloneWith(this.#e.queryNode,{columns:u,values:n})})}columns(t){return new f({...this.#e,queryNode:s.InsertQueryNode.cloneWith(this.#e.queryNode,{columns:(0,c.freeze)(t.map(w.ColumnNode.create))})})}expression(t){return new f({...this.#e,queryNode:s.InsertQueryNode.cloneWith(this.#e.queryNode,{values:(0,N.parseExpression)(t)})})}defaultValues(){return new f({...this.#e,queryNode:s.InsertQueryNode.cloneWith(this.#e.queryNode,{defaultValues:!0})})}modifyEnd(t){return new f({...this.#e,queryNode:u.QueryNode.cloneWithEndModifier(this.#e.queryNode,t.toOperationNode())})}ignore(){return new f({...this.#e,queryNode:s.InsertQueryNode.cloneWith(this.#e.queryNode,{ignore:!0})})}top(t,o){return new f({...this.#e,queryNode:u.QueryNode.cloneWithTop(this.#e.queryNode,(0,Q.parseTop)(t,o))})}onConflict(t){return new f({...this.#e,queryNode:s.InsertQueryNode.cloneWith(this.#e.queryNode,{onConflict:t(new q.OnConflictBuilder({onConflictNode:x.OnConflictNode.create()})).toOperationNode()})})}onDuplicateKeyUpdate(t){return new f({...this.#e,queryNode:s.InsertQueryNode.cloneWith(this.#e.queryNode,{onDuplicateKey:h.OnDuplicateKeyNode.create((0,n.parseUpdateObjectExpression)(t))})})}returning(o){return new f({...this.#e,queryNode:u.QueryNode.cloneWithReturning(this.#e.queryNode,(0,t.parseSelectArg)(o))})}returningAll(){return new f({...this.#e,queryNode:u.QueryNode.cloneWithReturning(this.#e.queryNode,(0,t.parseSelectAll)())})}output(o){return new f({...this.#e,queryNode:u.QueryNode.cloneWithOutput(this.#e.queryNode,(0,t.parseSelectArg)(o))})}outputAll(o){return new f({...this.#e,queryNode:u.QueryNode.cloneWithOutput(this.#e.queryNode,(0,t.parseSelectAll)(o))})}clearReturning(){return new f({...this.#e,queryNode:u.QueryNode.cloneWithoutReturning(this.#e.queryNode)})}$call(t){return t(this)}$if(t,o){return t?o(this):new f({...this.#e})}$castTo(){return new f(this.#e)}$narrowType(){return new f(this.#e)}$assertType(){return new f(this.#e)}withPlugin(t){return new f({...this.#e,executor:this.#e.executor.withPlugin(t)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const t=this.compile(),o=await this.#e.executor.executeQuery(t,this.#e.queryId),{adapter:s}=this.#e.executor,u=t.query;return u.returning&&s.supportsReturning||u.output&&s.supportsOutput?o.rows:[new y.InsertResult(o.insertId,o.numAffectedRows??o.numUpdatedOrDeletedRows)]}async executeTakeFirst(){const[t]=await this.execute();return t}async executeTakeFirstOrThrow(t=l.NoResultError){const o=await this.executeTakeFirst();if(void 0===o){throw(0,l.isNoResultErrorConstructor)(t)?new t(this.toOperationNode()):t(this.toOperationNode())}return o}async*stream(t=100){const o=this.compile(),s=this.#e.executor.stream(o,t,this.#e.queryId);for await(const t of s)yield*t.rows}async explain(t,o){const s=new f({...this.#e,queryNode:u.QueryNode.cloneWithExplain(this.#e.queryNode,t,o)});return await s.execute()}}e.InsertQueryBuilder=f,(0,p.preventAwait)(f,"don't await InsertQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.")}),7166,[7167,7169,7172,7173,7183,7161,7110,7185,7186,7187,7122,7137,7188,7189,7190]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.parseSelectAll=function(n){return n?Array.isArray(n)?n.map(p):[p(n)]:[t.SelectionNode.createSelectAll()]},e.parseSelectArg=function t(l){return(0,n.isFunction)(l)?t(l((0,u.expressionBuilder)())):(0,n.isReadonlyArray)(l)?l.map((n=>S(n))):[S(l)]};var n=r(d[0]),t=r(d[1]),l=r(d[2]),o=r(d[3]),c=r(d[4]),s=r(d[5]),u=r(d[6]);function S(s){return(0,n.isString)(s)?t.SelectionNode.create((0,l.parseAliasedStringReference)(s)):(0,o.isDynamicReferenceBuilder)(s)?t.SelectionNode.create(s.toOperationNode()):t.SelectionNode.create((0,c.parseAliasedExpression)(s))}function p(l){if((0,n.isString)(l))return t.SelectionNode.createSelectAllFromTable((0,s.parseTable)(l));throw new Error(`invalid value selectAll expression: ${JSON.stringify(l)}`)}}),7167,[7110,7168,7136,7141,7122,7119,7125]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.SelectionNode=void 0;var l=r(d[0]),o=r(d[1]),c=r(d[2]);e.SelectionNode=(0,l.freeze)({is:l=>'SelectionNode'===l.kind,create:o=>(0,l.freeze)({kind:'SelectionNode',selection:o}),createSelectAll:()=>(0,l.freeze)({kind:'SelectionNode',selection:c.SelectAllNode.create()}),createSelectAllFromTable:c=>(0,l.freeze)({kind:'SelectionNode',selection:o.ReferenceNode.createSelectAll(c)})})}),7168,[7110,7138,7139]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.parseInsertExpression=function(n){const t=(0,o.isFunction)(n)?n((0,p.expressionBuilder)()):n;return y((0,o.isReadonlyArray)(t)?t:(0,o.freeze)([t]))};var n=r(d[0]),t=r(d[1]),s=r(d[2]),o=r(d[3]),c=r(d[4]),u=r(d[5]),f=r(d[6]),l=r(d[7]),p=r(d[8]);function y(t){const s=z(t);return[(0,o.freeze)([...s.keys()].map(n.ColumnNode.create)),u.ValuesNode.create(t.map((n=>N(n,s))))]}function z(n){const t=new Map;for(const s of n){const n=Object.keys(s);for(const o of n)t.has(o)||void 0===s[o]||t.set(o,t.size)}return t}function N(n,u){const p=Object.keys(n),y=Array.from({length:u.size});let z=!1,N=p.length;for(const t of p){const s=u.get(t);if((0,o.isUndefined)(s)){N--;continue}const c=n[t];((0,o.isUndefined)(c)||(0,f.isExpressionOrFactory)(c))&&(z=!0),y[s]=c}if(N<u.size||z){const n=l.DefaultInsertValueNode.create();return s.ValueListNode.create(y.map((t=>(0,o.isUndefined)(t)?n:(0,c.parseValueExpression)(t))))}return t.PrimitiveValueListNode.create(y)}}),7169,[7137,7148,7149,7110,7147,7170,7122,7171,7125]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ValuesNode=void 0;var o=r(d[0]);e.ValuesNode=(0,o.freeze)({is:o=>'ValuesNode'===o.kind,create:u=>(0,o.freeze)({kind:'ValuesNode',values:(0,o.freeze)(u)})})}),7170,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultInsertValueNode=void 0;var t=r(d[0]);e.DefaultInsertValueNode=(0,t.freeze)({is:t=>'DefaultInsertValueNode'===t.kind,create:()=>(0,t.freeze)({kind:'DefaultInsertValueNode'})})}),7171,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.InsertQueryNode=void 0;var t=r(d[0]);e.InsertQueryNode=(0,t.freeze)({is:t=>'InsertQueryNode'===t.kind,create:(n,o,u)=>(0,t.freeze)({kind:'InsertQueryNode',into:n,...o&&{with:o},replace:u}),createWithoutInto:()=>(0,t.freeze)({kind:'InsertQueryNode'}),cloneWith:(n,o)=>(0,t.freeze)({...n,...o})})}),7172,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.QueryNode=void 0;var o=r(d[0]),t=r(d[1]),n=r(d[2]),u=r(d[3]),c=r(d[4]),l=r(d[5]),f=r(d[6]),h=r(d[7]),s=r(d[8]),W=r(d[9]);e.QueryNode=(0,l.freeze)({is:c=>t.SelectQueryNode.is(c)||o.InsertQueryNode.is(c)||n.UpdateQueryNode.is(c)||u.DeleteQueryNode.is(c)||s.MergeQueryNode.is(c),cloneWithEndModifier:(o,t)=>(0,l.freeze)({...o,endModifiers:o.endModifiers?(0,l.freeze)([...o.endModifiers,t]):(0,l.freeze)([t])}),cloneWithWhere:(o,t)=>(0,l.freeze)({...o,where:o.where?c.WhereNode.cloneWithOperation(o.where,'And',t):c.WhereNode.create(t)}),cloneWithJoin:(o,t)=>(0,l.freeze)({...o,joins:o.joins?(0,l.freeze)([...o.joins,t]):(0,l.freeze)([t])}),cloneWithReturning:(o,t)=>(0,l.freeze)({...o,returning:o.returning?f.ReturningNode.cloneWithSelections(o.returning,t):f.ReturningNode.create(t)}),cloneWithoutReturning:o=>(0,l.freeze)({...o,returning:void 0}),cloneWithoutWhere:o=>(0,l.freeze)({...o,where:void 0}),cloneWithExplain:(o,t,n)=>(0,l.freeze)({...o,explain:h.ExplainNode.create(t,n?.toOperationNode())}),cloneWithTop:(o,t)=>(0,l.freeze)({...o,top:t}),cloneWithOutput:(o,t)=>(0,l.freeze)({...o,output:o.output?W.OutputNode.cloneWithSelections(o.output,t):W.OutputNode.create(t)})})}),7173,[7172,7156,7174,7175,7177,7110,7178,7179,7180,7182]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.UpdateQueryNode=void 0;var t=r(d[0]),o=r(d[1]);e.UpdateQueryNode=(0,t.freeze)({is:t=>'UpdateQueryNode'===t.kind,create:(o,f)=>(0,t.freeze)({kind:'UpdateQueryNode',table:o,...f&&{with:f}}),createWithoutTable:()=>(0,t.freeze)({kind:'UpdateQueryNode'}),cloneWithFromItems:(f,u)=>(0,t.freeze)({...f,from:f.from?o.FromNode.cloneWithFroms(f.from,u):o.FromNode.create(u)}),cloneWithUpdates:(o,f)=>(0,t.freeze)({...o,updates:o.updates?(0,t.freeze)([...o.updates,...f]):f}),cloneWithLimit:(o,f)=>(0,t.freeze)({...o,limit:f})})}),7174,[7110,7157]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.DeleteQueryNode=void 0;var o=r(d[0]),t=r(d[1]),n=r(d[2]),l=r(d[3]);e.DeleteQueryNode=(0,o.freeze)({is:o=>'DeleteQueryNode'===o.kind,create:(n,l)=>(0,o.freeze)({kind:'DeleteQueryNode',from:t.FromNode.create(n),...l&&{with:l}}),cloneWithOrderByItems:(t,l)=>(0,o.freeze)({...t,orderBy:t.orderBy?n.OrderByNode.cloneWithItems(t.orderBy,l):n.OrderByNode.create(l)}),cloneWithoutOrderBy:t=>(0,o.freeze)({...t,orderBy:void 0}),cloneWithLimit:(t,n)=>(0,o.freeze)({...t,limit:n}),cloneWithoutLimit:t=>(0,o.freeze)({...t,limit:void 0}),cloneWithUsing:(t,n)=>(0,o.freeze)({...t,using:void 0!==t.using?l.UsingNode.cloneWithTables(t.using,n):l.UsingNode.create(n)})})}),7175,[7110,7157,7154,7176]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.UsingNode=void 0;var n=r(d[0]);e.UsingNode=(0,n.freeze)({is:n=>'UsingNode'===n.kind,create:s=>(0,n.freeze)({kind:'UsingNode',tables:(0,n.freeze)(s)}),cloneWithTables:(s,o)=>(0,n.freeze)({...s,tables:(0,n.freeze)([...s.tables,...o])})})}),7176,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.WhereNode=void 0;var o=r(d[0]),h=r(d[1]),n=r(d[2]);e.WhereNode=(0,o.freeze)({is:o=>'WhereNode'===o.kind,create:h=>(0,o.freeze)({kind:'WhereNode',where:h}),cloneWithOperation:(t,c,N)=>(0,o.freeze)({...t,where:'And'===c?h.AndNode.create(t.where,N):n.OrNode.create(t.where,N)})})}),7177,[7110,7131,7132]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ReturningNode=void 0;var n=r(d[0]);e.ReturningNode=(0,n.freeze)({is:n=>'ReturningNode'===n.kind,create:o=>(0,n.freeze)({kind:'ReturningNode',selections:(0,n.freeze)(o)}),cloneWithSelections:(o,t)=>(0,n.freeze)({...o,selections:o.selections?(0,n.freeze)([...o.selections,...t]):(0,n.freeze)(t)})})}),7178,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ExplainNode=void 0;var o=r(d[0]);e.ExplainNode=(0,o.freeze)({is:o=>'ExplainNode'===o.kind,create:(n,l)=>(0,o.freeze)({kind:'ExplainNode',format:n,options:l})})}),7179,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.MergeQueryNode=void 0;var n=r(d[0]),h=r(d[1]);e.MergeQueryNode=(0,n.freeze)({is:n=>'MergeQueryNode'===n.kind,create:(h,o)=>(0,n.freeze)({kind:'MergeQueryNode',into:h,...o&&{with:o}}),cloneWithUsing:(h,o)=>(0,n.freeze)({...h,using:o}),cloneWithWhen:(h,o)=>(0,n.freeze)({...h,whens:h.whens?(0,n.freeze)([...h.whens,o]):(0,n.freeze)([o])}),cloneWithThen:(o,s)=>(0,n.freeze)({...o,whens:o.whens?(0,n.freeze)([...o.whens.slice(0,-1),h.WhenNode.cloneWithResult(o.whens[o.whens.length-1],s)]):void 0})})}),7180,[7110,7181]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.WhenNode=void 0;var n=r(d[0]);e.WhenNode=(0,n.freeze)({is:n=>'WhenNode'===n.kind,create:o=>(0,n.freeze)({kind:'WhenNode',condition:o}),cloneWithResult:(o,t)=>(0,n.freeze)({...o,result:t})})}),7181,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.OutputNode=void 0;var t=r(d[0]);e.OutputNode=(0,t.freeze)({is:t=>'OutputNode'===t.kind,create:o=>(0,t.freeze)({kind:'OutputNode',selections:(0,t.freeze)(o)}),cloneWithSelections:(o,n)=>(0,t.freeze)({...o,selections:o.selections?(0,t.freeze)([...o.selections,...n]):(0,t.freeze)(n)})})}),7182,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.parseUpdate=function(...n){if(2===n.length)return[t.ColumnUpdateNode.create((0,u.parseReferenceExpression)(n[0]),(0,p.parseValueExpression)(n[1]))];return c(n[0])},e.parseUpdateObjectExpression=c;var n=r(d[0]),t=r(d[1]),o=r(d[2]),s=r(d[3]),p=r(d[4]),u=r(d[5]);function c(u){const c=(0,s.isFunction)(u)?u((0,o.expressionBuilder)()):u;return Object.entries(c).filter((([n,t])=>void 0!==t)).map((([o,s])=>t.ColumnUpdateNode.create(n.ColumnNode.create(o),(0,p.parseValueExpression)(s))))}}),7183,[7137,7184,7125,7110,7147,7136]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ColumnUpdateNode=void 0;var o=r(d[0]);e.ColumnUpdateNode=(0,o.freeze)({is:o=>'ColumnUpdateNode'===o.kind,create:(n,u)=>(0,o.freeze)({kind:'ColumnUpdateNode',column:n,value:u})})}),7184,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.OnDuplicateKeyNode=void 0;var n=r(d[0]);e.OnDuplicateKeyNode=(0,n.freeze)({is:n=>'OnDuplicateKeyNode'===n.kind,create:t=>(0,n.freeze)({kind:'OnDuplicateKeyNode',updates:t})})}),7185,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.InsertResult=void 0;e.InsertResult=class{constructor(t,s){this.insertId=t,this.numInsertedOrUpdatedRows=s}}}),7186,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.NoResultError=void 0,e.isNoResultErrorConstructor=function(o){return Object.prototype.hasOwnProperty.call(o,'prototype')};class o extends Error{constructor(o){super('no result'),this.node=o}}e.NoResultError=o}),7187,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.OnConflictUpdateBuilder=e.OnConflictDoNothingBuilder=e.OnConflictBuilder=void 0;var o=r(d[0]),n=r(d[1]),t=r(d[2]),s=r(d[3]),p=r(d[4]),c=r(d[5]),l=r(d[6]);class f{#o;constructor(o){this.#o=(0,c.freeze)(o)}column(n){const s=o.ColumnNode.create(n);return new f({...this.#o,onConflictNode:t.OnConflictNode.cloneWith(this.#o.onConflictNode,{columns:this.#o.onConflictNode.columns?(0,c.freeze)([...this.#o.onConflictNode.columns,s]):(0,c.freeze)([s])})})}columns(n){const s=n.map(o.ColumnNode.create);return new f({...this.#o,onConflictNode:t.OnConflictNode.cloneWith(this.#o.onConflictNode,{columns:this.#o.onConflictNode.columns?(0,c.freeze)([...this.#o.onConflictNode.columns,...s]):(0,c.freeze)(s)})})}constraint(o){return new f({...this.#o,onConflictNode:t.OnConflictNode.cloneWith(this.#o.onConflictNode,{constraint:n.IdentifierNode.create(o)})})}expression(o){return new f({...this.#o,onConflictNode:t.OnConflictNode.cloneWith(this.#o.onConflictNode,{indexExpression:o.toOperationNode()})})}where(...o){return new f({...this.#o,onConflictNode:t.OnConflictNode.cloneWithIndexWhere(this.#o.onConflictNode,(0,s.parseValueBinaryOperationOrExpression)(o))})}whereRef(o,n,p){return new f({...this.#o,onConflictNode:t.OnConflictNode.cloneWithIndexWhere(this.#o.onConflictNode,(0,s.parseReferentialBinaryOperation)(o,n,p))})}clearWhere(){return new f({...this.#o,onConflictNode:t.OnConflictNode.cloneWithoutIndexWhere(this.#o.onConflictNode)})}doNothing(){return new h({...this.#o,onConflictNode:t.OnConflictNode.cloneWith(this.#o.onConflictNode,{doNothing:!0})})}doUpdateSet(o){return new C({...this.#o,onConflictNode:t.OnConflictNode.cloneWith(this.#o.onConflictNode,{updates:(0,p.parseUpdateObjectExpression)(o)})})}$call(o){return o(this)}}e.OnConflictBuilder=f,(0,l.preventAwait)(f,"don't await OnConflictBuilder instances.");class h{#o;constructor(o){this.#o=(0,c.freeze)(o)}toOperationNode(){return this.#o.onConflictNode}}e.OnConflictDoNothingBuilder=h,(0,l.preventAwait)(h,"don't await OnConflictDoNothingBuilder instances.");class C{#o;constructor(o){this.#o=(0,c.freeze)(o)}where(...o){return new C({...this.#o,onConflictNode:t.OnConflictNode.cloneWithUpdateWhere(this.#o.onConflictNode,(0,s.parseValueBinaryOperationOrExpression)(o))})}whereRef(o,n,p){return new C({...this.#o,onConflictNode:t.OnConflictNode.cloneWithUpdateWhere(this.#o.onConflictNode,(0,s.parseReferentialBinaryOperation)(o,n,p))})}clearWhere(){return new C({...this.#o,onConflictNode:t.OnConflictNode.cloneWithoutUpdateWhere(this.#o.onConflictNode)})}$call(o){return o(this)}toOperationNode(){return this.#o.onConflictNode}}e.OnConflictUpdateBuilder=C,(0,l.preventAwait)(C,"don't await OnConflictUpdateBuilder instances.")}),7188,[7137,7112,7189,7133,7183,7110,7161]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.OnConflictNode=void 0;var n=r(d[0]),h=r(d[1]);e.OnConflictNode=(0,n.freeze)({is:n=>'OnConflictNode'===n.kind,create:()=>(0,n.freeze)({kind:'OnConflictNode'}),cloneWith:(h,o)=>(0,n.freeze)({...h,...o}),cloneWithIndexWhere:(o,t)=>(0,n.freeze)({...o,indexWhere:o.indexWhere?h.WhereNode.cloneWithOperation(o.indexWhere,'And',t):h.WhereNode.create(t)}),cloneWithIndexOrWhere:(o,t)=>(0,n.freeze)({...o,indexWhere:o.indexWhere?h.WhereNode.cloneWithOperation(o.indexWhere,'Or',t):h.WhereNode.create(t)}),cloneWithUpdateWhere:(o,t)=>(0,n.freeze)({...o,updateWhere:o.updateWhere?h.WhereNode.cloneWithOperation(o.updateWhere,'And',t):h.WhereNode.create(t)}),cloneWithUpdateOrWhere:(o,t)=>(0,n.freeze)({...o,updateWhere:o.updateWhere?h.WhereNode.cloneWithOperation(o.updateWhere,'Or',t):h.WhereNode.create(t)}),cloneWithoutIndexWhere:h=>(0,n.freeze)({...h,indexWhere:void 0}),cloneWithoutUpdateWhere:h=>(0,n.freeze)({...h,updateWhere:void 0})})}),7189,[7110,7177]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.parseTop=function(s,p){if(!(0,t.isNumber)(s)&&!(0,t.isBigInt)(s))throw new Error(`Invalid top expression: ${s}`);if(!(0,t.isUndefined)(p)&&!o(p))throw new Error(`Invalid top modifiers: ${p}`);return n.TopNode.create(s,p)};var n=r(d[0]),t=r(d[1]);function o(n){return'percent'===n||'with ties'===n||'percent with ties'===n}}),7190,[7191,7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.TopNode=void 0;var o=r(d[0]);e.TopNode=(0,o.freeze)({is:o=>'TopNode'===o.kind,create:(n,p)=>(0,o.freeze)({kind:'TopNode',expression:n,modifiers:p})})}),7191,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.DeleteQueryBuilder=void 0;var t=r(d[0]),o=r(d[1]),s=r(d[2]),u=r(d[3]),p=r(d[4]),n=r(d[5]),h=r(d[6]),y=r(d[7]),l=r(d[8]),c=r(d[9]),N=r(d[10]),q=r(d[11]),w=r(d[12]),Q=r(d[13]);class W{#e;constructor(t){this.#e=(0,n.freeze)(t)}where(...t){return new W({...this.#e,queryNode:u.QueryNode.cloneWithWhere(this.#e.queryNode,(0,q.parseValueBinaryOperationOrExpression)(t))})}whereRef(t,o,s){return new W({...this.#e,queryNode:u.QueryNode.cloneWithWhere(this.#e.queryNode,(0,q.parseReferentialBinaryOperation)(t,o,s))})}clearWhere(){return new W({...this.#e,queryNode:u.QueryNode.cloneWithoutWhere(this.#e.queryNode)})}top(t,o){return new W({...this.#e,queryNode:u.QueryNode.cloneWithTop(this.#e.queryNode,(0,Q.parseTop)(t,o))})}using(t){return new W({...this.#e,queryNode:l.DeleteQueryNode.cloneWithUsing(this.#e.queryNode,(0,o.parseTableExpressionOrList)(t))})}innerJoin(...o){return new W({...this.#e,queryNode:u.QueryNode.cloneWithJoin(this.#e.queryNode,(0,t.parseJoin)('InnerJoin',o))})}leftJoin(...o){return new W({...this.#e,queryNode:u.QueryNode.cloneWithJoin(this.#e.queryNode,(0,t.parseJoin)('LeftJoin',o))})}rightJoin(...o){return new W({...this.#e,queryNode:u.QueryNode.cloneWithJoin(this.#e.queryNode,(0,t.parseJoin)('RightJoin',o))})}fullJoin(...o){return new W({...this.#e,queryNode:u.QueryNode.cloneWithJoin(this.#e.queryNode,(0,t.parseJoin)('FullJoin',o))})}returning(t){return new W({...this.#e,queryNode:u.QueryNode.cloneWithReturning(this.#e.queryNode,(0,s.parseSelectArg)(t))})}returningAll(t){return new W({...this.#e,queryNode:u.QueryNode.cloneWithReturning(this.#e.queryNode,(0,s.parseSelectAll)(t))})}output(t){return new W({...this.#e,queryNode:u.QueryNode.cloneWithOutput(this.#e.queryNode,(0,s.parseSelectArg)(t))})}outputAll(t){return new W({...this.#e,queryNode:u.QueryNode.cloneWithOutput(this.#e.queryNode,(0,s.parseSelectAll)(t))})}clearReturning(){return new W({...this.#e,queryNode:u.QueryNode.cloneWithoutReturning(this.#e.queryNode)})}clearLimit(){return new W({...this.#e,queryNode:l.DeleteQueryNode.cloneWithoutLimit(this.#e.queryNode)})}clearOrderBy(){return new W({...this.#e,queryNode:l.DeleteQueryNode.cloneWithoutOrderBy(this.#e.queryNode)})}orderBy(t,o){return new W({...this.#e,queryNode:l.DeleteQueryNode.cloneWithOrderByItems(this.#e.queryNode,(0,N.parseOrderBy)([t,o]))})}limit(t){return new W({...this.#e,queryNode:l.DeleteQueryNode.cloneWithLimit(this.#e.queryNode,c.LimitNode.create((0,w.parseValueExpression)(t)))})}modifyEnd(t){return new W({...this.#e,queryNode:u.QueryNode.cloneWithEndModifier(this.#e.queryNode,t.toOperationNode())})}$call(t){return t(this)}$if(t,o){return t?o(this):new W({...this.#e})}$castTo(){return new W(this.#e)}$narrowType(){return new W(this.#e)}$assertType(){return new W(this.#e)}withPlugin(t){return new W({...this.#e,executor:this.#e.executor.withPlugin(t)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const t=this.compile(),o=await this.#e.executor.executeQuery(t,this.#e.queryId),{adapter:s}=this.#e.executor,u=t.query;return u.returning&&s.supportsReturning||u.output&&s.supportsOutput?o.rows:[new y.DeleteResult(o.numAffectedRows??o.numUpdatedOrDeletedRows??BigInt(0))]}async executeTakeFirst(){const[t]=await this.execute();return t}async executeTakeFirstOrThrow(t=h.NoResultError){const o=await this.executeTakeFirst();if(void 0===o){throw(0,h.isNoResultErrorConstructor)(t)?new t(this.toOperationNode()):t(this.toOperationNode())}return o}async*stream(t=100){const o=this.compile(),s=this.#e.executor.stream(o,t,this.#e.queryId);for await(const t of s)yield*t.rows}async explain(t,o){const s=new W({...this.#e,queryNode:u.QueryNode.cloneWithExplain(this.#e.queryNode,t,o)});return await s.execute()}}e.DeleteQueryBuilder=W,(0,p.preventAwait)(W,"don't await DeleteQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.")}),7192,[7128,7119,7167,7173,7161,7110,7187,7193,7175,7194,7140,7133,7147,7190]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.DeleteResult=void 0;e.DeleteResult=class{constructor(t){this.numDeletedRows=t}}}),7193,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.LimitNode=void 0;var t=r(d[0]);e.LimitNode=(0,t.freeze)({is:t=>'LimitNode'===t.kind,create:o=>(0,t.freeze)({kind:'LimitNode',limit:o})})}),7194,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.UpdateQueryBuilder=void 0;var t=r(d[0]),o=r(d[1]),s=r(d[2]),p=r(d[3]),u=r(d[4]),n=r(d[5]),h=r(d[6]),y=r(d[7]),c=r(d[8]),l=r(d[9]),N=r(d[10]),w=r(d[11]),q=r(d[12]),Q=r(d[13]);class x{#e;constructor(t){this.#e=(0,y.freeze)(t)}where(...t){return new x({...this.#e,queryNode:p.QueryNode.cloneWithWhere(this.#e.queryNode,(0,N.parseValueBinaryOperationOrExpression)(t))})}whereRef(t,o,s){return new x({...this.#e,queryNode:p.QueryNode.cloneWithWhere(this.#e.queryNode,(0,N.parseReferentialBinaryOperation)(t,o,s))})}clearWhere(){return new x({...this.#e,queryNode:p.QueryNode.cloneWithoutWhere(this.#e.queryNode)})}top(t,o){return new x({...this.#e,queryNode:p.QueryNode.cloneWithTop(this.#e.queryNode,(0,Q.parseTop)(t,o))})}from(t){return new x({...this.#e,queryNode:u.UpdateQueryNode.cloneWithFromItems(this.#e.queryNode,(0,o.parseTableExpressionOrList)(t))})}innerJoin(...o){return new x({...this.#e,queryNode:p.QueryNode.cloneWithJoin(this.#e.queryNode,(0,t.parseJoin)('InnerJoin',o))})}leftJoin(...o){return new x({...this.#e,queryNode:p.QueryNode.cloneWithJoin(this.#e.queryNode,(0,t.parseJoin)('LeftJoin',o))})}rightJoin(...o){return new x({...this.#e,queryNode:p.QueryNode.cloneWithJoin(this.#e.queryNode,(0,t.parseJoin)('RightJoin',o))})}fullJoin(...o){return new x({...this.#e,queryNode:p.QueryNode.cloneWithJoin(this.#e.queryNode,(0,t.parseJoin)('FullJoin',o))})}limit(t){return new x({...this.#e,queryNode:u.UpdateQueryNode.cloneWithLimit(this.#e.queryNode,q.LimitNode.create((0,w.parseValueExpression)(t)))})}set(...t){return new x({...this.#e,queryNode:u.UpdateQueryNode.cloneWithUpdates(this.#e.queryNode,(0,n.parseUpdate)(...t))})}returning(t){return new x({...this.#e,queryNode:p.QueryNode.cloneWithReturning(this.#e.queryNode,(0,s.parseSelectArg)(t))})}returningAll(t){return new x({...this.#e,queryNode:p.QueryNode.cloneWithReturning(this.#e.queryNode,(0,s.parseSelectAll)(t))})}output(t){return new x({...this.#e,queryNode:p.QueryNode.cloneWithOutput(this.#e.queryNode,(0,s.parseSelectArg)(t))})}outputAll(t){return new x({...this.#e,queryNode:p.QueryNode.cloneWithOutput(this.#e.queryNode,(0,s.parseSelectAll)(t))})}modifyEnd(t){return new x({...this.#e,queryNode:p.QueryNode.cloneWithEndModifier(this.#e.queryNode,t.toOperationNode())})}clearReturning(){return new x({...this.#e,queryNode:p.QueryNode.cloneWithoutReturning(this.#e.queryNode)})}$call(t){return t(this)}$if(t,o){return t?o(this):new x({...this.#e})}$castTo(){return new x(this.#e)}$narrowType(){return new x(this.#e)}$assertType(){return new x(this.#e)}withPlugin(t){return new x({...this.#e,executor:this.#e.executor.withPlugin(t)})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.queryNode,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){const t=this.compile(),o=await this.#e.executor.executeQuery(t,this.#e.queryId),{adapter:s}=this.#e.executor,p=t.query;return p.returning&&s.supportsReturning||p.output&&s.supportsOutput?o.rows:[new c.UpdateResult(o.numAffectedRows??o.numUpdatedOrDeletedRows??BigInt(0),o.numChangedRows)]}async executeTakeFirst(){const[t]=await this.execute();return t}async executeTakeFirstOrThrow(t=l.NoResultError){const o=await this.executeTakeFirst();if(void 0===o){throw(0,l.isNoResultErrorConstructor)(t)?new t(this.toOperationNode()):t(this.toOperationNode())}return o}async*stream(t=100){const o=this.compile(),s=this.#e.executor.stream(o,t,this.#e.queryId);for await(const t of s)yield*t.rows}async explain(t,o){const s=new x({...this.#e,queryNode:p.QueryNode.cloneWithExplain(this.#e.queryNode,t,o)});return await s.execute()}}e.UpdateQueryBuilder=x,(0,h.preventAwait)(x,"don't await UpdateQueryBuilder instances directly. To execute the query you need to call `execute` or `executeTakeFirst`.")}),7195,[7128,7119,7167,7173,7174,7183,7161,7110,7196,7187,7133,7147,7194,7190]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.UpdateResult=void 0;e.UpdateResult=class{constructor(t,s){this.numUpdatedRows=t,this.numChangedRows=s}}}),7196,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.parseCommonTableExpression=function(o,s){const l=s((0,n.createQueryCreator)()).toOperationNode();if((0,t.isFunction)(o))return o(c(l)).toOperationNode();return u.CommonTableExpressionNode.create(p(o),l)};var o=r(d[0]),n=r(d[1]),t=r(d[2]),s=r(d[3]),u=r(d[4]);function c(o){return n=>new s.CTEBuilder({node:u.CommonTableExpressionNode.create(p(n),o)})}function p(n){if(n.includes('(')){const t=n.split(/[\(\)]/),s=t[0],u=t[1].split(',').map((o=>o.trim()));return o.CommonTableExpressionNameNode.create(s,u)}return o.CommonTableExpressionNameNode.create(n)}}),7197,[7198,7152,7110,7199,7200]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.CommonTableExpressionNameNode=void 0;var o=r(d[0]),n=r(d[1]),s=r(d[2]);e.CommonTableExpressionNameNode=(0,o.freeze)({is:o=>'CommonTableExpressionNameNode'===o.kind,create:(l,N)=>(0,o.freeze)({kind:'CommonTableExpressionNameNode',table:s.TableNode.create(l),columns:N?(0,o.freeze)(N.map(n.ColumnNode.create)):void 0})})}),7198,[7110,7137,7121]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.CTEBuilder=void 0;var o=r(d[0]),t=r(d[1]),n=r(d[2]);class s{#e;constructor(o){this.#e=(0,n.freeze)(o)}materialized(){return new s({...this.#e,node:o.CommonTableExpressionNode.cloneWith(this.#e.node,{materialized:!0})})}notMaterialized(){return new s({...this.#e,node:o.CommonTableExpressionNode.cloneWith(this.#e.node,{materialized:!1})})}toOperationNode(){return this.#e.node}}e.CTEBuilder=s,(0,t.preventAwait)(s,"don't await CTEBuilder instances. They are never executed directly and are always just a part of a query.")}),7199,[7200,7161,7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.CommonTableExpressionNode=void 0;var o=r(d[0]);e.CommonTableExpressionNode=(0,o.freeze)({is:o=>'CommonTableExpressionNode'===o.kind,create:(n,s)=>(0,o.freeze)({kind:'CommonTableExpressionNode',name:n,expression:s}),cloneWith:(n,s)=>(0,o.freeze)({...n,...s})})}),7200,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.WithNode=void 0;var o=r(d[0]);e.WithNode=(0,o.freeze)({is:o=>'WithNode'===o.kind,create:(s,n)=>(0,o.freeze)({kind:'WithNode',expressions:(0,o.freeze)([s]),...n}),cloneWithExpression:(s,n)=>(0,o.freeze)({...s,expressions:(0,o.freeze)([...s.expressions,n])})})}),7201,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.createQueryId=function(){return new u};var t=r(d[0]);class u{#e;get queryId(){return void 0===this.#e&&(this.#e=(0,t.randomString)(8)),this.#e}}}),7202,[7203]);
__d((function(g,r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.randomString=function(t){let o='';for(let l=0;l<t;++l)o+=n[~~(Math.random()*n.length)];return o};const n=['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','0','1','2','3','4','5','6','7','8','9']}),7203,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.WithSchemaPlugin=void 0;var t=r(d[0]);e.WithSchemaPlugin=class{#r;constructor(n){this.#r=new t.WithSchemaTransformer(n)}transformQuery(t){return this.#r.transformNode(t.node)}async transformResult(t){return t.result}}}),7204,[7205]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.WithSchemaTransformer=void 0;var n=t(r(d[1])),o=t(r(d[2])),s=r(d[3]),f=r(d[4]),l=r(d[5]),u=r(d[6]),c=r(d[7]);const h=(0,r(d[8]).freeze)({AlterTableNode:!0,CreateIndexNode:!0,CreateSchemaNode:!0,CreateTableNode:!0,CreateTypeNode:!0,CreateViewNode:!0,DeleteQueryNode:!0,DropIndexNode:!0,DropSchemaNode:!0,DropTableNode:!0,DropTypeNode:!0,DropViewNode:!0,InsertQueryNode:!0,RawNode:!0,SelectQueryNode:!0,UpdateQueryNode:!0,MergeQueryNode:!0}),b={json_agg:!0,to_json:!0};var p=(0,o.default)("schema"),N=(0,o.default)("schemableIds"),y=(0,o.default)("ctes"),S=(0,o.default)("transformTableArgsWithoutSchemas"),j=(0,o.default)("isRootOperationNode"),v=(0,o.default)("collectSchemableIds"),I=(0,o.default)("collectCTEs"),T=(0,o.default)("collectSchemableIdsFromTableExpr"),w=(0,o.default)("collectSchemableId"),O=(0,o.default)("collectCTEIds");class P extends l.OperationNodeTransformer{constructor(t){super(),Object.defineProperty(this,O,{value:Q}),Object.defineProperty(this,w,{value:F}),Object.defineProperty(this,T,{value:A}),Object.defineProperty(this,I,{value:x}),Object.defineProperty(this,v,{value:_}),Object.defineProperty(this,j,{value:D}),Object.defineProperty(this,S,{value:C}),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,N,{writable:!0,value:new Set}),Object.defineProperty(this,y,{writable:!0,value:new Set}),(0,n.default)(this,p)[p]=t}transformNodeImpl(t){if(!(0,n.default)(this,j)[j](t))return super.transformNodeImpl(t);const o=(0,n.default)(this,I)[I](t);for(const t of o)(0,n.default)(this,y)[y].add(t);const s=(0,n.default)(this,v)[v](t);for(const t of s)(0,n.default)(this,N)[N].add(t);const f=super.transformNodeImpl(t);for(const t of s)(0,n.default)(this,N)[N].delete(t);for(const t of o)(0,n.default)(this,y)[y].delete(t);return f}transformSchemableIdentifier(t){const o=super.transformSchemableIdentifier(t);return o.schema||!(0,n.default)(this,N)[N].has(t.identifier.name)?o:{...o,schema:f.IdentifierNode.create((0,n.default)(this,p)[p])}}transformReferences(t){const o=super.transformReferences(t);return o.table.table.schema?o:{...o,table:c.TableNode.createWithSchema((0,n.default)(this,p)[p],o.table.table.identifier.name)}}transformAggregateFunction(t){return{...super.transformAggregateFunction({...t,aggregated:[]}),aggregated:(0,n.default)(this,S)[S](t,'aggregated')}}transformFunction(t){return{...super.transformFunction({...t,arguments:[]}),arguments:(0,n.default)(this,S)[S](t,'arguments')}}}function C(t,n){return b[t.func]?t[n].map((t=>!c.TableNode.is(t)||t.table.schema?this.transformNode(t):{...t,table:this.transformIdentifier(t.table.identifier)})):this.transformNodeList(t[n])}function D(t){return t.kind in h}function _(t){const o=new Set;if('name'in t&&t.name&&u.SchemableIdentifierNode.is(t.name)&&(0,n.default)(this,w)[w](t.name,o),'from'in t&&t.from)for(const s of t.from.froms)(0,n.default)(this,T)[T](s,o);if('into'in t&&t.into&&(0,n.default)(this,T)[T](t.into,o),'table'in t&&t.table&&(0,n.default)(this,T)[T](t.table,o),'joins'in t&&t.joins)for(const s of t.joins)(0,n.default)(this,T)[T](s.table,o);return'using'in t&&t.using&&(0,n.default)(this,T)[T](t.using,o),o}function x(t){const o=new Set;return'with'in t&&t.with&&(0,n.default)(this,O)[O](t.with,o),o}function A(t,o){const f=c.TableNode.is(t)?t:s.AliasNode.is(t)&&c.TableNode.is(t.node)?t.node:null;f&&(0,n.default)(this,w)[w](f.table,o)}function F(t,o){const s=t.identifier.name;(0,n.default)(this,N)[N].has(s)||(0,n.default)(this,y)[y].has(s)||o.add(s)}function Q(t,o){for(const s of t.expressions){const t=s.name.table.table.identifier.name;(0,n.default)(this,y)[y].has(t)||o.add(t)}}e.WithSchemaTransformer=P}),7205,[16,3270,3271,7120,7112,7206,7116,7121,7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.OperationNodeTransformer=void 0;var t=r(d[0]),o=r(d[1]);e.OperationNodeTransformer=class{nodeStack=[];#r=(0,t.freeze)({AliasNode:this.transformAlias.bind(this),ColumnNode:this.transformColumn.bind(this),IdentifierNode:this.transformIdentifier.bind(this),SchemableIdentifierNode:this.transformSchemableIdentifier.bind(this),RawNode:this.transformRaw.bind(this),ReferenceNode:this.transformReference.bind(this),SelectQueryNode:this.transformSelectQuery.bind(this),SelectionNode:this.transformSelection.bind(this),TableNode:this.transformTable.bind(this),FromNode:this.transformFrom.bind(this),SelectAllNode:this.transformSelectAll.bind(this),AndNode:this.transformAnd.bind(this),OrNode:this.transformOr.bind(this),ValueNode:this.transformValue.bind(this),ValueListNode:this.transformValueList.bind(this),PrimitiveValueListNode:this.transformPrimitiveValueList.bind(this),ParensNode:this.transformParens.bind(this),JoinNode:this.transformJoin.bind(this),OperatorNode:this.transformOperator.bind(this),WhereNode:this.transformWhere.bind(this),InsertQueryNode:this.transformInsertQuery.bind(this),DeleteQueryNode:this.transformDeleteQuery.bind(this),ReturningNode:this.transformReturning.bind(this),CreateTableNode:this.transformCreateTable.bind(this),AddColumnNode:this.transformAddColumn.bind(this),ColumnDefinitionNode:this.transformColumnDefinition.bind(this),DropTableNode:this.transformDropTable.bind(this),DataTypeNode:this.transformDataType.bind(this),OrderByNode:this.transformOrderBy.bind(this),OrderByItemNode:this.transformOrderByItem.bind(this),GroupByNode:this.transformGroupBy.bind(this),GroupByItemNode:this.transformGroupByItem.bind(this),UpdateQueryNode:this.transformUpdateQuery.bind(this),ColumnUpdateNode:this.transformColumnUpdate.bind(this),LimitNode:this.transformLimit.bind(this),OffsetNode:this.transformOffset.bind(this),OnConflictNode:this.transformOnConflict.bind(this),OnDuplicateKeyNode:this.transformOnDuplicateKey.bind(this),CreateIndexNode:this.transformCreateIndex.bind(this),DropIndexNode:this.transformDropIndex.bind(this),ListNode:this.transformList.bind(this),PrimaryKeyConstraintNode:this.transformPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.transformUniqueConstraint.bind(this),ReferencesNode:this.transformReferences.bind(this),CheckConstraintNode:this.transformCheckConstraint.bind(this),WithNode:this.transformWith.bind(this),CommonTableExpressionNode:this.transformCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.transformCommonTableExpressionName.bind(this),HavingNode:this.transformHaving.bind(this),CreateSchemaNode:this.transformCreateSchema.bind(this),DropSchemaNode:this.transformDropSchema.bind(this),AlterTableNode:this.transformAlterTable.bind(this),DropColumnNode:this.transformDropColumn.bind(this),RenameColumnNode:this.transformRenameColumn.bind(this),AlterColumnNode:this.transformAlterColumn.bind(this),ModifyColumnNode:this.transformModifyColumn.bind(this),AddConstraintNode:this.transformAddConstraint.bind(this),DropConstraintNode:this.transformDropConstraint.bind(this),ForeignKeyConstraintNode:this.transformForeignKeyConstraint.bind(this),CreateViewNode:this.transformCreateView.bind(this),DropViewNode:this.transformDropView.bind(this),GeneratedNode:this.transformGenerated.bind(this),DefaultValueNode:this.transformDefaultValue.bind(this),OnNode:this.transformOn.bind(this),ValuesNode:this.transformValues.bind(this),SelectModifierNode:this.transformSelectModifier.bind(this),CreateTypeNode:this.transformCreateType.bind(this),DropTypeNode:this.transformDropType.bind(this),ExplainNode:this.transformExplain.bind(this),DefaultInsertValueNode:this.transformDefaultInsertValue.bind(this),AggregateFunctionNode:this.transformAggregateFunction.bind(this),OverNode:this.transformOver.bind(this),PartitionByNode:this.transformPartitionBy.bind(this),PartitionByItemNode:this.transformPartitionByItem.bind(this),SetOperationNode:this.transformSetOperation.bind(this),BinaryOperationNode:this.transformBinaryOperation.bind(this),UnaryOperationNode:this.transformUnaryOperation.bind(this),UsingNode:this.transformUsing.bind(this),FunctionNode:this.transformFunction.bind(this),CaseNode:this.transformCase.bind(this),WhenNode:this.transformWhen.bind(this),JSONReferenceNode:this.transformJSONReference.bind(this),JSONPathNode:this.transformJSONPath.bind(this),JSONPathLegNode:this.transformJSONPathLeg.bind(this),JSONOperatorChainNode:this.transformJSONOperatorChain.bind(this),TupleNode:this.transformTuple.bind(this),MergeQueryNode:this.transformMergeQuery.bind(this),MatchedNode:this.transformMatched.bind(this),AddIndexNode:this.transformAddIndex.bind(this),CastNode:this.transformCast.bind(this),FetchNode:this.transformFetch.bind(this),TopNode:this.transformTop.bind(this),OutputNode:this.transformOutput.bind(this)});transformNode(o){if(!o)return o;this.nodeStack.push(o);const s=this.transformNodeImpl(o);return this.nodeStack.pop(),(0,t.freeze)(s)}transformNodeImpl(t){return this.#r[t.kind](t)}transformNodeList(o){return o?(0,t.freeze)(o.map((t=>this.transformNode(t)))):o}transformSelectQuery(t){return(0,o.requireAllProps)({kind:'SelectQueryNode',from:this.transformNode(t.from),selections:this.transformNodeList(t.selections),distinctOn:this.transformNodeList(t.distinctOn),joins:this.transformNodeList(t.joins),groupBy:this.transformNode(t.groupBy),orderBy:this.transformNode(t.orderBy),where:this.transformNode(t.where),frontModifiers:this.transformNodeList(t.frontModifiers),endModifiers:this.transformNodeList(t.endModifiers),limit:this.transformNode(t.limit),offset:this.transformNode(t.offset),with:this.transformNode(t.with),having:this.transformNode(t.having),explain:this.transformNode(t.explain),setOperations:this.transformNodeList(t.setOperations),fetch:this.transformNode(t.fetch),top:this.transformNode(t.top)})}transformSelection(t){return(0,o.requireAllProps)({kind:'SelectionNode',selection:this.transformNode(t.selection)})}transformColumn(t){return(0,o.requireAllProps)({kind:'ColumnNode',column:this.transformNode(t.column)})}transformAlias(t){return(0,o.requireAllProps)({kind:'AliasNode',node:this.transformNode(t.node),alias:this.transformNode(t.alias)})}transformTable(t){return(0,o.requireAllProps)({kind:'TableNode',table:this.transformNode(t.table)})}transformFrom(t){return(0,o.requireAllProps)({kind:'FromNode',froms:this.transformNodeList(t.froms)})}transformReference(t){return(0,o.requireAllProps)({kind:'ReferenceNode',column:this.transformNode(t.column),table:this.transformNode(t.table)})}transformAnd(t){return(0,o.requireAllProps)({kind:'AndNode',left:this.transformNode(t.left),right:this.transformNode(t.right)})}transformOr(t){return(0,o.requireAllProps)({kind:'OrNode',left:this.transformNode(t.left),right:this.transformNode(t.right)})}transformValueList(t){return(0,o.requireAllProps)({kind:'ValueListNode',values:this.transformNodeList(t.values)})}transformParens(t){return(0,o.requireAllProps)({kind:'ParensNode',node:this.transformNode(t.node)})}transformJoin(t){return(0,o.requireAllProps)({kind:'JoinNode',joinType:t.joinType,table:this.transformNode(t.table),on:this.transformNode(t.on)})}transformRaw(s){return(0,o.requireAllProps)({kind:'RawNode',sqlFragments:(0,t.freeze)([...s.sqlFragments]),parameters:this.transformNodeList(s.parameters)})}transformWhere(t){return(0,o.requireAllProps)({kind:'WhereNode',where:this.transformNode(t.where)})}transformInsertQuery(t){return(0,o.requireAllProps)({kind:'InsertQueryNode',into:this.transformNode(t.into),columns:this.transformNodeList(t.columns),values:this.transformNode(t.values),returning:this.transformNode(t.returning),onConflict:this.transformNode(t.onConflict),onDuplicateKey:this.transformNode(t.onDuplicateKey),endModifiers:this.transformNodeList(t.endModifiers),with:this.transformNode(t.with),ignore:t.ignore,replace:t.replace,explain:this.transformNode(t.explain),defaultValues:t.defaultValues,top:this.transformNode(t.top),output:this.transformNode(t.output)})}transformValues(t){return(0,o.requireAllProps)({kind:'ValuesNode',values:this.transformNodeList(t.values)})}transformDeleteQuery(t){return(0,o.requireAllProps)({kind:'DeleteQueryNode',from:this.transformNode(t.from),using:this.transformNode(t.using),joins:this.transformNodeList(t.joins),where:this.transformNode(t.where),returning:this.transformNode(t.returning),endModifiers:this.transformNodeList(t.endModifiers),with:this.transformNode(t.with),orderBy:this.transformNode(t.orderBy),limit:this.transformNode(t.limit),explain:this.transformNode(t.explain),top:this.transformNode(t.top),output:this.transformNode(t.output)})}transformReturning(t){return(0,o.requireAllProps)({kind:'ReturningNode',selections:this.transformNodeList(t.selections)})}transformCreateTable(t){return(0,o.requireAllProps)({kind:'CreateTableNode',table:this.transformNode(t.table),columns:this.transformNodeList(t.columns),constraints:this.transformNodeList(t.constraints),temporary:t.temporary,ifNotExists:t.ifNotExists,onCommit:t.onCommit,frontModifiers:this.transformNodeList(t.frontModifiers),endModifiers:this.transformNodeList(t.endModifiers),selectQuery:this.transformNode(t.selectQuery)})}transformColumnDefinition(t){return(0,o.requireAllProps)({kind:'ColumnDefinitionNode',column:this.transformNode(t.column),dataType:this.transformNode(t.dataType),references:this.transformNode(t.references),primaryKey:t.primaryKey,autoIncrement:t.autoIncrement,unique:t.unique,notNull:t.notNull,unsigned:t.unsigned,defaultTo:this.transformNode(t.defaultTo),check:this.transformNode(t.check),generated:this.transformNode(t.generated),frontModifiers:this.transformNodeList(t.frontModifiers),endModifiers:this.transformNodeList(t.endModifiers),nullsNotDistinct:t.nullsNotDistinct,identity:t.identity,ifNotExists:t.ifNotExists})}transformAddColumn(t){return(0,o.requireAllProps)({kind:'AddColumnNode',column:this.transformNode(t.column)})}transformDropTable(t){return(0,o.requireAllProps)({kind:'DropTableNode',table:this.transformNode(t.table),ifExists:t.ifExists,cascade:t.cascade})}transformOrderBy(t){return(0,o.requireAllProps)({kind:'OrderByNode',items:this.transformNodeList(t.items)})}transformOrderByItem(t){return(0,o.requireAllProps)({kind:'OrderByItemNode',orderBy:this.transformNode(t.orderBy),direction:this.transformNode(t.direction)})}transformGroupBy(t){return(0,o.requireAllProps)({kind:'GroupByNode',items:this.transformNodeList(t.items)})}transformGroupByItem(t){return(0,o.requireAllProps)({kind:'GroupByItemNode',groupBy:this.transformNode(t.groupBy)})}transformUpdateQuery(t){return(0,o.requireAllProps)({kind:'UpdateQueryNode',table:this.transformNode(t.table),from:this.transformNode(t.from),joins:this.transformNodeList(t.joins),where:this.transformNode(t.where),updates:this.transformNodeList(t.updates),returning:this.transformNode(t.returning),endModifiers:this.transformNodeList(t.endModifiers),with:this.transformNode(t.with),explain:this.transformNode(t.explain),limit:this.transformNode(t.limit),top:this.transformNode(t.top),output:this.transformNode(t.output)})}transformColumnUpdate(t){return(0,o.requireAllProps)({kind:'ColumnUpdateNode',column:this.transformNode(t.column),value:this.transformNode(t.value)})}transformLimit(t){return(0,o.requireAllProps)({kind:'LimitNode',limit:this.transformNode(t.limit)})}transformOffset(t){return(0,o.requireAllProps)({kind:'OffsetNode',offset:this.transformNode(t.offset)})}transformOnConflict(t){return(0,o.requireAllProps)({kind:'OnConflictNode',columns:this.transformNodeList(t.columns),constraint:this.transformNode(t.constraint),indexExpression:this.transformNode(t.indexExpression),indexWhere:this.transformNode(t.indexWhere),updates:this.transformNodeList(t.updates),updateWhere:this.transformNode(t.updateWhere),doNothing:t.doNothing})}transformOnDuplicateKey(t){return(0,o.requireAllProps)({kind:'OnDuplicateKeyNode',updates:this.transformNodeList(t.updates)})}transformCreateIndex(t){return(0,o.requireAllProps)({kind:'CreateIndexNode',name:this.transformNode(t.name),table:this.transformNode(t.table),columns:this.transformNodeList(t.columns),unique:t.unique,using:this.transformNode(t.using),ifNotExists:t.ifNotExists,where:this.transformNode(t.where),nullsNotDistinct:t.nullsNotDistinct})}transformList(t){return(0,o.requireAllProps)({kind:'ListNode',items:this.transformNodeList(t.items)})}transformDropIndex(t){return(0,o.requireAllProps)({kind:'DropIndexNode',name:this.transformNode(t.name),table:this.transformNode(t.table),ifExists:t.ifExists,cascade:t.cascade})}transformPrimaryKeyConstraint(t){return(0,o.requireAllProps)({kind:'PrimaryKeyConstraintNode',columns:this.transformNodeList(t.columns),name:this.transformNode(t.name)})}transformUniqueConstraint(t){return(0,o.requireAllProps)({kind:'UniqueConstraintNode',columns:this.transformNodeList(t.columns),name:this.transformNode(t.name),nullsNotDistinct:t.nullsNotDistinct})}transformForeignKeyConstraint(t){return(0,o.requireAllProps)({kind:'ForeignKeyConstraintNode',columns:this.transformNodeList(t.columns),references:this.transformNode(t.references),name:this.transformNode(t.name),onDelete:t.onDelete,onUpdate:t.onUpdate})}transformSetOperation(t){return(0,o.requireAllProps)({kind:'SetOperationNode',operator:t.operator,expression:this.transformNode(t.expression),all:t.all})}transformReferences(t){return(0,o.requireAllProps)({kind:'ReferencesNode',table:this.transformNode(t.table),columns:this.transformNodeList(t.columns),onDelete:t.onDelete,onUpdate:t.onUpdate})}transformCheckConstraint(t){return(0,o.requireAllProps)({kind:'CheckConstraintNode',expression:this.transformNode(t.expression),name:this.transformNode(t.name)})}transformWith(t){return(0,o.requireAllProps)({kind:'WithNode',expressions:this.transformNodeList(t.expressions),recursive:t.recursive})}transformCommonTableExpression(t){return(0,o.requireAllProps)({kind:'CommonTableExpressionNode',name:this.transformNode(t.name),materialized:t.materialized,expression:this.transformNode(t.expression)})}transformCommonTableExpressionName(t){return(0,o.requireAllProps)({kind:'CommonTableExpressionNameNode',table:this.transformNode(t.table),columns:this.transformNodeList(t.columns)})}transformHaving(t){return(0,o.requireAllProps)({kind:'HavingNode',having:this.transformNode(t.having)})}transformCreateSchema(t){return(0,o.requireAllProps)({kind:'CreateSchemaNode',schema:this.transformNode(t.schema),ifNotExists:t.ifNotExists})}transformDropSchema(t){return(0,o.requireAllProps)({kind:'DropSchemaNode',schema:this.transformNode(t.schema),ifExists:t.ifExists,cascade:t.cascade})}transformAlterTable(t){return(0,o.requireAllProps)({kind:'AlterTableNode',table:this.transformNode(t.table),renameTo:this.transformNode(t.renameTo),setSchema:this.transformNode(t.setSchema),columnAlterations:this.transformNodeList(t.columnAlterations),addConstraint:this.transformNode(t.addConstraint),dropConstraint:this.transformNode(t.dropConstraint),addIndex:this.transformNode(t.addIndex),dropIndex:this.transformNode(t.dropIndex)})}transformDropColumn(t){return(0,o.requireAllProps)({kind:'DropColumnNode',column:this.transformNode(t.column)})}transformRenameColumn(t){return(0,o.requireAllProps)({kind:'RenameColumnNode',column:this.transformNode(t.column),renameTo:this.transformNode(t.renameTo)})}transformAlterColumn(t){return(0,o.requireAllProps)({kind:'AlterColumnNode',column:this.transformNode(t.column),dataType:this.transformNode(t.dataType),dataTypeExpression:this.transformNode(t.dataTypeExpression),setDefault:this.transformNode(t.setDefault),dropDefault:t.dropDefault,setNotNull:t.setNotNull,dropNotNull:t.dropNotNull})}transformModifyColumn(t){return(0,o.requireAllProps)({kind:'ModifyColumnNode',column:this.transformNode(t.column)})}transformAddConstraint(t){return(0,o.requireAllProps)({kind:'AddConstraintNode',constraint:this.transformNode(t.constraint)})}transformDropConstraint(t){return(0,o.requireAllProps)({kind:'DropConstraintNode',constraintName:this.transformNode(t.constraintName),ifExists:t.ifExists,modifier:t.modifier})}transformCreateView(t){return(0,o.requireAllProps)({kind:'CreateViewNode',name:this.transformNode(t.name),temporary:t.temporary,orReplace:t.orReplace,ifNotExists:t.ifNotExists,materialized:t.materialized,columns:this.transformNodeList(t.columns),as:this.transformNode(t.as)})}transformDropView(t){return(0,o.requireAllProps)({kind:'DropViewNode',name:this.transformNode(t.name),ifExists:t.ifExists,materialized:t.materialized,cascade:t.cascade})}transformGenerated(t){return(0,o.requireAllProps)({kind:'GeneratedNode',byDefault:t.byDefault,always:t.always,identity:t.identity,stored:t.stored,expression:this.transformNode(t.expression)})}transformDefaultValue(t){return(0,o.requireAllProps)({kind:'DefaultValueNode',defaultValue:this.transformNode(t.defaultValue)})}transformOn(t){return(0,o.requireAllProps)({kind:'OnNode',on:this.transformNode(t.on)})}transformSelectModifier(t){return(0,o.requireAllProps)({kind:'SelectModifierNode',modifier:t.modifier,rawModifier:this.transformNode(t.rawModifier),of:this.transformNodeList(t.of)})}transformCreateType(t){return(0,o.requireAllProps)({kind:'CreateTypeNode',name:this.transformNode(t.name),enum:this.transformNode(t.enum)})}transformDropType(t){return(0,o.requireAllProps)({kind:'DropTypeNode',name:this.transformNode(t.name),ifExists:t.ifExists})}transformExplain(t){return(0,o.requireAllProps)({kind:'ExplainNode',format:t.format,options:this.transformNode(t.options)})}transformSchemableIdentifier(t){return(0,o.requireAllProps)({kind:'SchemableIdentifierNode',schema:this.transformNode(t.schema),identifier:this.transformNode(t.identifier)})}transformAggregateFunction(t){return(0,o.requireAllProps)({kind:'AggregateFunctionNode',aggregated:this.transformNodeList(t.aggregated),distinct:t.distinct,orderBy:this.transformNode(t.orderBy),filter:this.transformNode(t.filter),func:t.func,over:this.transformNode(t.over)})}transformOver(t){return(0,o.requireAllProps)({kind:'OverNode',orderBy:this.transformNode(t.orderBy),partitionBy:this.transformNode(t.partitionBy)})}transformPartitionBy(t){return(0,o.requireAllProps)({kind:'PartitionByNode',items:this.transformNodeList(t.items)})}transformPartitionByItem(t){return(0,o.requireAllProps)({kind:'PartitionByItemNode',partitionBy:this.transformNode(t.partitionBy)})}transformBinaryOperation(t){return(0,o.requireAllProps)({kind:'BinaryOperationNode',leftOperand:this.transformNode(t.leftOperand),operator:this.transformNode(t.operator),rightOperand:this.transformNode(t.rightOperand)})}transformUnaryOperation(t){return(0,o.requireAllProps)({kind:'UnaryOperationNode',operator:this.transformNode(t.operator),operand:this.transformNode(t.operand)})}transformUsing(t){return(0,o.requireAllProps)({kind:'UsingNode',tables:this.transformNodeList(t.tables)})}transformFunction(t){return(0,o.requireAllProps)({kind:'FunctionNode',func:t.func,arguments:this.transformNodeList(t.arguments)})}transformCase(t){return(0,o.requireAllProps)({kind:'CaseNode',value:this.transformNode(t.value),when:this.transformNodeList(t.when),else:this.transformNode(t.else),isStatement:t.isStatement})}transformWhen(t){return(0,o.requireAllProps)({kind:'WhenNode',condition:this.transformNode(t.condition),result:this.transformNode(t.result)})}transformJSONReference(t){return(0,o.requireAllProps)({kind:'JSONReferenceNode',reference:this.transformNode(t.reference),traversal:this.transformNode(t.traversal)})}transformJSONPath(t){return(0,o.requireAllProps)({kind:'JSONPathNode',inOperator:this.transformNode(t.inOperator),pathLegs:this.transformNodeList(t.pathLegs)})}transformJSONPathLeg(t){return(0,o.requireAllProps)({kind:'JSONPathLegNode',type:t.type,value:t.value})}transformJSONOperatorChain(t){return(0,o.requireAllProps)({kind:'JSONOperatorChainNode',operator:this.transformNode(t.operator),values:this.transformNodeList(t.values)})}transformTuple(t){return(0,o.requireAllProps)({kind:'TupleNode',values:this.transformNodeList(t.values)})}transformMergeQuery(t){return(0,o.requireAllProps)({kind:'MergeQueryNode',into:this.transformNode(t.into),using:this.transformNode(t.using),whens:this.transformNodeList(t.whens),with:this.transformNode(t.with),top:this.transformNode(t.top),endModifiers:this.transformNodeList(t.endModifiers),output:this.transformNode(t.output)})}transformMatched(t){return(0,o.requireAllProps)({kind:'MatchedNode',not:t.not,bySource:t.bySource})}transformAddIndex(t){return(0,o.requireAllProps)({kind:'AddIndexNode',name:this.transformNode(t.name),columns:this.transformNodeList(t.columns),unique:t.unique,using:this.transformNode(t.using),ifNotExists:t.ifNotExists})}transformCast(t){return(0,o.requireAllProps)({kind:'CastNode',expression:this.transformNode(t.expression),dataType:this.transformNode(t.dataType)})}transformFetch(t){return(0,o.requireAllProps)({kind:'FetchNode',rowCount:this.transformNode(t.rowCount),modifier:t.modifier})}transformTop(t){return(0,o.requireAllProps)({kind:'TopNode',expression:t.expression,modifiers:t.modifiers})}transformOutput(t){return(0,o.requireAllProps)({kind:'OutputNode',selections:this.transformNodeList(t.selections)})}transformDataType(t){return t}transformSelectAll(t){return t}transformIdentifier(t){return t}transformValue(t){return t}transformPrimitiveValueList(t){return t}transformOperator(t){return t}transformDefaultInsertValue(t){return t}}}),7206,[7110,7207]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.requireAllProps=function(n){return n}}),7207,[]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.WheneableMergeQueryBuilder=e.NotMatchedThenableMergeQueryBuilder=e.MergeQueryBuilder=e.MatchedThenableMergeQueryBuilder=void 0;var u=t(r(d[1])),o=t(r(d[2])),n=r(d[3]),s=r(d[4]),h=r(d[5]),l=r(d[6]),p=r(d[7]),c=r(d[8]),y=r(d[9]),N=r(d[10]),f=r(d[11]),w=r(d[12]),M=r(d[13]),q=r(d[14]),Q=r(d[15]),T=r(d[16]),W=r(d[17]);class x{#e;constructor(t){this.#e=(0,M.freeze)(t)}modifyEnd(t){return new x({...this.#e,queryNode:h.QueryNode.cloneWithEndModifier(this.#e.queryNode,t.toOperationNode())})}top(t,u){return new x({...this.#e,queryNode:h.QueryNode.cloneWithTop(this.#e.queryNode,(0,f.parseTop)(t,u))})}using(...t){return new A({...this.#e,queryNode:s.MergeQueryNode.cloneWithUsing(this.#e.queryNode,(0,c.parseJoin)('Using',t))})}output(t){return new x({...this.#e,queryNode:h.QueryNode.cloneWithOutput(this.#e.queryNode,(0,N.parseSelectArg)(t))})}outputAll(t){return new x({...this.#e,queryNode:h.QueryNode.cloneWithOutput(this.#e.queryNode,(0,N.parseSelectAll)(t))})}}e.MergeQueryBuilder=x,(0,q.preventAwait)(x,"don't await MergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");var b=(0,o.default)("props"),O=(0,o.default)("whenMatched"),v=(0,o.default)("whenNotMatched");class A{constructor(t){Object.defineProperty(this,v,{value:E}),Object.defineProperty(this,O,{value:B}),Object.defineProperty(this,b,{writable:!0,value:void 0}),(0,u.default)(this,b)[b]=(0,M.freeze)(t)}modifyEnd(t){return new A({...(0,u.default)(this,b)[b],queryNode:h.QueryNode.cloneWithEndModifier((0,u.default)(this,b)[b].queryNode,t.toOperationNode())})}top(t,o){return new A({...(0,u.default)(this,b)[b],queryNode:h.QueryNode.cloneWithTop((0,u.default)(this,b)[b].queryNode,(0,f.parseTop)(t,o))})}whenMatched(){return(0,u.default)(this,O)[O]([])}whenMatchedAnd(...t){return(0,u.default)(this,O)[O](t)}whenMatchedAndRef(t,o,n){return(0,u.default)(this,O)[O]([t,o,n],!0)}whenNotMatched(){return(0,u.default)(this,v)[v]([])}whenNotMatchedAnd(...t){return(0,u.default)(this,v)[v](t)}whenNotMatchedAndRef(t,o,n){return(0,u.default)(this,v)[v]([t,o,n],!0)}whenNotMatchedBySource(){return(0,u.default)(this,v)[v]([],!1,!0)}whenNotMatchedBySourceAnd(...t){return(0,u.default)(this,v)[v](t,!1,!0)}whenNotMatchedBySourceAndRef(t,o,n){return(0,u.default)(this,v)[v]([t,o,n],!0,!0)}output(t){return new A({...(0,u.default)(this,b)[b],queryNode:h.QueryNode.cloneWithOutput((0,u.default)(this,b)[b].queryNode,(0,N.parseSelectArg)(t))})}outputAll(t){return new A({...(0,u.default)(this,b)[b],queryNode:h.QueryNode.cloneWithOutput((0,u.default)(this,b)[b].queryNode,(0,N.parseSelectAll)(t))})}$call(t){return t(this)}$if(t,o){return t?o(this):new A({...(0,u.default)(this,b)[b]})}toOperationNode(){return(0,u.default)(this,b)[b].executor.transformQuery((0,u.default)(this,b)[b].queryNode,(0,u.default)(this,b)[b].queryId)}compile(){return(0,u.default)(this,b)[b].executor.compileQuery(this.toOperationNode(),(0,u.default)(this,b)[b].queryId)}async execute(){const t=this.compile(),o=await(0,u.default)(this,b)[b].executor.executeQuery(t,(0,u.default)(this,b)[b].queryId);return t.query.output&&(0,u.default)(this,b)[b].executor.adapter.supportsOutput?o.rows:[new Q.MergeResult(o.numAffectedRows)]}async executeTakeFirst(){const[t]=await this.execute();return t}async executeTakeFirstOrThrow(t=T.NoResultError){const u=await this.executeTakeFirst();if(void 0===u){throw(0,T.isNoResultErrorConstructor)(t)?new t(this.toOperationNode()):t(this.toOperationNode())}return u}}function B(t,o){return new I({...(0,u.default)(this,b)[b],queryNode:s.MergeQueryNode.cloneWithWhen((0,u.default)(this,b)[b].queryNode,(0,y.parseMergeWhen)({isMatched:!0},t,o))})}function E(t,o=!1,n=!1){const h={...(0,u.default)(this,b)[b],queryNode:s.MergeQueryNode.cloneWithWhen((0,u.default)(this,b)[b].queryNode,(0,y.parseMergeWhen)({isMatched:!1,bySource:n},t,o))};return new(n?I:R)(h)}e.WheneableMergeQueryBuilder=A,(0,q.preventAwait)(A,"don't await WheneableMergeQueryBuilder instances directly. To execute the query you need to call `execute`.");class I{#e;constructor(t){this.#e=(0,M.freeze)(t)}thenDelete(){return new A({...this.#e,queryNode:s.MergeQueryNode.cloneWithThen(this.#e.queryNode,(0,y.parseMergeThen)('delete'))})}thenDoNothing(){return new A({...this.#e,queryNode:s.MergeQueryNode.cloneWithThen(this.#e.queryNode,(0,y.parseMergeThen)('do nothing'))})}thenUpdate(t){return new A({...this.#e,queryNode:s.MergeQueryNode.cloneWithThen(this.#e.queryNode,(0,y.parseMergeThen)(t(new W.UpdateQueryBuilder({queryId:this.#e.queryId,executor:w.NOOP_QUERY_EXECUTOR,queryNode:l.UpdateQueryNode.createWithoutTable()}))))})}thenUpdateSet(...t){return this.thenUpdate((u=>u.set(...t)))}}e.MatchedThenableMergeQueryBuilder=I,(0,q.preventAwait)(I,"don't await MatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.");class R{#e;constructor(t){this.#e=(0,M.freeze)(t)}thenDoNothing(){return new A({...this.#e,queryNode:s.MergeQueryNode.cloneWithThen(this.#e.queryNode,(0,y.parseMergeThen)('do nothing'))})}thenInsertValues(t){const[u,o]=(0,p.parseInsertExpression)(t);return new A({...this.#e,queryNode:s.MergeQueryNode.cloneWithThen(this.#e.queryNode,(0,y.parseMergeThen)(n.InsertQueryNode.cloneWith(n.InsertQueryNode.createWithoutInto(),{columns:u,values:o})))})}}e.NotMatchedThenableMergeQueryBuilder=R,(0,q.preventAwait)(R,"don't await NotMatchedThenableMergeQueryBuilder instances directly. To execute the query you need to call `execute` when available.")}),7208,[16,3270,3271,7172,7180,7173,7174,7169,7128,7209,7167,7190,7211,7110,7161,7215,7187,7195]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.parseMergeThen=function(n){if((0,u.isString)(n))return o.RawNode.create([n],[]);if((0,t.isOperationNodeSource)(n))return n.toOperationNode();return n},e.parseMergeWhen=function(t,o,u){return s.WhenNode.create((0,c.parseFilterList)([n.MatchedNode.create(!t.isMatched,t.bySource),...o&&o.length>0?[3===o.length&&u?(0,c.parseReferentialBinaryOperation)(o[0],o[1],o[2]):(0,c.parseValueBinaryOperationOrExpression)(o)]:[]],'and',!1))};var n=r(d[0]),t=r(d[1]),o=r(d[2]),s=r(d[3]),u=r(d[4]),c=r(d[5])}),7209,[7210,7124,7143,7181,7110,7133]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.MatchedNode=void 0;var o=r(d[0]);e.MatchedNode=(0,o.freeze)({is:o=>'MatchedNode'===o.kind,create:(t,c=!1)=>(0,o.freeze)({kind:'MatchedNode',not:t,bySource:c})})}),7210,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.NoopQueryExecutor=e.NOOP_QUERY_EXECUTOR=void 0;var n=r(d[0]);class t extends n.QueryExecutorBase{get adapter(){throw new Error('this query cannot be compiled to SQL')}compileQuery(){throw new Error('this query cannot be compiled to SQL')}provideConnection(){throw new Error('this query cannot be executed')}withConnectionProvider(){throw new Error('this query cannot have a connection provider')}withPlugin(n){return new t([...this.plugins,n])}withPlugins(n){return new t([...this.plugins,...n])}withPluginAtFront(n){return new t([n,...this.plugins])}withoutPlugins(){return new t([])}}e.NoopQueryExecutor=t;e.NOOP_QUERY_EXECUTOR=new t}),7211,[7212]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.QueryExecutorBase=void 0;var n=t(r(d[1])),o=t(r(d[2])),s=r(d[3]),u=r(d[4]),c=r(d[5]);const f=(0,s.freeze)([]);var l=(0,o.default)("plugins"),y=(0,o.default)("transformResult");async function w(t,o){for(const s of(0,n.default)(this,l)[l])t=await s.transformResult({result:t,queryId:o});return t}function v(t,n){const{numAffectedRows:o}=t;void 0===o&&void 0===t.numUpdatedOrDeletedRows||void 0!==o&&void 0!==n.numAffectedRows||(0,c.logOnce)('kysely:warning: outdated driver/plugin detected! QueryResult.numUpdatedOrDeletedRows is deprecated and will be removed in a future release.')}e.QueryExecutorBase=class{constructor(t=f){Object.defineProperty(this,y,{value:w}),Object.defineProperty(this,l,{writable:!0,value:void 0}),(0,n.default)(this,l)[l]=t}get plugins(){return(0,n.default)(this,l)[l]}transformQuery(t,o){for(const s of(0,n.default)(this,l)[l]){const n=s.transformQuery({node:t,queryId:o});if(n.kind!==t.kind)throw new Error(["KyselyPlugin.transformQuery must return a node","of the same kind that was given to it.",`The plugin was given a ${t.kind}`,`but it returned a ${n.kind}`].join(' '));t=n}return t}async executeQuery(t,o){return await this.provideConnection((async s=>{const u=await s.executeQuery(t),c=await(0,n.default)(this,y)[y](u,o);return v(u,c),c}))}async*stream(t,o,s){const c=new u.Deferred,f=new u.Deferred;this.provideConnection((async t=>(c.resolve(t),await f.promise))).catch((t=>c.reject(t)));const l=await c.promise;try{for await(const u of l.streamQuery(t,o))yield await(0,n.default)(this,y)[y](u,s)}finally{f.resolve()}}}}),7212,[16,3270,3271,7110,7213,7214]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.Deferred=void 0;e.Deferred=class{#e;#r;#s;constructor(){this.#e=new Promise(((s,t)=>{this.#s=t,this.#r=s}))}get promise(){return this.#e}resolve=s=>{this.#r&&this.#r(s)};reject=s=>{this.#s&&this.#s(s)}}}),7213,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.logOnce=function(o){if(n.has(o))return;n.add(o),console.log(o)};const n=new Set}),7214,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.MergeResult=void 0;e.MergeResult=class{constructor(s){this.numChangedRows=s}}}),7215,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.OffsetNode=void 0;var f=r(d[0]);e.OffsetNode=(0,f.freeze)({is:f=>'OffsetNode'===f.kind,create:o=>(0,f.freeze)({kind:'OffsetNode',offset:o})})}),7216,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.parseGroupBy=function(u){return u=(0,s.isFunction)(u)?u((0,o.expressionBuilder)()):u,(0,t.parseReferenceExpressionOrList)(u).map(n.GroupByItemNode.create)};var n=r(d[0]),o=r(d[1]),s=r(d[2]),t=r(d[3])}),7217,[7218,7125,7110,7136]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.GroupByItemNode=void 0;var o=r(d[0]);e.GroupByItemNode=(0,o.freeze)({is:o=>'GroupByItemNode'===o.kind,create:t=>(0,o.freeze)({kind:'GroupByItemNode',groupBy:t})})}),7218,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.parseSetOperations=function(p,u,c){(0,o.isFunction)(u)&&(u=u((0,n.createExpressionBuilder)()));(0,o.isReadonlyArray)(u)||(u=[u]);return u.map((n=>t.SetOperationNode.create(p,(0,s.parseExpression)(n),c)))};var n=r(d[0]),t=r(d[1]),o=r(d[2]),s=r(d[3])}),7219,[7125,7220,7110,7122]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.SetOperationNode=void 0;var o=r(d[0]);e.SetOperationNode=(0,o.freeze)({is:o=>'SetOperationNode'===o.kind,create:(t,n,p)=>(0,o.freeze)({kind:'SetOperationNode',operator:t,expression:n,all:p})})}),7220,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.OrWrapper=e.ExpressionWrapper=e.AndWrapper=e.AliasedExpressionWrapper=void 0;var n=r(d[0]),t=r(d[1]),s=r(d[2]),o=r(d[3]),p=r(d[4]),u=r(d[5]),c=r(d[6]);class h{#e;constructor(n){this.#e=n}get expressionType(){}as(n){return new l(this,n)}or(...n){return new O(p.OrNode.create(this.#e,(0,c.parseValueBinaryOperationOrExpression)(n)))}and(...n){return new x(t.AndNode.create(this.#e,(0,c.parseValueBinaryOperationOrExpression)(n)))}$castTo(){return new h(this.#e)}$notNull(){return new h(this.#e)}toOperationNode(){return this.#e}}e.ExpressionWrapper=h;class l{#r;#n;constructor(n,t){this.#r=n,this.#n=t}get expression(){return this.#r}get alias(){return this.#n}toOperationNode(){return n.AliasNode.create(this.#r.toOperationNode(),(0,o.isOperationNodeSource)(this.#n)?this.#n.toOperationNode():s.IdentifierNode.create(this.#n))}}e.AliasedExpressionWrapper=l;class O{#e;constructor(n){this.#e=n}get expressionType(){}as(n){return new l(this,n)}or(...n){return new O(p.OrNode.create(this.#e,(0,c.parseValueBinaryOperationOrExpression)(n)))}$castTo(){return new O(this.#e)}toOperationNode(){return u.ParensNode.create(this.#e)}}e.OrWrapper=O;class x{#e;constructor(n){this.#e=n}get expressionType(){}as(n){return new l(this,n)}and(...n){return new x(t.AndNode.create(this.#e,(0,c.parseValueBinaryOperationOrExpression)(n)))}$castTo(){return new x(this.#e)}toOperationNode(){return u.ParensNode.create(this.#e)}}e.AndWrapper=x}),7221,[7120,7131,7112,7124,7132,7151,7133]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.parseFetch=function(o,c){if(!(0,n.isNumber)(o)&&!(0,n.isBigInt)(o))throw new Error(`Invalid fetch row count: ${o}`);if(f=c,'only'!==f&&'with ties'!==f)throw new Error(`Invalid fetch modifier: ${c}`);var f;return t.FetchNode.create(o,c)};var t=r(d[0]),n=r(d[1])}),7222,[7223,7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.FetchNode=void 0;var o=r(d[0]);e.FetchNode={is:o=>'FetchNode'===o.kind,create:(t,c)=>({kind:'FetchNode',rowCount:o.ValueNode.create(t),modifier:c})}}),7223,[7150]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.createFunctionModule=function(){const F=(o,s)=>new n.ExpressionWrapper(t.FunctionNode.create(o,(0,c.parseReferenceExpressionOrList)(s??[]))),N=(n,t)=>new u.AggregateFunctionBuilder({aggregateFunctionNode:o.AggregateFunctionNode.create(n,t?(0,c.parseReferenceExpressionOrList)(t):void 0)});return Object.assign(F,{agg:N,avg:n=>N('avg',[n]),coalesce:(...n)=>F('coalesce',n),count:n=>N('count',[n]),countAll:n=>new u.AggregateFunctionBuilder({aggregateFunctionNode:o.AggregateFunctionNode.create('count',(0,s.parseSelectAll)(n))}),max:n=>N('max',[n]),min:n=>N('min',[n]),sum:n=>N('sum',[n]),any:n=>F('any',[n]),jsonAgg:n=>new u.AggregateFunctionBuilder({aggregateFunctionNode:o.AggregateFunctionNode.create('json_agg',[(0,p.isString)(n)?(0,l.parseTable)(n):n.toOperationNode()])}),toJson:o=>new n.ExpressionWrapper(t.FunctionNode.create('to_json',[(0,p.isString)(o)?(0,l.parseTable)(o):o.toOperationNode()]))})};var n=r(d[0]),o=r(d[1]),t=r(d[2]),c=r(d[3]),s=r(d[4]),u=r(d[5]),p=r(d[6]),l=r(d[7])}),7224,[7221,7225,7226,7136,7167,7227,7110,7119]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.AggregateFunctionNode=void 0;var t=r(d[0]),o=r(d[1]),n=r(d[2]);e.AggregateFunctionNode=(0,t.freeze)({is:t=>'AggregateFunctionNode'===t.kind,create:(o,n=[])=>(0,t.freeze)({kind:'AggregateFunctionNode',func:o,aggregated:n}),cloneWithDistinct:o=>(0,t.freeze)({...o,distinct:!0}),cloneWithOrderBy:(o,c)=>(0,t.freeze)({...o,orderBy:o.orderBy?n.OrderByNode.cloneWithItems(o.orderBy,c):n.OrderByNode.create(c)}),cloneWithFilter:(n,c)=>(0,t.freeze)({...n,filter:n.filter?o.WhereNode.cloneWithOperation(n.filter,'And',c):o.WhereNode.create(c)}),cloneWithOrFilter:(n,c)=>(0,t.freeze)({...n,filter:n.filter?o.WhereNode.cloneWithOperation(n.filter,'Or',c):o.WhereNode.create(c)}),cloneWithOver:(o,n)=>(0,t.freeze)({...o,over:n})})}),7225,[7110,7177,7154]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.FunctionNode=void 0;var n=r(d[0]);e.FunctionNode=(0,n.freeze)({is:n=>'FunctionNode'===n.kind,create:(o,t)=>(0,n.freeze)({kind:'FunctionNode',func:o,arguments:t})})}),7226,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.AliasedAggregateFunctionBuilder=e.AggregateFunctionBuilder=void 0;var t=r(d[0]),n=r(d[1]),o=r(d[2]),s=r(d[3]),u=r(d[4]),c=r(d[5]),p=r(d[6]),l=r(d[7]);class h{#e;constructor(n){this.#e=(0,t.freeze)(n)}get expressionType(){}as(t){return new F(this,t)}distinct(){return new h({...this.#e,aggregateFunctionNode:n.AggregateFunctionNode.cloneWithDistinct(this.#e.aggregateFunctionNode)})}orderBy(t,o){return new h({...this.#e,aggregateFunctionNode:n.AggregateFunctionNode.cloneWithOrderBy(this.#e.aggregateFunctionNode,(0,l.parseOrderBy)([t,o]))})}filterWhere(...t){return new h({...this.#e,aggregateFunctionNode:n.AggregateFunctionNode.cloneWithFilter(this.#e.aggregateFunctionNode,(0,p.parseValueBinaryOperationOrExpression)(t))})}filterWhereRef(t,o,s){return new h({...this.#e,aggregateFunctionNode:n.AggregateFunctionNode.cloneWithFilter(this.#e.aggregateFunctionNode,(0,p.parseReferentialBinaryOperation)(t,o,s))})}over(t){const o=(0,c.createOverBuilder)();return new h({...this.#e,aggregateFunctionNode:n.AggregateFunctionNode.cloneWithOver(this.#e.aggregateFunctionNode,(t?t(o):o).toOperationNode())})}$call(t){return t(this)}$castTo(){return new h(this.#e)}$notNull(){return new h(this.#e)}toOperationNode(){return this.#e.aggregateFunctionNode}}e.AggregateFunctionBuilder=h,(0,u.preventAwait)(h,"don't await AggregateFunctionBuilder instances. They are never executed directly and are always just a part of a query.");class F{#t;#r;constructor(t,n){this.#t=t,this.#r=n}get expression(){return this.#t}get alias(){return this.#r}toOperationNode(){return o.AliasNode.create(this.#t.toOperationNode(),s.IdentifierNode.create(this.#r))}}e.AliasedAggregateFunctionBuilder=F}),7227,[7110,7225,7120,7112,7161,7152,7133,7140]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.parseExists=function(t){return o('exists',t)},e.parseNotExists=function(t){return o('not exists',t)},e.parseUnaryOperation=o;var t=r(d[0]),n=r(d[1]),s=r(d[2]);function o(o,p){return n.UnaryOperationNode.create(t.OperatorNode.create(o),(0,s.parseReferenceExpression)(p))}}),7228,[7135,7229,7136]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.UnaryOperationNode=void 0;var o=r(d[0]);e.UnaryOperationNode=(0,o.freeze)({is:o=>'UnaryOperationNode'===o.kind,create:(n,t)=>(0,o.freeze)({kind:'UnaryOperationNode',operator:n,operand:t})})}),7229,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.CaseWhenBuilder=e.CaseThenBuilder=e.CaseEndBuilder=e.CaseBuilder=void 0;var s=r(d[0]),n=r(d[1]),o=r(d[2]),p=r(d[3]),t=r(d[4]),h=r(d[5]);e.CaseBuilder=class{#e;constructor(s){this.#e=(0,n.freeze)(s)}when(...s){return new l({...this.#e,node:o.CaseNode.cloneWithWhen(this.#e.node,p.WhenNode.create((0,t.parseValueBinaryOperationOrExpression)(s)))})}};class l{#e;constructor(s){this.#e=(0,n.freeze)(s)}then(s){return new u({...this.#e,node:o.CaseNode.cloneWithThen(this.#e.node,(0,h.isSafeImmediateValue)(s)?(0,h.parseSafeImmediateValue)(s):(0,h.parseValueExpression)(s))})}}e.CaseThenBuilder=l;class u{#e;constructor(s){this.#e=(0,n.freeze)(s)}when(...s){return new l({...this.#e,node:o.CaseNode.cloneWithWhen(this.#e.node,p.WhenNode.create((0,t.parseValueBinaryOperationOrExpression)(s)))})}else(s){return new c({...this.#e,node:o.CaseNode.cloneWith(this.#e.node,{else:(0,h.isSafeImmediateValue)(s)?(0,h.parseSafeImmediateValue)(s):(0,h.parseValueExpression)(s)})})}end(){return new s.ExpressionWrapper(o.CaseNode.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new s.ExpressionWrapper(o.CaseNode.cloneWith(this.#e.node,{isStatement:!0}))}}e.CaseWhenBuilder=u;class c{#e;constructor(s){this.#e=(0,n.freeze)(s)}end(){return new s.ExpressionWrapper(o.CaseNode.cloneWith(this.#e.node,{isStatement:!1}))}endCase(){return new s.ExpressionWrapper(o.CaseNode.cloneWith(this.#e.node,{isStatement:!0}))}}e.CaseEndBuilder=c}),7230,[7221,7110,7231,7181,7133,7147]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.CaseNode=void 0;var n=r(d[0]),h=r(d[1]);e.CaseNode=(0,n.freeze)({is:n=>'CaseNode'===n.kind,create:h=>(0,n.freeze)({kind:'CaseNode',value:h}),cloneWithWhen:(h,o)=>(0,n.freeze)({...h,when:(0,n.freeze)(h.when?[...h.when,o]:[o])}),cloneWithThen:(o,l)=>(0,n.freeze)({...o,when:o.when?(0,n.freeze)([...o.when.slice(0,-1),h.WhenNode.cloneWithResult(o.when[o.when.length-1],l)]):void 0}),cloneWith:(h,o)=>(0,n.freeze)({...h,...o})})}),7231,[7110,7181]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.TraversedJSONPathBuilder=e.JSONPathBuilder=e.AliasedJSONPathBuilder=void 0;var s=t(r(d[1])),o=t(r(d[2])),n=r(d[3]),l=r(d[4]),h=r(d[5]),u=r(d[6]),N=r(d[7]),c=r(d[8]),O=r(d[9]),f=r(d[10]),P=(0,o.default)("node"),S=(0,o.default)("createBuilderWithPathLeg");class J{constructor(t){Object.defineProperty(this,S,{value:p}),Object.defineProperty(this,P,{writable:!0,value:void 0}),(0,s.default)(this,P)[P]=t}at(t){return(0,s.default)(this,S)[S]('ArrayLocation',t)}key(t){return(0,s.default)(this,S)[S]('Member',t)}}function p(t,o){return c.JSONReferenceNode.is((0,s.default)(this,P)[P])?new v(c.JSONReferenceNode.cloneWithTraversal((0,s.default)(this,P)[P],N.JSONPathNode.is((0,s.default)(this,P)[P].traversal)?N.JSONPathNode.cloneWithLeg((0,s.default)(this,P)[P].traversal,u.JSONPathLegNode.create(t,o)):h.JSONOperatorChainNode.cloneWithValue((0,s.default)(this,P)[P].traversal,f.ValueNode.createImmediate(o)))):new v(N.JSONPathNode.cloneWithLeg((0,s.default)(this,P)[P],u.JSONPathLegNode.create(t,o)))}e.JSONPathBuilder=J;class v extends J{#e;constructor(t){super(t),this.#e=t}get expressionType(){}as(t){return new j(this,t)}$castTo(){return new v(this.#e)}$notNull(){return new v(this.#e)}toOperationNode(){return this.#e}}e.TraversedJSONPathBuilder=v;class j{#t;#a;constructor(t,s){this.#t=t,this.#a=s}get expression(){return this.#t}get alias(){return this.#a}toOperationNode(){return n.AliasNode.create(this.#t.toOperationNode(),(0,O.isOperationNodeSource)(this.#a)?this.#a.toOperationNode():l.IdentifierNode.create(this.#a))}}e.AliasedJSONPathBuilder=j}),7232,[16,3270,3271,7120,7112,7145,7233,7146,7144,7124,7150]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.JSONPathLegNode=void 0;var t=r(d[0]);e.JSONPathLegNode=(0,t.freeze)({is:t=>'JSONPathLegNode'===t.kind,create:(o,N)=>(0,t.freeze)({kind:'JSONPathLegNode',type:o,value:N})})}),7233,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.TupleNode=void 0;var o=r(d[0]);e.TupleNode=(0,o.freeze)({is:o=>'TupleNode'===o.kind,create:u=>(0,o.freeze)({kind:'TupleNode',values:(0,o.freeze)(u)})})}),7234,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.parseDataTypeExpression=function(n){if((0,o.isOperationNodeSource)(n))return n.toOperationNode();if((0,t.isColumnDataType)(n))return t.DataTypeNode.create(n);throw new Error(`invalid column data type ${JSON.stringify(n)}`)};var t=r(d[0]),o=r(d[1])}),7235,[7236,7124]);
__d((function(g,_r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.DataTypeNode=void 0,e.isColumnDataType=function(t){if(n.includes(t))return!0;if(r.some((n=>n.test(t))))return!0;return!1};var t=_r(d[0]);const n=['varchar','char','text','integer','int2','int4','int8','smallint','bigint','boolean','real','double precision','float4','float8','decimal','numeric','binary','bytea','date','datetime','time','timetz','timestamp','timestamptz','serial','bigserial','uuid','json','jsonb','blob','varbinary','int4range','int4multirange','int8range','int8multirange','numrange','nummultirange','tsrange','tsmultirange','tstzrange','tstzmultirange','daterange','datemultirange'],r=[/^varchar\(\d+\)$/,/^char\(\d+\)$/,/^decimal\(\d+, \d+\)$/,/^numeric\(\d+, \d+\)$/,/^binary\(\d+\)$/,/^datetime\(\d+\)$/,/^time\(\d+\)$/,/^timetz\(\d+\)$/,/^timestamp\(\d+\)$/,/^timestamptz\(\d+\)$/,/^varbinary\(\d+\)$/];e.DataTypeNode=(0,t.freeze)({is:t=>'DataTypeNode'===t.kind,create:n=>(0,t.freeze)({kind:'DataTypeNode',dataType:n})})}),7236,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.CastNode=void 0;var o=r(d[0]);e.CastNode=(0,o.freeze)({is:o=>'CastNode'===o.kind,create:(t,s)=>(0,o.freeze)({kind:'CastNode',expression:t,dataType:s})})}),7237,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.AlterTableColumnAlteringBuilder=e.AlterTableBuilder=void 0;var o=r(d[0]),t=r(d[1]),n=r(d[2]),l=r(d[3]),s=r(d[4]),p=r(d[5]),u=r(d[6]),c=r(d[7]),h=r(d[8]),C=r(d[9]),A=r(d[10]),N=r(d[11]),T=r(d[12]),b=r(d[13]),w=r(d[14]),y=r(d[15]),x=r(d[16]),f=r(d[17]),B=r(d[18]),W=r(d[19]),D=r(d[20]),I=r(d[21]),O=r(d[22]),P=r(d[23]),E=r(d[24]),q=r(d[25]),v=r(d[26]),K=r(d[27]);class F{#e;constructor(o){this.#e=(0,u.freeze)(o)}renameTo(o){return new D.AlterTableExecutor({...this.#e,node:t.AlterTableNode.cloneWithTableProps(this.#e.node,{renameTo:(0,f.parseTable)(o)})})}setSchema(o){return new D.AlterTableExecutor({...this.#e,node:t.AlterTableNode.cloneWithTableProps(this.#e.node,{setSchema:s.IdentifierNode.create(o)})})}alterColumn(o,n){const l=n(new W.AlterColumnBuilder(o));return new _({...this.#e,node:t.AlterTableNode.cloneWithColumnAlteration(this.#e.node,l.toOperationNode())})}dropColumn(o){return new _({...this.#e,node:t.AlterTableNode.cloneWithColumnAlteration(this.#e.node,l.DropColumnNode.create(o))})}renameColumn(o,n){return new _({...this.#e,node:t.AlterTableNode.cloneWithColumnAlteration(this.#e.node,p.RenameColumnNode.create(o,n))})}addColumn(l,s,p=u.noop){const c=p(new h.ColumnDefinitionBuilder(n.ColumnDefinitionNode.create(l,(0,A.parseDataTypeExpression)(s))));return new _({...this.#e,node:t.AlterTableNode.cloneWithColumnAlteration(this.#e.node,o.AddColumnNode.create(c.toOperationNode()))})}modifyColumn(o,l,s=u.noop){const p=s(new h.ColumnDefinitionBuilder(n.ColumnDefinitionNode.create(o,(0,A.parseDataTypeExpression)(l))));return new _({...this.#e,node:t.AlterTableNode.cloneWithColumnAlteration(this.#e.node,C.ModifyColumnNode.create(p.toOperationNode()))})}addUniqueConstraint(o,n,l=u.noop){const s=l(new K.UniqueConstraintNodeBuilder(b.UniqueConstraintNode.create(n,o)));return new D.AlterTableExecutor({...this.#e,node:t.AlterTableNode.cloneWithTableProps(this.#e.node,{addConstraint:T.AddConstraintNode.create(s.toOperationNode())})})}addCheckConstraint(o,n){return new D.AlterTableExecutor({...this.#e,node:t.AlterTableNode.cloneWithTableProps(this.#e.node,{addConstraint:T.AddConstraintNode.create(w.CheckConstraintNode.create(n.toOperationNode(),o))})})}addForeignKeyConstraint(o,t,n,l){return new I.AlterTableAddForeignKeyConstraintBuilder({...this.#e,constraintBuilder:new N.ForeignKeyConstraintBuilder(y.ForeignKeyConstraintNode.create(t.map(x.ColumnNode.create),(0,f.parseTable)(n),l.map(x.ColumnNode.create),o))})}addPrimaryKeyConstraint(o,n){return new D.AlterTableExecutor({...this.#e,node:t.AlterTableNode.cloneWithTableProps(this.#e.node,{addConstraint:T.AddConstraintNode.create(P.PrimaryConstraintNode.create(n,o))})})}dropConstraint(o){return new O.AlterTableDropConstraintBuilder({...this.#e,node:t.AlterTableNode.cloneWithTableProps(this.#e.node,{dropConstraint:B.DropConstraintNode.create(o)})})}addIndex(o){return new v.AlterTableAddIndexBuilder({...this.#e,node:t.AlterTableNode.cloneWithTableProps(this.#e.node,{addIndex:q.AddIndexNode.create(o)})})}dropIndex(o){return new D.AlterTableExecutor({...this.#e,node:t.AlterTableNode.cloneWithTableProps(this.#e.node,{dropIndex:E.DropIndexNode.create(o)})})}$call(o){return o(this)}}e.AlterTableBuilder=F,(0,c.preventAwait)(F,"don't await AlterTableBuilder instances");class _{#e;constructor(o){this.#e=(0,u.freeze)(o)}alterColumn(o,n){const l=n(new W.AlterColumnBuilder(o));return new _({...this.#e,node:t.AlterTableNode.cloneWithColumnAlteration(this.#e.node,l.toOperationNode())})}dropColumn(o){return new _({...this.#e,node:t.AlterTableNode.cloneWithColumnAlteration(this.#e.node,l.DropColumnNode.create(o))})}renameColumn(o,n){return new _({...this.#e,node:t.AlterTableNode.cloneWithColumnAlteration(this.#e.node,p.RenameColumnNode.create(o,n))})}addColumn(l,s,p=u.noop){const c=p(new h.ColumnDefinitionBuilder(n.ColumnDefinitionNode.create(l,(0,A.parseDataTypeExpression)(s))));return new _({...this.#e,node:t.AlterTableNode.cloneWithColumnAlteration(this.#e.node,o.AddColumnNode.create(c.toOperationNode()))})}modifyColumn(o,l,s=u.noop){const p=s(new h.ColumnDefinitionBuilder(n.ColumnDefinitionNode.create(o,(0,A.parseDataTypeExpression)(l))));return new _({...this.#e,node:t.AlterTableNode.cloneWithColumnAlteration(this.#e.node,C.ModifyColumnNode.create(p.toOperationNode()))})}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}e.AlterTableColumnAlteringBuilder=_,(0,c.preventAwait)(_,"don't await AlterTableColumnAlteringBuilder instances directly. To execute the query you need to call `execute`")}),7238,[7239,7109,7240,7241,7112,7242,7110,7161,7243,7250,7235,7251,7253,7254,7244,7252,7137,7119,7255,7256,7258,7259,7260,7261,7115,7262,7263,7264]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.AddColumnNode=void 0;var o=r(d[0]);e.AddColumnNode=(0,o.freeze)({is:o=>'AddColumnNode'===o.kind,create:n=>(0,o.freeze)({kind:'AddColumnNode',column:n})})}),7239,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ColumnDefinitionNode=void 0;var o=r(d[0]),n=r(d[1]);e.ColumnDefinitionNode=(0,o.freeze)({is:o=>'ColumnDefinitionNode'===o.kind,create:(f,t)=>(0,o.freeze)({kind:'ColumnDefinitionNode',column:n.ColumnNode.create(f),dataType:t}),cloneWithFrontModifier:(n,f)=>(0,o.freeze)({...n,frontModifiers:n.frontModifiers?(0,o.freeze)([...n.frontModifiers,f]):[f]}),cloneWithEndModifier:(n,f)=>(0,o.freeze)({...n,endModifiers:n.endModifiers?(0,o.freeze)([...n.endModifiers,f]):[f]}),cloneWith:(n,f)=>(0,o.freeze)({...n,...f})})}),7240,[7110,7137]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.DropColumnNode=void 0;var o=r(d[0]),n=r(d[1]);e.DropColumnNode=(0,o.freeze)({is:o=>'DropColumnNode'===o.kind,create:u=>(0,o.freeze)({kind:'DropColumnNode',column:n.ColumnNode.create(u)})})}),7241,[7110,7137]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.RenameColumnNode=void 0;var o=r(d[0]),n=r(d[1]);e.RenameColumnNode=(0,o.freeze)({is:o=>'RenameColumnNode'===o.kind,create:(u,l)=>(0,o.freeze)({kind:'RenameColumnNode',column:n.ColumnNode.create(u),renameTo:n.ColumnNode.create(l)})})}),7242,[7110,7137]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ColumnDefinitionBuilder=void 0;var n=r(d[0]),t=r(d[1]),o=r(d[2]),l=r(d[3]),s=r(d[4]),u=r(d[5]),c=r(d[6]),f=r(d[7]),h=r(d[8]),N=r(d[9]);class w{#e;constructor(n){this.#e=n}autoIncrement(){return new w(u.ColumnDefinitionNode.cloneWith(this.#e,{autoIncrement:!0}))}identity(){return new w(u.ColumnDefinitionNode.cloneWith(this.#e,{identity:!0}))}primaryKey(){return new w(u.ColumnDefinitionNode.cloneWith(this.#e,{primaryKey:!0}))}references(n){const s=(0,l.parseStringReference)(n);if(!s.table||o.SelectAllNode.is(s.column))throw new Error(`invalid call references('${n}'). The reference must have format table.column or schema.table.column`);return new w(u.ColumnDefinitionNode.cloneWith(this.#e,{references:t.ReferencesNode.create(s.table,[s.column])}))}onDelete(n){if(!this.#e.references)throw new Error('on delete constraint can only be added for foreign keys');return new w(u.ColumnDefinitionNode.cloneWith(this.#e,{references:t.ReferencesNode.cloneWithOnDelete(this.#e.references,(0,N.parseOnModifyForeignAction)(n))}))}onUpdate(n){if(!this.#e.references)throw new Error('on update constraint can only be added for foreign keys');return new w(u.ColumnDefinitionNode.cloneWith(this.#e,{references:t.ReferencesNode.cloneWithOnUpdate(this.#e.references,(0,N.parseOnModifyForeignAction)(n))}))}unique(){return new w(u.ColumnDefinitionNode.cloneWith(this.#e,{unique:!0}))}notNull(){return new w(u.ColumnDefinitionNode.cloneWith(this.#e,{notNull:!0}))}unsigned(){return new w(u.ColumnDefinitionNode.cloneWith(this.#e,{unsigned:!0}))}defaultTo(n){return new w(u.ColumnDefinitionNode.cloneWith(this.#e,{defaultTo:h.DefaultValueNode.create((0,c.parseDefaultValueExpression)(n))}))}check(t){return new w(u.ColumnDefinitionNode.cloneWith(this.#e,{check:n.CheckConstraintNode.create(t.toOperationNode())}))}generatedAlwaysAs(n){return new w(u.ColumnDefinitionNode.cloneWith(this.#e,{generated:f.GeneratedNode.createWithExpression(n.toOperationNode())}))}generatedAlwaysAsIdentity(){return new w(u.ColumnDefinitionNode.cloneWith(this.#e,{generated:f.GeneratedNode.create({identity:!0,always:!0})}))}generatedByDefaultAsIdentity(){return new w(u.ColumnDefinitionNode.cloneWith(this.#e,{generated:f.GeneratedNode.create({identity:!0,byDefault:!0})}))}stored(){if(!this.#e.generated)throw new Error('stored() can only be called after generatedAlwaysAs');return new w(u.ColumnDefinitionNode.cloneWith(this.#e,{generated:f.GeneratedNode.cloneWith(this.#e.generated,{stored:!0})}))}modifyFront(n){return new w(u.ColumnDefinitionNode.cloneWithFrontModifier(this.#e,n.toOperationNode()))}nullsNotDistinct(){return new w(u.ColumnDefinitionNode.cloneWith(this.#e,{nullsNotDistinct:!0}))}ifNotExists(){return new w(u.ColumnDefinitionNode.cloneWith(this.#e,{ifNotExists:!0}))}modifyEnd(n){return new w(u.ColumnDefinitionNode.cloneWithEndModifier(this.#e,n.toOperationNode()))}$call(n){return n(this)}toOperationNode(){return this.#e}}e.ColumnDefinitionBuilder=w,(0,s.preventAwait)(w,"don't await ColumnDefinitionBuilder instances directly.")}),7243,[7244,7245,7139,7136,7161,7240,7246,7247,7248,7249]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.CheckConstraintNode=void 0;var n=r(d[0]),o=r(d[1]);e.CheckConstraintNode=(0,n.freeze)({is:n=>'CheckConstraintNode'===n.kind,create:(t,c)=>(0,n.freeze)({kind:'CheckConstraintNode',expression:t,name:c?o.IdentifierNode.create(c):void 0})})}),7244,[7110,7112]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ReferencesNode=e.ON_MODIFY_FOREIGN_ACTIONS=void 0;var n=r(d[0]);e.ON_MODIFY_FOREIGN_ACTIONS=['no action','restrict','cascade','set null','set default'],e.ReferencesNode=(0,n.freeze)({is:n=>'ReferencesNode'===n.kind,create:(t,o)=>(0,n.freeze)({kind:'ReferencesNode',table:t,columns:(0,n.freeze)([...o])}),cloneWithOnDelete:(t,o)=>(0,n.freeze)({...t,onDelete:o}),cloneWithOnUpdate:(t,o)=>(0,n.freeze)({...t,onUpdate:o})})}),7245,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.parseDefaultValueExpression=function(n){return(0,o.isOperationNodeSource)(n)?n.toOperationNode():t.ValueNode.createImmediate(n)};var o=r(d[0]),t=r(d[1])}),7246,[7124,7150]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.GeneratedNode=void 0;var n=r(d[0]);e.GeneratedNode=(0,n.freeze)({is:n=>'GeneratedNode'===n.kind,create:o=>(0,n.freeze)({kind:'GeneratedNode',...o}),createWithExpression:o=>(0,n.freeze)({kind:'GeneratedNode',always:!0,expression:o}),cloneWith:(o,t)=>(0,n.freeze)({...o,...t})})}),7247,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultValueNode=void 0;var u=r(d[0]);e.DefaultValueNode=(0,u.freeze)({is:u=>'DefaultValueNode'===u.kind,create:l=>(0,u.freeze)({kind:'DefaultValueNode',defaultValue:l})})}),7248,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.parseOnModifyForeignAction=function(o){if(n.ON_MODIFY_FOREIGN_ACTIONS.includes(o))return o;throw new Error(`invalid OnModifyForeignAction ${o}`)};var n=r(d[0])}),7249,[7245]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ModifyColumnNode=void 0;var o=r(d[0]);e.ModifyColumnNode=(0,o.freeze)({is:o=>'ModifyColumnNode'===o.kind,create:n=>(0,o.freeze)({kind:'ModifyColumnNode',column:n})})}),7250,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ForeignKeyConstraintBuilder=void 0;var n=r(d[0]),t=r(d[1]),o=r(d[2]);class s{#e;constructor(n){this.#e=n}onDelete(o){return new s(n.ForeignKeyConstraintNode.cloneWith(this.#e,{onDelete:(0,t.parseOnModifyForeignAction)(o)}))}onUpdate(o){return new s(n.ForeignKeyConstraintNode.cloneWith(this.#e,{onUpdate:(0,t.parseOnModifyForeignAction)(o)}))}$call(n){return n(this)}toOperationNode(){return this.#e}}e.ForeignKeyConstraintBuilder=s,(0,o.preventAwait)(s,"don't await ForeignKeyConstraintBuilder instances directly.")}),7251,[7252,7249,7161]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ForeignKeyConstraintNode=void 0;var n=r(d[0]),o=r(d[1]),t=r(d[2]);e.ForeignKeyConstraintNode=(0,n.freeze)({is:n=>'ForeignKeyConstraintNode'===n.kind,create:(c,s,f,N)=>(0,n.freeze)({kind:'ForeignKeyConstraintNode',columns:c,references:t.ReferencesNode.create(s,f),name:N?o.IdentifierNode.create(N):void 0}),cloneWith:(o,t)=>(0,n.freeze)({...o,...t})})}),7252,[7110,7112,7245]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.AddConstraintNode=void 0;var n=r(d[0]);e.AddConstraintNode=(0,n.freeze)({is:n=>'AddConstraintNode'===n.kind,create:t=>(0,n.freeze)({kind:'AddConstraintNode',constraint:t})})}),7253,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.UniqueConstraintNode=void 0;var n=r(d[0]),o=r(d[1]),t=r(d[2]);e.UniqueConstraintNode=(0,n.freeze)({is:n=>'UniqueConstraintNode'===n.kind,create:(u,s,c)=>(0,n.freeze)({kind:'UniqueConstraintNode',columns:(0,n.freeze)(u.map(o.ColumnNode.create)),name:s?t.IdentifierNode.create(s):void 0,nullsNotDistinct:c}),cloneWith:(o,t)=>(0,n.freeze)({...o,...t})})}),7254,[7110,7137,7112]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.DropConstraintNode=void 0;var o=r(d[0]),n=r(d[1]);e.DropConstraintNode=(0,o.freeze)({is:o=>'DropConstraintNode'===o.kind,create:t=>(0,o.freeze)({kind:'DropConstraintNode',constraintName:n.IdentifierNode.create(t)}),cloneWith:(n,t)=>(0,o.freeze)({...n,...t})})}),7255,[7110,7112]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.AlteredColumnBuilder=e.AlterColumnBuilder=void 0;var t=r(d[0]),l=r(d[1]),o=r(d[2]),n=r(d[3]);class u{#e;constructor(t){this.#e=t}setDataType(o){return new s(t.AlterColumnNode.create(this.#e,'dataType',(0,l.parseDataTypeExpression)(o)))}setDefault(l){return new s(t.AlterColumnNode.create(this.#e,'setDefault',(0,o.parseDefaultValueExpression)(l)))}dropDefault(){return new s(t.AlterColumnNode.create(this.#e,'dropDefault',!0))}setNotNull(){return new s(t.AlterColumnNode.create(this.#e,'setNotNull',!0))}dropNotNull(){return new s(t.AlterColumnNode.create(this.#e,'dropNotNull',!0))}$call(t){return t(this)}}e.AlterColumnBuilder=u,(0,n.preventAwait)(u,"don't await AlterColumnBuilder instances");class s{#t;constructor(t){this.#t=t}toOperationNode(){return this.#t}}e.AlteredColumnBuilder=s,(0,n.preventAwait)(s,"don't await AlteredColumnBuilder instances")}),7256,[7257,7235,7246,7161]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.AlterColumnNode=void 0;var o=r(d[0]),l=r(d[1]);e.AlterColumnNode=(0,o.freeze)({is:o=>'AlterColumnNode'===o.kind,create:(n,t,u)=>(0,o.freeze)({kind:'AlterColumnNode',column:l.ColumnNode.create(n),[t]:u})})}),7257,[7110,7137]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.AlterTableExecutor=void 0;var t=r(d[0]),o=r(d[1]);class s{#e;constructor(o){this.#e=(0,t.freeze)(o)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}e.AlterTableExecutor=s,(0,o.preventAwait)(s,"don't await AlterTableExecutor instances directly. To execute the query you need to call `execute`")}),7258,[7110,7161]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.AlterTableAddForeignKeyConstraintBuilder=void 0;var t=r(d[0]),o=r(d[1]),n=r(d[2]),s=r(d[3]);class p{#e;constructor(t){this.#e=(0,n.freeze)(t)}onDelete(t){return new p({...this.#e,constraintBuilder:this.#e.constraintBuilder.onDelete(t)})}onUpdate(t){return new p({...this.#e,constraintBuilder:this.#e.constraintBuilder.onUpdate(t)})}$call(t){return t(this)}toOperationNode(){return this.#e.executor.transformQuery(o.AlterTableNode.cloneWithTableProps(this.#e.node,{addConstraint:t.AddConstraintNode.create(this.#e.constraintBuilder.toOperationNode())}),this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}e.AlterTableAddForeignKeyConstraintBuilder=p,(0,s.preventAwait)(p,"don't await AlterTableAddForeignKeyConstraintBuilder instances directly. To execute the query you need to call `execute`")}),7259,[7253,7109,7110,7161]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.AlterTableDropConstraintBuilder=void 0;var t=r(d[0]),o=r(d[1]),s=r(d[2]),n=r(d[3]);class p{#e;constructor(t){this.#e=(0,s.freeze)(t)}ifExists(){return new p({...this.#e,node:t.AlterTableNode.cloneWithTableProps(this.#e.node,{dropConstraint:o.DropConstraintNode.cloneWith(this.#e.node.dropConstraint,{ifExists:!0})})})}cascade(){return new p({...this.#e,node:t.AlterTableNode.cloneWithTableProps(this.#e.node,{dropConstraint:o.DropConstraintNode.cloneWith(this.#e.node.dropConstraint,{modifier:'cascade'})})})}restrict(){return new p({...this.#e,node:t.AlterTableNode.cloneWithTableProps(this.#e.node,{dropConstraint:o.DropConstraintNode.cloneWith(this.#e.node.dropConstraint,{modifier:'restrict'})})})}$call(t){return t(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}e.AlterTableDropConstraintBuilder=p,(0,n.preventAwait)(p,"don't await AlterTableDropConstraintBuilder instances directly. To execute the query you need to call `execute`")}),7260,[7109,7255,7110,7161]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PrimaryConstraintNode=void 0;var n=r(d[0]),o=r(d[1]),t=r(d[2]);e.PrimaryConstraintNode=(0,n.freeze)({is:n=>'PrimaryKeyConstraintNode'===n.kind,create:(s,y)=>(0,n.freeze)({kind:'PrimaryKeyConstraintNode',columns:(0,n.freeze)(s.map(o.ColumnNode.create)),name:y?t.IdentifierNode.create(y):void 0})})}),7261,[7110,7137,7112]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.AddIndexNode=void 0;var n=r(d[0]),o=r(d[1]);e.AddIndexNode=(0,n.freeze)({is:n=>'AddIndexNode'===n.kind,create:c=>(0,n.freeze)({kind:'AddIndexNode',name:o.IdentifierNode.create(c)}),cloneWith:(o,c)=>(0,n.freeze)({...o,...c}),cloneWithColumns:(o,c)=>(0,n.freeze)({...o,columns:[...o.columns||[],...c]})})}),7262,[7110,7112]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.AlterTableAddIndexBuilder=void 0;var o=r(d[0]),n=r(d[1]),t=r(d[2]),s=r(d[3]),p=r(d[4]),l=r(d[5]);class u{#e;constructor(o){this.#e=(0,p.freeze)(o)}unique(){return new u({...this.#e,node:n.AlterTableNode.cloneWithTableProps(this.#e.node,{addIndex:o.AddIndexNode.cloneWith(this.#e.node.addIndex,{unique:!0})})})}column(t){return new u({...this.#e,node:n.AlterTableNode.cloneWithTableProps(this.#e.node,{addIndex:o.AddIndexNode.cloneWithColumns(this.#e.node.addIndex,[(0,s.parseOrderedColumnName)(t)])})})}columns(t){return new u({...this.#e,node:n.AlterTableNode.cloneWithTableProps(this.#e.node,{addIndex:o.AddIndexNode.cloneWithColumns(this.#e.node.addIndex,t.map(s.parseOrderedColumnName))})})}expression(t){return new u({...this.#e,node:n.AlterTableNode.cloneWithTableProps(this.#e.node,{addIndex:o.AddIndexNode.cloneWithColumns(this.#e.node.addIndex,[t.toOperationNode()])})})}using(s){return new u({...this.#e,node:n.AlterTableNode.cloneWithTableProps(this.#e.node,{addIndex:o.AddIndexNode.cloneWith(this.#e.node.addIndex,{using:t.RawNode.createWithSql(s)})})})}$call(o){return o(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}e.AlterTableAddIndexBuilder=u,(0,l.preventAwait)(u,"don't await AlterTableAddIndexBuilder instances directly. To execute the query you need to call `execute`")}),7263,[7262,7109,7143,7136,7110,7161]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.UniqueConstraintNodeBuilder=void 0;var n=r(d[0]),t=r(d[1]);class o{#n;constructor(n){this.#n=n}toOperationNode(){return this.#n}nullsNotDistinct(){return new o(n.UniqueConstraintNode.cloneWith(this.#n,{nullsNotDistinct:!0}))}}e.UniqueConstraintNodeBuilder=o,(0,t.preventAwait)(o,"don't await UniqueConstraintNodeBuilder instances directly.")}),7264,[7254,7161]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.CreateIndexBuilder=void 0;var o=r(d[0]),t=r(d[1]),n=r(d[2]),s=r(d[3]),p=r(d[4]),u=r(d[5]),h=r(d[6]),l=r(d[7]),c=r(d[8]);class x{#e;constructor(o){this.#e=(0,u.freeze)(o)}ifNotExists(){return new x({...this.#e,node:o.CreateIndexNode.cloneWith(this.#e.node,{ifNotExists:!0})})}unique(){return new x({...this.#e,node:o.CreateIndexNode.cloneWith(this.#e.node,{unique:!0})})}nullsNotDistinct(){return new x({...this.#e,node:o.CreateIndexNode.cloneWith(this.#e.node,{nullsNotDistinct:!0})})}on(t){return new x({...this.#e,node:o.CreateIndexNode.cloneWith(this.#e.node,{table:(0,s.parseTable)(t)})})}column(t){return new x({...this.#e,node:o.CreateIndexNode.cloneWithColumns(this.#e.node,[(0,n.parseOrderedColumnName)(t)])})}columns(t){return new x({...this.#e,node:o.CreateIndexNode.cloneWithColumns(this.#e.node,t.map(n.parseOrderedColumnName))})}expression(t){return new x({...this.#e,node:o.CreateIndexNode.cloneWithColumns(this.#e.node,[t.toOperationNode()])})}using(n){return new x({...this.#e,node:o.CreateIndexNode.cloneWith(this.#e.node,{using:t.RawNode.createWithSql(n)})})}where(...o){const t=new c.ImmediateValueTransformer;return new x({...this.#e,node:l.QueryNode.cloneWithWhere(this.#e.node,t.transformNode((0,h.parseValueBinaryOperationOrExpression)(o)))})}$call(o){return o(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}e.CreateIndexBuilder=x,(0,p.preventAwait)(x,"don't await CreateIndexBuilder instances directly. To execute the query you need to call `execute`")}),7265,[7111,7143,7136,7119,7161,7110,7133,7173,7266]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ImmediateValueTransformer=void 0;var n=r(d[0]);class o extends n.OperationNodeTransformer{transformValue(n){return{...super.transformValue(n),immediate:!0}}}e.ImmediateValueTransformer=o}),7266,[7206]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.CreateSchemaBuilder=void 0;var t=r(d[0]),o=r(d[1]),s=r(d[2]);class p{#e;constructor(t){this.#e=(0,s.freeze)(t)}ifNotExists(){return new p({...this.#e,node:t.CreateSchemaNode.cloneWith(this.#e.node,{ifNotExists:!0})})}$call(t){return t(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}e.CreateSchemaBuilder=p,(0,o.preventAwait)(p,"don't await CreateSchemaBuilder instances directly. To execute the query you need to call `execute`")}),7267,[7113,7161,7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.CreateTableBuilder=void 0;var o=r(d[0]),t=r(d[1]),n=r(d[2]),s=r(d[3]),p=r(d[4]),l=r(d[5]),u=r(d[6]),h=r(d[7]),c=r(d[8]),C=r(d[9]),N=r(d[10]),y=r(d[11]),w=r(d[12]),T=r(d[13]),b=r(d[14]),f=r(d[15]);class x{#e;constructor(o){this.#e=(0,p.freeze)(o)}temporary(){return new x({...this.#e,node:t.CreateTableNode.cloneWith(this.#e.node,{temporary:!0})})}onCommit(o){return new x({...this.#e,node:t.CreateTableNode.cloneWith(this.#e.node,{onCommit:(0,T.parseOnCommitAction)(o)})})}ifNotExists(){return new x({...this.#e,node:t.CreateTableNode.cloneWith(this.#e.node,{ifNotExists:!0})})}addColumn(n,l,u=p.noop){const h=u(new s.ColumnDefinitionBuilder(o.ColumnDefinitionNode.create(n,(0,c.parseDataTypeExpression)(l))));return new x({...this.#e,node:t.CreateTableNode.cloneWithColumn(this.#e.node,h.toOperationNode())})}addPrimaryKeyConstraint(o,n){return new x({...this.#e,node:t.CreateTableNode.cloneWithConstraint(this.#e.node,C.PrimaryConstraintNode.create(n,o))})}addUniqueConstraint(o,n,s=p.noop){const l=s(new b.UniqueConstraintNodeBuilder(N.UniqueConstraintNode.create(n,o)));return new x({...this.#e,node:t.CreateTableNode.cloneWithConstraint(this.#e.node,l.toOperationNode())})}addCheckConstraint(o,n){return new x({...this.#e,node:t.CreateTableNode.cloneWithConstraint(this.#e.node,y.CheckConstraintNode.create(n.toOperationNode(),o))})}addForeignKeyConstraint(o,n,s,c,C=p.noop){const N=C(new h.ForeignKeyConstraintBuilder(l.ForeignKeyConstraintNode.create(n.map(u.ColumnNode.create),(0,w.parseTable)(s),c.map(u.ColumnNode.create),o)));return new x({...this.#e,node:t.CreateTableNode.cloneWithConstraint(this.#e.node,N.toOperationNode())})}modifyFront(o){return new x({...this.#e,node:t.CreateTableNode.cloneWithFrontModifier(this.#e.node,o.toOperationNode())})}modifyEnd(o){return new x({...this.#e,node:t.CreateTableNode.cloneWithEndModifier(this.#e.node,o.toOperationNode())})}as(o){return new x({...this.#e,node:t.CreateTableNode.cloneWith(this.#e.node,{selectQuery:(0,f.parseExpression)(o)})})}$call(o){return o(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}e.CreateTableBuilder=x,(0,n.preventAwait)(x,"don't await CreateTableBuilder instances directly. To execute the query you need to call `execute`")}),7268,[7240,7114,7161,7243,7110,7252,7137,7251,7235,7261,7254,7244,7119,7269,7264,7122]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.parseOnCommitAction=function(o){if(n.ON_COMMIT_ACTIONS.includes(o))return o;throw new Error(`invalid OnCommitAction ${o}`)};var n=r(d[0])}),7269,[7114]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.DropIndexBuilder=void 0;var o=r(d[0]),t=r(d[1]),s=r(d[2]),p=r(d[3]);class n{#e;constructor(o){this.#e=(0,p.freeze)(o)}on(t){return new n({...this.#e,node:o.DropIndexNode.cloneWith(this.#e.node,{table:(0,s.parseTable)(t)})})}ifExists(){return new n({...this.#e,node:o.DropIndexNode.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new n({...this.#e,node:o.DropIndexNode.cloneWith(this.#e.node,{cascade:!0})})}$call(o){return o(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}e.DropIndexBuilder=n,(0,t.preventAwait)(n,"don't await DropIndexBuilder instances directly. To execute the query you need to call `execute`")}),7270,[7115,7161,7119,7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.DropSchemaBuilder=void 0;var o=r(d[0]),t=r(d[1]),s=r(d[2]);class p{#e;constructor(o){this.#e=(0,s.freeze)(o)}ifExists(){return new p({...this.#e,node:o.DropSchemaNode.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new p({...this.#e,node:o.DropSchemaNode.cloneWith(this.#e.node,{cascade:!0})})}$call(o){return o(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}e.DropSchemaBuilder=p,(0,t.preventAwait)(p,"don't await DropSchemaBuilder instances directly. To execute the query you need to call `execute`")}),7271,[7117,7161,7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.DropTableBuilder=void 0;var o=r(d[0]),t=r(d[1]),s=r(d[2]);class p{#e;constructor(o){this.#e=(0,s.freeze)(o)}ifExists(){return new p({...this.#e,node:o.DropTableNode.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new p({...this.#e,node:o.DropTableNode.cloneWith(this.#e.node,{cascade:!0})})}$call(o){return o(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}e.DropTableBuilder=p,(0,t.preventAwait)(p,"don't await DropTableBuilder instances directly. To execute the query you need to call `execute`")}),7272,[7118,7161,7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.CreateViewBuilder=void 0;var t=r(d[0]),o=r(d[1]),s=r(d[2]),p=r(d[3]),n=r(d[4]);class u{#e;constructor(t){this.#e=(0,o.freeze)(t)}temporary(){return new u({...this.#e,node:s.CreateViewNode.cloneWith(this.#e.node,{temporary:!0})})}materialized(){return new u({...this.#e,node:s.CreateViewNode.cloneWith(this.#e.node,{materialized:!0})})}ifNotExists(){return new u({...this.#e,node:s.CreateViewNode.cloneWith(this.#e.node,{ifNotExists:!0})})}orReplace(){return new u({...this.#e,node:s.CreateViewNode.cloneWith(this.#e.node,{orReplace:!0})})}columns(t){return new u({...this.#e,node:s.CreateViewNode.cloneWith(this.#e.node,{columns:t.map(p.parseColumnName)})})}as(t){const o=t.withPlugin(new n.ImmediateValuePlugin).toOperationNode();return new u({...this.#e,node:s.CreateViewNode.cloneWith(this.#e.node,{as:o})})}$call(t){return t(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}e.CreateViewBuilder=u,(0,t.preventAwait)(u,"don't await CreateViewBuilder instances directly. To execute the query you need to call `execute`")}),7273,[7161,7110,7274,7136,7275]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.CreateViewNode=void 0;var t=r(d[0]),o=r(d[1]);e.CreateViewNode=(0,t.freeze)({is:t=>'CreateViewNode'===t.kind,create:n=>(0,t.freeze)({kind:'CreateViewNode',name:o.SchemableIdentifierNode.create(n)}),cloneWith:(o,n)=>(0,t.freeze)({...o,...n})})}),7274,[7110,7116]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ImmediateValuePlugin=void 0;var t=r(d[0]);e.ImmediateValuePlugin=class{#e=new t.ImmediateValueTransformer;transformQuery(t){return this.#e.transformNode(t.node)}transformResult(t){return Promise.resolve(t.result)}}}),7275,[7266]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.DropViewBuilder=void 0;var o=r(d[0]),t=r(d[1]),s=r(d[2]);class p{#e;constructor(o){this.#e=(0,t.freeze)(o)}materialized(){return new p({...this.#e,node:s.DropViewNode.cloneWith(this.#e.node,{materialized:!0})})}ifExists(){return new p({...this.#e,node:s.DropViewNode.cloneWith(this.#e.node,{ifExists:!0})})}cascade(){return new p({...this.#e,node:s.DropViewNode.cloneWith(this.#e.node,{cascade:!0})})}$call(o){return o(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}e.DropViewBuilder=p,(0,o.preventAwait)(p,"don't await DropViewBuilder instances directly. To execute the query you need to call `execute`")}),7276,[7161,7110,7277]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.DropViewNode=void 0;var o=r(d[0]),n=r(d[1]);e.DropViewNode=(0,o.freeze)({is:o=>'DropViewNode'===o.kind,create:t=>(0,o.freeze)({kind:'DropViewNode',name:n.SchemableIdentifierNode.create(t)}),cloneWith:(n,t)=>(0,o.freeze)({...n,...t})})}),7277,[7110,7116]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.CreateTypeBuilder=void 0;var t=r(d[0]),o=r(d[1]),p=r(d[2]);class s{#e;constructor(t){this.#e=(0,o.freeze)(t)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}asEnum(t){return new s({...this.#e,node:p.CreateTypeNode.cloneWithEnum(this.#e.node,t)})}$call(t){return t(this)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}e.CreateTypeBuilder=s,(0,t.preventAwait)(s,"don't await CreateTypeBuilder instances directly. To execute the query you need to call `execute`")}),7278,[7161,7110,7279]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.CreateTypeNode=void 0;var t=r(d[0]),o=r(d[1]),n=r(d[2]);e.CreateTypeNode=(0,t.freeze)({is:t=>'CreateTypeNode'===t.kind,create:o=>(0,t.freeze)({kind:'CreateTypeNode',name:o}),cloneWithEnum:(u,c)=>(0,t.freeze)({...u,enum:o.ValueListNode.create(c.map((t=>n.ValueNode.createImmediate(t))))})})}),7279,[7110,7149,7150]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.DropTypeBuilder=void 0;var t=r(d[0]),o=r(d[1]),p=r(d[2]);class s{#e;constructor(t){this.#e=(0,p.freeze)(t)}ifExists(){return new s({...this.#e,node:t.DropTypeNode.cloneWith(this.#e.node,{ifExists:!0})})}$call(t){return t(this)}toOperationNode(){return this.#e.executor.transformQuery(this.#e.node,this.#e.queryId)}compile(){return this.#e.executor.compileQuery(this.toOperationNode(),this.#e.queryId)}async execute(){await this.#e.executor.executeQuery(this.compile(),this.#e.queryId)}}e.DropTypeBuilder=s,(0,o.preventAwait)(s,"don't await DropTypeBuilder instances directly. To execute the query you need to call `execute`")}),7280,[7281,7161,7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.DropTypeNode=void 0;var o=r(d[0]);e.DropTypeNode=(0,o.freeze)({is:o=>'DropTypeNode'===o.kind,create:p=>(0,o.freeze)({kind:'DropTypeNode',name:p}),cloneWith:(p,n)=>(0,o.freeze)({...p,...n})})}),7281,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.parseSchemableIdentifier=function(c){if(c.includes(".")){const f=c.split(".").map(n);if(2===f.length)return t.SchemableIdentifierNode.createWithSchema(f[0],f[1]);throw new Error(`invalid schemable identifier ${c}`)}return t.SchemableIdentifierNode.create(c)};var t=r(d[0]);function n(t){return t.trim()}}),7282,[7116]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.DynamicModule=void 0;var n=r(d[0]);e.DynamicModule=class{ref(c){return new n.DynamicReferenceBuilder(c)}}}),7283,[7141]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultConnectionProvider=void 0;e.DefaultConnectionProvider=class{#e;constructor(n){this.#e=n}async provideConnection(n){const t=await this.#e.acquireConnection();try{return await n(t)}finally{await this.#e.releaseConnection(t)}}}}),7284,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultQueryExecutor=void 0;var t=r(d[0]);class n extends t.QueryExecutorBase{#e;#t;#i;constructor(t,n,o,s=[]){super(s),this.#e=t,this.#t=n,this.#i=o}get adapter(){return this.#t}compileQuery(t){return this.#e.compileQuery(t)}provideConnection(t){return this.#i.provideConnection(t)}withPlugins(t){return new n(this.#e,this.#t,this.#i,[...this.plugins,...t])}withPlugin(t){return new n(this.#e,this.#t,this.#i,[...this.plugins,t])}withPluginAtFront(t){return new n(this.#e,this.#t,this.#i,[t,...this.plugins])}withConnectionProvider(t){return new n(this.#e,this.#t,t,[...this.plugins])}withoutPlugins(){return new n(this.#e,this.#t,this.#i,[])}}e.DefaultQueryExecutor=n}),7285,[7212]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.RuntimeDriver=void 0;var l=t(r(d[1])),n=t(r(d[2])),u=r(d[3]),s=(0,n.default)("driver"),o=(0,n.default)("log"),f=(0,n.default)("initPromise"),c=(0,n.default)("initDone"),h=(0,n.default)("destroyPromise"),y=(0,n.default)("connections"),v=(0,n.default)("needsLogging"),b=(0,n.default)("addLogging"),w=(0,n.default)("logError"),P=(0,n.default)("logQuery"),j=(0,n.default)("calculateDurationMillis");function p(){return(0,l.default)(this,o)[o].isLevelEnabled('query')||(0,l.default)(this,o)[o].isLevelEnabled('error')}function O(t){const n=t.executeQuery;t.executeQuery=async s=>{let o;const f=(0,u.performanceNow)();try{return await n.call(t,s)}catch(t){throw o=t,await(0,l.default)(this,w)[w](t,s,f),t}finally{o||await(0,l.default)(this,P)[P](s,f)}}}async function q(t,n,u){await(0,l.default)(this,o)[o].error((()=>({level:'error',error:t,query:n,queryDurationMillis:(0,l.default)(this,j)[j](u)})))}async function D(t,n){await(0,l.default)(this,o)[o].query((()=>({level:'query',query:t,queryDurationMillis:(0,l.default)(this,j)[j](n)})))}function T(t){return(0,u.performanceNow)()-t}e.RuntimeDriver=class{constructor(t,n){Object.defineProperty(this,j,{value:T}),Object.defineProperty(this,P,{value:D}),Object.defineProperty(this,w,{value:q}),Object.defineProperty(this,b,{value:O}),Object.defineProperty(this,v,{value:p}),Object.defineProperty(this,s,{writable:!0,value:void 0}),Object.defineProperty(this,o,{writable:!0,value:void 0}),Object.defineProperty(this,f,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,h,{writable:!0,value:void 0}),Object.defineProperty(this,y,{writable:!0,value:new WeakSet}),(0,l.default)(this,c)[c]=!1,(0,l.default)(this,s)[s]=t,(0,l.default)(this,o)[o]=n}async init(){if((0,l.default)(this,h)[h])throw new Error('driver has already been destroyed');(0,l.default)(this,f)[f]||((0,l.default)(this,f)[f]=(0,l.default)(this,s)[s].init().then((()=>{(0,l.default)(this,c)[c]=!0})).catch((t=>((0,l.default)(this,f)[f]=void 0,Promise.reject(t))))),await(0,l.default)(this,f)[f]}async acquireConnection(){if((0,l.default)(this,h)[h])throw new Error('driver has already been destroyed');(0,l.default)(this,c)[c]||await this.init();const t=await(0,l.default)(this,s)[s].acquireConnection();return(0,l.default)(this,y)[y].has(t)||((0,l.default)(this,v)[v]()&&(0,l.default)(this,b)[b](t),(0,l.default)(this,y)[y].add(t)),t}async releaseConnection(t){await(0,l.default)(this,s)[s].releaseConnection(t)}beginTransaction(t,n){return(0,l.default)(this,s)[s].beginTransaction(t,n)}commitTransaction(t){return(0,l.default)(this,s)[s].commitTransaction(t)}rollbackTransaction(t){return(0,l.default)(this,s)[s].rollbackTransaction(t)}async destroy(){(0,l.default)(this,f)[f]&&(await(0,l.default)(this,f)[f],(0,l.default)(this,h)[h]||((0,l.default)(this,h)[h]=(0,l.default)(this,s)[s].destroy().catch((t=>((0,l.default)(this,h)[h]=void 0,Promise.reject(t))))),await(0,l.default)(this,h)[h])}}}),7286,[16,3270,3271,7287]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.performanceNow=function(){return'undefined'!=typeof performance&&(0,n.isFunction)(performance.now)?performance.now():Date.now()};var n=r(d[0])}),7287,[7110]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.SingleConnectionProvider=void 0;var n=t(r(d[1])),o=t(r(d[2]));const l=()=>{};var u=(0,o.default)("connection"),c=(0,o.default)("runningPromise"),f=(0,o.default)("run");async function s(t){return await t((0,n.default)(this,u)[u])}e.SingleConnectionProvider=class{constructor(t){Object.defineProperty(this,f,{value:s}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),(0,n.default)(this,u)[u]=t}async provideConnection(t){for(;(0,n.default)(this,c)[c];)await(0,n.default)(this,c)[c].catch(l);return(0,n.default)(this,c)[c]=(0,n.default)(this,f)[f](t).finally((()=>{(0,n.default)(this,c)[c]=void 0})),(0,n.default)(this,c)[c]}}}),7288,[16,3270,3271]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.TRANSACTION_ISOLATION_LEVELS=void 0;e.TRANSACTION_ISOLATION_LEVELS=['read uncommitted','read committed','repeatable read','serializable','snapshot']}),7289,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.Log=e.LOG_LEVELS=void 0;var o=r(d[0]);e.LOG_LEVELS=(0,o.freeze)(['query','error']);function l(o){'query'===o.level?(console.log(`kysely:query: ${o.query.sql}`),console.log(`kysely:query: duration: ${o.queryDurationMillis.toFixed(1)}ms`)):'error'===o.level&&(o.error instanceof Error?console.error(`kysely:error: ${o.error.stack??o.error.message}`):console.error(`kysely:error: ${JSON.stringify({error:o.error,query:o.query.sql,queryDurationMillis:o.queryDurationMillis})}`))}e.Log=class{#e;#r;constructor(s){(0,o.isFunction)(s)?(this.#r=s,this.#e=(0,o.freeze)({query:!0,error:!0})):(this.#r=l,this.#e=(0,o.freeze)({query:s.includes('query'),error:s.includes('error')}))}isLevelEnabled(o){return this.#e[o]}async query(o){this.#e.query&&await this.#r(o())}async error(o){this.#e.error&&await this.#r(o())}}}),7290,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.isCompilable=function(o){return(0,n.isObject)(o)&&(0,n.isFunction)(o.compile)};var n=r(d[0])}),7291,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0})}),7292,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0})}),7293,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0})}),7294,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0})}),7295,[]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.createRawBuilder=function(t){return new O(t)};var u=t(r(d[1])),s=t(r(d[2])),l=r(d[3]),n=r(d[4]),o=r(d[5]),c=r(d[6]),f=r(d[7]),h=r(d[8]),p=(0,s.default)("props"),w=(0,s.default)("getExecutor"),y=(0,s.default)("toOperationNode"),v=(0,s.default)("compile");class O{constructor(t){Object.defineProperty(this,v,{value:x}),Object.defineProperty(this,y,{value:N}),Object.defineProperty(this,w,{value:B}),Object.defineProperty(this,p,{writable:!0,value:void 0}),(0,u.default)(this,p)[p]=(0,o.freeze)(t)}get expressionType(){}get isRawBuilder(){return!0}as(t){return new P(this,t)}$castTo(){return new O({...(0,u.default)(this,p)[p]})}$notNull(){return new O((0,u.default)(this,p)[p])}withPlugin(t){return new O({...(0,u.default)(this,p)[p],plugins:void 0!==(0,u.default)(this,p)[p].plugins?(0,o.freeze)([...(0,u.default)(this,p)[p].plugins,t]):(0,o.freeze)([t])})}toOperationNode(){return(0,u.default)(this,y)[y]((0,u.default)(this,w)[w]())}compile(t){return(0,u.default)(this,v)[v]((0,u.default)(this,w)[w](t))}async execute(t){const s=(0,u.default)(this,w)[w](t);return s.executeQuery((0,u.default)(this,v)[v](s),(0,u.default)(this,p)[p].queryId)}}function B(t){const s=void 0!==t?t.getExecutor():c.NOOP_QUERY_EXECUTOR;return void 0!==(0,u.default)(this,p)[p].plugins?s.withPlugins((0,u.default)(this,p)[p].plugins):s}function N(t){return t.transformQuery((0,u.default)(this,p)[p].rawNode,(0,u.default)(this,p)[p].queryId)}function x(t){return t.compileQuery((0,u.default)(this,y)[y](t),(0,u.default)(this,p)[p].queryId)}(0,n.preventAwait)(O,"don't await RawBuilder instances directly. To execute the query you need to call `execute`");class P{#e;#t;constructor(t,u){this.#e=t,this.#t=u}get expression(){return this.#e}get alias(){return this.#t}get rawBuilder(){return this.#e}toOperationNode(){return l.AliasNode.create(this.#e.toOperationNode(),(0,h.isOperationNodeSource)(this.#t)?this.#t.toOperationNode():f.IdentifierNode.create(this.#t))}}(0,n.preventAwait)(P,"don't await AliasedRawBuilder instances directly. AliasedRawBuilder should never be executed directly since it's always a part of another query.")}),7296,[16,3270,3271,7120,7161,7110,7211,7112,7124]);
__d((function(g,r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.sql=void 0;var t=r(d[0]),i=r(d[1]),o=r(d[2]),l=r(d[3]),u=r(d[4]),c=r(d[5]),n=r(d[6]),w=r(d[7]),N=r(d[8]);const s=e.sql=Object.assign(((t,...i)=>(0,N.createRawBuilder)({queryId:(0,w.createQueryId)(),rawNode:o.RawNode.create(t,i?.map(y)??[])})),{ref:t=>(0,N.createRawBuilder)({queryId:(0,w.createQueryId)(),rawNode:o.RawNode.createWithChild((0,u.parseStringReference)(t))}),val:t=>(0,N.createRawBuilder)({queryId:(0,w.createQueryId)(),rawNode:o.RawNode.createWithChild((0,n.parseValueExpression)(t))}),value(t){return this.val(t)},table:t=>(0,N.createRawBuilder)({queryId:(0,w.createQueryId)(),rawNode:o.RawNode.createWithChild((0,c.parseTable)(t))}),id(...i){const l=new Array(i.length+1).fill('.');return l[0]='',l[l.length-1]='',(0,N.createRawBuilder)({queryId:(0,w.createQueryId)(),rawNode:o.RawNode.create(l,i.map(t.IdentifierNode.create))})},lit:t=>(0,N.createRawBuilder)({queryId:(0,w.createQueryId)(),rawNode:o.RawNode.createWithChild(l.ValueNode.createImmediate(t))}),literal(t){return this.lit(t)},raw:t=>(0,N.createRawBuilder)({queryId:(0,w.createQueryId)(),rawNode:o.RawNode.createWithSql(t)}),join(t,i=s`, `){const l=new Array(2*t.length-1),u=i.toOperationNode();for(let i=0;i<t.length;++i)l[2*i]=y(t[i]),i!==t.length-1&&(l[2*i+1]=u);return(0,N.createRawBuilder)({queryId:(0,w.createQueryId)(),rawNode:o.RawNode.createWithChildren(l)})}});function y(t){return(0,i.isOperationNodeSource)(t)?t.toOperationNode():(0,n.parseValueExpression)(t)}}),7297,[7112,7124,7143,7150,7136,7119,7147,7202,7296]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0})}),7298,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0})}),7299,[]);
__d((function(g,r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultQueryCompiler=void 0;var i=r(d[0]),t=r(d[1]),s=r(d[2]),p=r(d[3]),n=r(d[4]),o=r(d[5]),h=r(d[6]),l=r(d[7]),v=r(d[8]),u=r(d[9]);class c extends s.OperationNodeVisitor{#i='';#t=[];get numParameters(){return this.#t.length}compileQuery(i){return this.#i='',this.#t=[],this.nodeStack.splice(0,this.nodeStack.length),this.visitNode(i),(0,h.freeze)({query:i,sql:this.getSql(),parameters:[...this.#t]})}getSql(){return this.#i}visitSelectQuery(s){const p=!(void 0===this.parentNode||n.ParensNode.is(this.parentNode)||t.InsertQueryNode.is(this.parentNode)||i.CreateTableNode.is(this.parentNode)||l.CreateViewNode.is(this.parentNode)||v.SetOperationNode.is(this.parentNode));void 0===this.parentNode&&s.explain&&(this.visitNode(s.explain),this.append(' ')),p&&this.append('('),s.with&&(this.visitNode(s.with),this.append(' ')),this.append('select'),s.distinctOn&&(this.append(' '),this.compileDistinctOn(s.distinctOn)),s.frontModifiers?.length&&(this.append(' '),this.compileList(s.frontModifiers,' ')),s.top&&(this.append(' '),this.visitNode(s.top)),s.selections&&(this.append(' '),this.compileList(s.selections)),s.from&&(this.append(' '),this.visitNode(s.from)),s.joins&&(this.append(' '),this.compileList(s.joins,' ')),s.where&&(this.append(' '),this.visitNode(s.where)),s.groupBy&&(this.append(' '),this.visitNode(s.groupBy)),s.having&&(this.append(' '),this.visitNode(s.having)),s.setOperations&&(this.append(' '),this.compileList(s.setOperations,' ')),s.orderBy&&(this.append(' '),this.visitNode(s.orderBy)),s.limit&&(this.append(' '),this.visitNode(s.limit)),s.offset&&(this.append(' '),this.visitNode(s.offset)),s.fetch&&(this.append(' '),this.visitNode(s.fetch)),s.endModifiers?.length&&(this.append(' '),this.compileList(this.sortSelectModifiers([...s.endModifiers]),' ')),p&&this.append(')')}visitFrom(i){this.append('from '),this.compileList(i.froms)}visitSelection(i){this.visitNode(i.selection)}visitColumn(i){this.visitNode(i.column)}compileDistinctOn(i){this.append('distinct on ('),this.compileList(i),this.append(')')}compileList(i,t=", "){const s=i.length-1;for(let p=0;p<=s;p++)this.visitNode(i[p]),p<s&&this.append(t)}visitWhere(i){this.append('where '),this.visitNode(i.where)}visitHaving(i){this.append('having '),this.visitNode(i.having)}visitInsertQuery(i){const t=this.nodeStack.find(o.QueryNode.is),s=t!==i;!s&&i.explain&&(this.visitNode(i.explain),this.append(' ')),s&&!u.MergeQueryNode.is(t)&&this.append('('),i.with&&(this.visitNode(i.with),this.append(' ')),this.append(i.replace?'replace':'insert'),i.ignore&&this.append(' ignore'),i.top&&(this.append(' '),this.visitNode(i.top)),i.into&&(this.append(' into '),this.visitNode(i.into)),i.columns&&(this.append(' ('),this.compileList(i.columns),this.append(')')),i.output&&(this.append(' '),this.visitNode(i.output)),i.values&&(this.append(' '),this.visitNode(i.values)),i.defaultValues&&(this.append(' '),this.append('default values')),i.onConflict&&(this.append(' '),this.visitNode(i.onConflict)),i.onDuplicateKey&&(this.append(' '),this.visitNode(i.onDuplicateKey)),i.returning&&(this.append(' '),this.visitNode(i.returning)),s&&!u.MergeQueryNode.is(t)&&this.append(')'),i.endModifiers?.length&&(this.append(' '),this.compileList(i.endModifiers,' '))}visitValues(i){this.append('values '),this.compileList(i.values)}visitDeleteQuery(i){const t=this.nodeStack.find(o.QueryNode.is)!==i;!t&&i.explain&&(this.visitNode(i.explain),this.append(' ')),t&&this.append('('),i.with&&(this.visitNode(i.with),this.append(' ')),this.append('delete '),i.top&&(this.visitNode(i.top),this.append(' ')),this.visitNode(i.from),i.output&&(this.append(' '),this.visitNode(i.output)),i.using&&(this.append(' '),this.visitNode(i.using)),i.joins&&(this.append(' '),this.compileList(i.joins,' ')),i.where&&(this.append(' '),this.visitNode(i.where)),i.orderBy&&(this.append(' '),this.visitNode(i.orderBy)),i.limit&&(this.append(' '),this.visitNode(i.limit)),i.returning&&(this.append(' '),this.visitNode(i.returning)),t&&this.append(')'),i.endModifiers?.length&&(this.append(' '),this.compileList(i.endModifiers,' '))}visitReturning(i){this.append('returning '),this.compileList(i.selections)}visitAlias(i){this.visitNode(i.node),this.append(' as '),this.visitNode(i.alias)}visitReference(i){i.table&&(this.visitNode(i.table),this.append('.')),this.visitNode(i.column)}visitSelectAll(i){this.append('*')}visitIdentifier(i){this.append(this.getLeftIdentifierWrapper()),this.compileUnwrappedIdentifier(i),this.append(this.getRightIdentifierWrapper())}compileUnwrappedIdentifier(i){if(!(0,h.isString)(i.name))throw new Error('a non-string identifier was passed to compileUnwrappedIdentifier.');this.append(this.sanitizeIdentifier(i.name))}visitAnd(i){this.visitNode(i.left),this.append(' and '),this.visitNode(i.right)}visitOr(i){this.visitNode(i.left),this.append(' or '),this.visitNode(i.right)}visitValue(i){i.immediate?this.appendImmediateValue(i.value):this.appendValue(i.value)}visitValueList(i){this.append('('),this.compileList(i.values),this.append(')')}visitTuple(i){this.append('('),this.compileList(i.values),this.append(')')}visitPrimitiveValueList(i){this.append('(');const{values:t}=i;for(let i=0;i<t.length;++i)this.appendValue(t[i]),i!==t.length-1&&this.append(', ');this.append(')')}visitParens(i){this.append('('),this.visitNode(i.node),this.append(')')}visitJoin(i){this.append(y[i.joinType]),this.append(' '),this.visitNode(i.table),i.on&&(this.append(' '),this.visitNode(i.on))}visitOn(i){this.append('on '),this.visitNode(i.on)}visitRaw(i){const{sqlFragments:t,parameters:s}=i;for(let i=0;i<t.length;++i)this.append(t[i]),s.length>i&&this.visitNode(s[i])}visitOperator(i){this.append(i.operator)}visitTable(i){this.visitNode(i.table)}visitSchemableIdentifier(i){i.schema&&(this.visitNode(i.schema),this.append('.')),this.visitNode(i.identifier)}visitCreateTable(i){this.append('create '),i.frontModifiers&&i.frontModifiers.length>0&&(this.compileList(i.frontModifiers,' '),this.append(' ')),i.temporary&&this.append('temporary '),this.append('table '),i.ifNotExists&&this.append('if not exists '),this.visitNode(i.table),i.selectQuery?(this.append(' as '),this.visitNode(i.selectQuery)):(this.append(' ('),this.compileList([...i.columns,...i.constraints??[]]),this.append(')'),i.onCommit&&(this.append(' on commit '),this.append(i.onCommit)),i.endModifiers&&i.endModifiers.length>0&&(this.append(' '),this.compileList(i.endModifiers,' ')))}visitColumnDefinition(i){i.ifNotExists&&this.append('if not exists '),this.visitNode(i.column),this.append(' '),this.visitNode(i.dataType),i.unsigned&&this.append(' unsigned'),i.frontModifiers&&i.frontModifiers.length>0&&(this.append(' '),this.compileList(i.frontModifiers,' ')),i.generated&&(this.append(' '),this.visitNode(i.generated)),i.identity&&this.append(' identity'),i.defaultTo&&(this.append(' '),this.visitNode(i.defaultTo)),i.notNull&&this.append(' not null'),i.unique&&this.append(' unique'),i.nullsNotDistinct&&this.append(' nulls not distinct'),i.primaryKey&&this.append(' primary key'),i.autoIncrement&&(this.append(' '),this.append(this.getAutoIncrement())),i.references&&(this.append(' '),this.visitNode(i.references)),i.check&&(this.append(' '),this.visitNode(i.check)),i.endModifiers&&i.endModifiers.length>0&&(this.append(' '),this.compileList(i.endModifiers,' '))}getAutoIncrement(){return'auto_increment'}visitReferences(i){this.append('references '),this.visitNode(i.table),this.append(' ('),this.compileList(i.columns),this.append(')'),i.onDelete&&(this.append(' on delete '),this.append(i.onDelete)),i.onUpdate&&(this.append(' on update '),this.append(i.onUpdate))}visitDropTable(i){this.append('drop table '),i.ifExists&&this.append('if exists '),this.visitNode(i.table),i.cascade&&this.append(' cascade')}visitDataType(i){this.append(i.dataType)}visitOrderBy(i){this.append('order by '),this.compileList(i.items)}visitOrderByItem(i){this.visitNode(i.orderBy),i.direction&&(this.append(' '),this.visitNode(i.direction))}visitGroupBy(i){this.append('group by '),this.compileList(i.items)}visitGroupByItem(i){this.visitNode(i.groupBy)}visitUpdateQuery(i){const t=this.nodeStack.find(o.QueryNode.is),s=t!==i;!s&&i.explain&&(this.visitNode(i.explain),this.append(' ')),s&&!u.MergeQueryNode.is(t)&&this.append('('),i.with&&(this.visitNode(i.with),this.append(' ')),this.append('update '),i.top&&(this.visitNode(i.top),this.append(' ')),i.table&&(this.visitNode(i.table),this.append(' ')),this.append('set '),i.updates&&this.compileList(i.updates),i.output&&(this.append(' '),this.visitNode(i.output)),i.from&&(this.append(' '),this.visitNode(i.from)),i.joins&&(this.append(' '),this.compileList(i.joins,' ')),i.where&&(this.append(' '),this.visitNode(i.where)),i.limit&&(this.append(' '),this.visitNode(i.limit)),i.returning&&(this.append(' '),this.visitNode(i.returning)),s&&!u.MergeQueryNode.is(t)&&this.append(')'),i.endModifiers?.length&&(this.append(' '),this.compileList(i.endModifiers,' '))}visitColumnUpdate(i){this.visitNode(i.column),this.append(' = '),this.visitNode(i.value)}visitLimit(i){this.append('limit '),this.visitNode(i.limit)}visitOffset(i){this.append('offset '),this.visitNode(i.offset)}visitOnConflict(i){this.append('on conflict'),i.columns?(this.append(' ('),this.compileList(i.columns),this.append(')')):i.constraint?(this.append(' on constraint '),this.visitNode(i.constraint)):i.indexExpression&&(this.append(' ('),this.visitNode(i.indexExpression),this.append(')')),i.indexWhere&&(this.append(' '),this.visitNode(i.indexWhere)),!0===i.doNothing?this.append(' do nothing'):i.updates&&(this.append(' do update set '),this.compileList(i.updates),i.updateWhere&&(this.append(' '),this.visitNode(i.updateWhere)))}visitOnDuplicateKey(i){this.append('on duplicate key update '),this.compileList(i.updates)}visitCreateIndex(i){this.append('create '),i.unique&&this.append('unique '),this.append('index '),i.ifNotExists&&this.append('if not exists '),this.visitNode(i.name),i.table&&(this.append(' on '),this.visitNode(i.table)),i.using&&(this.append(' using '),this.visitNode(i.using)),i.columns&&(this.append(' ('),this.compileList(i.columns),this.append(')')),i.nullsNotDistinct&&this.append(' nulls not distinct'),i.where&&(this.append(' '),this.visitNode(i.where))}visitDropIndex(i){this.append('drop index '),i.ifExists&&this.append('if exists '),this.visitNode(i.name),i.table&&(this.append(' on '),this.visitNode(i.table)),i.cascade&&this.append(' cascade')}visitCreateSchema(i){this.append('create schema '),i.ifNotExists&&this.append('if not exists '),this.visitNode(i.schema)}visitDropSchema(i){this.append('drop schema '),i.ifExists&&this.append('if exists '),this.visitNode(i.schema),i.cascade&&this.append(' cascade')}visitPrimaryKeyConstraint(i){i.name&&(this.append('constraint '),this.visitNode(i.name),this.append(' ')),this.append('primary key ('),this.compileList(i.columns),this.append(')')}visitUniqueConstraint(i){i.name&&(this.append('constraint '),this.visitNode(i.name),this.append(' ')),this.append('unique'),i.nullsNotDistinct&&this.append(' nulls not distinct'),this.append(' ('),this.compileList(i.columns),this.append(')')}visitCheckConstraint(i){i.name&&(this.append('constraint '),this.visitNode(i.name),this.append(' ')),this.append('check ('),this.visitNode(i.expression),this.append(')')}visitForeignKeyConstraint(i){i.name&&(this.append('constraint '),this.visitNode(i.name),this.append(' ')),this.append('foreign key ('),this.compileList(i.columns),this.append(') '),this.visitNode(i.references),i.onDelete&&(this.append(' on delete '),this.append(i.onDelete)),i.onUpdate&&(this.append(' on update '),this.append(i.onUpdate))}visitList(i){this.compileList(i.items)}visitWith(i){this.append('with '),i.recursive&&this.append('recursive '),this.compileList(i.expressions)}visitCommonTableExpression(i){this.visitNode(i.name),this.append(' as '),(0,h.isBoolean)(i.materialized)&&(i.materialized||this.append('not '),this.append('materialized ')),this.visitNode(i.expression)}visitCommonTableExpressionName(i){this.visitNode(i.table),i.columns&&(this.append('('),this.compileList(i.columns),this.append(')'))}visitAlterTable(i){this.append('alter table '),this.visitNode(i.table),this.append(' '),i.renameTo&&(this.append('rename to '),this.visitNode(i.renameTo)),i.setSchema&&(this.append('set schema '),this.visitNode(i.setSchema)),i.addConstraint&&this.visitNode(i.addConstraint),i.dropConstraint&&this.visitNode(i.dropConstraint),i.columnAlterations&&this.compileColumnAlterations(i.columnAlterations),i.addIndex&&this.visitNode(i.addIndex),i.dropIndex&&this.visitNode(i.dropIndex)}visitAddColumn(i){this.append('add column '),this.visitNode(i.column)}visitRenameColumn(i){this.append('rename column '),this.visitNode(i.column),this.append(' to '),this.visitNode(i.renameTo)}visitDropColumn(i){this.append('drop column '),this.visitNode(i.column)}visitAlterColumn(i){this.append('alter column '),this.visitNode(i.column),this.append(' '),i.dataType&&(this.announcesNewColumnDataType()&&this.append('type '),this.visitNode(i.dataType),i.dataTypeExpression&&(this.append('using '),this.visitNode(i.dataTypeExpression))),i.setDefault&&(this.append('set default '),this.visitNode(i.setDefault)),i.dropDefault&&this.append('drop default'),i.setNotNull&&this.append('set not null'),i.dropNotNull&&this.append('drop not null')}visitModifyColumn(i){this.append('modify column '),this.visitNode(i.column)}visitAddConstraint(i){this.append('add '),this.visitNode(i.constraint)}visitDropConstraint(i){this.append('drop constraint '),i.ifExists&&this.append('if exists '),this.visitNode(i.constraintName),'cascade'===i.modifier?this.append(' cascade'):'restrict'===i.modifier&&this.append(' restrict')}visitSetOperation(i){this.append(i.operator),this.append(' '),i.all&&this.append('all '),this.visitNode(i.expression)}visitCreateView(i){this.append('create '),i.orReplace&&this.append('or replace '),i.materialized&&this.append('materialized '),i.temporary&&this.append('temporary '),this.append('view '),i.ifNotExists&&this.append('if not exists '),this.visitNode(i.name),this.append(' '),i.columns&&(this.append('('),this.compileList(i.columns),this.append(') ')),i.as&&(this.append('as '),this.visitNode(i.as))}visitDropView(i){this.append('drop '),i.materialized&&this.append('materialized '),this.append('view '),i.ifExists&&this.append('if exists '),this.visitNode(i.name),i.cascade&&this.append(' cascade')}visitGenerated(i){this.append('generated '),i.always&&this.append('always '),i.byDefault&&this.append('by default '),this.append('as '),i.identity&&this.append('identity'),i.expression&&(this.append('('),this.visitNode(i.expression),this.append(')')),i.stored&&this.append(' stored')}visitDefaultValue(i){this.append('default '),this.visitNode(i.defaultValue)}visitSelectModifier(i){i.rawModifier?this.visitNode(i.rawModifier):this.append(N[i.modifier]),i.of&&(this.append(' of '),this.compileList(i.of,', '))}visitCreateType(i){this.append('create type '),this.visitNode(i.name),i.enum&&(this.append(' as enum '),this.visitNode(i.enum))}visitDropType(i){this.append('drop type '),i.ifExists&&this.append('if exists '),this.visitNode(i.name)}visitExplain(i){this.append('explain'),(i.options||i.format)&&(this.append(' '),this.append(this.getLeftExplainOptionsWrapper()),i.options&&(this.visitNode(i.options),i.format&&this.append(this.getExplainOptionsDelimiter())),i.format&&(this.append('format'),this.append(this.getExplainOptionAssignment()),this.append(i.format)),this.append(this.getRightExplainOptionsWrapper()))}visitDefaultInsertValue(i){this.append('default')}visitAggregateFunction(i){this.append(i.func),this.append('('),i.distinct&&this.append('distinct '),this.compileList(i.aggregated),i.orderBy&&(this.append(' '),this.visitNode(i.orderBy)),this.append(')'),i.filter&&(this.append(' filter('),this.visitNode(i.filter),this.append(')')),i.over&&(this.append(' '),this.visitNode(i.over))}visitOver(i){this.append('over('),i.partitionBy&&(this.visitNode(i.partitionBy),i.orderBy&&this.append(' ')),i.orderBy&&this.visitNode(i.orderBy),this.append(')')}visitPartitionBy(i){this.append('partition by '),this.compileList(i.items)}visitPartitionByItem(i){this.visitNode(i.partitionBy)}visitBinaryOperation(i){this.visitNode(i.leftOperand),this.append(' '),this.visitNode(i.operator),this.append(' '),this.visitNode(i.rightOperand)}visitUnaryOperation(i){this.visitNode(i.operator),this.isMinusOperator(i.operator)||this.append(' '),this.visitNode(i.operand)}isMinusOperator(i){return p.OperatorNode.is(i)&&'-'===i.operator}visitUsing(i){this.append('using '),this.compileList(i.tables)}visitFunction(i){this.append(i.func),this.append('('),this.compileList(i.arguments),this.append(')')}visitCase(i){this.append('case'),i.value&&(this.append(' '),this.visitNode(i.value)),i.when&&(this.append(' '),this.compileList(i.when,' ')),i.else&&(this.append(' else '),this.visitNode(i.else)),this.append(' end'),i.isStatement&&this.append(' case')}visitWhen(i){this.append('when '),this.visitNode(i.condition),i.result&&(this.append(' then '),this.visitNode(i.result))}visitJSONReference(i){this.visitNode(i.reference),this.visitNode(i.traversal)}visitJSONPath(i){i.inOperator&&this.visitNode(i.inOperator),this.append("'$");for(const t of i.pathLegs)this.visitNode(t);this.append("'")}visitJSONPathLeg(i){const t='ArrayLocation'===i.type;this.append(t?'[':'.'),this.append(String(i.value)),t&&this.append(']')}visitJSONOperatorChain(i){for(let t=0,s=i.values.length;t<s;t++)t===s-1?this.visitNode(i.operator):this.append('->'),this.visitNode(i.values[t])}visitMergeQuery(i){i.with&&(this.visitNode(i.with),this.append(' ')),this.append('merge '),i.top&&(this.visitNode(i.top),this.append(' ')),this.append('into '),this.visitNode(i.into),i.using&&(this.append(' '),this.visitNode(i.using)),i.whens&&(this.append(' '),this.compileList(i.whens,' ')),i.output&&(this.append(' '),this.visitNode(i.output)),i.endModifiers?.length&&(this.append(' '),this.compileList(i.endModifiers,' '))}visitMatched(i){i.not&&this.append('not '),this.append('matched'),i.bySource&&this.append(' by source')}visitAddIndex(i){this.append('add '),i.unique&&this.append('unique '),this.append('index '),this.visitNode(i.name),i.columns&&(this.append(' ('),this.compileList(i.columns),this.append(')')),i.using&&(this.append(' using '),this.visitNode(i.using))}visitCast(i){this.append('cast('),this.visitNode(i.expression),this.append(' as '),this.visitNode(i.dataType),this.append(')')}visitFetch(i){this.append('fetch next '),this.visitNode(i.rowCount),this.append(` rows ${i.modifier}`)}visitOutput(i){this.append('output '),this.compileList(i.selections)}visitTop(i){this.append(`top(${i.expression})`),i.modifiers&&this.append(` ${i.modifiers}`)}append(i){this.#i+=i}appendValue(i){this.addParameter(i),this.append(this.getCurrentParameterPlaceholder())}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getCurrentParameterPlaceholder(){return'$'+this.numParameters}getLeftExplainOptionsWrapper(){return'('}getExplainOptionAssignment(){return' '}getExplainOptionsDelimiter(){return', '}getRightExplainOptionsWrapper(){return')'}sanitizeIdentifier(i){const t=this.getLeftIdentifierWrapper(),s=this.getRightIdentifierWrapper();let p='';for(const n of i)p+=n,n===t?p+=t:n===s&&(p+=s);return p}addParameter(i){this.#t.push(i)}appendImmediateValue(i){if((0,h.isString)(i))this.append(`'${i}'`);else if((0,h.isNumber)(i)||(0,h.isBoolean)(i))this.append(i.toString());else if((0,h.isNull)(i))this.append('null');else if((0,h.isDate)(i))this.appendImmediateValue(i.toISOString());else{if(!(0,h.isBigInt)(i))throw new Error(`invalid immediate value ${i}`);this.appendImmediateValue(i.toString())}}sortSelectModifiers(i){return i.sort(((i,t)=>i.modifier&&t.modifier?f[i.modifier]-f[t.modifier]:1)),(0,h.freeze)(i)}compileColumnAlterations(i){this.compileList(i)}announcesNewColumnDataType(){return!0}}e.DefaultQueryCompiler=c;const N=(0,h.freeze)({ForKeyShare:'for key share',ForNoKeyUpdate:'for no key update',ForUpdate:'for update',ForShare:'for share',NoWait:'nowait',SkipLocked:'skip locked',Distinct:'distinct'}),f=(0,h.freeze)({ForKeyShare:1,ForNoKeyUpdate:1,ForUpdate:1,ForShare:1,NoWait:2,SkipLocked:2,Distinct:0}),y=(0,h.freeze)({InnerJoin:'inner join',LeftJoin:'left join',RightJoin:'right join',FullJoin:'full join',LateralInnerJoin:'inner join lateral',LateralLeftJoin:'left join lateral',Using:'using'})}),7300,[7114,7172,7301,7135,7151,7173,7110,7274,7220,7180]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.OperationNodeVisitor=void 0;var t=r(d[0]);e.OperationNodeVisitor=class{nodeStack=[];get parentNode(){return this.nodeStack[this.nodeStack.length-2]}#i=(0,t.freeze)({AliasNode:this.visitAlias.bind(this),ColumnNode:this.visitColumn.bind(this),IdentifierNode:this.visitIdentifier.bind(this),SchemableIdentifierNode:this.visitSchemableIdentifier.bind(this),RawNode:this.visitRaw.bind(this),ReferenceNode:this.visitReference.bind(this),SelectQueryNode:this.visitSelectQuery.bind(this),SelectionNode:this.visitSelection.bind(this),TableNode:this.visitTable.bind(this),FromNode:this.visitFrom.bind(this),SelectAllNode:this.visitSelectAll.bind(this),AndNode:this.visitAnd.bind(this),OrNode:this.visitOr.bind(this),ValueNode:this.visitValue.bind(this),ValueListNode:this.visitValueList.bind(this),PrimitiveValueListNode:this.visitPrimitiveValueList.bind(this),ParensNode:this.visitParens.bind(this),JoinNode:this.visitJoin.bind(this),OperatorNode:this.visitOperator.bind(this),WhereNode:this.visitWhere.bind(this),InsertQueryNode:this.visitInsertQuery.bind(this),DeleteQueryNode:this.visitDeleteQuery.bind(this),ReturningNode:this.visitReturning.bind(this),CreateTableNode:this.visitCreateTable.bind(this),AddColumnNode:this.visitAddColumn.bind(this),ColumnDefinitionNode:this.visitColumnDefinition.bind(this),DropTableNode:this.visitDropTable.bind(this),DataTypeNode:this.visitDataType.bind(this),OrderByNode:this.visitOrderBy.bind(this),OrderByItemNode:this.visitOrderByItem.bind(this),GroupByNode:this.visitGroupBy.bind(this),GroupByItemNode:this.visitGroupByItem.bind(this),UpdateQueryNode:this.visitUpdateQuery.bind(this),ColumnUpdateNode:this.visitColumnUpdate.bind(this),LimitNode:this.visitLimit.bind(this),OffsetNode:this.visitOffset.bind(this),OnConflictNode:this.visitOnConflict.bind(this),OnDuplicateKeyNode:this.visitOnDuplicateKey.bind(this),CreateIndexNode:this.visitCreateIndex.bind(this),DropIndexNode:this.visitDropIndex.bind(this),ListNode:this.visitList.bind(this),PrimaryKeyConstraintNode:this.visitPrimaryKeyConstraint.bind(this),UniqueConstraintNode:this.visitUniqueConstraint.bind(this),ReferencesNode:this.visitReferences.bind(this),CheckConstraintNode:this.visitCheckConstraint.bind(this),WithNode:this.visitWith.bind(this),CommonTableExpressionNode:this.visitCommonTableExpression.bind(this),CommonTableExpressionNameNode:this.visitCommonTableExpressionName.bind(this),HavingNode:this.visitHaving.bind(this),CreateSchemaNode:this.visitCreateSchema.bind(this),DropSchemaNode:this.visitDropSchema.bind(this),AlterTableNode:this.visitAlterTable.bind(this),DropColumnNode:this.visitDropColumn.bind(this),RenameColumnNode:this.visitRenameColumn.bind(this),AlterColumnNode:this.visitAlterColumn.bind(this),ModifyColumnNode:this.visitModifyColumn.bind(this),AddConstraintNode:this.visitAddConstraint.bind(this),DropConstraintNode:this.visitDropConstraint.bind(this),ForeignKeyConstraintNode:this.visitForeignKeyConstraint.bind(this),CreateViewNode:this.visitCreateView.bind(this),DropViewNode:this.visitDropView.bind(this),GeneratedNode:this.visitGenerated.bind(this),DefaultValueNode:this.visitDefaultValue.bind(this),OnNode:this.visitOn.bind(this),ValuesNode:this.visitValues.bind(this),SelectModifierNode:this.visitSelectModifier.bind(this),CreateTypeNode:this.visitCreateType.bind(this),DropTypeNode:this.visitDropType.bind(this),ExplainNode:this.visitExplain.bind(this),DefaultInsertValueNode:this.visitDefaultInsertValue.bind(this),AggregateFunctionNode:this.visitAggregateFunction.bind(this),OverNode:this.visitOver.bind(this),PartitionByNode:this.visitPartitionBy.bind(this),PartitionByItemNode:this.visitPartitionByItem.bind(this),SetOperationNode:this.visitSetOperation.bind(this),BinaryOperationNode:this.visitBinaryOperation.bind(this),UnaryOperationNode:this.visitUnaryOperation.bind(this),UsingNode:this.visitUsing.bind(this),FunctionNode:this.visitFunction.bind(this),CaseNode:this.visitCase.bind(this),WhenNode:this.visitWhen.bind(this),JSONReferenceNode:this.visitJSONReference.bind(this),JSONPathNode:this.visitJSONPath.bind(this),JSONPathLegNode:this.visitJSONPathLeg.bind(this),JSONOperatorChainNode:this.visitJSONOperatorChain.bind(this),TupleNode:this.visitTuple.bind(this),MergeQueryNode:this.visitMergeQuery.bind(this),MatchedNode:this.visitMatched.bind(this),AddIndexNode:this.visitAddIndex.bind(this),CastNode:this.visitCast.bind(this),FetchNode:this.visitFetch.bind(this),TopNode:this.visitTop.bind(this),OutputNode:this.visitOutput.bind(this)});visitNode=t=>{this.nodeStack.push(t),this.#i[t.kind](t),this.nodeStack.pop()}}}),7301,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.CompiledQuery=void 0;var o=r(d[0]),l=r(d[1]);e.CompiledQuery=(0,l.freeze)({raw:(t,u=[])=>(0,l.freeze)({sql:t,query:o.RawNode.createWithSql(t),parameters:(0,l.freeze)(u)})})}),7302,[7143,7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0})}),7303,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0})}),7304,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.DummyDriver=void 0;e.DummyDriver=class{async init(){}async acquireConnection(){return new n}async beginTransaction(){}async commitTransaction(){}async rollbackTransaction(){}async releaseConnection(){}async destroy(){}};class n{async executeQuery(){return{rows:[]}}async*streamQuery(){}}}),7305,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0})}),7306,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0})}),7307,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.DialectAdapterBase=void 0;e.DialectAdapterBase=class{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}get supportsOutput(){return!1}}}),7308,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0})}),7309,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.SqliteDialect=void 0;var t=r(d[0]),n=r(d[1]),c=r(d[2]),o=r(d[3]),l=r(d[4]);e.SqliteDialect=class{#e;constructor(t){this.#e=(0,l.freeze)({...t})}createDriver(){return new t.SqliteDriver(this.#e)}createQueryCompiler(){return new n.SqliteQueryCompiler}createAdapter(){return new o.SqliteAdapter}createIntrospector(t){return new c.SqliteIntrospector(t)}}}),7310,[7311,7312,7313,7316,7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.SqliteDriver=void 0;var t=r(d[0]),o=r(d[1]),n=r(d[2]);e.SqliteDriver=class{#e;#t=new c;#i;#o;constructor(t){this.#e=(0,n.freeze)({...t})}async init(){this.#i=(0,n.isFunction)(this.#e.database)?await this.#e.database():this.#e.database,this.#o=new s(this.#i),this.#e.onCreateConnection&&await this.#e.onCreateConnection(this.#o)}async acquireConnection(){return await this.#t.lock(),this.#o}async beginTransaction(t){await t.executeQuery(o.CompiledQuery.raw('begin'))}async commitTransaction(t){await t.executeQuery(o.CompiledQuery.raw('commit'))}async rollbackTransaction(t){await t.executeQuery(o.CompiledQuery.raw('rollback'))}async releaseConnection(){this.#t.unlock()}async destroy(){this.#i?.close()}};class s{#i;constructor(t){this.#i=t}executeQuery(t){const{sql:o,parameters:n}=t,s=this.#i.prepare(o);if(s.reader)return Promise.resolve({rows:s.all(n)});{const{changes:t,lastInsertRowid:o}=s.run(n),c=null!=t?BigInt(t):void 0;return Promise.resolve({numUpdatedOrDeletedRows:c,numAffectedRows:c,insertId:null!=o?BigInt(o):void 0,rows:[]})}}async*streamQuery(o,n){const{sql:s,parameters:c,query:l}=o,u=this.#i.prepare(s);if(!t.SelectQueryNode.is(l))throw new Error('Sqlite driver only supports streaming of select queries');{const t=u.iterate(c);for(const o of t)yield{rows:[o]}}}}class c{#n;#s;async lock(){for(;this.#n;)await this.#n;this.#n=new Promise((t=>{this.#s=t}))}unlock(){const t=this.#s;this.#n=void 0,this.#s=void 0,t?.()}}}),7311,[7156,7302,7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.SqliteQueryCompiler=void 0;var t=r(d[0]);const n=/"/g;class u extends t.DefaultQueryCompiler{getCurrentParameterPlaceholder(){return'?'}getLeftExplainOptionsWrapper(){return''}getRightExplainOptionsWrapper(){return''}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return'autoincrement'}sanitizeIdentifier(t){return t.replace(n,'""')}visitDefaultInsertValue(t){this.append('null')}}e.SqliteQueryCompiler=u}),7312,[7300]);
__d((function(g,_r,i,a,m,e,d){var t=_r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.SqliteIntrospector=void 0;var l=t(_r(d[1])),n=t(_r(d[2])),s=_r(d[3]),r=_r(d[4]),u=(0,n.default)("db"),o=(0,n.default)("tablesQuery"),c=(0,n.default)("getTableMetadata");function p(t,l){let n=t.selectFrom('sqlite_master').where('type','in',['table','view']).where('name','not like','sqlite_%').select(['name','sql','type']).orderBy('name');return l.withInternalKyselyTables||(n=n.where('name','!=',s.DEFAULT_MIGRATION_TABLE).where('name','!=',s.DEFAULT_MIGRATION_LOCK_TABLE)),n}async function f(t){const n=await(0,l.default)(this,o)[o]((0,l.default)(this,u)[u],t).execute(),s=await(0,l.default)(this,u)[u].with('table_list',(n=>(0,l.default)(this,o)[o](n,t))).selectFrom(['table_list as tl',r.sql`pragma_table_info(tl.name)`.as('p')]).select(['tl.name as table','p.cid','p.name','p.type','p.notnull','p.dflt_value','p.pk']).orderBy(['tl.name','p.cid']).execute(),c={};for(const t of s)c[t.table]??=[],c[t.table].push(t);return n.map((({name:t,sql:l,type:n})=>{let s=l?.split(/[\(\),]/)?.find((t=>t.toLowerCase().includes('autoincrement')))?.trimStart()?.split(/\s+/)?.[0]?.replace(/["`]/g,'');const r=c[t]??[];if(!s){const t=r.filter((t=>t.pk>0));1===t.length&&'integer'===t[0].type.toLowerCase()&&(s=t[0].name)}return{name:t,isView:'view'===n,columns:r.map((t=>({name:t.name,dataType:t.type,isNullable:!t.notnull,isAutoIncrementing:t.name===s,hasDefaultValue:null!=t.dflt_value,comment:void 0})))}}))}e.SqliteIntrospector=class{constructor(t){Object.defineProperty(this,c,{value:f}),Object.defineProperty(this,o,{value:p}),Object.defineProperty(this,u,{writable:!0,value:void 0}),(0,l.default)(this,u)[u]=t}async getSchemas(){return[]}async getTables(t={withInternalKyselyTables:!1}){return await(0,l.default)(this,c)[c](t)}async getMetadata(t){return{tables:await this.getTables(t)}}}}),7313,[16,3270,3271,7314,7297]);
__d((function(g,r,_i,_a,_m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.NO_MIGRATIONS=e.Migrator=e.MIGRATION_LOCK_ID=e.DEFAULT_MIGRATION_TABLE=e.DEFAULT_MIGRATION_LOCK_TABLE=e.DEFAULT_ALLOW_UNORDERED_MIGRATIONS=void 0;var a=t(r(d[1])),i=t(r(d[2])),n=r(d[3]),s=r(d[4]),o=r(d[5]);const u=e.DEFAULT_MIGRATION_TABLE='kysely_migration',l=e.DEFAULT_MIGRATION_LOCK_TABLE='kysely_migration_lock',c=e.DEFAULT_ALLOW_UNORDERED_MIGRATIONS=!1,f=e.MIGRATION_LOCK_ID='migration_lock',h=e.NO_MIGRATIONS=(0,o.freeze)({__noMigrations__:!0});var m=(0,i.default)("props"),w=(0,i.default)("migrate"),p=(0,i.default)("migrationTableSchema"),y=(0,i.default)("migrationTable"),b=(0,i.default)("migrationLockTable"),O=(0,i.default)("allowUnorderedMigrations"),T=(0,i.default)("schemaPlugin"),v=(0,i.default)("ensureMigrationTablesExists"),x=(0,i.default)("ensureMigrationTableSchemaExists"),M=(0,i.default)("ensureMigrationTableExists"),P=(0,i.default)("ensureMigrationLockTableExists"),E=(0,i.default)("ensureLockRowExists"),_=(0,i.default)("doesSchemaExists"),N=(0,i.default)("doesTableExists"),I=(0,i.default)("doesLockRowExists"),L=(0,i.default)("runMigrations"),j=(0,i.default)("getState"),D=(0,i.default)("getPendingMigrations"),S=(0,i.default)("resolveMigrations"),A=(0,i.default)("getExecutedMigrations"),k=(0,i.default)("ensureNoMissingMigrations"),U=(0,i.default)("ensureMigrationsInOrder"),R=(0,i.default)("migrateDown"),C=(0,i.default)("migrateUp"),F=(0,i.default)("createIfNotExists");async function G(t){try{return await(0,a.default)(this,v)[v](),await(0,a.default)(this,L)[L](t)}catch(t){return t instanceof dt?t.resultSet:{error:t}}}function $(){return(0,a.default)(this,m)[m].migrationTableSchema}function K(){return(0,a.default)(this,m)[m].migrationTableName??u}function z(){return(0,a.default)(this,m)[m].migrationLockTableName??l}function B(){return(0,a.default)(this,m)[m].allowUnorderedMigrations??c}function W(){return(0,a.default)(this,p)[p]?new s.WithSchemaPlugin((0,a.default)(this,p)[p]):new n.NoopPlugin}async function q(){await(0,a.default)(this,x)[x](),await(0,a.default)(this,M)[M](),await(0,a.default)(this,P)[P](),await(0,a.default)(this,E)[E]()}async function H(){if((0,a.default)(this,p)[p]&&!await(0,a.default)(this,_)[_]())try{await(0,a.default)(this,F)[F]((0,a.default)(this,m)[m].db.schema.createSchema((0,a.default)(this,p)[p]))}catch(t){if(!await(0,a.default)(this,_)[_]())throw t}}async function J(){if(!await(0,a.default)(this,N)[N]((0,a.default)(this,y)[y]))try{(0,a.default)(this,p)[p]&&await(0,a.default)(this,F)[F]((0,a.default)(this,m)[m].db.schema.createSchema((0,a.default)(this,p)[p])),await(0,a.default)(this,F)[F]((0,a.default)(this,m)[m].db.schema.withPlugin((0,a.default)(this,T)[T]).createTable((0,a.default)(this,y)[y]).addColumn('name','varchar(255)',(t=>t.notNull().primaryKey())).addColumn('timestamp','varchar(255)',(t=>t.notNull())))}catch(t){if(!await(0,a.default)(this,N)[N]((0,a.default)(this,y)[y]))throw t}}async function Q(){if(!await(0,a.default)(this,N)[N]((0,a.default)(this,b)[b]))try{await(0,a.default)(this,F)[F]((0,a.default)(this,m)[m].db.schema.withPlugin((0,a.default)(this,T)[T]).createTable((0,a.default)(this,b)[b]).addColumn('id','varchar(255)',(t=>t.notNull().primaryKey())).addColumn('is_locked','integer',(t=>t.notNull().defaultTo(0))))}catch(t){if(!await(0,a.default)(this,N)[N]((0,a.default)(this,b)[b]))throw t}}async function V(){if(!await(0,a.default)(this,I)[I]())try{await(0,a.default)(this,m)[m].db.withPlugin((0,a.default)(this,T)[T]).insertInto((0,a.default)(this,b)[b]).values({id:f,is_locked:0}).execute()}catch(t){if(!await(0,a.default)(this,I)[I]())throw t}}async function X(){return(await(0,a.default)(this,m)[m].db.introspection.getSchemas()).some((t=>t.name===(0,a.default)(this,p)[p]))}async function Y(t){const i=(0,a.default)(this,p)[p];return(await(0,a.default)(this,m)[m].db.introspection.getTables({withInternalKyselyTables:!0})).some((a=>a.name===t&&(!i||a.schema===i)))}async function Z(){return!!await(0,a.default)(this,m)[m].db.withPlugin((0,a.default)(this,T)[T]).selectFrom((0,a.default)(this,b)[b]).where('id','=',f).select('id').executeTakeFirst()}async function tt(t){const i=(0,a.default)(this,m)[m].db.getExecutor().adapter,n=(0,o.freeze)({lockTable:(0,a.default)(this,m)[m].migrationLockTableName??l,lockRowId:f,lockTableSchema:(0,a.default)(this,m)[m].migrationTableSchema}),s=async s=>{try{await i.acquireMigrationLock(s,n);const o=await(0,a.default)(this,j)[j](s);if(0===o.migrations.length)return{results:[]};const{direction:u,step:l}=t(o);return l<=0?{results:[]}:'Down'===u?await(0,a.default)(this,R)[R](s,o,l):'Up'===u?await(0,a.default)(this,C)[C](s,o,l):{results:[]}}finally{await i.releaseMigrationLock(s,n)}};return i.supportsTransactionalDdl?(0,a.default)(this,m)[m].db.transaction().execute(s):(0,a.default)(this,m)[m].db.connection().execute(s)}async function et(t){const i=await(0,a.default)(this,S)[S](),n=await(0,a.default)(this,A)[A](t);(0,a.default)(this,k)[k](i,n),(0,a.default)(this,O)[O]||(0,a.default)(this,U)[U](i,n);const s=(0,a.default)(this,D)[D](i,n);return(0,o.freeze)({migrations:i,executedMigrations:n,lastMigration:(0,o.getLast)(n),pendingMigrations:s})}function at(t,a){return t.filter((t=>!a.includes(t.name)))}async function it(){const t=await(0,a.default)(this,m)[m].provider.getMigrations();return Object.keys(t).sort().map((a=>({...t[a],name:a})))}async function nt(t){const i=await t.withPlugin((0,a.default)(this,T)[T]).selectFrom((0,a.default)(this,y)[y]).select(['name','timestamp']).$narrowType().execute(),n=(0,a.default)(this,m)[m].nameComparator||((t,a)=>t.localeCompare(a));return i.sort(((t,a)=>t.timestamp===a.timestamp?n(t.name,a.name):new Date(t.timestamp).getTime()-new Date(a.timestamp).getTime())).map((t=>t.name))}function rt(t,a){for(const i of a)if(!t.some((t=>t.name===i)))throw new Error(`corrupted migrations: previously executed migration ${i} is missing`)}function st(t,a){for(let i=0;i<a.length;++i)if(t[i].name!==a[i])throw new Error(`corrupted migrations: expected previously executed migration ${a[i]} to be at index ${i} but ${t[i].name} was found in its place. New migrations must always have a name that comes alphabetically after the last executed migration.`)}async function ot(t,i,n){const s=i.executedMigrations.slice().reverse().slice(0,n).map((t=>i.migrations.find((a=>a.name===t)))),o=s.map((t=>({migrationName:t.name,direction:'Down',status:'NotExecuted'})));for(let i=0;i<o.length;++i){const n=s[i];try{n.down&&(await n.down(t),await t.withPlugin((0,a.default)(this,T)[T]).deleteFrom((0,a.default)(this,y)[y]).where('name','=',n.name).execute(),o[i]={migrationName:n.name,direction:'Down',status:'Success'})}catch(t){throw o[i]={migrationName:n.name,direction:'Down',status:'Error'},new dt({error:t,results:o})}}return{results:o}}async function ut(t,i,n){const s=i.pendingMigrations.slice(0,n).map((t=>({migrationName:t.name,direction:'Up',status:'NotExecuted'})));for(let n=0;n<s.length;n++){const o=i.pendingMigrations[n];try{await o.up(t),await t.withPlugin((0,a.default)(this,T)[T]).insertInto((0,a.default)(this,y)[y]).values({name:o.name,timestamp:(new Date).toISOString()}).execute(),s[n]={migrationName:o.name,direction:'Up',status:'Success'}}catch(t){throw s[n]={migrationName:o.name,direction:'Up',status:'Error'},new dt({error:t,results:s})}}return{results:s}}async function lt(t){(0,a.default)(this,m)[m].db.getExecutor().adapter.supportsCreateIfNotExists&&(t=t.ifNotExists()),await t.execute()}e.Migrator=class{constructor(t){Object.defineProperty(this,F,{value:lt}),Object.defineProperty(this,C,{value:ut}),Object.defineProperty(this,R,{value:ot}),Object.defineProperty(this,U,{value:st}),Object.defineProperty(this,k,{value:rt}),Object.defineProperty(this,A,{value:nt}),Object.defineProperty(this,S,{value:it}),Object.defineProperty(this,D,{value:at}),Object.defineProperty(this,j,{value:et}),Object.defineProperty(this,L,{value:tt}),Object.defineProperty(this,I,{value:Z}),Object.defineProperty(this,N,{value:Y}),Object.defineProperty(this,_,{value:X}),Object.defineProperty(this,E,{value:V}),Object.defineProperty(this,P,{value:Q}),Object.defineProperty(this,M,{value:J}),Object.defineProperty(this,x,{value:H}),Object.defineProperty(this,v,{value:q}),Object.defineProperty(this,T,{get:W,set:void 0}),Object.defineProperty(this,O,{get:B,set:void 0}),Object.defineProperty(this,b,{get:z,set:void 0}),Object.defineProperty(this,y,{get:K,set:void 0}),Object.defineProperty(this,p,{get:$,set:void 0}),Object.defineProperty(this,w,{value:G}),Object.defineProperty(this,m,{writable:!0,value:void 0}),(0,a.default)(this,m)[m]=(0,o.freeze)(t)}async getMigrations(){const t=await(0,a.default)(this,N)[N]((0,a.default)(this,y)[y])?await(0,a.default)(this,m)[m].db.withPlugin((0,a.default)(this,T)[T]).selectFrom((0,a.default)(this,y)[y]).select(['name','timestamp']).$narrowType().execute():[];return(await(0,a.default)(this,S)[S]()).map((({name:a,...i})=>{const n=t.find((t=>t.name===a));return{name:a,migration:i,executedAt:n?new Date(n.timestamp):void 0}}))}async migrateToLatest(){return(0,a.default)(this,w)[w]((()=>({direction:'Up',step:1/0})))}async migrateTo(t){return(0,a.default)(this,w)[w]((({migrations:a,executedMigrations:i,pendingMigrations:n})=>{if(t===h)return{direction:'Down',step:1/0};if(!a.find((a=>a.name===t)))throw new Error(`migration "${t}" doesn't exist`);const s=i.indexOf(t),o=n.findIndex((a=>a.name===t));if(-1!==s)return{direction:'Down',step:i.length-s-1};if(-1!==o)return{direction:'Up',step:o+1};throw new Error(`migration "${t}" isn't executed or pending`)}))}async migrateUp(){return(0,a.default)(this,w)[w]((()=>({direction:'Up',step:1})))}async migrateDown(){return(0,a.default)(this,w)[w]((()=>({direction:'Down',step:1})))}};class dt extends Error{#t;constructor(t){super(),this.#t=t}get resultSet(){return this.#t}}}),7314,[16,3270,3271,7315,7204,7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.NoopPlugin=void 0;e.NoopPlugin=class{transformQuery(n){return n.node}async transformResult(n){return n.result}}}),7315,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.SqliteAdapter=void 0;var t=r(d[0]);class n extends t.DialectAdapterBase{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(t,n){}async releaseMigrationLock(t,n){}}e.SqliteAdapter=n}),7316,[7308]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0})}),7317,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PostgresQueryCompiler=void 0;var t=r(d[0]);const o=/"/g;class s extends t.DefaultQueryCompiler{sanitizeIdentifier(t){return t.replace(o,'""')}}e.PostgresQueryCompiler=s}),7318,[7300]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.PostgresIntrospector=void 0;var n=t(r(d[1])),s=t(r(d[2])),l=r(d[3]),c=r(d[4]),o=r(d[5]),p=(0,s.default)("db"),u=(0,s.default)("parseTableMetadata");function _(t){return t.reduce(((t,n)=>{let s=t.find((t=>t.name===n.table&&t.schema===n.schema));return s||(s=(0,c.freeze)({name:n.table,isView:'v'===n.table_type,schema:n.schema,columns:[]}),t.push(s)),s.columns.push((0,c.freeze)({name:n.column,dataType:n.type,dataTypeSchema:n.type_schema,isNullable:!n.not_null,isAutoIncrementing:!!n.auto_incrementing,hasDefaultValue:n.has_default,comment:n.column_description??void 0})),t}),[])}e.PostgresIntrospector=class{constructor(t){Object.defineProperty(this,u,{value:_}),Object.defineProperty(this,p,{writable:!0,value:void 0}),(0,n.default)(this,p)[p]=t}async getSchemas(){return(await(0,n.default)(this,p)[p].selectFrom('pg_catalog.pg_namespace').select('nspname').$castTo().execute()).map((t=>({name:t.nspname})))}async getTables(t={withInternalKyselyTables:!1}){let s=(0,n.default)(this,p)[p].selectFrom('pg_catalog.pg_attribute as a').innerJoin('pg_catalog.pg_class as c','a.attrelid','c.oid').innerJoin('pg_catalog.pg_namespace as ns','c.relnamespace','ns.oid').innerJoin('pg_catalog.pg_type as typ','a.atttypid','typ.oid').innerJoin('pg_catalog.pg_namespace as dtns','typ.typnamespace','dtns.oid').select(['a.attname as column','a.attnotnull as not_null','a.atthasdef as has_default','c.relname as table','c.relkind as table_type','ns.nspname as schema','typ.typname as type','dtns.nspname as type_schema',o.sql`col_description(a.attrelid, a.attnum)`.as('column_description'),(0,n.default)(this,p)[p].selectFrom('pg_class').select(o.sql`true`.as('auto_incrementing')).whereRef('relnamespace','=','c.relnamespace').where('relkind','=','S').where('relname','=',o.sql`c.relname || '_' || a.attname || '_seq'`).as('auto_incrementing')]).where((t=>t.or([t('c.relkind','=','r'),t('c.relkind','=','v'),t('c.relkind','=','p')]))).where('ns.nspname','!~','^pg_').where('ns.nspname','!=','information_schema').where('a.attnum','>=',0).where('a.attisdropped','!=',!0).orderBy('ns.nspname').orderBy('c.relname').orderBy('a.attnum').$castTo();t.withInternalKyselyTables||(s=s.where('c.relname','!=',l.DEFAULT_MIGRATION_TABLE).where('c.relname','!=',l.DEFAULT_MIGRATION_LOCK_TABLE));const c=await s.execute();return(0,n.default)(this,u)[u](c)}async getMetadata(t){return{tables:await this.getTables(t)}}}}),7319,[16,3270,3271,7314,7110,7297]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PostgresAdapter=void 0;var t=r(d[0]),s=r(d[1]);const n=BigInt('3853314791062309107');class o extends s.DialectAdapterBase{get supportsTransactionalDdl(){return!0}get supportsReturning(){return!0}async acquireMigrationLock(s,o){await t.sql`select pg_advisory_xact_lock(${t.sql.lit(n)})`.execute(s)}async releaseMigrationLock(t,s){}}e.PostgresAdapter=o}),7320,[7297,7308]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.MysqlDialect=void 0;var t=r(d[0]),n=r(d[1]),c=r(d[2]),o=r(d[3]);e.MysqlDialect=class{#e;constructor(t){this.#e=t}createDriver(){return new t.MysqlDriver(this.#e)}createQueryCompiler(){return new n.MysqlQueryCompiler}createAdapter(){return new o.MysqlAdapter}createIntrospector(t){return new c.MysqlIntrospector(t)}}}),7321,[7322,7324,7325,7326]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.MysqlDriver=void 0;var n=t(r(d[1])),o=t(r(d[2])),s=r(d[3]),c=r(d[4]),l=r(d[5]);const u=Symbol();var f=(0,o.default)("config"),y=(0,o.default)("connections"),w=(0,o.default)("pool"),h=(0,o.default)("acquireConnection");async function v(){return new Promise(((t,o)=>{(0,n.default)(this,w)[w].getConnection((async(n,s)=>{n?o(n):t(s)}))}))}e.MysqlDriver=class{constructor(t){Object.defineProperty(this,h,{value:v}),Object.defineProperty(this,f,{writable:!0,value:void 0}),Object.defineProperty(this,y,{writable:!0,value:new WeakMap}),Object.defineProperty(this,w,{writable:!0,value:void 0}),(0,n.default)(this,f)[f]=(0,c.freeze)({...t})}async init(){(0,n.default)(this,w)[w]=(0,c.isFunction)((0,n.default)(this,f)[f].pool)?await(0,n.default)(this,f)[f].pool():(0,n.default)(this,f)[f].pool}async acquireConnection(){const t=await(0,n.default)(this,h)[h]();let o=(0,n.default)(this,y)[y].get(t);return o||(o=new C(t),(0,n.default)(this,y)[y].set(t,o),(0,n.default)(this,f)[f]?.onCreateConnection&&await(0,n.default)(this,f)[f].onCreateConnection(o)),(0,n.default)(this,f)[f]?.onReserveConnection&&await(0,n.default)(this,f)[f].onReserveConnection(o),o}async beginTransaction(t,n){n.isolationLevel&&await t.executeQuery(s.CompiledQuery.raw(`set transaction isolation level ${n.isolationLevel}`)),await t.executeQuery(s.CompiledQuery.raw('begin'))}async commitTransaction(t){await t.executeQuery(s.CompiledQuery.raw('commit'))}async rollbackTransaction(t){await t.executeQuery(s.CompiledQuery.raw('rollback'))}async releaseConnection(t){t[u]()}async destroy(){return new Promise(((t,o)=>{(0,n.default)(this,w)[w].end((n=>{n?o(n):t()}))}))}};var p=(0,o.default)("rawConnection"),b=(0,o.default)("executeQuery");class C{constructor(t){Object.defineProperty(this,b,{value:R}),Object.defineProperty(this,p,{writable:!0,value:void 0}),(0,n.default)(this,p)[p]=t}async executeQuery(t){try{const s=await(0,n.default)(this,b)[b](t);if(o=s,(0,c.isObject)(o)&&'insertId'in o&&'affectedRows'in o){const{insertId:t,affectedRows:n,changedRows:o}=s,c=null!=n?BigInt(n):void 0,l=null!=o?BigInt(o):void 0;return{insertId:null!=t&&'0'!==t.toString()?BigInt(t):void 0,numUpdatedOrDeletedRows:c,numAffectedRows:c,numChangedRows:l,rows:[]}}return Array.isArray(s)?{rows:s}:{rows:[]}}catch(t){throw(0,l.extendStackTrace)(t,new Error)}var o}async*streamQuery(t,o){const s=(0,n.default)(this,p)[p].query(t.sql,t.parameters).stream({objectMode:!0});try{for await(const t of s)yield{rows:[t]}}catch(t){if(t&&'object'==typeof t&&'code'in t&&'ERR_STREAM_PREMATURE_CLOSE'===t.code)return;throw t}}[u](){(0,n.default)(this,p)[p].release()}}function R(t){return new Promise(((o,s)=>{(0,n.default)(this,p)[p].query(t.sql,t.parameters,((t,n)=>{t?s(t):o(n)}))}))}}),7322,[16,3270,3271,7302,7110,7323]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.extendStackTrace=function(n,c){if(s=n,(0,t.isObject)(s)&&(0,t.isString)(s.stack)&&c.stack){const t=c.stack.split('\n').slice(1).join('\n');return n.stack+=`\n${t}`,n}var s;return n};var t=r(d[0])}),7323,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.MysqlQueryCompiler=void 0;var t=r(d[0]);const n=/`/g;class s extends t.DefaultQueryCompiler{getCurrentParameterPlaceholder(){return'?'}getLeftExplainOptionsWrapper(){return''}getExplainOptionAssignment(){return'='}getExplainOptionsDelimiter(){return' '}getRightExplainOptionsWrapper(){return''}getLeftIdentifierWrapper(){return'`'}getRightIdentifierWrapper(){return'`'}sanitizeIdentifier(t){return t.replace(n,'``')}visitCreateIndex(t){this.append('create '),t.unique&&this.append('unique '),this.append('index '),t.ifNotExists&&this.append('if not exists '),this.visitNode(t.name),t.using&&(this.append(' using '),this.visitNode(t.using)),t.table&&(this.append(' on '),this.visitNode(t.table)),t.columns&&(this.append(' ('),this.compileList(t.columns),this.append(')')),t.where&&(this.append(' '),this.visitNode(t.where))}}e.MysqlQueryCompiler=s}),7324,[7300]);
__d((function(g,r,i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.MysqlIntrospector=void 0;var s=t(r(d[1])),n=t(r(d[2])),l=r(d[3]),o=r(d[4]),A=r(d[5]),c=(0,n.default)("db"),E=(0,n.default)("parseTableMetadata");function u(t){return t.reduce(((t,s)=>{let n=t.find((t=>t.name===s.TABLE_NAME));return n||(n=(0,o.freeze)({name:s.TABLE_NAME,isView:'VIEW'===s.TABLE_TYPE,schema:s.TABLE_SCHEMA,columns:[]}),t.push(n)),n.columns.push((0,o.freeze)({name:s.COLUMN_NAME,dataType:s.DATA_TYPE,isNullable:'YES'===s.IS_NULLABLE,isAutoIncrementing:s.EXTRA.toLowerCase().includes('auto_increment'),hasDefaultValue:null!==s.COLUMN_DEFAULT,comment:''===s.COLUMN_COMMENT?void 0:s.COLUMN_COMMENT})),t}),[])}e.MysqlIntrospector=class{constructor(t){Object.defineProperty(this,E,{value:u}),Object.defineProperty(this,c,{writable:!0,value:void 0}),(0,s.default)(this,c)[c]=t}async getSchemas(){return(await(0,s.default)(this,c)[c].selectFrom('information_schema.schemata').select('schema_name').$castTo().execute()).map((t=>({name:t.SCHEMA_NAME})))}async getTables(t={withInternalKyselyTables:!1}){let n=(0,s.default)(this,c)[c].selectFrom('information_schema.columns as columns').innerJoin('information_schema.tables as tables',(t=>t.onRef('columns.TABLE_CATALOG','=','tables.TABLE_CATALOG').onRef('columns.TABLE_SCHEMA','=','tables.TABLE_SCHEMA').onRef('columns.TABLE_NAME','=','tables.TABLE_NAME'))).select(['columns.COLUMN_NAME','columns.COLUMN_DEFAULT','columns.TABLE_NAME','columns.TABLE_SCHEMA','tables.TABLE_TYPE','columns.IS_NULLABLE','columns.DATA_TYPE','columns.EXTRA','columns.COLUMN_COMMENT']).where('columns.TABLE_SCHEMA','=',A.sql`database()`).orderBy('columns.TABLE_NAME').orderBy('columns.ORDINAL_POSITION').$castTo();t.withInternalKyselyTables||(n=n.where('columns.TABLE_NAME','!=',l.DEFAULT_MIGRATION_TABLE).where('columns.TABLE_NAME','!=',l.DEFAULT_MIGRATION_LOCK_TABLE));const o=await n.execute();return(0,s.default)(this,E)[E](o)}async getMetadata(t){return{tables:await this.getTables(t)}}}}),7325,[16,3270,3271,7314,7110,7297]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.MysqlAdapter=void 0;var t=r(d[0]),s=r(d[1]);const l='ea586330-2c93-47c8-908d-981d9d270f9d';class c extends s.DialectAdapterBase{get supportsTransactionalDdl(){return!1}get supportsReturning(){return!1}async acquireMigrationLock(s,c){await t.sql`select get_lock(${t.sql.lit(l)}, ${t.sql.lit(3600)})`.execute(s)}async releaseMigrationLock(s,c){await t.sql`select release_lock(${t.sql.lit(l)})`.execute(s)}}e.MysqlAdapter=c}),7326,[7297,7308]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0})}),7327,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PostgresDriver=void 0;var o=r(d[0]),t=r(d[1]),n=r(d[2]);const s=Symbol();e.PostgresDriver=class{#e;#o=new WeakMap;#t;constructor(o){this.#e=(0,t.freeze)({...o})}async init(){this.#t=(0,t.isFunction)(this.#e.pool)?await this.#e.pool():this.#e.pool}async acquireConnection(){const o=await this.#t.connect();let t=this.#o.get(o);return t||(t=new c(o,{cursor:this.#e.cursor??null}),this.#o.set(o,t),this.#e.onCreateConnection&&await this.#e.onCreateConnection(t)),this.#e.onReserveConnection&&await this.#e.onReserveConnection(t),t}async beginTransaction(t,n){n.isolationLevel?await t.executeQuery(o.CompiledQuery.raw(`start transaction isolation level ${n.isolationLevel}`)):await t.executeQuery(o.CompiledQuery.raw('begin'))}async commitTransaction(t){await t.executeQuery(o.CompiledQuery.raw('commit'))}async rollbackTransaction(t){await t.executeQuery(o.CompiledQuery.raw('rollback'))}async releaseConnection(o){o[s]()}async destroy(){if(this.#t){const o=this.#t;this.#t=void 0,await o.end()}}};class c{#n;#i;constructor(o,t){this.#n=o,this.#i=t}async executeQuery(o){try{const t=await this.#n.query(o.sql,[...o.parameters]);if('INSERT'===t.command||'UPDATE'===t.command||'DELETE'===t.command||'MERGE'===t.command){const o=BigInt(t.rowCount);return{numUpdatedOrDeletedRows:o,numAffectedRows:o,rows:t.rows??[]}}return{rows:t.rows??[]}}catch(o){throw(0,n.extendStackTrace)(o,new Error)}}async*streamQuery(o,t){if(!this.#i.cursor)throw new Error("'cursor' is not present in your postgres dialect config. It's required to make streaming work in postgres.");if(!Number.isInteger(t)||t<=0)throw new Error('chunkSize must be a positive integer');const n=this.#n.query(new this.#i.cursor(o.sql,o.parameters.slice()));try{for(;;){const o=await n.read(t);if(0===o.length)break;yield{rows:o}}}finally{await n.close()}}[s](){this.#n.release()}}}),7328,[7302,7110,7323]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0})}),7329,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.PostgresDialect=void 0;var t=r(d[0]),o=r(d[1]),s=r(d[2]),n=r(d[3]);e.PostgresDialect=class{#e;constructor(t){this.#e=t}createDriver(){return new t.PostgresDriver(this.#e)}createQueryCompiler(){return new s.PostgresQueryCompiler}createAdapter(){return new n.PostgresAdapter}createIntrospector(t){return new o.PostgresIntrospector(t)}}}),7330,[7328,7319,7318,7320]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.MssqlAdapter=void 0;var t=r(d[0]),s=r(d[1]),l=r(d[2]);class o extends l.DialectAdapterBase{get supportsCreateIfNotExists(){return!1}get supportsTransactionalDdl(){return!0}get supportsOutput(){return!0}async acquireMigrationLock(l){await s.sql`exec sp_getapplock @DbPrincipal = ${s.sql.lit('dbo')}, @Resource = ${s.sql.lit(t.DEFAULT_MIGRATION_TABLE)}, @LockMode = ${s.sql.lit('Exclusive')}`.execute(l)}async releaseMigrationLock(){}}e.MssqlAdapter=o}),7331,[7314,7297,7308]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0})}),7332,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.MssqlDialect=void 0;var t=r(d[0]),s=r(d[1]),n=r(d[2]),c=r(d[3]);e.MssqlDialect=class{#e;constructor(t){this.#e=t}createDriver(){return new s.MssqlDriver(this.#e)}createQueryCompiler(){return new c.MssqlQueryCompiler}createAdapter(){return new t.MssqlAdapter}createIntrospector(t){return new n.MssqlIntrospector(t)}}}),7333,[7331,7334,7335,7336]);
__d((function(g,r,_i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.MssqlDriver=void 0;var i=t(r(d[1])),s=t(r(d[2])),o=r(d[3]),n=r(d[4]),l=r(d[5]),u=r(d[6]),c=r(d[7]);const f=Symbol(),h=Symbol();e.MssqlDriver=class{#e;#t;constructor(t){this.#e=(0,o.freeze)({...t});const{tarn:i,tedious:s}=this.#e,{validateConnections:n,...l}=i.options;this.#t=new i.Pool({...l,create:async()=>{const t=await s.connectionFactory();return await new p(t,s).connect()},destroy:async t=>{await t[h]()},validate:!1===n?void 0:t=>t.validate()})}async init(){}async acquireConnection(){return await this.#t.acquire().promise}async beginTransaction(t,i){await t.beginTransaction(i)}async commitTransaction(t){await t.commitTransaction()}async rollbackTransaction(t){await t.rollbackTransaction()}async releaseConnection(t){await t[f](),this.#t.release(t)}async destroy(){await this.#t.destroy()}};var w=(0,s.default)("connection"),v=(0,s.default)("tedious"),y=(0,s.default)("getTediousIsolationLevel"),b=(0,s.default)("cancelRequest");class p{constructor(t,s){Object.defineProperty(this,b,{value:T}),Object.defineProperty(this,y,{value:P}),Object.defineProperty(this,w,{writable:!0,value:void 0}),Object.defineProperty(this,v,{writable:!0,value:void 0}),(0,i.default)(this,w)[w]=t,(0,i.default)(this,v)[v]=s,(0,i.default)(this,w)[w].on('error',console.error),(0,i.default)(this,w)[w].once('end',(()=>{(0,i.default)(this,w)[w].off('error',console.error)}))}async beginTransaction(t){const{isolationLevel:s}=t;await new Promise(((t,o)=>(0,i.default)(this,w)[w].beginTransaction((i=>{i?o(i):t(void 0)}),s?(0,u.randomString)(8):void 0,s?(0,i.default)(this,y)[y](s):void 0)))}async commitTransaction(){await new Promise(((t,s)=>(0,i.default)(this,w)[w].commitTransaction((i=>{i?s(i):t(void 0)}))))}async connect(){return await new Promise(((t,s)=>{(0,i.default)(this,w)[w].connect((i=>{i?(console.error(i),s(i)):t(void 0)}))})),this}async executeQuery(t){try{const s=new c.Deferred,o=new A({compiledQuery:t,tedious:(0,i.default)(this,v)[v],onDone:s});(0,i.default)(this,w)[w].execSql(o.request);const{rowCount:n,rows:l}=await s.promise;return{numAffectedRows:void 0!==n?BigInt(n):void 0,rows:l}}catch(t){throw(0,l.extendStackTrace)(t,new Error)}}async rollbackTransaction(){await new Promise(((t,s)=>(0,i.default)(this,w)[w].rollbackTransaction((i=>{i?s(i):t(void 0)}))))}async*streamQuery(t,s){if(!Number.isInteger(s)||s<=0)throw new Error('chunkSize must be a positive integer');const o=new A({compiledQuery:t,streamChunkSize:s,tedious:(0,i.default)(this,v)[v]});(0,i.default)(this,w)[w].execSql(o.request);try{for(;;){const t=await o.readChunk();if(0===t.length)break;if(yield{rows:t},t.length<s)break}}finally{await(0,i.default)(this,b)[b](o)}}async validate(){try{const t=new c.Deferred,s=new A({compiledQuery:n.CompiledQuery.raw('select 1'),onDone:t,tedious:(0,i.default)(this,v)[v]});return(0,i.default)(this,w)[w].execSql(s.request),await t.promise,!0}catch{return!1}}async[f](){!1!==(0,i.default)(this,v)[v].resetConnectionOnRelease&&await new Promise(((t,s)=>{(0,i.default)(this,w)[w].reset((i=>{i?s(i):t(void 0)}))}))}[h](){return new Promise((t=>{(0,i.default)(this,w)[w].once('end',(()=>{t(void 0)})),(0,i.default)(this,w)[w].close()}))}}function P(t){const{ISOLATION_LEVEL:s}=(0,i.default)(this,v)[v],o={'read committed':s.READ_COMMITTED,'read uncommitted':s.READ_UNCOMMITTED,'repeatable read':s.REPEATABLE_READ,serializable:s.SERIALIZABLE,snapshot:s.SNAPSHOT}[t];if(void 0===o)throw new Error(`Unknown isolation level: ${t}`);return o}function T(t){return new Promise((s=>{t.request.once('requestCompleted',s);(0,i.default)(this,w)[w].cancel()||(t.request.off('requestCompleted',s),s(void 0))}))}var E=(0,s.default)("request"),S=(0,s.default)("rows"),O=(0,s.default)("streamChunkSize"),q=(0,s.default)("subscribers"),C=(0,s.default)("tedious"),j=(0,s.default)("error"),k=(0,s.default)("rowCount"),D=(0,s.default)("addParametersToRequest"),I=(0,s.default)("attachListeners"),R=(0,s.default)("getTediousDataType");class A{constructor(t){Object.defineProperty(this,R,{value:L}),Object.defineProperty(this,I,{value:B}),Object.defineProperty(this,D,{value:N}),Object.defineProperty(this,E,{writable:!0,value:void 0}),Object.defineProperty(this,S,{writable:!0,value:void 0}),Object.defineProperty(this,O,{writable:!0,value:void 0}),Object.defineProperty(this,q,{writable:!0,value:void 0}),Object.defineProperty(this,C,{writable:!0,value:void 0}),Object.defineProperty(this,j,{writable:!0,value:void 0}),Object.defineProperty(this,k,{writable:!0,value:void 0});const{compiledQuery:s,onDone:o,streamChunkSize:n,tedious:l}=t;if((0,i.default)(this,S)[S]=[],(0,i.default)(this,O)[O]=n,(0,i.default)(this,q)[q]={},(0,i.default)(this,C)[C]=l,o){const t='onDone';(0,i.default)(this,q)[q][t]=(s,n)=>{'chunkReady'!==s&&(delete(0,i.default)(this,q)[q][t],'error'===s?o.reject(n):o.resolve({rowCount:(0,i.default)(this,k)[k],rows:(0,i.default)(this,S)[S]}))}}(0,i.default)(this,E)[E]=new((0,i.default)(this,C)[C].Request)(s.sql,((t,s)=>{t?Object.values((0,i.default)(this,q)[q]).forEach((i=>i('error',t instanceof AggregateError?t.errors:t))):(0,i.default)(this,k)[k]=s})),(0,i.default)(this,D)[D](s.parameters),(0,i.default)(this,I)[I]()}get request(){return(0,i.default)(this,E)[E]}readChunk(){const t=this.readChunk.name;return new Promise(((s,o)=>{(0,i.default)(this,q)[q][t]=(n,l)=>{delete(0,i.default)(this,q)[q][t],'error'===n?o(l):s((0,i.default)(this,S)[S].splice(0,(0,i.default)(this,O)[O]))},(0,i.default)(this,E)[E].resume()}))}}function N(t){for(let s=0;s<t.length;s++){const o=t[s];(0,i.default)(this,E)[E].addParameter(String(s+1),(0,i.default)(this,R)[R](o),o)}}function B(){const t=(0,i.default)(this,O)[O]?()=>{(0,i.default)(this,O)[O]<=(0,i.default)(this,S)[S].length&&((0,i.default)(this,E)[E].pause(),Object.values((0,i.default)(this,q)[q]).forEach((t=>t('chunkReady'))))}:()=>{},s=s=>{const o={};for(const t of s)o[t.metadata.colName]=t.value;(0,i.default)(this,S)[S].push(o),t()};(0,i.default)(this,E)[E].on('row',s),(0,i.default)(this,E)[E].once('requestCompleted',(()=>{Object.values((0,i.default)(this,q)[q]).forEach((t=>t('completed'))),(0,i.default)(this,E)[E].off('row',s)}))}function L(t){return(0,o.isNull)(t)||(0,o.isUndefined)(t)||(0,o.isString)(t)?(0,i.default)(this,C)[C].TYPES.NVarChar:(0,o.isBigInt)(t)||(0,o.isNumber)(t)&&t%1==0?t<-2147483648||t>2147483647?(0,i.default)(this,C)[C].TYPES.BigInt:(0,i.default)(this,C)[C].TYPES.Int:(0,o.isNumber)(t)?(0,i.default)(this,C)[C].TYPES.Float:(0,o.isBoolean)(t)?(0,i.default)(this,C)[C].TYPES.Bit:(0,o.isDate)(t)?(0,i.default)(this,C)[C].TYPES.DateTime:(0,o.isBuffer)(t)?(0,i.default)(this,C)[C].TYPES.VarBinary:(0,i.default)(this,C)[C].TYPES.NVarChar}}),7334,[16,3270,3271,7110,7302,7323,7203,7213]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.MssqlIntrospector=void 0;var s=r(d[0]),n=r(d[1]);e.MssqlIntrospector=class{#e;constructor(s){this.#e=s}async getSchemas(){return await this.#e.selectFrom('sys.schemas').select('name').execute()}async getTables(t={withInternalKyselyTables:!1}){const l=await this.#e.selectFrom('sys.tables as tables').leftJoin('sys.schemas as table_schemas','table_schemas.schema_id','tables.schema_id').innerJoin('sys.columns as columns','columns.object_id','tables.object_id').innerJoin('sys.types as types','types.user_type_id','columns.user_type_id').leftJoin('sys.schemas as type_schemas','type_schemas.schema_id','types.schema_id').leftJoin('sys.extended_properties as comments',(s=>s.onRef('comments.major_id','=','tables.object_id').onRef('comments.minor_id','=','columns.column_id').on('comments.name','=','MS_Description'))).$if(!t.withInternalKyselyTables,(n=>n.where('tables.name','!=',s.DEFAULT_MIGRATION_TABLE).where('tables.name','!=',s.DEFAULT_MIGRATION_LOCK_TABLE))).select(['tables.name as table_name',s=>s.ref('tables.type').$castTo().as('table_type'),'table_schemas.name as table_schema_name','columns.default_object_id as column_default_object_id','columns.generated_always_type_desc as column_generated_always_type','columns.is_computed as column_is_computed','columns.is_identity as column_is_identity','columns.is_nullable as column_is_nullable','columns.is_rowguidcol as column_is_rowguidcol','columns.name as column_name','types.is_nullable as type_is_nullable','types.name as type_name','type_schemas.name as type_schema_name','comments.value as column_comment']).unionAll(this.#e.selectFrom('sys.views as views').leftJoin('sys.schemas as view_schemas','view_schemas.schema_id','views.schema_id').innerJoin('sys.columns as columns','columns.object_id','views.object_id').innerJoin('sys.types as types','types.user_type_id','columns.user_type_id').leftJoin('sys.schemas as type_schemas','type_schemas.schema_id','types.schema_id').leftJoin('sys.extended_properties as comments',(s=>s.onRef('comments.major_id','=','views.object_id').onRef('comments.minor_id','=','columns.column_id').on('comments.name','=','MS_Description'))).select(['views.name as table_name','views.type as table_type','view_schemas.name as table_schema_name','columns.default_object_id as column_default_object_id','columns.generated_always_type_desc as column_generated_always_type','columns.is_computed as column_is_computed','columns.is_identity as column_is_identity','columns.is_nullable as column_is_nullable','columns.is_rowguidcol as column_is_rowguidcol','columns.name as column_name','types.is_nullable as type_is_nullable','types.name as type_name','type_schemas.name as type_schema_name','comments.value as column_comment'])).orderBy('table_schema_name').orderBy('table_name').orderBy('column_name').execute(),_={};for(const s of l){const t=`${s.table_schema_name}.${s.table_name}`;(_[t]=_[t]||(0,n.freeze)({columns:[],isView:'V '===s.table_type,name:s.table_name,schema:s.table_schema_name??void 0})).columns.push((0,n.freeze)({dataType:s.type_name,dataTypeSchema:s.type_schema_name??void 0,hasDefaultValue:s.column_default_object_id>0||'NOT_APPLICABLE'!==s.column_generated_always_type||s.column_is_identity||s.column_is_computed||s.column_is_rowguidcol,isAutoIncrementing:s.column_is_identity,isNullable:s.column_is_nullable&&s.type_is_nullable,name:s.column_name,comment:s.column_comment??void 0}))}return Object.values(_)}async getMetadata(s){return{tables:await this.getTables(s)}}}}),7335,[7314,7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.MssqlQueryCompiler=void 0;var o=r(d[0]);class t extends o.DefaultQueryCompiler{getCurrentParameterPlaceholder(){return`@${this.numParameters}`}visitOffset(o){super.visitOffset(o),this.append(' rows')}compileColumnAlterations(o){const t={};for(const s of o)t[s.kind]||(t[s.kind]=[]),t[s.kind].push(s);let s=!0;t.AddColumnNode&&(this.append('add '),this.compileList(t.AddColumnNode),s=!1),t.AlterColumnNode&&(s||this.append(', '),this.compileList(t.AlterColumnNode)),t.DropColumnNode&&(s||this.append(', '),this.append('drop column '),this.compileList(t.DropColumnNode)),t.ModifyColumnNode&&(s||this.append(', '),this.compileList(t.ModifyColumnNode)),t.RenameColumnNode&&(s||this.append(', '),this.compileList(t.RenameColumnNode))}visitAddColumn(o){this.visitNode(o.column)}visitDropColumn(o){this.visitNode(o.column)}visitMergeQuery(o){super.visitMergeQuery(o),this.append(';')}announcesNewColumnDataType(){return!1}}e.MssqlQueryCompiler=t}),7336,[7300]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0})}),7337,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.FileMigrationProvider=void 0;var t=r(d[0]);function s(s){return(0,t.isObject)(s)&&(0,t.isFunction)(s.up)}e.FileMigrationProvider=class{#t;constructor(t){this.#t=t}async getMigrations(){const t={},o=await this.#t.fs.readdir(this.#t.migrationFolder);for(const n of o)if(n.endsWith('.js')||n.endsWith('.ts')&&!n.endsWith('.d.ts')||n.endsWith('.mjs')||n.endsWith('.mts')&&!n.endsWith('.d.mts')){const o=await import(this.#t.path.join(this.#t.migrationFolder,n)),p=n.substring(0,n.lastIndexOf('.'));s(o?.default)?t[p]=o.default:s(o)&&(t[p]=o)}return t}}}),7338,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0})}),7339,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.CamelCasePlugin=void 0;var s=r(d[0]),t=r(d[1]),n=r(d[2]);function o(t,n){return(0,s.isPlainObject)(t)&&!n?.maintainNestedObjectKeys}e.CamelCasePlugin=class{#e;#s;#a;constructor(s={}){this.opt=s,this.#e=(0,n.createCamelCaseMapper)(s),this.#s=(0,n.createSnakeCaseMapper)(s),this.#a=new t.SnakeCaseTransformer(this.snakeCase.bind(this))}transformQuery(s){return this.#a.transformNode(s.node)}async transformResult(s){return s.result.rows&&Array.isArray(s.result.rows)?{...s.result,rows:s.result.rows.map((s=>this.mapRow(s)))}:s.result}mapRow(s){return Object.keys(s).reduce(((t,n)=>{let u=s[n];return Array.isArray(u)?u=u.map((s=>o(s,this.opt)?this.mapRow(s):s)):o(u,this.opt)&&(u=this.mapRow(u)),t[this.camelCase(n)]=u,t}),{})}snakeCase(s){return this.#s(s)}camelCase(s){return this.#e(s)}}}),7340,[7110,7341,7342]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.SnakeCaseTransformer=void 0;var s=r(d[0]);class n extends s.OperationNodeTransformer{#e;constructor(s){super(),this.#e=s}transformIdentifier(s){return s=super.transformIdentifier(s),{...s,name:this.#e(s.name)}}}e.SnakeCaseTransformer=n}),7341,[7206]);
__d((function(g,r,_i,a,m,e,d){function t(t){for(let n=1,o=t.length;n<o;++n){const o=t[n];if('_'!==o&&o!==o.toUpperCase())return!1}return!0}function n(t){return t>='0'&&t<='9'}function o(t){const n=new Map;return o=>{let s=n.get(o);return s||(s=t(o),n.set(o,s)),s}}Object.defineProperty(e,"__esModule",{value:!0}),e.createCamelCaseMapper=function({upperCase:n=!1}={}){return o((o=>{if(0===o.length)return o;n&&t(o)&&(o=o.toLowerCase());let s=o[0];for(let t=1,n=o.length;t<n;++t){const n=o[t],u=o[t-1];'_'!==n&&(s+='_'===u?n.toUpperCase():n)}return s}))},e.createSnakeCaseMapper=function({upperCase:t=!1,underscoreBeforeDigits:s=!1,underscoreBetweenUppercaseLetters:u=!1}={}){return o((o=>{if(0===o.length)return o;const p=o.toUpperCase(),c=o.toLowerCase();let f=c[0];for(let t=1,l=o.length;t<l;++t){const l=o[t],i=o[t-1],C=p[t],_=p[t-1],h=c[t],U=c[t-1];if(!s||!n(l)||n(i)||f.endsWith('_'))if(l===C&&C!==h){f+=u||!(i===_&&_!==U)?'_'+h:h}else f+=l;else f+='_'+l}return t?f.toUpperCase():f}))}}),7342,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.DeduplicateJoinsPlugin=void 0;var n=r(d[0]);e.DeduplicateJoinsPlugin=class{#e=new n.DeduplicateJoinsTransformer;transformQuery(n){return this.#e.transformNode(n.node)}transformResult(n){return Promise.resolve(n.result)}}}),7343,[7344]);
__d((function(g,r,_i,a,m,e,d){var t=r(d[0]);Object.defineProperty(e,"__esModule",{value:!0}),e.DeduplicateJoinsTransformer=void 0;var n=t(r(d[1])),s=t(r(d[2])),u=r(d[3]),o=r(d[4]),f=(0,s.default)("transformQuery"),i=(0,s.default)("deduplicateJoins");class l extends u.OperationNodeTransformer{constructor(...t){super(...t),Object.defineProperty(this,i,{value:p}),Object.defineProperty(this,f,{value:c})}transformSelectQuery(t){return(0,n.default)(this,f)[f](super.transformSelectQuery(t))}transformUpdateQuery(t){return(0,n.default)(this,f)[f](super.transformUpdateQuery(t))}transformDeleteQuery(t){return(0,n.default)(this,f)[f](super.transformDeleteQuery(t))}}function c(t){return t.joins&&0!==t.joins.length?(0,o.freeze)({...t,joins:(0,n.default)(this,i)[i](t.joins)}):t}function p(t){const n=[];for(let s=0;s<t.length;++s){let u=!1;for(let f=0;f<n.length;++f)if((0,o.compare)(t[s],n[f])){u=!0;break}u||n.push(t[s])}return(0,o.freeze)(n)}e.DeduplicateJoinsTransformer=l}),7344,[16,3270,3271,7206,7110]);
__d((function(g,r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ParseJSONResultsPlugin=void 0;var t=r(d[0]);function n(t,n){const c='create'===n?new Array(t.length):t;for(let o=0;o<t.length;++o)c[o]=s(t[o],n);return c}function s(s,u){return(0,t.isString)(s)?c(s):Array.isArray(s)?n(s,u):(0,t.isPlainObject)(s)?o(s,u):s}function c(t){if(null!=t.match(/^[\[\{]/))try{return s(JSON.parse(t),'in-place')}catch(t){}return t}function o(t,n){const c='create'===n?{}:t;for(const o in t)c[o]=s(t[o],n);return c}e.ParseJSONResultsPlugin=class{#t;constructor(t={}){this.opt=t,this.#t=t.objectStrategy||'in-place'}transformQuery(t){return t.node}async transformResult(t){return{...t.result,rows:n(t.result.rows,this.#t)}}}}),7345,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0})}),7346,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ListNode=void 0;var t=r(d[0]);e.ListNode=(0,t.freeze)({is:t=>'ListNode'===t.kind,create:o=>(0,t.freeze)({kind:'ListNode',items:(0,t.freeze)(o)})})}),7347,[7110]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0})}),7348,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0})}),7349,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0})}),7350,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0})}),7351,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0})}),7352,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0})}),7353,[]);
__d((function(g,_r,_i,a,_m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.c=void 0;var t=_r(d[0]),o=_r(d[1]),n=_r(d[2]),r=_r(d[3]);_r(d[4]),_r(d[5]),_r(d[6]),_r(d[7]),_r(d[8]),_r(d[9]),_r(d[10]),_r(d[11]),_r(d[12]),_r(d[13]),_r(d[14]),_r(d[15]),_r(d[16]);var s=_r(d[17]);let i=[],u=-1;const l="\x1b[0m",m="\x1b[1m",c="\x1b[2m",f={yellow:"\x1b[33m",magenta:"\x1b[35m"},p={black:"\x1b[40m"};function $(t){return`${f.magenta}#${t}${l}`}function y(t,o){return`${p.black}${f.yellow}[${t}/${o}]${l}`}function b(t){return`${m}${t}${l}`}function h(t){return`${c}(${t})${l}`}e.c=({adapter:l,config:m})=>c=>{const f={...m,supportsBooleans:m.supportsBooleans??!0,supportsDates:m.supportsDates??!0,supportsJSON:m.supportsJSON??!1,adapterName:m.adapterName??m.adapterId,supportsNumericIds:m.supportsNumericIds??!0};if(!0===c.advanced?.database?.useNumberId&&!1===f.supportsNumericIds)throw new Error(`[${f.adapterName}] Your database or database adapter does not support numeric ids. Please disable "useNumberId" in your config.`);const p=(0,n.g)(c),w=({field:t,model:o})=>{if("id"===t)return t;const n=N(o);let r=p[n]?.fields[t];if(r||(r=Object.values(p[n]?.fields).find((o=>o.fieldName===t))),!r)throw v(`Field ${t} not found in model ${n}`),v("Schema:",p),new Error(`Field ${t} not found in model ${n}`);return t},N=t=>{if(f.usePlural&&"s"===t.charAt(t.length-1)){let o=t.slice(0,-1),n=p[o]?o:void 0;if(n||(n=Object.entries(p).find((([t,n])=>n.modelName===o))?.[0]),n)return n}let o=p[t]?t:void 0;if(o||(o=Object.entries(p).find((([o,n])=>n.modelName===t))?.[0]),!o)throw v(`Model "${t}" not found in schema`),v("Schema:",p),new Error(`Model "${t}" not found in schema`);return o},M=t=>p[t].modelName!==t?p[t].modelName:f.usePlural?`${t}s`:t;function I({model:t,field:o}){const n=N(t),r=w({model:n,field:o});return p[n]?.fields[r]?.fieldName||r}const v=(...t)=>{if(!0===f.debugLogs||"object"==typeof f.debugLogs){if("object"==typeof f.debugLogs&&"isRunningAdapterTests"in f.debugLogs)return void(f.debugLogs.isRunningAdapterTests&&(t.shift(),i.push(t)));if("object"==typeof f.debugLogs&&f.debugLogs.logCondition&&!f.debugLogs.logCondition?.())return;if("object"==typeof t[0]&&"method"in t[0]){const o=t.shift().method;if("object"==typeof f.debugLogs){if("create"===o&&!f.debugLogs.create)return;if("update"===o&&!f.debugLogs.update)return;if("updateMany"===o&&!f.debugLogs.updateMany)return;if("findOne"===o&&!f.debugLogs.findOne)return;if("findMany"===o&&!f.debugLogs.findMany)return;if("delete"===o&&!f.debugLogs.delete)return;if("deleteMany"===o&&!f.debugLogs.deleteMany)return;if("count"===o&&!f.debugLogs.count)return}s.l.info(`[${f.adapterName}]`,...t)}else s.l.info(`[${f.adapterName}]`,...t)}},L=({customModelName:t})=>{const o=!f.disableIdGeneration&&!c.advanced?.database?.useNumberId,n=N(t??"id");return{type:c.advanced?.database?.useNumberId?"number":"string",required:!!o,...o?{defaultValue(){if(f.disableIdGeneration)return;const t=c.advanced?.database?.useNumberId;let o=c.advanced?.database?.generateId;return c.advanced?.generateId&&(s.l.warn("Your Better Auth config includes advanced.generateId which is deprecated. Please use advanced.database.generateId instead. This will be removed in future releases."),o=c.advanced?.generateId),!1===o||t?void 0:o?o({model:n}):f.customIdGenerator?f.customIdGenerator({model:n}):(0,r.g)()}}:{}}},O=({model:t,field:o})=>{const n=N(t),r=w({field:o,model:t}),s=p[n].fields;return s.id=L({customModelName:n}),s[r]},D=l({options:c,schema:p,debugLog:v,getFieldName:I,getModelName:M,getDefaultModelName:N,getDefaultFieldName:w,getFieldAttributes:O}),R=async(t,n,r)=>{const s={},i=p[n].fields,u=f.mapKeysTransformInput??{};f.disableIdGeneration||c.advanced?.database?.useNumberId||(i.id=L({customModelName:n}));for(const l in i){const m=t[l],$=i[l];let y=u[l]||i[l].fieldName||l;if(void 0===m&&(!$.defaultValue&&!$.transform?.input||"update"===r))continue;let b=(0,o.w)(m,$,r);$.transform?.input&&(b=await $.transform.input(b)),"id"===$.references?.field&&c.advanced?.database?.useNumberId?b=Array.isArray(b)?b.map(Number):Number(b):!1===f.supportsJSON&&"object"==typeof b&&"json"===$.type?b=JSON.stringify(b):!1===f.supportsDates&&b instanceof Date&&"date"===$.type?b=b.toISOString():!1===f.supportsBooleans&&"boolean"==typeof b&&(b=b?1:0),f.customTransformInput&&(b=f.customTransformInput({data:b,action:r,field:y,fieldAttributes:$,model:n,schema:p,options:c})),s[y]=b}return s},j=async(o,n,r=[])=>{if(!o)return null;const s=f.mapKeysTransformOutput??{},i={},u=p[n].fields,l=Object.entries(s).find((([t,o])=>"id"===o))?.[0];u[l??"id"]={type:c.advanced?.database?.useNumberId?"number":"string"};for(const l in u){if(r.length&&!r.includes(l))continue;const m=u[l];if(m){const u=m.fieldName||l;let $=o[Object.entries(s).find((([t,o])=>o===u))?.[0]||u];m.transform?.output&&($=await m.transform.output($));let y=s[l]||l;"id"===u||"id"===m.references?.field?void 0!==$&&($=String($)):!1===f.supportsJSON&&"string"==typeof $&&"json"===m.type?$=(0,t.s)($):!1===f.supportsDates&&"string"==typeof $&&"date"===m.type?$=new Date($):!1===f.supportsBooleans&&"number"==typeof $&&"boolean"===m.type&&($=1===$),f.customTransformOutput&&($=f.customTransformOutput({data:$,field:y,fieldAttributes:m,select:r,model:n,schema:p,options:c})),i[y]=$}}return i},A=({model:t,where:o})=>{if(o)return o.map((o=>{const{field:n,value:r,operator:s="eq",connector:i="AND"}=o;if("in"===s&&!Array.isArray(r))throw new Error("Value must be an array");const u=N(t),l=w({field:n,model:t}),m=I({field:l,model:u}),f=O({field:l,model:u});return"id"!==l&&"id"!==f.references?.field||!c.advanced?.database?.useNumberId?{operator:s,connector:i,field:m,value:r}:Array.isArray(r)?{operator:s,connector:i,field:m,value:r.map(Number)}:{operator:s,connector:i,field:m,value:Number(r)}}))};return{create:async({data:t,model:o,select:n})=>{u++;let r=u;const i=M(o);if("id"in t){s.l.warn(`[${f.adapterName}] - You are trying to create a record with an id. This is not allowed as we handle id generation for you. The id will be ignored.`);const o=new Error,n=o.stack?.split("\n").filter(((t,o)=>1!==o)).join("\n").replace("Error:","Create method with `id` being called at:");console.log(n),t.id=void 0}v({method:"create"},`${$(r)} ${y(1,4)}`,`${b("create")} ${h("Unsafe Input")}:`,{model:i,data:t});const l=await R(t,o,"create");v({method:"create"},`${$(r)} ${y(2,4)}`,`${b("create")} ${h("Parsed Input")}:`,{model:i,data:l});const m=await D.create({data:l,model:i});v({method:"create"},`${$(r)} ${y(3,4)}`,`${b("create")} ${h("DB Result")}:`,{model:i,res:m});const c=await j(m,o,n);return v({method:"create"},`${$(r)} ${y(4,4)}`,`${b("create")} ${h("Parsed Result")}:`,{model:i,data:c}),c},update:async({model:t,where:o,update:n})=>{u++;let r=u;const s=M(t),i=A({model:t,where:o});v({method:"update"},`${$(r)} ${y(1,4)}`,`${b("update")} ${h("Unsafe Input")}:`,{model:s,data:n});const l=await R(n,t,"update");v({method:"update"},`${$(r)} ${y(2,4)}`,`${b("update")} ${h("Parsed Input")}:`,{model:s,data:l});const m=await D.update({model:s,where:i,update:l});v({method:"update"},`${$(r)} ${y(3,4)}`,`${b("update")} ${h("DB Result")}:`,{model:s,data:m});const c=await j(m,t);return v({method:"update"},`${$(r)} ${y(4,4)}`,`${b("update")} ${h("Parsed Result")}:`,{model:s,data:c}),c},updateMany:async({model:t,where:o,update:n})=>{u++;let r=u;const s=M(t),i=A({model:t,where:o});v({method:"updateMany"},`${$(r)} ${y(1,4)}`,`${b("updateMany")} ${h("Unsafe Input")}:`,{model:s,data:n});const l=await R(n,t,"update");v({method:"updateMany"},`${$(r)} ${y(2,4)}`,`${b("updateMany")} ${h("Parsed Input")}:`,{model:s,data:l});const m=await D.updateMany({model:s,where:i,update:l});return v({method:"updateMany"},`${$(r)} ${y(3,4)}`,`${b("updateMany")} ${h("DB Result")}:`,{model:s,data:m}),v({method:"updateMany"},`${$(r)} ${y(4,4)}`,`${b("updateMany")} ${h("Parsed Result")}:`,{model:s,data:m}),m},findOne:async({model:t,where:o,select:n})=>{u++;let r=u;const s=M(t),i=A({model:t,where:o});v({method:"findOne"},`${$(r)} ${y(1,3)}`,`${b("findOne")}:`,{model:s,where:i,select:n});const l=await D.findOne({model:s,where:i,select:n});v({method:"findOne"},`${$(r)} ${y(2,3)}`,`${b("findOne")} ${h("DB Result")}:`,{model:s,data:l});const m=await j(l,t,n);return v({method:"findOne"},`${$(r)} ${y(3,3)}`,`${b("findOne")} ${h("Parsed Result")}:`,{model:s,data:m}),m},findMany:async({model:t,where:o,limit:n,sortBy:r,offset:s})=>{u++;let i=u;const l=n??c.advanced?.database?.defaultFindManyLimit??100,m=M(t),f=A({model:t,where:o});v({method:"findMany"},`${$(i)} ${y(1,3)}`,`${b("findMany")}:`,{model:m,where:f,limit:l,sortBy:r,offset:s});const p=await D.findMany({model:m,where:f,limit:l,sortBy:r,offset:s});v({method:"findMany"},`${$(i)} ${y(2,3)}`,`${b("findMany")} ${h("DB Result")}:`,{model:m,data:p});const w=await Promise.all(p.map((async o=>await j(o,t))));return v({method:"findMany"},`${$(i)} ${y(3,3)}`,`${b("findMany")} ${h("Parsed Result")}:`,{model:m,data:w}),w},delete:async({model:t,where:o})=>{u++;let n=u;const r=M(t),s=A({model:t,where:o});v({method:"delete"},`${$(n)} ${y(1,2)}`,`${b("delete")}:`,{model:r,where:s}),await D.delete({model:r,where:s}),v({method:"delete"},`${$(n)} ${y(2,2)}`,`${b("delete")} ${h("DB Result")}:`,{model:r})},deleteMany:async({model:t,where:o})=>{u++;let n=u;const r=M(t),s=A({model:t,where:o});v({method:"deleteMany"},`${$(n)} ${y(1,2)}`,`${b("deleteMany")} ${h("DeleteMany")}:`,{model:r,where:s});const i=await D.deleteMany({model:r,where:s});return v({method:"deleteMany"},`${$(n)} ${y(2,2)}`,`${b("deleteMany")} ${h("DB Result")}:`,{model:r,data:i}),i},count:async({model:t,where:o})=>{u++;let n=u;const r=M(t),s=A({model:t,where:o});v({method:"count"},`${$(n)} ${y(1,2)}`,`${b("count")}:`,{model:r,where:s});const i=await D.count({model:r,where:s});return v({method:"count"},`${$(n)} ${y(2,2)}`,`${b("count")}:`,{model:r,data:i}),i},createSchema:D.createSchema?async(t,o)=>{const r=(0,n.g)(c);return c.secondaryStorage&&!c.session?.storeSessionInDatabase&&delete r.session,!c.rateLimit||"database"!==c.rateLimit.storage||void 0!==c.rateLimit.enabled&&!0!==c.rateLimit.enabled||(r.ratelimit={modelName:c.rateLimit.modelName??"ratelimit",fields:{key:{type:"string",unique:!0,required:!0,fieldName:c.rateLimit.fields?.key??"key"},count:{type:"number",required:!0,fieldName:c.rateLimit.fields?.count??"count"},lastRequest:{type:"number",required:!0,bigint:!0,defaultValue:()=>Date.now(),fieldName:c.rateLimit.fields?.lastRequest??"lastRequest"}}}),D.createSchema({file:o,tables:r})}:void 0,options:{adapterConfig:f,...D.options??{}},id:f.adapterId,...f.debugLogs?.isRunningAdapterTests?{adapterTestDebugLogs:{resetDebugLogs(){i=[]},printDebugLogs(){const t="\u2500".repeat(80);let o=i.reverse().map((t=>(t[0]=`\n${t[0]}`,[...t,"\n"]))).reduce(((t,o)=>[...o,...t]),[`\n${t}`]);console.log(...o)}}}:{}}}}),7354,[6986,7355,7104,7095,3739,6977,7074,7075,7078,7080,6983,6988,7082,7090,6985,7086,7091,7093]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.w=function(u,t,l){if("update"===l)return u;if(null==u&&t.defaultValue)return"function"==typeof t.defaultValue?t.defaultValue():t.defaultValue;return u}}),7355,[]);
__d((function(g,r,i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.m=void 0;var t=r(d[0]);e.m=(n,a)=>(0,t.c)({config:{adapterId:"memory",adapterName:"Memory Adapter",usePlural:!1,debugLogs:a?.debugLogs||!1,customTransformInput:t=>t.options.advanced?.database?.useNumberId&&"id"===t.field&&"create"===t.action?n[t.model].length+1:t.data},adapter:({getFieldName:t,options:a})=>{function s(t,n){return n.filter((n=>t.every((t=>{let{field:a,value:s,operator:l}=t;if("in"===l){if(!Array.isArray(s))throw new Error("Value must be an array");return s.includes(n[a])}return"contains"===l?n[a].includes(s):"starts_with"===l?n[a].startsWith(s):"ends_with"===l?n[a].endsWith(s):n[a]===s}))))}return{create:async({model:t,data:s})=>(a.advanced?.database?.useNumberId&&(s.id=n[t].length+1),n[t].push(s),s),findOne:async({model:t,where:a})=>s(a,n[t])[0]||null,findMany:async({model:a,where:l,sortBy:o,limit:u,offset:c})=>{let f=n[a];return l&&(f=s(l,f)),o&&(f=f.sort(((n,s)=>{const l=t({model:a,field:o.field});return"asc"===o.direction?n[l]>s[l]?1:-1:n[l]<s[l]?1:-1}))),void 0!==c&&(f=f.slice(c)),void 0!==u&&(f=f.slice(0,u)),f},count:async({model:t})=>n[t].length,update:async({model:t,where:a,update:l})=>{const o=s(a,n[t]);return o.forEach((t=>{Object.assign(t,l)})),o[0]||null},delete:async({model:t,where:a})=>{const l=n[t],o=s(a,l);n[t]=l.filter((t=>!o.includes(t)))},deleteMany:async({model:t,where:a})=>{const l=n[t],o=s(a,l);let u=0;return n[t]=l.filter((t=>o.includes(t)?(u++,!1):!o.includes(t))),u},updateMany({model:t,where:a,update:l}){const o=s(a,n[t]);return o.forEach((t=>{Object.assign(t,l)})),o[0]||null}}}})}),7356,[7354]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.c=async function(n,o){const t=await o.context.internalAdapter.findAccounts(n),c=t?.find((s=>"credential"===s.providerId)),w=c?.password;if(!c||!w||!o.body.password)throw new s.APIError("BAD_REQUEST",{message:"No password credential found"});if(!await o.context.password.verify({hash:w,password:o.body.password}))throw new s.APIError("BAD_REQUEST",{message:"Invalid password"});return!0},e.v=async function(s,n){const o=await s.context.internalAdapter.findAccounts(n.userId),t=o?.find((s=>"credential"===s.providerId)),c=t?.password;if(!t||!c)return!1;return await s.context.password.verify({hash:c,password:n.password})};var s=r(d[0])}),7357,[6977]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.c=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}}),7358,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.drizzleAdapter=void 0;var t=r(d[0]),n=r(d[1]),o=r(d[2]);r(d[3]),r(d[4]),r(d[5]),r(d[6]),r(d[7]),r(d[8]),r(d[9]),r(d[10]),r(d[11]),r(d[12]),r(d[13]),r(d[14]),r(d[15]),r(d[16]),r(d[17]),r(d[18]),r(d[19]),r(d[20]),r(d[21]);e.drizzleAdapter=(l,s)=>(0,o.c)({config:{adapterId:"drizzle",adapterName:"Drizzle Adapter",usePlural:s.usePlural??!1,debugLogs:s.debugLogs??!1},adapter:({getFieldName:o,debugLog:u})=>{function c(t){const o=s.schema||l._.fullSchema;if(!o)throw new n.B("Drizzle adapter failed to initialize. Schema not found. Please provide a schema object in the adapter options object.");const u=o[t];if(!u)throw new n.B(`[# Drizzle Adapter]: The model "${t}" was not found in the schema object. Please pass the schema directly to the adapter options.`);return u}const f=async(o,u,f,w)=>{if("mysql"!==s.provider){return(await u.returning())[0]}await u.execute();const p=c(o),y=u.config?.values;if(w?.length){const t=h(w,o);return(await l.select().from(p).where(...t))[0]}if(y&&y[0]?.id?.value){let n=y[0]?.id?.value;if(!n){n=(await l.select({id:t.sql`LAST_INSERT_ID()`}).from(p).orderBy((0,t.desc)(p.id)).limit(1))[0].id}return(await l.select().from(p).where((0,t.eq)(p.id,n)).limit(1).execute())[0]}if(f.id){return(await l.select().from(p).where((0,t.eq)(p.id,f.id)).limit(1).execute())[0]}if(!("id"in p))throw new n.B(`The model "${o}" does not have an "id" field. Please use the "id" field as your primary key.`);return(await l.select().from(p).orderBy((0,t.desc)(p.id)).limit(1).execute())[0]};function h(l,s){const u=c(s);if(!l)return[];if(1===l.length){const c=l[0];if(!c)return[];const f=o({model:s,field:c.field});if(!u[f])throw new n.B(`The field "${c.field}" does not exist in the schema for the model "${s}". Please update your schema.`);if("in"===c.operator){if(!Array.isArray(c.value))throw new n.B(`The value for the field "${c.field}" must be an array when using the "in" operator.`);return[(0,t.inArray)(u[f],c.value)]}return"contains"===c.operator?[(0,t.like)(u[f],`%${c.value}%`)]:"starts_with"===c.operator?[(0,t.like)(u[f],`${c.value}%`)]:"ends_with"===c.operator?[(0,t.like)(u[f],`%${c.value}`)]:"lt"===c.operator?[(0,t.lt)(u[f],c.value)]:"lte"===c.operator?[(0,t.lte)(u[f],c.value)]:[(0,t.eq)(u[f],c.value)]}const f=l.filter((t=>"AND"===t.connector||!t.connector)),h=l.filter((t=>"OR"===t.connector)),w=(0,t.and)(...f.map((l=>{const c=o({model:s,field:l.field});if("in"===l.operator){if(!Array.isArray(l.value))throw new n.B(`The value for the field "${l.field}" must be an array when using the "in" operator.`);return(0,t.inArray)(u[c],l.value)}return(0,t.eq)(u[c],l.value)}))),p=(0,t.or)(...h.map((n=>{const l=o({model:s,field:n.field});return(0,t.eq)(u[l],n.value)}))),y=[];return f.length&&y.push(w),h.length&&y.push(p),y}function w(t,o,l){if(!t)throw new n.B("Drizzle adapter failed to initialize. Schema not found. Please provide a schema object in the adapter options object.");for(const s in l)if(!t[s])throw new n.B(`The field "${s}" does not exist in the "${o}" schema. Please update your drizzle schema or re-generate using "npx @better-auth/cli generate".`)}return{async create({model:t,data:n}){const o=c(t);w(o,t,n);const s=l.insert(o).values(n);return await f(t,s,n)},async findOne({model:t,where:n}){const o=c(t),s=h(n,t),u=await l.select().from(o).where(...s);return u.length?u[0]:null},async findMany({model:n,where:s,sortBy:u,limit:f,offset:w}){const p=c(n),y=s?h(s,n):[],v="desc"===u?.direction?t.desc:t.asc,z=l.select().from(p).limit(f||100).offset(w||0);return u?.field&&z.orderBy(v(p[o({model:n,field:u?.field})])),await z.where(...y)},async count({model:n,where:o}){const s=c(n),u=o?h(o,n):[];return(await l.select({count:(0,t.count)()}).from(s).where(...u))[0].count},async update({model:t,where:n,update:o}){const s=c(t),u=h(n,t),w=l.update(s).set(o).where(...u);return await f(t,w,o,n)},async updateMany({model:t,where:n,update:o}){const s=c(t),u=h(n,t),f=l.update(s).set(o).where(...u);return await f},async delete({model:t,where:n}){const o=c(t),s=h(n,t),u=l.delete(o).where(...s);return await u},async deleteMany({model:t,where:n}){const o=c(t),s=h(n,t),u=l.delete(o).where(...s);return await u},options:s}}})}),7359,[3740,911,7354,6986,7355,7104,7095,7092,3739,6977,7074,7075,7078,7080,6983,6988,7082,7090,6985,7086,7091,7093]);
__d((function(g,_r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.ERROR_CODES=void 0,Object.defineProperty(e,"HIDE_METADATA",{enumerable:!0,get:function(){return s.H}}),Object.defineProperty(e,"TWO_FACTOR_ERROR_CODES",{enumerable:!0,get:function(){return i.TWO_FACTOR_ERROR_CODES}}),Object.defineProperty(e,"admin",{enumerable:!0,get:function(){return p.a}}),Object.defineProperty(e,"anonymous",{enumerable:!0,get:function(){return u.anonymous}}),e.apiKey=void 0,Object.defineProperty(e,"bearer",{enumerable:!0,get:function(){return n.bearer}}),Object.defineProperty(e,"captcha",{enumerable:!0,get:function(){return _.captcha}}),Object.defineProperty(e,"createAuthEndpoint",{enumerable:!0,get:function(){return s.a}}),Object.defineProperty(e,"createAuthMiddleware",{enumerable:!0,get:function(){return s.c}}),Object.defineProperty(e,"customSession",{enumerable:!0,get:function(){return I.customSession}}),Object.defineProperty(e,"emailOTP",{enumerable:!0,get:function(){return h.emailOTP}}),Object.defineProperty(e,"genericOAuth",{enumerable:!0,get:function(){return c.genericOAuth}}),Object.defineProperty(e,"getJwtToken",{enumerable:!0,get:function(){return y.getJwtToken}}),Object.defineProperty(e,"haveIBeenPwned",{enumerable:!0,get:function(){return S.haveIBeenPwned}}),Object.defineProperty(e,"jwt",{enumerable:!0,get:function(){return y.jwt}}),Object.defineProperty(e,"magicLink",{enumerable:!0,get:function(){return o.magicLink}}),Object.defineProperty(e,"multiSession",{enumerable:!0,get:function(){return f.multiSession}}),Object.defineProperty(e,"oAuthProxy",{enumerable:!0,get:function(){return A.oAuthProxy}}),Object.defineProperty(e,"oidcProvider",{enumerable:!0,get:function(){return w.oidcProvider}}),Object.defineProperty(e,"oneTap",{enumerable:!0,get:function(){return E.oneTap}}),Object.defineProperty(e,"oneTimeToken",{enumerable:!0,get:function(){return K.oneTimeToken}}),Object.defineProperty(e,"openAPI",{enumerable:!0,get:function(){return b.openAPI}}),Object.defineProperty(e,"optionsMiddleware",{enumerable:!0,get:function(){return s.O}}),Object.defineProperty(e,"organization",{enumerable:!0,get:function(){return t.o}}),Object.defineProperty(e,"parseRoles",{enumerable:!0,get:function(){return t.p}}),Object.defineProperty(e,"phoneNumber",{enumerable:!0,get:function(){return l.phoneNumber}}),Object.defineProperty(e,"twoFactor",{enumerable:!0,get:function(){return i.twoFactor}}),Object.defineProperty(e,"twoFactorClient",{enumerable:!0,get:function(){return U.t}}),Object.defineProperty(e,"username",{enumerable:!0,get:function(){return r.username}});var t=_r(d[0]),i=_r(d[1]),r=_r(d[2]),n=_r(d[3]),s=_r(d[4]),o=_r(d[5]),l=_r(d[6]),u=_r(d[7]),p=_r(d[8]),c=_r(d[9]),y=_r(d[10]),f=_r(d[11]),h=_r(d[12]),E=_r(d[13]),A=_r(d[14]),I=_r(d[15]),b=_r(d[16]),w=_r(d[17]),_=_r(d[18]),T=_r(d[19]),x=_r(d[20]),P=_r(d[21]),R=_r(d[22]),L=_r(d[23]);_r(d[24]),_r(d[25]);var N=_r(d[26]);_r(d[27]);var O=_r(d[28]);_r(d[29]),_r(d[30]),_r(d[31]),_r(d[32]),_r(d[33]),_r(d[34]),_r(d[35]),_r(d[36]),_r(d[37]),_r(d[38]),_r(d[39]),_r(d[40]);var D=_r(d[41]),k=_r(d[42]),v=_r(d[43]),S=_r(d[44]),K=_r(d[45]),U=_r(d[46]);_r(d[47]),_r(d[48]),_r(d[49]),_r(d[50]),_r(d[51]),_r(d[52]),_r(d[53]),_r(d[54]),_r(d[55]),_r(d[56]),_r(d[57]),_r(d[58]),_r(d[59]),_r(d[60]),_r(d[61]),_r(d[62]),_r(d[63]),_r(d[64]),_r(d[65]),_r(d[66]),_r(d[67]),_r(d[68]),_r(d[69]);const q=({timeWindow:t,rateLimitMax:i})=>({apikey:{modelName:"apikey",fields:{name:{type:"string",required:!1,input:!1},start:{type:"string",required:!1,input:!1},prefix:{type:"string",required:!1,input:!1},key:{type:"string",required:!0,input:!1},userId:{type:"string",references:{model:"user",field:"id"},required:!0,input:!1},refillInterval:{type:"number",required:!1,input:!1},refillAmount:{type:"number",required:!1,input:!1},lastRefillAt:{type:"date",required:!1,input:!1},enabled:{type:"boolean",required:!1,input:!1,defaultValue:!0},rateLimitEnabled:{type:"boolean",required:!1,input:!1,defaultValue:!0},rateLimitTimeWindow:{type:"number",required:!1,input:!1,defaultValue:t},rateLimitMax:{type:"number",required:!1,input:!1,defaultValue:i},requestCount:{type:"number",required:!1,input:!1,defaultValue:0},remaining:{type:"number",required:!1,input:!1},lastRequest:{type:"date",required:!1,input:!1},expiresAt:{type:"date",required:!1,input:!1},createdAt:{type:"date",required:!0,input:!1},updatedAt:{type:"date",required:!0,input:!1},permissions:{type:"string",required:!1,input:!1},metadata:{type:"string",required:!1,input:!0,transform:{input:t=>JSON.stringify(t),output:t=>t?(0,D.p)(t):null}}}}});function j({keyGenerator:t,opts:i,schema:r,deleteAllExpiredApiKeys:n}){return(0,s.a)("/api-key/create",{method:"POST",body:R.z.object({name:R.z.string({description:"Name of the Api Key"}).optional(),expiresIn:R.z.number({description:"Expiration time of the Api Key in seconds"}).min(1).optional().nullable().default(null),userId:R.z.coerce.string({description:"User Id of the user that the Api Key belongs to. Useful for server-side only."}).optional(),prefix:R.z.string({description:"Prefix of the Api Key"}).regex(/^[a-zA-Z0-9_-]+$/,{message:"Invalid prefix format, must be alphanumeric and contain only underscores and hyphens."}).optional(),remaining:R.z.number({description:"Remaining number of requests. Server side only"}).min(0).optional().nullable().default(null),metadata:R.z.any({description:"Metadata of the Api Key"}).optional(),refillAmount:R.z.number({description:"Amount to refill the remaining count of the Api Key. Server Only Property"}).min(1).optional(),refillInterval:R.z.number({description:"Interval to refill the Api Key in milliseconds. Server Only Property."}).optional(),rateLimitTimeWindow:R.z.number({description:"The duration in milliseconds where each request is counted. Once the `maxRequests` is reached, the request will be rejected until the `timeWindow` has passed, at which point the `timeWindow` will be reset. Server Only Property."}).optional(),rateLimitMax:R.z.number({description:"Maximum amount of requests allowed within a window. Once the `maxRequests` is reached, the request will be rejected until the `timeWindow` has passed, at which point the `timeWindow` will be reset. Server Only Property."}).optional(),rateLimitEnabled:R.z.boolean({description:"Whether the key has rate limiting enabled. Server Only Property."}).optional(),permissions:R.z.record(R.z.string(),R.z.array(R.z.string())).optional()}),metadata:{openapi:{description:"Create a new API key for a user",responses:{200:{description:"API key created successfully",content:{"application/json":{schema:{type:"object",properties:{id:{type:"string",description:"Unique identifier of the API key"},createdAt:{type:"string",format:"date-time",description:"Creation timestamp"},updatedAt:{type:"string",format:"date-time",description:"Last update timestamp"},name:{type:"string",nullable:!0,description:"Name of the API key"},prefix:{type:"string",nullable:!0,description:"Prefix of the API key"},start:{type:"string",nullable:!0,description:"Starting characters of the key (if configured)"},key:{type:"string",description:"The full API key (only returned on creation)"},enabled:{type:"boolean",description:"Whether the key is enabled"},expiresAt:{type:"string",format:"date-time",nullable:!0,description:"Expiration timestamp"},userId:{type:"string",description:"ID of the user owning the key"},lastRefillAt:{type:"string",format:"date-time",nullable:!0,description:"Last refill timestamp"},lastRequest:{type:"string",format:"date-time",nullable:!0,description:"Last request timestamp"},metadata:{type:"object",nullable:!0,additionalProperties:!0,description:"Metadata associated with the key"},rateLimitMax:{type:"number",nullable:!0,description:"Maximum requests in time window"},rateLimitTimeWindow:{type:"number",nullable:!0,description:"Rate limit time window in milliseconds"},remaining:{type:"number",nullable:!0,description:"Remaining requests"},refillAmount:{type:"number",nullable:!0,description:"Amount to refill"},refillInterval:{type:"number",nullable:!0,description:"Refill interval in milliseconds"},rateLimitEnabled:{type:"boolean",description:"Whether rate limiting is enabled"},requestCount:{type:"number",description:"Current request count in window"},permissions:{type:"object",nullable:!0,additionalProperties:{type:"array",items:{type:"string"}},description:"Permissions associated with the key"}},required:["id","createdAt","updatedAt","key","enabled","userId","rateLimitEnabled","requestCount"]}}}}}}}},(async o=>{const{name:l,expiresIn:u,prefix:p,remaining:c,metadata:y,refillAmount:f,refillInterval:h,permissions:E,rateLimitMax:A,rateLimitTimeWindow:I,rateLimitEnabled:b}=o.body,w=await(0,s.g)(o),_=(o.request||o.headers)&&!o.body.userId,R=w?.user??(_?null:{id:o.body.userId});if(!R?.id)throw new P.APIError("UNAUTHORIZED",{message:G.UNAUTHORIZED_SESSION});if(_&&(void 0!==f||void 0!==h||void 0!==A||void 0!==I||void 0!==b||void 0!==E||null!==c))throw new P.APIError("BAD_REQUEST",{message:G.SERVER_ONLY_PROPERTY});if(y){if(!1===i.enableMetadata)throw new P.APIError("BAD_REQUEST",{message:G.METADATA_DISABLED});if("object"!=typeof y)throw new P.APIError("BAD_REQUEST",{message:G.INVALID_METADATA_TYPE})}if(f&&!h)throw new P.APIError("BAD_REQUEST",{message:G.REFILL_AMOUNT_AND_INTERVAL_REQUIRED});if(h&&!f)throw new P.APIError("BAD_REQUEST",{message:G.REFILL_INTERVAL_AND_AMOUNT_REQUIRED});if(u){if(!0===i.keyExpiration.disableCustomExpiresTime)throw new P.APIError("BAD_REQUEST",{message:G.KEY_DISABLED_EXPIRATION});const t=u/86400;if(i.keyExpiration.minExpiresIn>t)throw new P.APIError("BAD_REQUEST",{message:G.EXPIRES_IN_IS_TOO_SMALL});if(i.keyExpiration.maxExpiresIn<t)throw new P.APIError("BAD_REQUEST",{message:G.EXPIRES_IN_IS_TOO_LARGE})}if(p){if(p.length<i.minimumPrefixLength)throw new P.APIError("BAD_REQUEST",{message:G.INVALID_PREFIX_LENGTH});if(p.length>i.maximumPrefixLength)throw new P.APIError("BAD_REQUEST",{message:G.INVALID_PREFIX_LENGTH})}if(l){if(l.length<i.minimumNameLength)throw new P.APIError("BAD_REQUEST",{message:G.INVALID_NAME_LENGTH});if(l.length>i.maximumNameLength)throw new P.APIError("BAD_REQUEST",{message:G.INVALID_NAME_LENGTH})}n(o.context);const N=await t({length:i.defaultKeyLength,prefix:p||i.defaultPrefix}),O=await(0,x.createHash)("SHA-256").digest(N),D=T.base64Url.encode(O,{padding:!1});let v=null;i.startingCharactersConfig.shouldStore&&(v=N.substring(0,i.startingCharactersConfig.charactersLength));const S=i.permissions?.defaultPermissions?"function"==typeof i.permissions.defaultPermissions?await i.permissions.defaultPermissions(R.id,o):i.permissions.defaultPermissions:void 0,K=E?JSON.stringify(E):S?JSON.stringify(S):void 0;let U={createdAt:new Date,updatedAt:new Date,name:l??null,prefix:p??i.defaultPrefix??null,start:v,key:D,enabled:!0,expiresAt:u?(0,L.g)(u,"sec"):i.keyExpiration.defaultExpiresIn?(0,L.g)(i.keyExpiration.defaultExpiresIn,"sec"):null,userId:R.id,lastRefillAt:null,lastRequest:null,metadata:null,rateLimitMax:A??i.rateLimit.maxRequests??null,rateLimitTimeWindow:I??i.rateLimit.timeWindow??null,remaining:c||f||null,refillAmount:f??null,refillInterval:h??null,rateLimitEnabled:!!(b??void 0===i.rateLimit.enabled)||i.rateLimit.enabled,requestCount:0,permissions:K};y&&(U.metadata=r.apikey.fields.metadata.transform.input(y));const q=await o.context.adapter.create({model:r.apikey.modelName,data:U});return o.json({...q,key:N,metadata:y??null,permissions:q.permissions?(0,k.s)(q.permissions):null})}))}function M({opts:t,schema:i,deleteAllExpiredApiKeys:r}){return(0,s.a)("/api-key/delete",{method:"POST",body:R.z.object({keyId:R.z.string({description:"The id of the Api Key"})}),use:[s.s],metadata:{openapi:{description:"Delete an existing API key",requestBody:{content:{"application/json":{schema:{type:"object",properties:{keyId:{type:"string",description:"The id of the API key to delete"}},required:["keyId"]}}}},responses:{200:{description:"API key deleted successfully",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean",description:"Indicates if the API key was successfully deleted"}},required:["success"]}}}}}}}},(async t=>{const{keyId:n}=t.body,s=t.context.session;if(!0===s.user.banned)throw new P.APIError("UNAUTHORIZED",{message:G.USER_BANNED});const o=await t.context.adapter.findOne({model:i.apikey.modelName,where:[{field:"id",value:n}]});if(!o||o.userId!==s.user.id)throw new P.APIError("NOT_FOUND",{message:G.KEY_NOT_FOUND});try{await t.context.adapter.delete({model:i.apikey.modelName,where:[{field:"id",value:o.id}]})}catch(t){throw new P.APIError("INTERNAL_SERVER_ERROR",{message:t?.message})}return r(t.context),t.json({success:!0})}))}function C({opts:t,schema:i,deleteAllExpiredApiKeys:r}){return(0,s.a)("/api-key/get",{method:"GET",query:R.z.object({id:R.z.string({description:"The id of the Api Key"})}),use:[s.s],metadata:{openapi:{description:"Retrieve an existing API key by ID",responses:{200:{description:"API key retrieved successfully",content:{"application/json":{schema:{type:"object",properties:{id:{type:"string",description:"ID"},name:{type:"string",nullable:!0,description:"The name of the key"},start:{type:"string",nullable:!0,description:"Shows the first few characters of the API key, including the prefix. This allows you to show those few characters in the UI to make it easier for users to identify the API key."},prefix:{type:"string",nullable:!0,description:"The API Key prefix. Stored as plain text."},userId:{type:"string",description:"The owner of the user id"},refillInterval:{type:"number",nullable:!0,description:"The interval in which the `remaining` count is refilled by day. Example: 1 // every day"},refillAmount:{type:"number",nullable:!0,description:"The amount to refill"},lastRefillAt:{type:"string",format:"date-time",nullable:!0,description:"The last refill date"},enabled:{type:"boolean",description:"Sets if key is enabled or disabled",default:!0},rateLimitEnabled:{type:"boolean",description:"Whether the key has rate limiting enabled"},rateLimitTimeWindow:{type:"number",nullable:!0,description:"The duration in milliseconds"},rateLimitMax:{type:"number",nullable:!0,description:"Maximum amount of requests allowed within a window"},requestCount:{type:"number",description:"The number of requests made within the rate limit time window"},remaining:{type:"number",nullable:!0,description:"Remaining requests (every time api key is used this should updated and should be updated on refill as well)"},lastRequest:{type:"string",format:"date-time",nullable:!0,description:"When last request occurred"},expiresAt:{type:"string",format:"date-time",nullable:!0,description:"Expiry date of a key"},createdAt:{type:"string",format:"date-time",description:"created at"},updatedAt:{type:"string",format:"date-time",description:"updated at"},metadata:{type:"object",nullable:!0,additionalProperties:!0,description:"Extra metadata about the apiKey"},permissions:{type:"string",nullable:!0,description:"Permissions for the api key (stored as JSON string)"}},required:["id","userId","enabled","rateLimitEnabled","requestCount","createdAt","updatedAt"]}}}}}}}},(async t=>{const{id:n}=t.query,s=t.context.session;let o=await t.context.adapter.findOne({model:i.apikey.modelName,where:[{field:"id",value:n},{field:"userId",value:s.user.id}]});if(!o)throw new P.APIError("NOT_FOUND",{message:G.KEY_NOT_FOUND});r(t.context),o.metadata=i.apikey.fields.metadata.transform.output(o.metadata);const{key:l,...u}=o;return t.json({...u,permissions:u.permissions?(0,k.s)(u.permissions):null})}))}function z({opts:t,schema:i,deleteAllExpiredApiKeys:r}){return(0,s.a)("/api-key/update",{method:"POST",body:R.z.object({keyId:R.z.string({description:"The id of the Api Key"}),userId:R.z.coerce.string().optional(),name:R.z.string({description:"The name of the key"}).optional(),enabled:R.z.boolean({description:"Whether the Api Key is enabled or not"}).optional(),remaining:R.z.number({description:"The number of remaining requests"}).min(1).optional(),refillAmount:R.z.number({description:"The refill amount"}).optional(),refillInterval:R.z.number({description:"The refill interval"}).optional(),metadata:R.z.any({description:"The metadata of the Api Key"}).optional(),expiresIn:R.z.number({description:"Expiration time of the Api Key in seconds"}).min(1).optional().nullable(),rateLimitEnabled:R.z.boolean({description:"Whether the key has rate limiting enabled."}).optional(),rateLimitTimeWindow:R.z.number({description:"The duration in milliseconds where each request is counted."}).optional(),rateLimitMax:R.z.number({description:"Maximum amount of requests allowed within a window. Once the `maxRequests` is reached, the request will be rejected until the `timeWindow` has passed, at which point the `timeWindow` will be reset."}).optional(),permissions:R.z.record(R.z.string(),R.z.array(R.z.string())).optional().nullable()}),metadata:{openapi:{description:"Retrieve an existing API key by ID",responses:{200:{description:"API key retrieved successfully",content:{"application/json":{schema:{type:"object",properties:{id:{type:"string",description:"ID"},name:{type:"string",nullable:!0,description:"The name of the key"},start:{type:"string",nullable:!0,description:"Shows the first few characters of the API key, including the prefix. This allows you to show those few characters in the UI to make it easier for users to identify the API key."},prefix:{type:"string",nullable:!0,description:"The API Key prefix. Stored as plain text."},userId:{type:"string",description:"The owner of the user id"},refillInterval:{type:"number",nullable:!0,description:"The interval in which the `remaining` count is refilled by day. Example: 1 // every day"},refillAmount:{type:"number",nullable:!0,description:"The amount to refill"},lastRefillAt:{type:"string",format:"date-time",nullable:!0,description:"The last refill date"},enabled:{type:"boolean",description:"Sets if key is enabled or disabled",default:!0},rateLimitEnabled:{type:"boolean",description:"Whether the key has rate limiting enabled"},rateLimitTimeWindow:{type:"number",nullable:!0,description:"The duration in milliseconds"},rateLimitMax:{type:"number",nullable:!0,description:"Maximum amount of requests allowed within a window"},requestCount:{type:"number",description:"The number of requests made within the rate limit time window"},remaining:{type:"number",nullable:!0,description:"Remaining requests (every time api key is used this should updated and should be updated on refill as well)"},lastRequest:{type:"string",format:"date-time",nullable:!0,description:"When last request occurred"},expiresAt:{type:"string",format:"date-time",nullable:!0,description:"Expiry date of a key"},createdAt:{type:"string",format:"date-time",description:"created at"},updatedAt:{type:"string",format:"date-time",description:"updated at"},metadata:{type:"object",nullable:!0,additionalProperties:!0,description:"Extra metadata about the apiKey"},permissions:{type:"string",nullable:!0,description:"Permissions for the api key (stored as JSON string)"}},required:["id","userId","enabled","rateLimitEnabled","requestCount","createdAt","updatedAt"]}}}}}}}},(async n=>{const{keyId:o,expiresIn:l,enabled:u,metadata:p,refillAmount:c,refillInterval:y,remaining:f,name:h,permissions:E,rateLimitEnabled:A,rateLimitTimeWindow:I,rateLimitMax:b}=n.body,w=await(0,s.g)(n),_=(n.request||n.headers)&&!n.body.userId,T=w?.user??(_?null:{id:n.body.userId});if(!T?.id)throw new P.APIError("UNAUTHORIZED",{message:G.UNAUTHORIZED_SESSION});if(_&&(void 0!==c||void 0!==y||void 0!==b||void 0!==I||void 0!==A||void 0!==f||void 0!==E))throw new P.APIError("BAD_REQUEST",{message:G.SERVER_ONLY_PROPERTY});const x=await n.context.adapter.findOne({model:i.apikey.modelName,where:[{field:"id",value:o},{field:"userId",value:T.id}]});if(!x)throw new P.APIError("NOT_FOUND",{message:G.KEY_NOT_FOUND});let R={};if(void 0!==h){if(h.length<t.minimumNameLength)throw new P.APIError("BAD_REQUEST",{message:G.INVALID_NAME_LENGTH});if(h.length>t.maximumNameLength)throw new P.APIError("BAD_REQUEST",{message:G.INVALID_NAME_LENGTH});R.name=h}if(void 0!==u&&(R.enabled=u),void 0!==l){if(!0===t.keyExpiration.disableCustomExpiresTime)throw new P.APIError("BAD_REQUEST",{message:G.KEY_DISABLED_EXPIRATION});if(null!==l){const i=l/86400;if(i<t.keyExpiration.minExpiresIn)throw new P.APIError("BAD_REQUEST",{message:G.EXPIRES_IN_IS_TOO_SMALL});if(i>t.keyExpiration.maxExpiresIn)throw new P.APIError("BAD_REQUEST",{message:G.EXPIRES_IN_IS_TOO_LARGE})}R.expiresAt=l?(0,L.g)(l,"sec"):null}if(void 0!==p){if("object"!=typeof p)throw new P.APIError("BAD_REQUEST",{message:G.INVALID_METADATA_TYPE});R.metadata=i.apikey.fields.metadata.transform.input(p)}if(void 0!==f&&(R.remaining=f),void 0!==c||void 0!==y){if(void 0!==c&&void 0===y)throw new P.APIError("BAD_REQUEST",{message:G.REFILL_AMOUNT_AND_INTERVAL_REQUIRED});if(void 0!==y&&void 0===c)throw new P.APIError("BAD_REQUEST",{message:G.REFILL_INTERVAL_AND_AMOUNT_REQUIRED});R.refillAmount=c,R.refillInterval=y}if(void 0!==A&&(R.rateLimitEnabled=A),void 0!==I&&(R.rateLimitTimeWindow=I),void 0!==b&&(R.rateLimitMax=b),void 0!==E&&(R.permissions=JSON.stringify(E)),0===Object.keys(R).length)throw new P.APIError("BAD_REQUEST",{message:G.NO_VALUES_TO_UPDATE});let N=x;try{let t=await n.context.adapter.update({model:i.apikey.modelName,where:[{field:"id",value:x.id},{field:"userId",value:T.id}],update:{lastRequest:new Date,remaining:null===x.remaining?null:x.remaining-1,...R}});t&&(N=t)}catch(t){throw new P.APIError("INTERNAL_SERVER_ERROR",{message:t?.message})}r(n.context),N.metadata=i.apikey.fields.metadata.transform.output(N.metadata);const{key:O,...D}=N;return n.json({...D,permissions:D.permissions?(0,k.s)(D.permissions):null})}))}function V(t,i){const r=new Date,n=t.lastRequest,s=t.rateLimitTimeWindow,o=t.rateLimitMax;let l=t.requestCount;if(!1===i.rateLimit.enabled)return{success:!0,message:null,update:{lastRequest:r},tryAgainIn:null};if(!1===t.rateLimitEnabled)return{success:!0,message:null,update:{lastRequest:r},tryAgainIn:null};if(null===s||null===o)return{success:!0,message:null,update:null,tryAgainIn:null};if(null===n)return{success:!0,message:null,update:{lastRequest:r,requestCount:1},tryAgainIn:null};const u=r.getTime()-n.getTime();return u>s?{success:!0,message:null,update:{lastRequest:r,requestCount:1},tryAgainIn:null}:l>=o?{success:!1,message:G.RATE_LIMIT_EXCEEDED,update:null,tryAgainIn:Math.ceil(s-u)}:(l++,{success:!0,message:null,tryAgainIn:null,update:{lastRequest:r,requestCount:l}})}function Y({opts:t,schema:i,deleteAllExpiredApiKeys:r}){return(0,s.a)("/api-key/verify",{method:"POST",body:R.z.object({key:R.z.string({description:"The key to verify"}),permissions:R.z.record(R.z.string(),R.z.array(R.z.string())).optional()}),metadata:{SERVER_ONLY:!0}},(async n=>{const{key:s}=n.body;if(s.length<t.defaultKeyLength)return n.json({valid:!1,error:{message:G.INVALID_API_KEY,code:"KEY_NOT_FOUND"},key:null});if(t.customAPIKeyValidator&&!t.customAPIKeyValidator({ctx:n,key:s}))return n.json({valid:!1,error:{message:G.INVALID_API_KEY,code:"KEY_NOT_FOUND"},key:null});const o=await(0,x.createHash)("SHA-256").digest((new TextEncoder).encode(s)),l=T.base64Url.encode(new Uint8Array(o),{padding:!1}),u=await n.context.adapter.findOne({model:i.apikey.modelName,where:[{field:"key",value:l}]});if(!u)return n.json({valid:!1,error:{message:G.KEY_NOT_FOUND,code:"KEY_NOT_FOUND"},key:null});if(!1===u.enabled)return n.json({valid:!1,error:{message:G.USAGE_EXCEEDED,code:"KEY_DISABLED"},key:null});if(u.expiresAt){if((new Date).getTime()>u.expiresAt.getTime()){try{n.context.adapter.delete({model:i.apikey.modelName,where:[{field:"id",value:u.id}]})}catch(t){n.context.logger.error("Failed to delete expired API keys:",t)}return n.json({valid:!1,error:{message:G.KEY_EXPIRED,code:"KEY_EXPIRED"},key:null})}}const p=n.body.permissions,c=u.permissions?(0,k.s)(u.permissions):null;if(p){if(!c)return n.json({valid:!1,error:{message:G.KEY_NOT_FOUND,code:"KEY_NOT_FOUND"},key:null});if(!(0,v.role)(c).authorize(p).success)return n.json({valid:!1,error:{message:G.KEY_NOT_FOUND,code:"KEY_NOT_FOUND"},key:null})}let y=u.remaining,f=u.lastRefillAt;if(0===u.remaining&&null===u.refillAmount){try{n.context.adapter.delete({model:i.apikey.modelName,where:[{field:"id",value:u.id}]})}catch(t){n.context.logger.error("Failed to delete expired API keys:",t)}return n.json({valid:!1,error:{message:G.USAGE_EXCEEDED,code:"USAGE_EXCEEDED"},key:null})}if(null!==y){let t=(new Date).getTime();const i=u.refillInterval,r=u.refillAmount;let s=(f??u.createdAt).getTime();if(i&&r){(t-s)/864e5>i&&(y=r,f=new Date)}if(0===y)return n.json({valid:!1,error:{message:G.USAGE_EXCEEDED,code:"USAGE_EXCEEDED"},key:null});y--}const{message:h,success:E,update:A,tryAgainIn:I}=V(u,t),b=await n.context.adapter.update({model:i.apikey.modelName,where:[{field:"id",value:u.id}],update:{...A,remaining:y,lastRefillAt:f}});if(!1===E)return n.json({valid:!1,error:{message:h,code:"RATE_LIMITED",details:{tryAgainIn:I}},key:null});r(n.context);const{key:w,..._}=b??{key:1,permissions:void 0};return"metadata"in _&&(_.metadata=i.apikey.fields.metadata.transform.output(_.metadata)),_.permissions=_.permissions?(0,k.s)(_.permissions):null,n.json({valid:!0,error:null,key:null===b?null:_})}))}function F({opts:t,schema:i,deleteAllExpiredApiKeys:r}){return(0,s.a)("/api-key/list",{method:"GET",use:[s.s],metadata:{openapi:{description:"List all API keys for the authenticated user",responses:{200:{description:"API keys retrieved successfully",content:{"application/json":{schema:{type:"array",items:{type:"object",properties:{id:{type:"string",description:"ID"},name:{type:"string",nullable:!0,description:"The name of the key"},start:{type:"string",nullable:!0,description:"Shows the first few characters of the API key, including the prefix. This allows you to show those few characters in the UI to make it easier for users to identify the API key."},prefix:{type:"string",nullable:!0,description:"The API Key prefix. Stored as plain text."},userId:{type:"string",description:"The owner of the user id"},refillInterval:{type:"number",nullable:!0,description:"The interval in which the `remaining` count is refilled by day. Example: 1 // every day"},refillAmount:{type:"number",nullable:!0,description:"The amount to refill"},lastRefillAt:{type:"string",format:"date-time",nullable:!0,description:"The last refill date"},enabled:{type:"boolean",description:"Sets if key is enabled or disabled",default:!0},rateLimitEnabled:{type:"boolean",description:"Whether the key has rate limiting enabled"},rateLimitTimeWindow:{type:"number",nullable:!0,description:"The duration in milliseconds"},rateLimitMax:{type:"number",nullable:!0,description:"Maximum amount of requests allowed within a window"},requestCount:{type:"number",description:"The number of requests made within the rate limit time window"},remaining:{type:"number",nullable:!0,description:"Remaining requests (every time api key is used this should updated and should be updated on refill as well)"},lastRequest:{type:"string",format:"date-time",nullable:!0,description:"When last request occurred"},expiresAt:{type:"string",format:"date-time",nullable:!0,description:"Expiry date of a key"},createdAt:{type:"string",format:"date-time",description:"created at"},updatedAt:{type:"string",format:"date-time",description:"updated at"},metadata:{type:"object",nullable:!0,additionalProperties:!0,description:"Extra metadata about the apiKey"},permissions:{type:"string",nullable:!0,description:"Permissions for the api key (stored as JSON string)"}},required:["id","userId","enabled","rateLimitEnabled","requestCount","createdAt","updatedAt"]}}}}}}}}},(async t=>{const n=t.context.session;let s=await t.context.adapter.findMany({model:i.apikey.modelName,where:[{field:"userId",value:n.user.id}]});r(t.context),s=s.map((t=>({...t,metadata:i.apikey.fields.metadata.transform.output(t.metadata)})));let o=s.map((t=>{const{key:i,...r}=t;return{...r,permissions:r.permissions?(0,k.s)(r.permissions):null}}));return t.json(o)}))}function B({deleteAllExpiredApiKeys:t}){return(0,s.a)("/api-key/delete-all-expired-api-keys",{method:"POST",metadata:{SERVER_ONLY:!0}},(async i=>{try{await t(i.context,!0)}catch(t){return i.context.logger.error("[API KEY PLUGIN] Failed to delete expired API keys:",t),i.json({success:!1,error:t})}return i.json({success:!0,error:null})}))}function W({keyGenerator:t,opts:i,schema:r}){let n=null;function s(t,i=!1){if(n&&!i){if((new Date).getTime()-n.getTime()<1e4)return}n=new Date;try{return t.adapter.deleteMany({model:r.apikey.modelName,where:[{field:"expiresAt",operator:"lt",value:new Date}]})}catch(i){t.logger.error("Failed to delete expired API keys:",i)}}return{createApiKey:j({keyGenerator:t,opts:i,schema:r,deleteAllExpiredApiKeys:s}),verifyApiKey:Y({opts:i,schema:r,deleteAllExpiredApiKeys:s}),getApiKey:C({opts:i,schema:r,deleteAllExpiredApiKeys:s}),updateApiKey:z({opts:i,schema:r,deleteAllExpiredApiKeys:s}),deleteApiKey:M({opts:i,schema:r,deleteAllExpiredApiKeys:s}),listApiKeys:F({opts:i,schema:r,deleteAllExpiredApiKeys:s}),deleteAllExpiredApiKeys:B({deleteAllExpiredApiKeys:s})}}const G=e.ERROR_CODES={INVALID_METADATA_TYPE:"metadata must be an object or undefined",REFILL_AMOUNT_AND_INTERVAL_REQUIRED:"refillAmount is required when refillInterval is provided",REFILL_INTERVAL_AND_AMOUNT_REQUIRED:"refillInterval is required when refillAmount is provided",USER_BANNED:"User is banned",UNAUTHORIZED_SESSION:"Unauthorized or invalid session",KEY_NOT_FOUND:"API Key not found",KEY_DISABLED:"API Key is disabled",KEY_EXPIRED:"API Key has expired",USAGE_EXCEEDED:"API Key has reached its usage limit",KEY_NOT_RECOVERABLE:"API Key is not recoverable",EXPIRES_IN_IS_TOO_SMALL:"The expiresIn is smaller than the predefined minimum value.",EXPIRES_IN_IS_TOO_LARGE:"The expiresIn is larger than the predefined maximum value.",INVALID_REMAINING:"The remaining count is either too large or too small.",INVALID_PREFIX_LENGTH:"The prefix length is either too large or too small.",INVALID_NAME_LENGTH:"The name length is either too large or too small.",METADATA_DISABLED:"Metadata is disabled.",RATE_LIMIT_EXCEEDED:"Rate limit exceeded.",NO_VALUES_TO_UPDATE:"No values to update.",KEY_DISABLED_EXPIRATION:"Custom key expiration values are disabled.",INVALID_API_KEY:"Invalid API key.",INVALID_USER_ID_FROM_API_KEY:"The user id from the API key is invalid.",INVALID_API_KEY_GETTER_RETURN_TYPE:"API Key getter returned an invalid key type. Expected string.",SERVER_ONLY_PROPERTY:"The property you're trying to set can only be set from the server auth instance only."};e.apiKey=t=>{const i={...t,apiKeyHeaders:t?.apiKeyHeaders??"x-api-key",defaultKeyLength:t?.defaultKeyLength||64,maximumPrefixLength:t?.maximumPrefixLength??32,minimumPrefixLength:t?.minimumPrefixLength??1,maximumNameLength:t?.maximumNameLength??32,minimumNameLength:t?.minimumNameLength??1,enableMetadata:t?.enableMetadata??!1,rateLimit:{enabled:void 0===t?.rateLimit?.enabled||t?.rateLimit?.enabled,timeWindow:t?.rateLimit?.timeWindow??864e5,maxRequests:t?.rateLimit?.maxRequests??10},keyExpiration:{defaultExpiresIn:t?.keyExpiration?.defaultExpiresIn??null,disableCustomExpiresTime:t?.keyExpiration?.disableCustomExpiresTime??!1,maxExpiresIn:t?.keyExpiration?.maxExpiresIn??365,minExpiresIn:t?.keyExpiration?.minExpiresIn??1},startingCharactersConfig:{shouldStore:t?.startingCharactersConfig?.shouldStore??!0,charactersLength:t?.startingCharactersConfig?.charactersLength??6},disableSessionForAPIKeys:t?.disableSessionForAPIKeys??!1},r=(0,N.m)(q({rateLimitMax:i.rateLimit.maxRequests,timeWindow:i.rateLimit.timeWindow}),i.schema),n=i.customAPIKeyGetter||(t=>{if(!Array.isArray(i.apiKeyHeaders))return t.headers?.get(i.apiKeyHeaders);for(const r of i.apiKeyHeaders){const i=t.headers?.get(r);if(i)return i}}),o=W({keyGenerator:i.customKeyGenerator||(async t=>{const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";let r=`${t.prefix||""}`;for(let n=0;n<t.length;n++){r+=i[Math.floor(52*Math.random())]}return r}),opts:i,schema:r});return{id:"api-key",$ERROR_CODES:G,hooks:{before:[{matcher:t=>!!n(t)&&!1===i.disableSessionForAPIKeys,handler:(0,s.c)((async t=>{const s=n(t);if("string"!=typeof s)throw new P.APIError("BAD_REQUEST",{message:G.INVALID_API_KEY_GETTER_RETURN_TYPE});if(s.length<i.defaultKeyLength)throw new P.APIError("FORBIDDEN",{message:G.INVALID_API_KEY});if(i.customAPIKeyValidator&&!i.customAPIKeyValidator({ctx:t,key:s}))throw new P.APIError("FORBIDDEN",{message:G.INVALID_API_KEY});const o=await(0,x.createHash)("SHA-256").digest((new TextEncoder).encode(s)),l=T.base64Url.encode(new Uint8Array(o),{padding:!1}),u=await t.context.adapter.findOne({model:r.apikey.modelName,where:[{field:"key",value:l}]});if(!u)throw new P.APIError("UNAUTHORIZED",{message:G.INVALID_API_KEY});let p;try{const i=await t.context.internalAdapter.findUserById(u.userId);if(!i)throw new P.APIError("UNAUTHORIZED",{message:G.INVALID_USER_ID_FROM_API_KEY});p=i}catch(t){throw t}const c={user:p,session:{id:u.id,token:s,userId:p.id,userAgent:t.request?.headers.get("user-agent")??null,ipAddress:t.request?(0,O.g)(t.request,t.context.options):null,createdAt:new Date,updatedAt:new Date,expiresAt:u.expiresAt||(0,L.g)(t.context.options.session?.expiresIn||604800,"ms")}};return t.context.session=c,"/get-session"===t.path?c:{context:t}}))}]},endpoints:{createApiKey:o.createApiKey,verifyApiKey:o.verifyApiKey,getApiKey:o.getApiKey,updateApiKey:o.updateApiKey,deleteApiKey:o.deleteApiKey,listApiKeys:o.listApiKeys},schema:r}}}),7360,[7361,7362,7366,7367,6980,7368,7369,7370,7371,7373,7374,7376,7377,7378,7379,7380,7381,7382,7383,6983,7074,6977,3739,6982,910,6984,7096,7093,7100,7097,7092,7075,7078,7080,6988,7082,7090,6985,7086,7091,7106,925,6986,928,7384,7385,946,911,929,927,6981,909,7095,7363,7102,7098,7364,7357,6987,908,7073,7094,6996,7099,7372,948,947,7375,6976,7104]);
__d((function(g,r,i,a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.o=void 0,_e.p=F;var e=r(d[0]),t=r(d[1]),n=r(d[2]);r(d[3]),r(d[4]),r(d[5]),r(d[6]);var o=r(d[7]),s=r(d[8]),c=r(d[9]);r(d[10]),r(d[11]);var l=r(d[12]),I=r(d[13]),O=r(d[14]);r(d[15]),r(d[16]),r(d[17]),r(d[18]),r(d[19]),r(d[20]),r(d[21]),r(d[22]),r(d[23]),r(d[24]);var u=r(d[25]);const p=(e,t)=>{const n={};for(const[o,s]of Object.entries(e))n[o]=e=>s({...e,context:{...t,...e.context}}),n[o].path=s.path,n[o].method=s.method,n[o].options=s.options,n[o].headers=s.headers;return n},_=(e,t)=>{const n=e.adapter;return{findOrganizationBySlug:async e=>await n.findOne({model:"organization",where:[{field:"slug",value:e}]}),createOrganization:async e=>{const t=await n.create({model:"organization",data:{...e.organization,metadata:e.organization.metadata?JSON.stringify(e.organization.metadata):void 0}});return{...t,metadata:t.metadata?JSON.parse(t.metadata):void 0}},findMemberByEmail:async e=>{const t=await n.findOne({model:"user",where:[{field:"email",value:e.email}]});if(!t)return null;const o=await n.findOne({model:"member",where:[{field:"organizationId",value:e.organizationId},{field:"userId",value:t.id}]});return o?{...o,user:{id:t.id,name:t.name,email:t.email,image:t.image}}:null},listMembers:async e=>await n.findMany({model:"member",where:[{field:"organizationId",value:e.organizationId}],limit:t?.membershipLimit||100}),findMemberByOrgId:async e=>{const[t,o]=await Promise.all([await n.findOne({model:"member",where:[{field:"userId",value:e.userId},{field:"organizationId",value:e.organizationId}]}),await n.findOne({model:"user",where:[{field:"id",value:e.userId}]})]);return o&&t?{...t,user:{id:o.id,name:o.name,email:o.email,image:o.image}}:null},findMemberById:async e=>{const t=await n.findOne({model:"member",where:[{field:"id",value:e}]});if(!t)return null;const o=await n.findOne({model:"user",where:[{field:"id",value:t.userId}]});return o?{...t,user:{id:o.id,name:o.name,email:o.email,image:o.image}}:null},createMember:async e=>await n.create({model:"member",data:{...e,createdAt:new Date}}),updateMember:async(e,t)=>await n.update({model:"member",where:[{field:"id",value:e}],update:{role:t}}),deleteMember:async e=>await n.delete({model:"member",where:[{field:"id",value:e}]}),updateOrganization:async(e,t)=>{const o=await n.update({model:"organization",where:[{field:"id",value:e}],update:{...t,metadata:"object"==typeof t.metadata?JSON.stringify(t.metadata):t.metadata}});return o?{...o,metadata:o.metadata?(0,c.p)(o.metadata):void 0}:null},deleteOrganization:async e=>(await n.delete({model:"member",where:[{field:"organizationId",value:e}]}),await n.delete({model:"invitation",where:[{field:"organizationId",value:e}]}),await n.delete({model:"organization",where:[{field:"id",value:e}]}),e),setActiveOrganization:async(t,n)=>await e.internalAdapter.updateSession(t,{activeOrganizationId:n}),findOrganizationById:async e=>await n.findOne({model:"organization",where:[{field:"id",value:e}]}),findFullOrganization:async({organizationId:e,isSlug:o,includeTeams:c})=>{const l=await n.findOne({model:"organization",where:[{field:o?"slug":"id",value:e}]});if(!l)return null;const[I,O,u]=await Promise.all([n.findMany({model:"invitation",where:[{field:"organizationId",value:l.id}]}),n.findMany({model:"member",where:[{field:"organizationId",value:l.id}],limit:t?.membershipLimit||100}),c?n.findMany({model:"team",where:[{field:"organizationId",value:l.id}]}):null]);if(!l)return null;const p=O.map((e=>e.userId)),_=await n.findMany({model:"user",where:[{field:"id",value:p,operator:"in"}],limit:t?.membershipLimit||100}),E=new Map(_.map((e=>[e.id,e]))),A=O.map((e=>{const t=E.get(e.userId);if(!t)throw new s.B("Unexpected error: User not found for member");return{...e,user:{id:t.id,name:t.name,email:t.email,image:t.image}}}));return{...l,invitations:I,members:A,teams:u}},listOrganizations:async e=>{const t=await n.findMany({model:"member",where:[{field:"userId",value:e}]});if(!t||0===t.length)return[];const o=t.map((e=>e.organizationId));return await n.findMany({model:"organization",where:[{field:"id",value:o,operator:"in"}]})},createTeam:async e=>await n.create({model:"team",data:e}),findTeamById:async({teamId:e,organizationId:o,includeTeamMembers:s})=>{const c=await n.findOne({model:"team",where:[{field:"id",value:e},...o?[{field:"organizationId",value:o}]:[]]});if(!c)return null;let l=[];return s?(l=await n.findMany({model:"member",where:[{field:"teamId",value:e}],limit:t?.membershipLimit||100}),{...c,members:l}):c},updateTeam:async(e,t)=>await n.update({model:"team",where:[{field:"id",value:e}],update:{...t}}),deleteTeam:async e=>await n.delete({model:"team",where:[{field:"id",value:e}]}),listTeams:async e=>await n.findMany({model:"team",where:[{field:"organizationId",value:e}]}),createTeamInvitation:async({email:e,role:t,teamId:s,organizationId:c,inviterId:l,expiresIn:I=1728e5})=>{const O=(0,o.g)(I);return await n.create({model:"invitation",data:{email:e,role:t,organizationId:c,teamId:s,inviterId:l,status:"pending",expiresAt:O}})},findInvitationsByTeamId:async e=>await n.findMany({model:"invitation",where:[{field:"teamId",value:e}]}),createInvitation:async({invitation:e,user:s})=>{const c=(0,o.g)(t?.invitationExpiresIn||172800,"sec");return await n.create({model:"invitation",data:{status:"pending",expiresAt:c,inviterId:s.id,...e}})},findInvitationById:async e=>await n.findOne({model:"invitation",where:[{field:"id",value:e}]}),findPendingInvitation:async e=>(await n.findMany({model:"invitation",where:[{field:"email",value:e.email},{field:"organizationId",value:e.organizationId},{field:"status",value:"pending"}]})).filter((e=>new Date(e.expiresAt)>new Date)),findPendingInvitations:async e=>(await n.findMany({model:"invitation",where:[{field:"organizationId",value:e.organizationId},{field:"status",value:"pending"}]})).filter((e=>new Date(e.expiresAt)>new Date)),listInvitations:async e=>await n.findMany({model:"invitation",where:[{field:"organizationId",value:e.organizationId}]}),updateInvitation:async e=>await n.update({model:"invitation",where:[{field:"id",value:e.invitationId}],update:{status:e.status}})}},E=(0,n.c)((async e=>({}))),A=(0,n.c)({use:[n.s]},(async e=>({session:e.context.session}))),T={YOU_ARE_NOT_ALLOWED_TO_CREATE_A_NEW_ORGANIZATION:"You are not allowed to create a new organization",YOU_HAVE_REACHED_THE_MAXIMUM_NUMBER_OF_ORGANIZATIONS:"You have reached the maximum number of organizations",ORGANIZATION_ALREADY_EXISTS:"Organization already exists",ORGANIZATION_NOT_FOUND:"Organization not found",USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION:"User is not a member of the organization",YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_ORGANIZATION:"You are not allowed to update this organization",YOU_ARE_NOT_ALLOWED_TO_DELETE_THIS_ORGANIZATION:"You are not allowed to delete this organization",NO_ACTIVE_ORGANIZATION:"No active organization",USER_IS_ALREADY_A_MEMBER_OF_THIS_ORGANIZATION:"User is already a member of this organization",MEMBER_NOT_FOUND:"Member not found",ROLE_NOT_FOUND:"Role not found",YOU_ARE_NOT_ALLOWED_TO_CREATE_A_NEW_TEAM:"You are not allowed to create a new team",TEAM_ALREADY_EXISTS:"Team already exists",TEAM_NOT_FOUND:"Team not found",YOU_CANNOT_LEAVE_THE_ORGANIZATION_AS_THE_ONLY_OWNER:"You cannot leave the organization as the only owner",YOU_ARE_NOT_ALLOWED_TO_DELETE_THIS_MEMBER:"You are not allowed to delete this member",YOU_ARE_NOT_ALLOWED_TO_INVITE_USERS_TO_THIS_ORGANIZATION:"You are not allowed to invite users to this organization",USER_IS_ALREADY_INVITED_TO_THIS_ORGANIZATION:"User is already invited to this organization",INVITATION_NOT_FOUND:"Invitation not found",YOU_ARE_NOT_THE_RECIPIENT_OF_THE_INVITATION:"You are not the recipient of the invitation",YOU_ARE_NOT_ALLOWED_TO_CANCEL_THIS_INVITATION:"You are not allowed to cancel this invitation",INVITER_IS_NO_LONGER_A_MEMBER_OF_THE_ORGANIZATION:"Inviter is no longer a member of the organization",YOU_ARE_NOT_ALLOWED_TO_INVITE_USER_WITH_THIS_ROLE:"you are not allowed to invite user with this role",FAILED_TO_RETRIEVE_INVITATION:"Failed to retrieve invitation",YOU_HAVE_REACHED_THE_MAXIMUM_NUMBER_OF_TEAMS:"You have reached the maximum number of teams",UNABLE_TO_REMOVE_LAST_TEAM:"Unable to remove last team",YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_MEMBER:"You are not allowed to update this member",ORGANIZATION_MEMBERSHIP_LIMIT_REACHED:"Organization membership limit reached",YOU_ARE_NOT_ALLOWED_TO_CREATE_TEAMS_IN_THIS_ORGANIZATION:"You are not allowed to create teams in this organization",YOU_ARE_NOT_ALLOWED_TO_DELETE_TEAMS_IN_THIS_ORGANIZATION:"You are not allowed to delete teams in this organization",YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_TEAM:"You are not allowed to update this team",INVITATION_LIMIT_REACHED:"Invitation limit reached"},z=(0,n.a)("/organization/accept-invitation",{method:"POST",body:t.z.object({invitationId:t.z.string({description:"The ID of the invitation to accept"})}),use:[E,A],metadata:{openapi:{description:"Accept an invitation to an organization",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{invitation:{type:"object"},member:{type:"object"}}}}}}}}}},(async t=>{const n=t.context.session,o=_(t.context,t.context.orgOptions),s=await o.findInvitationById(t.body.invitationId);if(!s||s.expiresAt<new Date||"pending"!==s.status)throw new e.APIError("BAD_REQUEST",{message:T.INVITATION_NOT_FOUND});if(s.email.toLowerCase()!==n.user.email.toLowerCase())throw new e.APIError("FORBIDDEN",{message:T.YOU_ARE_NOT_THE_RECIPIENT_OF_THE_INVITATION});const c=t.context.orgOptions?.membershipLimit||100;if((await o.listMembers({organizationId:s.organizationId})).length>=c)throw new e.APIError("FORBIDDEN",{message:T.ORGANIZATION_MEMBERSHIP_LIMIT_REACHED});const l=await o.updateInvitation({invitationId:t.body.invitationId,status:"accepted"});if(!l)throw new e.APIError("BAD_REQUEST",{message:T.FAILED_TO_RETRIEVE_INVITATION});const I=await o.createMember({organizationId:s.organizationId,userId:n.user.id,role:s.role,createdAt:new Date,..."teamId"in l?{teamId:l.teamId}:{}});return await o.setActiveOrganization(n.session.token,s.organizationId),l?t.json({invitation:l,member:I}):t.json(null,{status:400,body:{message:T.INVITATION_NOT_FOUND}})})),f=(0,n.a)("/organization/reject-invitation",{method:"POST",body:t.z.object({invitationId:t.z.string({description:"The ID of the invitation to reject"})}),use:[E,A],metadata:{openapi:{description:"Reject an invitation to an organization",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{invitation:{type:"object"},member:{type:"null"}}}}}}}}}},(async t=>{const n=t.context.session,o=_(t.context,t.context.orgOptions),s=await o.findInvitationById(t.body.invitationId);if(!s||s.expiresAt<new Date||"pending"!==s.status)throw new e.APIError("BAD_REQUEST",{message:"Invitation not found!"});if(s.email.toLowerCase()!==n.user.email.toLowerCase())throw new e.APIError("FORBIDDEN",{message:T.YOU_ARE_NOT_THE_RECIPIENT_OF_THE_INVITATION});const c=await o.updateInvitation({invitationId:t.body.invitationId,status:"rejected"});return t.json({invitation:c,member:null})})),w=(0,n.a)("/organization/cancel-invitation",{method:"POST",body:t.z.object({invitationId:t.z.string({description:"The ID of the invitation to cancel"})}),use:[E,A],openapi:{description:"Cancel an invitation to an organization",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{invitation:{type:"object"}}}}}}}}},(async t=>{const n=t.context.session,o=_(t.context,t.context.orgOptions),s=await o.findInvitationById(t.body.invitationId);if(!s)throw new e.APIError("BAD_REQUEST",{message:T.INVITATION_NOT_FOUND});const c=await o.findMemberByOrgId({userId:n.user.id,organizationId:s.organizationId});if(!c)throw new e.APIError("BAD_REQUEST",{message:T.MEMBER_NOT_FOUND});if(!(0,l.h)({role:c.role,options:t.context.orgOptions,permissions:{invitation:["cancel"]}}))throw new e.APIError("FORBIDDEN",{message:T.YOU_ARE_NOT_ALLOWED_TO_CANCEL_THIS_INVITATION});const I=await o.updateInvitation({invitationId:t.body.invitationId,status:"canceled"});return t.json(I)})),N=(0,n.a)("/organization/get-invitation",{method:"GET",use:[E],requireHeaders:!0,query:t.z.object({id:t.z.string({description:"The ID of the invitation to get"})}),metadata:{openapi:{description:"Get an invitation by ID",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{id:{type:"string"},email:{type:"string"},role:{type:"string"},organizationId:{type:"string"},inviterId:{type:"string"},status:{type:"string"},expiresAt:{type:"string"},organizationName:{type:"string"},organizationSlug:{type:"string"},inviterEmail:{type:"string"}},required:["id","email","role","organizationId","inviterId","status","expiresAt","organizationName","organizationSlug","inviterEmail"]}}}}}}}},(async t=>{const o=await(0,n.g)(t);if(!o)throw new e.APIError("UNAUTHORIZED",{message:"Not authenticated"});const s=_(t.context,t.context.orgOptions),c=await s.findInvitationById(t.query.id);if(!c||"pending"!==c.status||c.expiresAt<new Date)throw new e.APIError("BAD_REQUEST",{message:"Invitation not found!"});if(c.email.toLowerCase()!==o.user.email.toLowerCase())throw new e.APIError("FORBIDDEN",{message:T.YOU_ARE_NOT_THE_RECIPIENT_OF_THE_INVITATION});const l=await s.findOrganizationById(c.organizationId);if(!l)throw new e.APIError("BAD_REQUEST",{message:T.ORGANIZATION_NOT_FOUND});const I=await s.findMemberByOrgId({userId:c.inviterId,organizationId:c.organizationId});if(!I)throw new e.APIError("BAD_REQUEST",{message:T.INVITER_IS_NO_LONGER_A_MEMBER_OF_THE_ORGANIZATION});return t.json({...c,organizationName:l.name,organizationSlug:l.slug,inviterEmail:I.user.email})})),h=(0,n.a)("/organization/list-invitations",{method:"GET",use:[E,A],query:t.z.object({organizationId:t.z.string({description:"The ID of the organization to list invitations for"}).optional()}).optional()},(async t=>{const o=await(0,n.g)(t);if(!o)throw new e.APIError("UNAUTHORIZED",{message:"Not authenticated"});const s=t.query?.organizationId||o.session.activeOrganizationId;if(!s)throw new e.APIError("BAD_REQUEST",{message:"Organization ID is required"});const c=_(t.context,t.context.orgOptions);if(!await c.findMemberByOrgId({userId:o.user.id,organizationId:s}))throw new e.APIError("FORBIDDEN",{message:"You are not a member of this organization"});const l=await c.listInvitations({organizationId:s});return t.json(l)})),y=(0,n.a)("/organization/remove-member",{method:"POST",body:t.z.object({memberIdOrEmail:t.z.string({description:"The ID or email of the member to remove"}),organizationId:t.z.string({description:"The ID of the organization to remove the member from. If not provided, the active organization will be used"}).optional()}),use:[E,A],metadata:{openapi:{description:"Remove a member from an organization",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{member:{type:"object",properties:{id:{type:"string"},userId:{type:"string"},organizationId:{type:"string"},role:{type:"string"}},required:["id","userId","organizationId","role"]}},required:["member"]}}}}}}}},(async t=>{const n=t.context.session,o=t.body.organizationId||n.session.activeOrganizationId;if(!o)return t.json(null,{status:400,body:{message:T.NO_ACTIVE_ORGANIZATION}});const s=_(t.context,t.context.orgOptions),c=await s.findMemberByOrgId({userId:n.user.id,organizationId:o});if(!c)throw new e.APIError("BAD_REQUEST",{message:T.MEMBER_NOT_FOUND});let I=null;if(I=t.body.memberIdOrEmail.includes("@")?await s.findMemberByEmail({email:t.body.memberIdOrEmail,organizationId:o}):await s.findMemberById(t.body.memberIdOrEmail),!I)throw new e.APIError("BAD_REQUEST",{message:T.MEMBER_NOT_FOUND});const O=I.role.split(","),u=t.context.orgOptions?.creatorRole||"owner";if(O.includes(u)){if(c.role!==u)throw new e.APIError("BAD_REQUEST",{message:T.YOU_CANNOT_LEAVE_THE_ORGANIZATION_AS_THE_ONLY_OWNER});if((await s.listMembers({organizationId:o})).filter((e=>e.role.split(",").includes(u))).length<=1)throw new e.APIError("BAD_REQUEST",{message:T.YOU_CANNOT_LEAVE_THE_ORGANIZATION_AS_THE_ONLY_OWNER})}if(!(0,l.h)({role:c.role,options:t.context.orgOptions,permissions:{member:["delete"]}}))throw new e.APIError("UNAUTHORIZED",{message:T.YOU_ARE_NOT_ALLOWED_TO_DELETE_THIS_MEMBER});if(I?.organizationId!==o)throw new e.APIError("BAD_REQUEST",{message:T.MEMBER_NOT_FOUND});return await s.deleteMember(I.id),n.user.id===I.userId&&n.session.activeOrganizationId===I.organizationId&&await s.setActiveOrganization(n.session.token,null),t.json({member:I})})),b=(0,n.a)("/organization/get-active-member",{method:"GET",use:[E,A],metadata:{openapi:{description:"Get the active member in the organization",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{id:{type:"string"},userId:{type:"string"},organizationId:{type:"string"},role:{type:"string"}},required:["id","userId","organizationId","role"]}}}}}}}},(async e=>{const t=e.context.session,n=t.session.activeOrganizationId;if(!n)return e.json(null,{status:400,body:{message:T.NO_ACTIVE_ORGANIZATION}});const o=_(e.context,e.context.orgOptions),s=await o.findMemberByOrgId({userId:t.user.id,organizationId:n});return s?e.json(s):e.json(null,{status:400,body:{message:T.MEMBER_NOT_FOUND}})})),R=(0,n.a)("/organization/leave",{method:"POST",body:t.z.object({organizationId:t.z.string()}),use:[n.s,E]},(async t=>{const n=t.context.session,o=_(t.context),s=await o.findMemberByOrgId({userId:n.user.id,organizationId:t.body.organizationId});if(!s)throw new e.APIError("BAD_REQUEST",{message:T.MEMBER_NOT_FOUND});if(s.role===(t.context.orgOptions?.creatorRole||"owner")){if((await t.context.adapter.findMany({model:"member",where:[{field:"organizationId",value:t.body.organizationId}]})).filter((e=>e.role===(t.context.orgOptions?.creatorRole||"owner"))).length<=1)throw new e.APIError("BAD_REQUEST",{message:T.YOU_CANNOT_LEAVE_THE_ORGANIZATION_AS_THE_ONLY_OWNER})}return await o.deleteMember(s.id),n.session.activeOrganizationId===t.body.organizationId&&await o.setActiveOrganization(n.session.token,null),t.json(s)})),v=(0,n.a)("/organization/create",{method:"POST",body:t.z.object({name:t.z.string({description:"The name of the organization"}),slug:t.z.string({description:"The slug of the organization"}),userId:t.z.coerce.string({description:"The user id of the organization creator. If not provided, the current user will be used. Should only be used by admins or when called by the server."}).optional(),logo:t.z.string({description:"The logo of the organization"}).optional(),metadata:t.z.record(t.z.string(),t.z.any(),{description:"The metadata of the organization"}).optional(),keepCurrentActiveOrganization:t.z.boolean({description:"Whether to keep the current active organization active after creating a new one"}).optional()}),use:[E],metadata:{openapi:{description:"Create an organization",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",description:"The organization that was created",$ref:"#/components/schemas/Organization"}}}}}}}},(async t=>{const o=await(0,n.g)(t);if(!o&&(t.request||t.headers))throw new e.APIError("UNAUTHORIZED");let s=o?.user||null;if(!s){if(!t.body.userId)throw new e.APIError("UNAUTHORIZED");s=await t.context.internalAdapter.findUserById(t.body.userId)}if(!s)return t.json(null,{status:401});const c=t.context.orgOptions;if(!("function"==typeof c?.allowUserToCreateOrganization?await c.allowUserToCreateOrganization(s):void 0===c?.allowUserToCreateOrganization||c.allowUserToCreateOrganization))throw new e.APIError("FORBIDDEN",{message:T.YOU_ARE_NOT_ALLOWED_TO_CREATE_A_NEW_ORGANIZATION});const l=_(t.context,c),I=await l.listOrganizations(s.id);if("number"==typeof c.organizationLimit?I.length>=c.organizationLimit:"function"==typeof c.organizationLimit&&await c.organizationLimit(s))throw new e.APIError("FORBIDDEN",{message:T.YOU_HAVE_REACHED_THE_MAXIMUM_NUMBER_OF_ORGANIZATIONS});if(await l.findOrganizationBySlug(t.body.slug))throw new e.APIError("BAD_REQUEST",{message:T.ORGANIZATION_ALREADY_EXISTS});let O;if(c.organizationCreation?.beforeCreate){const e=await c.organizationCreation.beforeCreate({organization:{slug:t.body.slug,name:t.body.name,logo:t.body.logo,createdAt:new Date,metadata:t.body.metadata},user:s},t.request);e&&"object"==typeof e&&"data"in e&&(O=e)}const u=await l.createOrganization({organization:{slug:t.body.slug,name:t.body.name,logo:t.body.logo,createdAt:new Date,metadata:t.body.metadata,...O?.data||{}}});let p;if(c?.teams?.enabled&&!1!==c.teams.defaultTeam?.enabled){const e=await(c.teams.defaultTeam?.customCreateDefaultTeam?.(u,t.request))||await l.createTeam({organizationId:u.id,name:`${u.name}`,createdAt:new Date});p=await l.createMember({teamId:e.id,userId:s.id,organizationId:u.id,role:t.context.orgOptions.creatorRole||"owner"})}else p=await l.createMember({userId:s.id,organizationId:u.id,role:t.context.orgOptions.creatorRole||"owner"});return c.organizationCreation?.afterCreate&&await c.organizationCreation.afterCreate({organization:u,user:s,member:p},t.request),t.context.session&&!t.body.keepCurrentActiveOrganization&&await l.setActiveOrganization(t.context.session.session.token,u.id),t.json({...u,metadata:t.body.metadata,members:[p]})})),D=(0,n.a)("/organization/check-slug",{method:"POST",body:t.z.object({slug:t.z.string()}),use:[n.N,E]},(async t=>{const n=_(t.context);if(!await n.findOrganizationBySlug(t.body.slug))return t.json({status:!0});throw new e.APIError("BAD_REQUEST",{message:"slug is taken"})})),S=(0,n.a)("/organization/update",{method:"POST",body:t.z.object({data:t.z.object({name:t.z.string({description:"The name of the organization"}).optional(),slug:t.z.string({description:"The slug of the organization"}).optional(),logo:t.z.string({description:"The logo of the organization"}).optional(),metadata:t.z.record(t.z.string(),t.z.any(),{description:"The metadata of the organization"}).optional()}).partial(),organizationId:t.z.string().optional()}),requireHeaders:!0,use:[E],metadata:{openapi:{description:"Update an organization",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",description:"The updated organization",$ref:"#/components/schemas/Organization"}}}}}}}},(async t=>{const n=await t.context.getSession(t);if(!n)throw new e.APIError("UNAUTHORIZED",{message:"User not found"});const o=t.body.organizationId||n.session.activeOrganizationId;if(!o)throw new e.APIError("BAD_REQUEST",{message:T.ORGANIZATION_NOT_FOUND});const s=_(t.context,t.context.orgOptions),c=await s.findMemberByOrgId({userId:n.user.id,organizationId:o});if(!c)throw new e.APIError("BAD_REQUEST",{message:T.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION});if(!(0,l.h)({permissions:{organization:["update"]},role:c.role,options:t.context.orgOptions}))throw new e.APIError("FORBIDDEN",{message:T.YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_ORGANIZATION});const I=await s.updateOrganization(o,t.body.data);return t.json(I)})),U=(0,n.a)("/organization/delete",{method:"POST",body:t.z.object({organizationId:t.z.string({description:"The organization id to delete"})}),requireHeaders:!0,use:[E],metadata:{openapi:{description:"Delete an organization",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"string",description:"The organization id that was deleted"}}}}}}}},(async t=>{const n=await t.context.getSession(t);if(!n)return t.json(null,{status:401});const o=t.body.organizationId;if(!o)return t.json(null,{status:400,body:{message:T.ORGANIZATION_NOT_FOUND}});const s=_(t.context,t.context.orgOptions),c=await s.findMemberByOrgId({userId:n.user.id,organizationId:o});if(!c)return t.json(null,{status:400,body:{message:T.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION}});if(!(0,l.h)({role:c.role,permissions:{organization:["delete"]},options:t.context.orgOptions}))throw new e.APIError("FORBIDDEN",{message:T.YOU_ARE_NOT_ALLOWED_TO_DELETE_THIS_ORGANIZATION});o===n.session.activeOrganizationId&&await s.setActiveOrganization(n.session.token,null);const I=t.context.orgOptions.organizationDeletion;if(I?.disabled)throw new e.APIError("FORBIDDEN");const O=await s.findOrganizationById(o);if(!O)throw new e.APIError("BAD_REQUEST");return I?.beforeDelete&&await I.beforeDelete({organization:O,user:n.user}),await s.deleteOrganization(o),I?.afterDelete&&await I.afterDelete({organization:O,user:n.user}),t.json(O)})),M=(0,n.a)("/organization/list",{method:"GET",use:[E,A],metadata:{openapi:{description:"List all organizations",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"array",items:{$ref:"#/components/schemas/Organization"}}}}}}}}},(async e=>{const t=_(e.context,e.context.orgOptions),n=await t.listOrganizations(e.context.session.user.id);return e.json(n)})),B=t.z.string(),j=t.z.enum(["pending","accepted","rejected","canceled"]).default("pending");t.z.object({id:t.z.string().default(O.g),name:t.z.string(),slug:t.z.string(),logo:t.z.string().nullish().optional(),metadata:t.z.record(t.z.string()).or(t.z.string().transform((e=>JSON.parse(e)))).optional(),createdAt:t.z.date()}),t.z.object({id:t.z.string().default(O.g),organizationId:t.z.string(),userId:t.z.coerce.string(),role:B,createdAt:t.z.date().default((()=>new Date)),teamId:t.z.string().optional()}),t.z.object({id:t.z.string().default(O.g),organizationId:t.z.string(),email:t.z.string(),role:B,status:j,teamId:t.z.string().optional(),inviterId:t.z.string(),expiresAt:t.z.date()});const x=t.z.object({id:t.z.string().default(O.g),name:t.z.string().min(1),organizationId:t.z.string(),createdAt:t.z.date(),updatedAt:t.z.date().optional()}),P=(0,n.a)("/organization/remove-team",{method:"POST",body:t.z.object({teamId:t.z.string(),organizationId:t.z.string().optional()}),use:[E],metadata:{openapi:{description:"Remove a team from an organization",responses:{200:{description:"Team removed successfully",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string",description:"Confirmation message indicating successful removal",enum:["Team removed successfully."]}},required:["message"]}}}}}}}},(async t=>{const o=await(0,n.g)(t),s=t.body.organizationId||o?.session.activeOrganizationId;if(!s)return t.json(null,{status:400,body:{message:T.NO_ACTIVE_ORGANIZATION}});if(!o&&(t.request||t.headers))throw new e.APIError("UNAUTHORIZED");const c=_(t.context,t.context.orgOptions);if(o){const n=await c.findMemberByOrgId({userId:o.user.id,organizationId:s});if(!n||n.teamId===t.body.teamId)throw new e.APIError("FORBIDDEN",{message:T.YOU_ARE_NOT_ALLOWED_TO_INVITE_USERS_TO_THIS_ORGANIZATION});if(!(0,l.h)({role:n.role,options:t.context.orgOptions,permissions:{team:["delete"]}}))throw new e.APIError("FORBIDDEN",{message:T.YOU_ARE_NOT_ALLOWED_TO_DELETE_TEAMS_IN_THIS_ORGANIZATION})}const I=await c.findTeamById({teamId:t.body.teamId,organizationId:s});if(!I||I.organizationId!==s)throw new e.APIError("BAD_REQUEST",{message:T.TEAM_NOT_FOUND});if(!t.context.orgOptions.teams?.allowRemovingAllTeams){if((await c.listTeams(s)).length<=1)throw new e.APIError("BAD_REQUEST",{message:T.UNABLE_TO_REMOVE_LAST_TEAM})}return await c.deleteTeam(I.id),t.json({message:"Team removed successfully."})})),L=(0,n.a)("/organization/update-team",{method:"POST",body:t.z.object({teamId:t.z.string(),data:x.partial()}),use:[E,A],metadata:{openapi:{description:"Update an existing team in an organization",responses:{200:{description:"Team updated successfully",content:{"application/json":{schema:{type:"object",properties:{id:{type:"string",description:"Unique identifier of the updated team"},name:{type:"string",description:"Updated name of the team"},organizationId:{type:"string",description:"ID of the organization the team belongs to"},createdAt:{type:"string",format:"date-time",description:"Timestamp when the team was created"},updatedAt:{type:"string",format:"date-time",description:"Timestamp when the team was last updated"}},required:["id","name","organizationId","createdAt","updatedAt"]}}}}}}}},(async t=>{const n=t.context.session,o=t.body.data.organizationId||n.session.activeOrganizationId;if(!o)return t.json(null,{status:400,body:{message:T.NO_ACTIVE_ORGANIZATION}});const s=_(t.context,t.context.orgOptions),c=await s.findMemberByOrgId({userId:n.user.id,organizationId:o});if(!c)throw new e.APIError("FORBIDDEN",{message:T.YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_TEAM});if(!(0,l.h)({role:c.role,options:t.context.orgOptions,permissions:{team:["update"]}}))throw new e.APIError("FORBIDDEN",{message:T.YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_TEAM});const I=await s.findTeamById({teamId:t.body.teamId,organizationId:o});if(!I||I.organizationId!==o)throw new e.APIError("BAD_REQUEST",{message:T.TEAM_NOT_FOUND});const O=await s.updateTeam(I.id,{name:t.body.data.name});return t.json(O)})),H=(0,n.a)("/organization/list-teams",{method:"GET",query:t.z.optional(t.z.object({organizationId:t.z.string().optional()})),metadata:{openapi:{description:"List all teams in an organization",responses:{200:{description:"Teams retrieved successfully",content:{"application/json":{schema:{type:"array",items:{type:"object",properties:{id:{type:"string",description:"Unique identifier of the team"},name:{type:"string",description:"Name of the team"},organizationId:{type:"string",description:"ID of the organization the team belongs to"},createdAt:{type:"string",format:"date-time",description:"Timestamp when the team was created"},updatedAt:{type:"string",format:"date-time",description:"Timestamp when the team was last updated"}},required:["id","name","organizationId","createdAt","updatedAt"]},description:"Array of team objects within the organization"}}}}}}},use:[E,A]},(async t=>{const n=t.context.session,o=n.session.activeOrganizationId||t.query?.organizationId;if(!o)return t.json(null,{status:400,body:{message:T.NO_ACTIVE_ORGANIZATION}});const s=_(t.context,t.context.orgOptions);if(!await s.findMemberByOrgId({userId:n?.user.id,organizationId:o||""}))throw new e.APIError("FORBIDDEN");const c=await s.listTeams(o);return t.json(c)}));function F(e){return Array.isArray(e)?e.join(","):e}_e.o=o=>{let s={createOrganization:v,updateOrganization:S,deleteOrganization:U,setActiveOrganization:(0,n.a)("/organization/set-active",{method:"POST",body:t.z.object({organizationId:t.z.string({description:"The organization id to set as active. It can be null to unset the active organization"}).nullable().optional(),organizationSlug:t.z.string({description:"The organization slug to set as active. It can be null to unset the active organization if organizationId is not provided"}).optional()}),use:[A,E],metadata:{openapi:{description:"Set the active organization",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",description:"The organization",$ref:"#/components/schemas/Organization"}}}}}}}},(async t=>{const n=_(t.context,t.context.orgOptions),o=t.context.session;let s=t.body.organizationSlug||t.body.organizationId;if(null===s){if(!o.session.activeOrganizationId)return t.json(null);const e=await n.setActiveOrganization(o.session.token,null);return await(0,I.setSessionCookie)(t,{session:e,user:o.user}),t.json(null)}if(!s){const e=o.session.activeOrganizationId;if(!e)return t.json(null);s=e}const c=await n.findFullOrganization({organizationId:s,isSlug:!!t.body.organizationSlug}),l=c?.members.find((e=>e.userId===o.user.id));if(!l)throw await n.setActiveOrganization(o.session.token,null),new e.APIError("FORBIDDEN",{message:T.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION});if(!c)throw new e.APIError("BAD_REQUEST",{message:T.ORGANIZATION_NOT_FOUND});const O=await n.setActiveOrganization(o.session.token,c.id);return await(0,I.setSessionCookie)(t,{session:O,user:o.user}),t.json(c)})),getFullOrganization:(0,n.a)("/organization/get-full-organization",{method:"GET",query:t.z.optional(t.z.object({organizationId:t.z.string({description:"The organization id to get"}).optional(),organizationSlug:t.z.string({description:"The organization slug to get"}).optional()})),requireHeaders:!0,use:[E,A],metadata:{openapi:{description:"Get the full organization",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",description:"The organization",$ref:"#/components/schemas/Organization"}}}}}}}},(async t=>{const n=t.context.session,o=t.query?.organizationSlug||t.query?.organizationId||n.session.activeOrganizationId;if(!o)return t.json(null,{status:200});const s=_(t.context,t.context.orgOptions),c=await s.findFullOrganization({organizationId:o,isSlug:!!t.query?.organizationSlug,includeTeams:t.context.orgOptions.teams?.enabled}),l=c?.members.find((e=>e.userId===n.user.id));if(!l)throw new e.APIError("FORBIDDEN",{message:T.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION});if(!c)throw new e.APIError("BAD_REQUEST",{message:T.ORGANIZATION_NOT_FOUND});return t.json(c)})),listOrganizations:M,createInvitation:(0,n.a)("/organization/invite-member",{method:"POST",use:[E,A],body:t.z.object({email:t.z.string({description:"The email address of the user to invite"}),role:t.z.union([t.z.string({description:"The role to assign to the user"}),t.z.array(t.z.string({description:"The roles to assign to the user"}))]),organizationId:t.z.string({description:"The organization ID to invite the user to"}).optional(),resend:t.z.boolean({description:"Resend the invitation email, if the user is already invited"}).optional(),teamId:t.z.string({description:"The team ID to invite the user to"}).optional()}),metadata:{$Infer:{body:{}},openapi:{description:"Invite a user to an organization",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{id:{type:"string"},email:{type:"string"},role:{type:"string"},organizationId:{type:"string"},inviterId:{type:"string"},status:{type:"string"},expiresAt:{type:"string"}},required:["id","email","role","organizationId","inviterId","status","expiresAt"]}}}}}}}},(async t=>{const n=t.context.session,o=t.body.organizationId||n.session.activeOrganizationId;if(!o)throw new e.APIError("BAD_REQUEST",{message:T.ORGANIZATION_NOT_FOUND});const s=_(t.context,t.context.orgOptions),c=await s.findMemberByOrgId({userId:n.user.id,organizationId:o});if(!c)throw new e.APIError("BAD_REQUEST",{message:T.MEMBER_NOT_FOUND});if(!(0,l.h)({role:c.role,options:t.context.orgOptions,permissions:{invitation:["create"]}}))throw new e.APIError("FORBIDDEN",{message:T.YOU_ARE_NOT_ALLOWED_TO_INVITE_USERS_TO_THIS_ORGANIZATION});const I=t.context.orgOptions.creatorRole||"owner",O=F(t.body.role);if(c.role!==I&&O.split(",").includes(I))throw new e.APIError("FORBIDDEN",{message:T.YOU_ARE_NOT_ALLOWED_TO_INVITE_USER_WITH_THIS_ROLE});if(await s.findMemberByEmail({email:t.body.email,organizationId:o}))throw new e.APIError("BAD_REQUEST",{message:T.USER_IS_ALREADY_A_MEMBER_OF_THIS_ORGANIZATION});const u=await s.findPendingInvitation({email:t.body.email,organizationId:o});if(u.length&&!t.body.resend)throw new e.APIError("BAD_REQUEST",{message:T.USER_IS_ALREADY_INVITED_TO_THIS_ORGANIZATION});u.length&&t.context.orgOptions.cancelPendingInvitationsOnReInvite&&await s.updateInvitation({invitationId:u[0].id,status:"canceled"});const p=await s.findOrganizationById(o);if(!p)throw new e.APIError("BAD_REQUEST",{message:T.ORGANIZATION_NOT_FOUND});const E="function"==typeof t.context.orgOptions.invitationLimit?await t.context.orgOptions.invitationLimit({user:n.user,organization:p,member:c},t.context):t.context.orgOptions.invitationLimit??100;if((await s.findPendingInvitations({organizationId:o})).length>=E)throw new e.APIError("FORBIDDEN",{message:T.INVITATION_LIMIT_REACHED});const A=await s.createInvitation({invitation:{role:O,email:t.body.email.toLowerCase(),organizationId:o,..."teamId"in t.body?{teamId:t.body.teamId}:{}},user:n.user});return await(t.context.orgOptions.sendInvitationEmail?.({id:A.id,role:A.role,email:A.email.toLowerCase(),organization:p,inviter:{...c,user:n.user},invitation:A},t.request)),t.json(A)})),cancelInvitation:w,acceptInvitation:z,getInvitation:N,rejectInvitation:f,checkOrganizationSlug:D,addMember:(0,n.a)("/organization/add-member",{method:"POST",body:t.z.object({userId:t.z.coerce.string(),role:t.z.union([t.z.string(),t.z.array(t.z.string())]),organizationId:t.z.string().optional()}),use:[E],metadata:{SERVER_ONLY:!0,$Infer:{body:{}}}},(async t=>{const o=t.body.userId?await(0,n.g)(t).catch((e=>null)):null,s=t.body.organizationId||o?.session.activeOrganizationId;if(!s)return t.json(null,{status:400,body:{message:T.NO_ACTIVE_ORGANIZATION}});const c="teamId"in t.body?t.body.teamId:void 0;if(c&&!t.context.orgOptions.teams?.enabled)throw t.context.logger.error("Teams are not enabled"),new e.APIError("BAD_REQUEST",{message:"Teams are not enabled"});const l=_(t.context,t.context.orgOptions),I=await t.context.internalAdapter.findUserById(t.body.userId);if(!I)throw new e.APIError("BAD_REQUEST",{message:n.B.USER_NOT_FOUND});if(await l.findMemberByEmail({email:I.email,organizationId:s}))throw new e.APIError("BAD_REQUEST",{message:T.USER_IS_ALREADY_A_MEMBER_OF_THIS_ORGANIZATION});if(c){const t=await l.findTeamById({teamId:c,organizationId:s});if(!t||t.organizationId!==s)throw new e.APIError("BAD_REQUEST",{message:T.TEAM_NOT_FOUND})}const O=t.context.orgOptions?.membershipLimit||100;if((await l.listMembers({organizationId:s})).length>=O)throw new e.APIError("FORBIDDEN",{message:T.ORGANIZATION_MEMBERSHIP_LIMIT_REACHED});const u=await l.createMember({organizationId:s,userId:I.id,role:F(t.body.role),createdAt:new Date,...c?{teamId:c}:{}});return t.json(u)})),removeMember:y,updateMemberRole:(0,n.a)("/organization/update-member-role",{method:"POST",body:t.z.object({role:t.z.union([t.z.string(),t.z.array(t.z.string())]),memberId:t.z.string(),organizationId:t.z.string().optional()}),use:[E,A],metadata:{$Infer:{body:{}},openapi:{description:"Update the role of a member in an organization",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{member:{type:"object",properties:{id:{type:"string"},userId:{type:"string"},organizationId:{type:"string"},role:{type:"string"}},required:["id","userId","organizationId","role"]}},required:["member"]}}}}}}}},(async t=>{const n=t.context.session;if(!t.body.role)throw new e.APIError("BAD_REQUEST");const o=t.body.organizationId||n.session.activeOrganizationId;if(!o)throw new e.APIError("BAD_REQUEST",{message:T.NO_ACTIVE_ORGANIZATION});const s=_(t.context,t.context.orgOptions),c=Array.isArray(t.body.role)?t.body.role:t.body.role?[t.body.role]:[],I=await s.findMemberByOrgId({userId:n.user.id,organizationId:o});if(!I)throw new e.APIError("BAD_REQUEST",{message:T.MEMBER_NOT_FOUND});const O=I.id!==t.body.memberId?await s.findMemberById(t.body.memberId):I;if(!O)throw new e.APIError("BAD_REQUEST",{message:T.MEMBER_NOT_FOUND});const u=O.role.split(","),p=I.role.split(","),E=t.context.orgOptions?.creatorRole||"owner";if(u.includes(E)&&!p.includes(E)||c.includes(E)&&!p.includes(E))throw new e.APIError("FORBIDDEN",{message:T.YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_MEMBER});if(!(0,l.h)({role:I.role,options:t.context.orgOptions,permissions:{member:["update"]}}))throw new e.APIError("FORBIDDEN",{message:T.YOU_ARE_NOT_ALLOWED_TO_UPDATE_THIS_MEMBER});const A=await s.updateMember(t.body.memberId,F(t.body.role));if(!A)throw new e.APIError("BAD_REQUEST",{message:T.MEMBER_NOT_FOUND});return t.json(A)})),getActiveMember:b,leaveOrganization:R,listInvitations:h};const c=o?.teams?.enabled,O={createTeam:(0,n.a)("/organization/create-team",{method:"POST",body:t.z.object({organizationId:t.z.string().optional(),name:t.z.string()}),use:[E],metadata:{openapi:{description:"Create a new team within an organization",responses:{200:{description:"Team created successfully",content:{"application/json":{schema:{type:"object",properties:{id:{type:"string",description:"Unique identifier of the created team"},name:{type:"string",description:"Name of the team"},organizationId:{type:"string",description:"ID of the organization the team belongs to"},createdAt:{type:"string",format:"date-time",description:"Timestamp when the team was created"},updatedAt:{type:"string",format:"date-time",description:"Timestamp when the team was last updated"}},required:["id","name","organizationId","createdAt","updatedAt"]}}}}}}}},(async t=>{const o=await(0,n.g)(t),s=t.body.organizationId||o?.session.activeOrganizationId;if(!o&&(t.request||t.headers))throw new e.APIError("UNAUTHORIZED");if(!s)throw new e.APIError("BAD_REQUEST",{message:T.NO_ACTIVE_ORGANIZATION});const c=_(t.context,t.context.orgOptions);if(o){const n=await c.findMemberByOrgId({userId:o.user.id,organizationId:s});if(!n)throw new e.APIError("FORBIDDEN",{message:T.YOU_ARE_NOT_ALLOWED_TO_INVITE_USERS_TO_THIS_ORGANIZATION});if(!(0,l.h)({role:n.role,options:t.context.orgOptions,permissions:{team:["create"]}}))throw new e.APIError("FORBIDDEN",{message:T.YOU_ARE_NOT_ALLOWED_TO_CREATE_TEAMS_IN_THIS_ORGANIZATION})}const I=await c.listTeams(s),O="function"==typeof t.context.orgOptions.teams?.maximumTeams?await(t.context.orgOptions.teams?.maximumTeams({organizationId:s,session:o},t.request)):t.context.orgOptions.teams?.maximumTeams;if(O&&I.length>=O)throw new e.APIError("BAD_REQUEST",{message:T.YOU_HAVE_REACHED_THE_MAXIMUM_NUMBER_OF_TEAMS});const u=await c.createTeam({name:t.body.name,organizationId:s,createdAt:new Date,updatedAt:new Date});return t.json(u)})),listOrganizationTeams:H,removeTeam:P,updateTeam:L};c&&(s={...s,...O});const B={...u.defaultRoles,...o?.roles},j=c?{team:{modelName:o?.schema?.team?.modelName,fields:{name:{type:"string",required:!0,fieldName:o?.schema?.team?.fields?.name},organizationId:{type:"string",required:!0,references:{model:"organization",field:"id"},fieldName:o?.schema?.team?.fields?.organizationId},createdAt:{type:"date",required:!0,fieldName:o?.schema?.team?.fields?.createdAt},updatedAt:{type:"date",required:!1,fieldName:o?.schema?.team?.fields?.updatedAt}}}}:void 0;return{id:"organization",endpoints:{...p(s,{orgOptions:o||{},roles:B,getSession:async e=>await(0,n.g)(e)}),hasPermission:(0,n.a)("/organization/has-permission",{method:"POST",requireHeaders:!0,body:t.z.object({organizationId:t.z.string().optional()}).and(t.z.union([t.z.object({permission:t.z.record(t.z.string(),t.z.array(t.z.string())),permissions:t.z.undefined()}),t.z.object({permission:t.z.undefined(),permissions:t.z.record(t.z.string(),t.z.array(t.z.string()))})])),use:[A],metadata:{$Infer:{body:{}},openapi:{description:"Check if the user has permission",requestBody:{content:{"application/json":{schema:{type:"object",properties:{permission:{type:"object",description:"The permission to check",deprecated:!0},permissions:{type:"object",description:"The permission to check"}},required:["permissions"]}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{error:{type:"string"},success:{type:"boolean"}},required:["success"]}}}}}}}},(async t=>{const n=t.body.organizationId||t.context.session.session.activeOrganizationId;if(!n)throw new e.APIError("BAD_REQUEST",{message:T.NO_ACTIVE_ORGANIZATION});const s=_(t.context),c=await s.findMemberByOrgId({userId:t.context.session.user.id,organizationId:n});if(!c)throw new e.APIError("UNAUTHORIZED",{message:T.USER_IS_NOT_A_MEMBER_OF_THE_ORGANIZATION});const I=(0,l.h)({role:c.role,options:o,permissions:t.body.permissions??t.body.permission});return t.json({error:null,success:I})}))},schema:{session:{fields:{activeOrganizationId:{type:"string",required:!1,fieldName:o?.schema?.session?.fields?.activeOrganizationId}}},organization:{modelName:o?.schema?.organization?.modelName,fields:{name:{type:"string",required:!0,sortable:!0,fieldName:o?.schema?.organization?.fields?.name},slug:{type:"string",unique:!0,sortable:!0,fieldName:o?.schema?.organization?.fields?.slug},logo:{type:"string",required:!1,fieldName:o?.schema?.organization?.fields?.logo},createdAt:{type:"date",required:!0,fieldName:o?.schema?.organization?.fields?.createdAt},metadata:{type:"string",required:!1,fieldName:o?.schema?.organization?.fields?.metadata}}},member:{modelName:o?.schema?.member?.modelName,fields:{organizationId:{type:"string",required:!0,references:{model:"organization",field:"id"},fieldName:o?.schema?.member?.fields?.organizationId},userId:{type:"string",required:!0,fieldName:o?.schema?.member?.fields?.userId,references:{model:"user",field:"id"}},role:{type:"string",required:!0,sortable:!0,defaultValue:"member",fieldName:o?.schema?.member?.fields?.role},...c?{teamId:{type:"string",required:!1,sortable:!0,fieldName:o?.schema?.member?.fields?.teamId}}:{},createdAt:{type:"date",required:!0,fieldName:o?.schema?.member?.fields?.createdAt}}},invitation:{modelName:o?.schema?.invitation?.modelName,fields:{organizationId:{type:"string",required:!0,references:{model:"organization",field:"id"},fieldName:o?.schema?.invitation?.fields?.organizationId},email:{type:"string",required:!0,sortable:!0,fieldName:o?.schema?.invitation?.fields?.email},role:{type:"string",required:!1,sortable:!0,fieldName:o?.schema?.invitation?.fields?.role},...c?{teamId:{type:"string",required:!1,sortable:!0,fieldName:o?.schema?.invitation?.fields?.teamId}}:{},status:{type:"string",required:!0,sortable:!0,defaultValue:"pending",fieldName:o?.schema?.invitation?.fields?.status},expiresAt:{type:"date",required:!0,fieldName:o?.schema?.invitation?.fields?.expiresAt},inviterId:{type:"string",references:{model:"user",field:"id"},fieldName:o?.schema?.invitation?.fields?.inviterId,required:!0}}},...c?j:{}},$Infer:{Organization:{},Invitation:{},Member:{},Team:{},ActiveOrganization:{}},$ERROR_CODES:T}}}),7361,[6977,3739,6980,910,6983,6984,7096,6982,911,925,7093,7097,929,6981,7095,7074,7075,7078,7080,6988,7082,7090,6985,7086,7091,927]);
__d((function(g,r,i,a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.twoFactor=_e.TWO_FACTOR_ERROR_CODES=void 0,Object.defineProperty(_e,"twoFactorClient",{enumerable:!0,get:function(){return f.t}});var e=r(d[0]),t=r(d[1]),o=r(d[2]),s=r(d[3]),n=r(d[4]),c=r(d[5]);r(d[6]),r(d[7]),r(d[8]);var p=r(d[9]);r(d[10]);var u=r(d[11]);r(d[12]),r(d[13]),r(d[14]),r(d[15]),r(d[16]),r(d[17]),r(d[18]),r(d[19]),r(d[20]);var l=r(d[21]),w=r(d[22]),f=r(d[23]);r(d[24]),r(d[25]),r(d[26]),r(d[27]),r(d[28]),r(d[29]),r(d[30]),r(d[31]),r(d[32]),r(d[33]),r(d[34]),r(d[35]),r(d[36]),r(d[37]);const A=_e.TWO_FACTOR_ERROR_CODES={OTP_NOT_ENABLED:"OTP not enabled",OTP_HAS_EXPIRED:"OTP has expired",TOTP_NOT_ENABLED:"TOTP not enabled",TWO_FACTOR_NOT_ENABLED:"Two factor isn't enabled",BACKUP_CODES_NOT_ENABLED:"Backup codes aren't enabled",INVALID_BACKUP_CODE:"Invalid backup code",INVALID_CODE:"Invalid code",TOO_MANY_ATTEMPTS_REQUEST_NEW_CODE:"Too many attempts. Please request a new code.",INVALID_TWO_FACTOR_COOKIE:"Invalid two factor cookie"},T="two_factor",E="trust_device";async function h(e){const t=await(0,o.g)(e);if(!t){const t=e.context.createAuthCookie(T),o=await e.getSignedCookie(t.name,e.context.secret);if(!o)throw new s.APIError("UNAUTHORIZED",{message:A.INVALID_TWO_FACTOR_COOKIE});const c=await e.context.internalAdapter.findVerificationValue(o);if(!c)throw new s.APIError("UNAUTHORIZED",{message:A.INVALID_TWO_FACTOR_COOKIE});const p=await e.context.internalAdapter.findUserById(c.value);if(!p)throw new s.APIError("UNAUTHORIZED",{message:A.INVALID_TWO_FACTOR_COOKIE});const l=await e.getSignedCookie(e.context.authCookies.dontRememberToken.name,e.context.secret);return{valid:async e=>{const o=await e.context.internalAdapter.createSession(c.value,e.headers,!!l);if(!o)throw new s.APIError("INTERNAL_SERVER_ERROR",{message:"failed to create session"});if(await(0,n.setSessionCookie)(e,{session:o,user:p}),e.body.trustDevice){const s=e.context.createAuthCookie(E,{maxAge:2592e3}),n=await(0,u.createHMAC)("SHA-256","base64urlnopad").sign(e.context.secret,`${p.id}!${o.token}`);await e.setSignedCookie(s.name,`${n}!${o.token}`,e.context.secret,s.attributes),e.setCookie(e.context.authCookies.dontRememberToken.name,"",{maxAge:0}),e.setCookie(t.name,"",{maxAge:0})}return e.json({token:o.token,user:{id:p.id,email:p.email,emailVerified:p.emailVerified,name:p.name,image:p.image,createdAt:p.createdAt,updatedAt:p.updatedAt}})},invalid:async e=>{throw new s.APIError("UNAUTHORIZED",{message:A[e]})},session:{session:null,user:p},key:o}}return{valid:async e=>e.json({token:t.session.token,user:{id:t.user.id,email:t.user.email,emailVerified:t.user.emailVerified,name:t.user.name,image:t.user.image,createdAt:t.user.createdAt,updatedAt:t.user.updatedAt}}),invalid:async()=>{throw new s.APIError("UNAUTHORIZED",{message:A.INVALID_TWO_FACTOR_COOKIE})},session:t,key:`${t.user.id}!${t.session.id}`}}function y(t){return Array.from({length:t?.amount??10}).fill(null).map((()=>(0,e.g)(t?.length??10,"a-z","0-9","A-Z"))).map((e=>`${e.slice(0,5)}-${e.slice(5)}`))}async function b(e,t){const o=e,s=t?.customBackupCodesGenerate?t.customBackupCodesGenerate():y(t);return{backupCodes:s,encryptedBackupCodes:await(0,p.symmetricEncrypt)({data:JSON.stringify(s),key:o})}}async function O(e,t){const o=await I(e.backupCodes,t);return o?{status:o.includes(e.code),updated:o.filter((t=>t!==e.code))}:{status:!1,updated:null}}async function I(e,o){const s=new TextDecoder("utf-8").decode((new TextEncoder).encode(await(0,p.symmetricDecrypt)({key:o,data:e}))),n=JSON.parse(s),c=t.z.array(t.z.string()).safeParse(n);return c.success?c.data:null}const _=e=>{const n="twoFactor";return{id:"backup_code",endpoints:{verifyBackupCode:(0,o.a)("/two-factor/verify-backup-code",{method:"POST",body:t.z.object({code:t.z.string(),disableSession:t.z.boolean({description:"If true, the session cookie will not be set."}).optional(),trustDevice:t.z.boolean({description:"If true, the device will be trusted for 30 days. It'll be refreshed on every sign in request within this time."}).optional()}),metadata:{openapi:{description:"Verify a backup code for two-factor authentication",responses:{200:{description:"Backup code verified successfully",content:{"application/json":{schema:{type:"object",properties:{user:{type:"object",properties:{id:{type:"string",description:"Unique identifier of the user"},email:{type:"string",format:"email",nullable:!0,description:"User's email address"},emailVerified:{type:"boolean",nullable:!0,description:"Whether the email is verified"},name:{type:"string",nullable:!0,description:"User's name"},image:{type:"string",format:"uri",nullable:!0,description:"User's profile image URL"},twoFactorEnabled:{type:"boolean",description:"Whether two-factor authentication is enabled for the user"},createdAt:{type:"string",format:"date-time",description:"Timestamp when the user was created"},updatedAt:{type:"string",format:"date-time",description:"Timestamp when the user was last updated"}},required:["id","twoFactorEnabled","createdAt","updatedAt"],description:"The authenticated user object with two-factor details"},session:{type:"object",properties:{token:{type:"string",description:"Session token"},userId:{type:"string",description:"ID of the user associated with the session"},createdAt:{type:"string",format:"date-time",description:"Timestamp when the session was created"},expiresAt:{type:"string",format:"date-time",description:"Timestamp when the session expires"}},required:["token","userId","createdAt","expiresAt"],description:"The current session object, included unless disableSession is true"}},required:["user","session"]}}}}}}}},(async e=>{const{session:t,valid:o}=await h(e),c=t.user,u=await e.context.adapter.findOne({model:n,where:[{field:"userId",value:c.id}]});if(!u)throw new s.APIError("BAD_REQUEST",{message:A.BACKUP_CODES_NOT_ENABLED});const l=await O({backupCodes:u.backupCodes,code:e.body.code},e.context.secret);if(!l.status)throw new s.APIError("UNAUTHORIZED",{message:A.INVALID_BACKUP_CODE});const w=await(0,p.symmetricEncrypt)({key:e.context.secret,data:JSON.stringify(l.updated)});return await e.context.adapter.updateMany({model:n,update:{backupCodes:w},where:[{field:"userId",value:c.id}]}),e.body.disableSession?e.json({token:t.session?.token,user:{id:t.user?.id,email:t.user.email,emailVerified:t.user.emailVerified,name:t.user.name,image:t.user.image,createdAt:t.user.createdAt,updatedAt:t.user.updatedAt}}):o(e)})),generateBackupCodes:(0,o.a)("/two-factor/generate-backup-codes",{method:"POST",body:t.z.object({password:t.z.string()}),use:[o.s],metadata:{openapi:{description:"Generate new backup codes for two-factor authentication",responses:{200:{description:"Backup codes generated successfully",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the backup codes were generated successfully",enum:[!0]},backupCodes:{type:"array",items:{type:"string"},description:"Array of generated backup codes in plain text"}},required:["status","backupCodes"]}}}}}}}},(async t=>{const o=t.context.session.user;if(!o.twoFactorEnabled)throw new s.APIError("BAD_REQUEST",{message:A.TWO_FACTOR_NOT_ENABLED});await t.context.password.checkPassword(o.id,t);const c=await b(t.context.secret,e);return await t.context.adapter.update({model:n,update:{backupCodes:c.encryptedBackupCodes},where:[{field:"userId",value:t.context.session.user.id}]}),t.json({status:!0,backupCodes:c.backupCodes})})),viewBackupCodes:(0,o.a)("/two-factor/view-backup-codes",{method:"GET",body:t.z.object({userId:t.z.coerce.string()}),metadata:{SERVER_ONLY:!0}},(async e=>{const t=await e.context.adapter.findOne({model:n,where:[{field:"userId",value:e.body.userId}]});if(!t)throw new s.APIError("BAD_REQUEST",{message:"Backup codes aren't enabled"});const o=await I(t.backupCodes,e.context.secret);if(!o)throw new s.APIError("BAD_REQUEST",{message:A.BACKUP_CODES_NOT_ENABLED});return e.json({status:!0,backupCodes:o})}))}}},k=c=>{const p={...c,digits:c?.digits||6,period:60*(c?.period||3)*1e3},u="twoFactor";return{id:"otp",endpoints:{sendTwoFactorOTP:(0,o.a)("/two-factor/send-otp",{method:"POST",body:t.z.object({trustDevice:t.z.boolean().optional()}).optional(),metadata:{openapi:{summary:"Send two factor OTP",description:"Send two factor OTP to the user",responses:{200:{description:"Successful response",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},(async t=>{if(!c||!c.sendOTP)throw t.context.logger.error("send otp isn't configured. Please configure the send otp function on otp options."),new s.APIError("BAD_REQUEST",{message:"otp isn't configured"});const{session:o,key:n}=await h(t);if(!await t.context.adapter.findOne({model:u,where:[{field:"userId",value:o.user.id}]}))throw new s.APIError("BAD_REQUEST",{message:A.OTP_NOT_ENABLED});const l=(0,e.g)(p.digits,"0-9");return await t.context.internalAdapter.createVerificationValue({value:`${l}!0`,identifier:`2fa-otp-${n}`,expiresAt:new Date(Date.now()+p.period)}),await c.sendOTP({user:o.user,otp:l},t.request),t.json({status:!0})})),verifyTwoFactorOTP:(0,o.a)("/two-factor/verify-otp",{method:"POST",body:t.z.object({code:t.z.string({description:"The otp code to verify"}),trustDevice:t.z.boolean().optional()}),metadata:{openapi:{summary:"Verify two factor OTP",description:"Verify two factor OTP",responses:{200:{description:"Two-factor OTP verified successfully",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",description:"Session token for the authenticated session"},user:{type:"object",properties:{id:{type:"string",description:"Unique identifier of the user"},email:{type:"string",format:"email",nullable:!0,description:"User's email address"},emailVerified:{type:"boolean",nullable:!0,description:"Whether the email is verified"},name:{type:"string",nullable:!0,description:"User's name"},image:{type:"string",format:"uri",nullable:!0,description:"User's profile image URL"},createdAt:{type:"string",format:"date-time",description:"Timestamp when the user was created"},updatedAt:{type:"string",format:"date-time",description:"Timestamp when the user was last updated"}},required:["id","createdAt","updatedAt"],description:"The authenticated user object"}},required:["token","user"]}}}}}}}},(async e=>{const{session:t,key:p,valid:l,invalid:w}=await h(e);if(!await e.context.adapter.findOne({model:u,where:[{field:"userId",value:t.user.id}]}))throw new s.APIError("BAD_REQUEST",{message:A.OTP_NOT_ENABLED});const f=await e.context.internalAdapter.findVerificationValue(`2fa-otp-${p}`),[T,E]=f?.value?.split("!")??[];if(!f||f.expiresAt<new Date)throw await e.context.internalAdapter.deleteVerificationValue(`2fa-otp-${p}`),new s.APIError("BAD_REQUEST",{message:A.OTP_HAS_EXPIRED});const y=c?.allowedAttempts||5;if(parseInt(E)>=y)throw await e.context.internalAdapter.deleteVerificationValue(`2fa-otp-${p}`),new s.APIError("BAD_REQUEST",{message:A.TOO_MANY_ATTEMPTS_REQUEST_NEW_CODE});if(T===e.body.code){if(!t.user.twoFactorEnabled){if(!t.session)throw new s.APIError("BAD_REQUEST",{message:o.B.FAILED_TO_CREATE_SESSION});const c=await e.context.internalAdapter.updateUser(t.user.id,{twoFactorEnabled:!0}),p=await e.context.internalAdapter.createSession(t.user.id,e.headers,!1,t.session);return await e.context.internalAdapter.deleteSession(t.session.token),await(0,n.setSessionCookie)(e,{session:p,user:c}),e.json({token:p.token,user:{id:c.id,email:c.email,emailVerified:c.emailVerified,name:c.name,image:c.image,createdAt:c.createdAt,updatedAt:c.updatedAt}})}return l(e)}return await e.context.internalAdapter.updateVerificationValue(f.id,{value:`${T}!${parseInt(E)+1}`}),w("INVALID_CODE")}))}}},S=e=>{const c={...e,digits:e?.digits||6,period:e?.period||30},u="twoFactor",w=(0,o.a)("/totp/generate",{method:"POST",body:t.z.object({secret:t.z.string({description:"The secret to generate the TOTP code"})}),metadata:{openapi:{summary:"Generate TOTP code",description:"Use this endpoint to generate a TOTP code",responses:{200:{description:"Successful response",content:{"application/json":{schema:{type:"object",properties:{code:{type:"string"}}}}}}}},SERVER_ONLY:!0}},(async t=>{if(e?.disable)throw t.context.logger.error("totp isn't configured. please pass totp option on two factor plugin to enable totp"),new s.APIError("BAD_REQUEST",{message:"totp isn't configured"});return{code:await(0,l.createOTP)(t.body.secret,{period:c.period,digits:c.digits}).totp()}})),f=(0,o.a)("/two-factor/get-totp-uri",{method:"POST",use:[o.s],body:t.z.object({password:t.z.string({description:"User password"})}),metadata:{openapi:{summary:"Get TOTP URI",description:"Use this endpoint to get the TOTP URI",responses:{200:{description:"Successful response",content:{"application/json":{schema:{type:"object",properties:{totpURI:{type:"string"}}}}}}}}}},(async t=>{if(e?.disable)throw t.context.logger.error("totp isn't configured. please pass totp option on two factor plugin to enable totp"),new s.APIError("BAD_REQUEST",{message:"totp isn't configured"});const o=t.context.session.user,n=await t.context.adapter.findOne({model:u,where:[{field:"userId",value:o.id}]});if(!n||!o.twoFactorEnabled)throw new s.APIError("BAD_REQUEST",{message:A.TOTP_NOT_ENABLED});const w=await(0,p.symmetricDecrypt)({key:t.context.secret,data:n.secret});await t.context.password.checkPassword(o.id,t);return{totpURI:(0,l.createOTP)(w,{digits:c.digits,period:c.period}).url(e?.issuer||t.context.appName,o.email)}})),T=(0,o.a)("/two-factor/verify-totp",{method:"POST",body:t.z.object({code:t.z.string({description:"The otp code to verify"}),trustDevice:t.z.boolean({description:"If true, the device will be trusted for 30 days. It'll be refreshed on every sign in request within this time."}).optional()}),metadata:{openapi:{summary:"Verify two factor TOTP",description:"Verify two factor TOTP",responses:{200:{description:"Successful response",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},(async t=>{if(e?.disable)throw t.context.logger.error("totp isn't configured. please pass totp option on two factor plugin to enable totp"),new s.APIError("BAD_REQUEST",{message:"totp isn't configured"});const{session:w,valid:f,invalid:T}=await h(t),E=w.user,y=await t.context.adapter.findOne({model:u,where:[{field:"userId",value:E.id}]});if(!y)throw new s.APIError("BAD_REQUEST",{message:A.TOTP_NOT_ENABLED});const b=await(0,p.symmetricDecrypt)({key:t.context.secret,data:y.secret});if(!await(0,l.createOTP)(b,{period:c.period,digits:c.digits}).verify(t.body.code))return T("INVALID_CODE");if(!E.twoFactorEnabled){if(!w.session)throw new s.APIError("BAD_REQUEST",{message:o.B.FAILED_TO_CREATE_SESSION});const e=await t.context.internalAdapter.updateUser(E.id,{twoFactorEnabled:!0},t),c=await t.context.internalAdapter.createSession(E.id,t.headers,!1,w.session).catch((e=>{throw e}));await t.context.internalAdapter.deleteSession(w.session.token),await(0,n.setSessionCookie)(t,{session:c,user:e})}return f(t)}));return{id:"totp",endpoints:{generateTOTP:w,getTOTPURI:f,verifyTOTP:T}}},x={user:{fields:{twoFactorEnabled:{type:"boolean",required:!1,defaultValue:!1,input:!1}}},twoFactor:{fields:{secret:{type:"string",required:!0,returned:!1},backupCodes:{type:"string",required:!0,returned:!1},userId:{type:"string",required:!0,returned:!1,references:{model:"user",field:"id"}}}}};_e.twoFactor=f=>{const h="twoFactor",y=S(f?.totpOptions),O=_(f?.backupCodeOptions),I=k(f?.otpOptions);return{id:"two-factor",endpoints:{...y.endpoints,...I.endpoints,...O.endpoints,enableTwoFactor:(0,o.a)("/two-factor/enable",{method:"POST",body:t.z.object({password:t.z.string({description:"User password"}),issuer:t.z.string({description:"Custom issuer for the TOTP URI"}).optional()}),use:[o.s],metadata:{openapi:{summary:"Enable two factor authentication",description:"Use this endpoint to enable two factor authentication. This will generate a TOTP URI and backup codes. Once the user verifies the TOTP URI, the two factor authentication will be enabled.",responses:{200:{description:"Successful response",content:{"application/json":{schema:{type:"object",properties:{totpURI:{type:"string",description:"TOTP URI"},backupCodes:{type:"array",items:{type:"string"},description:"Backup codes"}}}}}}}}}},(async t=>{const c=t.context.session.user,{password:u,issuer:A}=t.body;if(!await(0,w.v)(t,{password:u,userId:c.id}))throw new s.APIError("BAD_REQUEST",{message:o.B.INVALID_PASSWORD});const T=(0,e.g)(32),E=await(0,p.symmetricEncrypt)({key:t.context.secret,data:T}),y=await b(t.context.secret,f?.backupCodeOptions);if(f?.skipVerificationOnEnable){const e=await t.context.internalAdapter.updateUser(c.id,{twoFactorEnabled:!0},t),o=await t.context.internalAdapter.createSession(e.id,t.headers,!1,t.context.session.session);await(0,n.setSessionCookie)(t,{session:o,user:e}),await t.context.internalAdapter.deleteSession(t.context.session.session.token)}await t.context.adapter.deleteMany({model:h,where:[{field:"userId",value:c.id}]}),await t.context.adapter.create({model:h,data:{secret:E,backupCodes:y.encryptedBackupCodes,userId:c.id}});const O=(0,l.createOTP)(T,{digits:f?.totpOptions?.digits||6,period:f?.totpOptions?.period}).url(A||f?.issuer||t.context.appName,c.email);return t.json({totpURI:O,backupCodes:y.backupCodes})})),disableTwoFactor:(0,o.a)("/two-factor/disable",{method:"POST",body:t.z.object({password:t.z.string({description:"User password"})}),use:[o.s],metadata:{openapi:{summary:"Disable two factor authentication",description:"Use this endpoint to disable two factor authentication.",responses:{200:{description:"Successful response",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},(async e=>{const t=e.context.session.user,{password:o}=e.body;if(!await(0,w.v)(e,{password:o,userId:t.id}))throw new s.APIError("BAD_REQUEST",{message:"Invalid password"});const c=await e.context.internalAdapter.updateUser(t.id,{twoFactorEnabled:!1},e);await e.context.adapter.delete({model:h,where:[{field:"userId",value:c.id}]});const p=await e.context.internalAdapter.createSession(c.id,e.headers,!1,e.context.session.session);return await(0,n.setSessionCookie)(e,{session:p,user:c}),await e.context.internalAdapter.deleteSession(e.context.session.session.token),e.json({status:!0})}))},options:f,hooks:{after:[{matcher:e=>"/sign-in/email"===e.path||"/sign-in/username"===e.path||"/sign-in/phone-number"===e.path,handler:(0,o.c)((async t=>{const o=t.context.newSession;if(!o)return;if(!o?.user.twoFactorEnabled)return;const s=t.context.createAuthCookie(E),c=await t.getSignedCookie(s.name,t.context.secret);if(c){const[e,n]=c.split("!");if(e===await(0,u.createHMAC)("SHA-256","base64urlnopad").sign(t.context.secret,`${o.user.id}!${n}`)){const e=await(0,u.createHMAC)("SHA-256","base64urlnopad").sign(t.context.secret,`${o.user.id}!${n}`);return void await t.setSignedCookie(s.name,`${e}!${o.session.token}`,t.context.secret,s.attributes)}}(0,n.deleteSessionCookie)(t,!0),await t.context.internalAdapter.deleteSession(o.session.token);const p=f?.otpOptions?.period||300,l=t.context.createAuthCookie(T,{maxAge:p}),w=`2fa-${(0,e.g)(20)}`;return await t.context.internalAdapter.createVerificationValue({value:o.user.id,identifier:w,expiresAt:new Date(Date.now()+1e3*p)}),await t.setSignedCookie(l.name,w,t.context.secret,l.attributes),t.json({twoFactorRedirect:!0})}))}]},schema:(0,c.m)(x,f?.schema),rateLimit:[{pathMatcher:e=>e.startsWith("/two-factor/"),window:10,max:3}],$ERROR_CODES:A}}}),7362,[7091,3739,6980,6977,6981,7096,910,7093,7097,7363,6983,6984,7074,7075,7078,7080,6988,7082,7090,6985,7086,7364,7357,946,7092,6987,908,7073,6982,911,7094,6986,7095,7098,909,6996,7099,7102]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.compareHash=async function(n,c){const o=await(0,t.createHash)("SHA-256").digest("string"==typeof n?(new TextEncoder).encode(n):n),u=y.base64.decode(c);return(0,s.c)(o,u)},Object.defineProperty(e,"constantTimeEqual",{enumerable:!0,get:function(){return s.c}}),Object.defineProperty(e,"generateRandomString",{enumerable:!0,get:function(){return f.g}}),Object.defineProperty(e,"hashPassword",{enumerable:!0,get:function(){return s.h}}),e.hashToBase64=async function(n){const c=await(0,t.createHash)("SHA-256").digest(n);return y.base64.encode(c)},Object.defineProperty(e,"signJWT",{enumerable:!0,get:function(){return u.s}}),e.symmetricEncrypt=e.symmetricDecrypt=void 0,Object.defineProperty(e,"verifyPassword",{enumerable:!0,get:function(){return s.v}});var t=r(d[0]),n=r(d[1]),c=r(d[2]),o=r(d[3]),s=r(d[4]),y=r(d[5]),u=r(d[6]),f=r(d[7]);r(d[8]),r(d[9]),r(d[10]),r(d[11]),r(d[12]),r(d[13]);e.symmetricEncrypt=async({key:s,data:y})=>{const u=await(0,t.createHash)("SHA-256").digest(s),f=(0,c.utf8ToBytes)(y),p=(0,o.managedNonce)(n.xchacha20poly1305)(new Uint8Array(u));return(0,c.bytesToHex)(p.encrypt(f))};e.symmetricDecrypt=async({key:s,data:y})=>{const u=await(0,t.createHash)("SHA-256").digest(s),f=(0,c.hexToBytes)(y),p=(0,o.managedNonce)(n.xchacha20poly1305)(new Uint8Array(u));return(new TextDecoder).decode(p.decrypt(f))}}),7363,[7074,7075,7078,7080,7102,6983,7098,7091,7082,7090,6985,7086,6988,7092]);
__d((function(g,r,_i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.createOTP=void 0;var t=r(d[0]),i=r(d[1]);r(d[2]),r(d[3]),r(d[4]);async function n(t,{counter:n,digits:o,hash:s="SHA-1"}){const c=o??6;if(c<1||c>8)throw new TypeError("Digits must be between 1 and 8");const u=new ArrayBuffer(8);new DataView(u).setBigUint64(0,BigInt(n),!1);const p=new Uint8Array(u),w=new Uint8Array(await(0,i.createHMAC)(s).sign(t,p)),f=15&w[w.length-1];return(((127&w[f])<<24|(255&w[f+1])<<16|(255&w[f+2])<<8|255&w[f+3])%10**c).toString().padStart(c,"0")}async function o(t,i){const o=i?.digits??6,s=1e3*(i?.period??30),c=Math.floor(Date.now()/s);return await n(t,{counter:c,digits:o,hash:i?.hash})}async function s(t,{window:i=1,digits:o=6,secret:s,period:c=30}){const u=1e3*c,p=Math.floor(Date.now()/u);for(let c=-i;c<=i;c++){if(t===await n(s,{counter:p+c,digits:o}))return!0}return!1}function c({issuer:i,account:n,secret:o,digits:s=6,period:c=30}){const u=`otpauth://totp/${encodeURIComponent(i)}:${encodeURIComponent(n)}`,p=new URLSearchParams({secret:t.base32.encode(o,{padding:!1}),issuer:i});return void 0!==s&&p.set("digits",s.toString()),void 0!==c&&p.set("period",c.toString()),`${u}?${p.toString()}`}e.createOTP=(t,i)=>{const u=i?.digits??6,p=i?.period??30;return{hotp:i=>n(t,{counter:i,digits:u}),totp:()=>o(t,{digits:u,period:p}),verify:(i,n)=>s(i,{secret:t,digits:u,period:p,...n}),url:(i,n)=>c({issuer:i,account:n,secret:t,digits:u,period:p})}}}),7364,[7365,6984,6978,6985,6983]);
__d((function(g,r,_i,a,m,e,d){function n(n){return n?"0123456789ABCDEFGHIJKLMNOPQRSTUV":"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"}function t(n){const t=new Map;for(let o=0;o<n.length;o++)t.set(n[o],o);return t}function o(n,t,o){let c="",f=0,i=0;for(const o of n)for(f=f<<8|o,i+=8;i>=5;)i-=5,c+=t[f>>i&31];if(i>0&&(c+=t[f<<5-i&31]),o){const n=(8-c.length%8)%8;c+="=".repeat(n)}return c}function c(n,o){const c=t(o),f=[];let i=0,s=0;for(const t of n){if("="===t)break;const n=c.get(t);if(void 0===n)throw new Error(`Invalid Base32 character: ${t}`);for(i=i<<5|n,s+=5;s>=8;)s-=8,f.push(i>>s&255)}return Uint8Array.from(f)}Object.defineProperty(e,"__esModule",{value:!0}),e.base32hex=e.base32=void 0;e.base32={encode(t,c={}){const f=n(!1);return o("string"==typeof t?(new TextEncoder).encode(t):new Uint8Array(t),f,c.padding??!0)},decode(t){"string"!=typeof t&&(t=(new TextDecoder).decode(t));return c(t,n(!1))}},e.base32hex={encode(t,c={}){const f=n(!0);return o("string"==typeof t?(new TextEncoder).encode(t):new Uint8Array(t),f,c.padding??!0)},decode:t=>c(t,n(!0))}}),7365,[]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.username=void 0;var s=r(d[0]),n=r(d[1]),o=r(d[2]),t=r(d[3]),E=r(d[4]);r(d[5]),r(d[6]),r(d[7]),r(d[8]),r(d[9]),r(d[10]),r(d[11]),r(d[12]),r(d[13]),r(d[14]),r(d[15]),r(d[16]),r(d[17]),r(d[18]),r(d[19]),r(d[20]),r(d[21]),r(d[22]),r(d[23]),r(d[24]),r(d[25]),r(d[26]),r(d[27]),r(d[28]),r(d[29]),r(d[30]),r(d[31]),r(d[32]);const u={user:{fields:{username:{type:"string",required:!1,sortable:!0,unique:!0,returned:!0,transform:{input:s=>s?.toString().toLowerCase()}},displayUsername:{type:"string",required:!1}}}},A={INVALID_USERNAME_OR_PASSWORD:"invalid username or password",EMAIL_NOT_VERIFIED:"email not verified",UNEXPECTED_ERROR:"unexpected error",USERNAME_IS_ALREADY_TAKEN:"username is already taken. please try another.",USERNAME_TOO_SHORT:"username is too short",USERNAME_TOO_LONG:"username is too long",INVALID_USERNAME:"username is invalid"};function S(s){return/^[a-zA-Z0-9_.]+$/.test(s)}const _=c=>({id:"username",endpoints:{signInUsername:(0,n.a)("/sign-in/username",{method:"POST",body:s.z.object({username:s.z.string({description:"The username of the user"}),password:s.z.string({description:"The password of the user"}),rememberMe:s.z.boolean({description:"Remember the user session"}).optional()}),metadata:{openapi:{summary:"Sign in with username",description:"Sign in with username",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",description:"Session token for the authenticated session"},user:{$ref:"#/components/schemas/User"}},required:["token","user"]}}}}}}}},(async s=>{if(!s.body.username||!s.body.password)throw s.context.logger.error("Username or password not found"),new o.APIError("UNAUTHORIZED",{message:A.INVALID_USERNAME_OR_PASSWORD});const E=c?.minUsernameLength||3,u=c?.maxUsernameLength||30;if(s.body.username.length<E)throw s.context.logger.error("Username too short",{username:s.body.username}),new o.APIError("UNPROCESSABLE_ENTITY",{message:A.USERNAME_TOO_SHORT});if(s.body.username.length>u)throw s.context.logger.error("Username too long",{username:s.body.username}),new o.APIError("UNPROCESSABLE_ENTITY",{message:A.USERNAME_TOO_LONG});if(!(c?.usernameValidator||S)(s.body.username))throw new o.APIError("UNPROCESSABLE_ENTITY",{message:A.INVALID_USERNAME});const I=await s.context.adapter.findOne({model:"user",where:[{field:"username",value:s.body.username.toLowerCase()}]});if(!I)throw await s.context.password.hash(s.body.password),s.context.logger.error("User not found",{username:_}),new o.APIError("UNAUTHORIZED",{message:A.INVALID_USERNAME_OR_PASSWORD});if(!I.emailVerified&&s.context.options.emailAndPassword?.requireEmailVerification)throw await(0,n.d)(s,I),new o.APIError("FORBIDDEN",{message:A.EMAIL_NOT_VERIFIED});const w=await s.context.adapter.findOne({model:"account",where:[{field:"userId",value:I.id},{field:"providerId",value:"credential"}]});if(!w)throw new o.APIError("UNAUTHORIZED",{message:A.INVALID_USERNAME_OR_PASSWORD});const R=w?.password;if(!R)throw s.context.logger.error("Password not found",{username:_}),new o.APIError("UNAUTHORIZED",{message:A.INVALID_USERNAME_OR_PASSWORD});if(!await s.context.password.verify({hash:R,password:s.body.password}))throw s.context.logger.error("Invalid password"),new o.APIError("UNAUTHORIZED",{message:A.INVALID_USERNAME_OR_PASSWORD});const l=await s.context.internalAdapter.createSession(I.id,s.headers,!1===s.body.rememberMe);return l?(await(0,t.setSessionCookie)(s,{session:l,user:I},!1===s.body.rememberMe),s.json({token:l.token,user:{id:I.id,email:I.email,emailVerified:I.emailVerified,username:I.username,name:I.name,image:I.image,createdAt:I.createdAt,updatedAt:I.updatedAt}})):s.json(null,{status:500,body:{message:n.B.FAILED_TO_CREATE_SESSION}})}))},schema:(0,E.m)(u,c?.schema),hooks:{before:[{matcher:s=>"/sign-up/email"===s.path||"/update-user"===s.path,handler:(0,n.c)((async s=>{const n=s.body.username;if(void 0!==n&&"string"==typeof n){const t=c?.minUsernameLength||3,E=c?.maxUsernameLength||30;if(n.length<t)throw new o.APIError("UNPROCESSABLE_ENTITY",{message:A.USERNAME_TOO_SHORT});if(n.length>E)throw new o.APIError("UNPROCESSABLE_ENTITY",{message:A.USERNAME_TOO_LONG});const u=c?.usernameValidator||S;if(!await u(n))throw new o.APIError("UNPROCESSABLE_ENTITY",{message:A.INVALID_USERNAME});if(await s.context.adapter.findOne({model:"user",where:[{field:"username",value:n.toLowerCase()}]}))throw new o.APIError("UNPROCESSABLE_ENTITY",{message:A.USERNAME_IS_ALREADY_TAKEN})}}))},{matcher:s=>"/sign-up/email"===s.path||"/update-user"===s.path,handler:(0,n.c)((async s=>{!s.body.displayUsername&&s.body.username&&(s.body.displayUsername=s.body.username)}))}]},$ERROR_CODES:A});e.username=_}),7366,[3739,6980,6977,6981,7096,910,7093,7097,6987,908,6988,7073,6982,7074,6983,7075,7078,7080,7082,7090,6985,7086,7091,7092,911,7094,6986,7095,6984,7098,909,6996,7099]);
__d((function(g,r,i,a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.bearer=void 0;var e=r(d[0]);r(d[1]),r(d[2]);var t=r(d[3]),o=r(d[4]),s=r(d[5]);r(d[6]),r(d[7]),r(d[8]),r(d[9]),r(d[10]),r(d[11]),r(d[12]),r(d[13]),r(d[14]),r(d[15]),r(d[16]),r(d[17]),r(d[18]),r(d[19]),r(d[20]),r(d[21]),r(d[22]),r(d[23]),r(d[24]),r(d[25]),r(d[26]),r(d[27]),r(d[28]),r(d[29]),r(d[30]),r(d[31]),r(d[32]);_e.bearer=n=>({id:"bearer",hooks:{before:[{matcher:e=>Boolean(e.request?.headers.get("authorization")||e.headers?.get("authorization")),handler:(0,s.c)((async o=>{const s=o.request?.headers.get("authorization")?.replace("Bearer ","")||o.headers?.get("Authorization")?.replace("Bearer ","");if(!s)return;let c="";if(s.includes("."))c=s.replace("=","");else{if(n?.requireSignature)return;c=(await(0,e.serializeSignedCookie)("",s,o.context.secret)).replace("=","")}try{const e=decodeURIComponent(c);if(!await(0,t.createHMAC)("SHA-256","base64urlnopad").verify(o.context.secret,e.split(".")[0],e.split(".")[1]))return}catch(e){return}const u=o.request?.headers||o.headers,h=new Headers({...Object.fromEntries(u?.entries())});return h.append("cookie",`${o.context.authCookies.sessionToken.name}=${c}`),{context:{headers:h}}}))}],after:[{matcher:e=>!0,handler:(0,s.c)((async e=>{const t=e.context.responseHeaders?.get("set-cookie");if(!t)return;const s=(0,o.parseSetCookieHeader)(t),n=e.context.authCookies.sessionToken.name,c=s.get(n);if(!c||!c.value||0===c["max-age"])return;const u=c.value;e.setHeader("set-auth-token",u),e.setHeader("Access-Control-Expose-Headers","set-auth-token")}))}]}})}),7367,[6977,910,6983,6984,6981,6980,3739,7096,7093,7097,911,6982,6986,909,6987,908,6988,7073,7074,7075,7078,7080,7082,7090,6985,7086,7091,7092,7094,7095,7098,6996,7099]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.magicLink=void 0;var t=r(d[0]),n=r(d[1]),o=r(d[2]),s=r(d[3]);r(d[4]),r(d[5]),r(d[6]),r(d[7]),r(d[8]),r(d[9]),r(d[10]),r(d[11]),r(d[12]),r(d[13]);var c=r(d[14]);r(d[15]),r(d[16]),r(d[17]),r(d[18]),r(d[19]),r(d[20]),r(d[21]),r(d[22]),r(d[23]),r(d[24]),r(d[25]),r(d[26]),r(d[27]),r(d[28]),r(d[29]),r(d[30]),r(d[31]),r(d[32]);e.magicLink=l=>({id:"magic-link",endpoints:{signInMagicLink:(0,n.a)("/sign-in/magic-link",{method:"POST",requireHeaders:!0,body:t.z.object({email:t.z.string({description:"Email address to send the magic link"}).email(),name:t.z.string({description:"User display name. Only used if the user is registering for the first time."}).optional(),callbackURL:t.z.string({description:"URL to redirect after magic link verification"}).optional()}),metadata:{openapi:{description:"Sign in with magic link",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},(async t=>{const{email:s}=t.body;if(l.disableSignUp){if(!await t.context.internalAdapter.findUserByEmail(s))throw new o.APIError("BAD_REQUEST",{message:n.B.USER_NOT_FOUND})}const p=l?.generateToken?await l.generateToken(s):(0,c.g)(32,"a-z","A-Z");await t.context.internalAdapter.createVerificationValue({identifier:p,value:JSON.stringify({email:s,name:t.body.name}),expiresAt:new Date(Date.now()+1e3*(l.expiresIn||300))});const f=`${t.context.baseURL}/magic-link/verify?token=${p}&callbackURL=${t.body.callbackURL||"/"}`;return await l.sendMagicLink({email:s,url:f,token:p},t.request),t.json({status:!0})})),magicLinkVerify:(0,n.a)("/magic-link/verify",{method:"GET",query:t.z.object({token:t.z.string({description:"Verification token"}),callbackURL:t.z.string({description:"URL to redirect after magic link verification, if not provided will return session"}).optional()}),use:[(0,n.o)((t=>t.query.callbackURL))],requireHeaders:!0,metadata:{openapi:{description:"Verify magic link",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{session:{$ref:"#/components/schemas/Session"},user:{$ref:"#/components/schemas/User"}}}}}}}}}},(async t=>{const{token:n,callbackURL:o}=t.query,c=o?.startsWith("http")?o:o?`${t.context.options.baseURL}${o}`:t.context.options.baseURL,p=await t.context.internalAdapter.findVerificationValue(n);if(!p)throw t.redirect(`${c}?error=INVALID_TOKEN`);if(p.expiresAt<new Date)throw await t.context.internalAdapter.deleteVerificationValue(p.id),t.redirect(`${c}?error=EXPIRED_TOKEN`);await t.context.internalAdapter.deleteVerificationValue(p.id);const{email:f,name:u}=JSON.parse(p.value);let k=await t.context.internalAdapter.findUserByEmail(f).then((t=>t?.user));if(!k){if(l.disableSignUp)throw t.redirect(`${c}?error=failed_to_create_user`);if(k=await t.context.internalAdapter.createUser({email:f,emailVerified:!0,name:u||""},t),!k)throw t.redirect(`${c}?error=failed_to_create_user`)}k.emailVerified||await t.context.internalAdapter.updateUser(k.id,{emailVerified:!0},t);const w=await t.context.internalAdapter.createSession(k.id,t.headers);if(!w)throw t.redirect(`${c}?error=failed_to_create_session`);if(await(0,s.setSessionCookie)(t,{session:w,user:k}),!o)return t.json({token:w.token,user:{id:k.id,email:k.email,emailVerified:k.emailVerified,name:k.name,image:k.image,createdAt:k.createdAt,updatedAt:k.updatedAt}});throw t.redirect(o)}))},rateLimit:[{pathMatcher:t=>t.startsWith("/sign-in/magic-link")||t.startsWith("/magic-link/verify"),window:l.rateLimit?.window||60,max:l.rateLimit?.max||5}]})}),7368,[3739,6980,6977,6981,7074,7075,7078,7080,6983,6988,7082,7090,6985,7086,7091,7096,910,7093,7097,6987,908,7073,6982,911,7092,7094,6986,7095,6984,7098,909,6996,7099]);
__d((function(g,r,i,_a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.phoneNumber=void 0;var t=r(d[0]),n=r(d[1]),o=r(d[2]),s=r(d[3]),a=r(d[4]),p=r(d[5]);r(d[6]),r(d[7]),r(d[8]);var u=r(d[9]);r(d[10]),r(d[11]),r(d[12]),r(d[13]),r(d[14]),r(d[15]),r(d[16]),r(d[17]),r(d[18]),r(d[19]),r(d[20]),r(d[21]),r(d[22]),r(d[23]),r(d[24]),r(d[25]),r(d[26]),r(d[27]),r(d[28]),r(d[29]),r(d[30]),r(d[31]),r(d[32]);const c={INVALID_PHONE_NUMBER:"Invalid phone number",PHONE_NUMBER_EXIST:"Phone number already exist",INVALID_PHONE_NUMBER_OR_PASSWORD:"Invalid phone number or password",UNEXPECTED_ERROR:"Unexpected error",OTP_NOT_FOUND:"OTP not found",OTP_EXPIRED:"OTP expired",INVALID_OTP:"Invalid OTP",PHONE_NUMBER_NOT_VERIFIED:"Phone number not verified"};function h(t){return(0,a.g)(t,"0-9")}e.phoneNumber=a=>{const l={expiresIn:a?.expiresIn||300,otpLength:a?.otpLength||6,...a,phoneNumber:"phoneNumber",phoneNumberVerified:"phoneNumberVerified",code:"code",createdAt:"createdAt"};return{id:"phone-number",endpoints:{signInPhoneNumber:(0,n.a)("/sign-in/phone-number",{method:"POST",body:t.z.object({phoneNumber:t.z.string({description:"Phone number to sign in"}),password:t.z.string({description:"Password to use for sign in"}),rememberMe:t.z.boolean({description:"Remember the session"}).optional()}),metadata:{openapi:{summary:"Sign in with phone number",description:"Use this endpoint to sign in with phone number",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{user:{$ref:"#/components/schemas/User"},session:{$ref:"#/components/schemas/Session"}}}}}},400:{description:"Invalid phone number or password"}}}}},(async t=>{const{password:s,phoneNumber:a}=t.body;if(l.phoneNumberValidator){if(!await l.phoneNumberValidator(t.body.phoneNumber))throw new o.APIError("BAD_REQUEST",{message:c.INVALID_PHONE_NUMBER})}const b=await t.context.adapter.findOne({model:"user",where:[{field:"phoneNumber",value:a}]});if(!b)throw new o.APIError("UNAUTHORIZED",{message:c.INVALID_PHONE_NUMBER_OR_PASSWORD});if(l.requireVerification&&!b.phoneNumberVerified){const n=h(l.otpLength);throw await t.context.internalAdapter.createVerificationValue({value:n,identifier:a,expiresAt:(0,u.g)(l.expiresIn,"sec")}),await(l.sendOTP?.({phoneNumber:a,code:n})),new o.APIError("UNAUTHORIZED",{message:c.PHONE_NUMBER_NOT_VERIFIED})}const N=(await t.context.internalAdapter.findAccountByUserId(b.id)).find((t=>"credential"===t.providerId));if(!N)throw t.context.logger.error("Credential account not found",{phoneNumber:a}),new o.APIError("UNAUTHORIZED",{message:c.INVALID_PHONE_NUMBER_OR_PASSWORD});const f=N?.password;if(!f)throw t.context.logger.error("Password not found",{phoneNumber:a}),new o.APIError("UNAUTHORIZED",{message:c.UNEXPECTED_ERROR});if(!await t.context.password.verify({hash:f,password:s}))throw t.context.logger.error("Invalid password"),new o.APIError("UNAUTHORIZED",{message:c.INVALID_PHONE_NUMBER_OR_PASSWORD});const E=await t.context.internalAdapter.createSession(b.id,t.headers,!1===t.body.rememberMe);if(!E)throw t.context.logger.error("Failed to create session"),new o.APIError("UNAUTHORIZED",{message:n.B.FAILED_TO_CREATE_SESSION});return await(0,p.setSessionCookie)(t,{session:E,user:b},!1===t.body.rememberMe),t.json({token:E.token,user:{id:b.id,email:b.email,emailVerified:b.emailVerified,name:b.name,image:b.image,phoneNumber:b.phoneNumber,phoneNumberVerified:b.phoneNumberVerified,createdAt:b.createdAt,updatedAt:b.updatedAt}})})),sendPhoneNumberOTP:(0,n.a)("/phone-number/send-otp",{method:"POST",body:t.z.object({phoneNumber:t.z.string({description:"Phone number to send OTP"})}),metadata:{openapi:{summary:"Send OTP to phone number",description:"Use this endpoint to send OTP to phone number",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}}}}}}},(async t=>{if(!a?.sendOTP)throw t.context.logger.warn("sendOTP not implemented"),new o.APIError("NOT_IMPLEMENTED",{message:"sendOTP not implemented"});if(l.phoneNumberValidator){if(!await l.phoneNumberValidator(t.body.phoneNumber))throw new o.APIError("BAD_REQUEST",{message:c.INVALID_PHONE_NUMBER})}const n=h(l.otpLength);return await t.context.internalAdapter.createVerificationValue({value:`${n}:0`,identifier:t.body.phoneNumber,expiresAt:(0,u.g)(l.expiresIn,"sec")}),await a.sendOTP({phoneNumber:t.body.phoneNumber,code:n},t.request),t.json({message:"code sent"})})),verifyPhoneNumber:(0,n.a)("/phone-number/verify",{method:"POST",body:t.z.object({phoneNumber:t.z.string({description:"Phone number to verify"}),code:t.z.string({description:"OTP code"}),disableSession:t.z.boolean({description:"Disable session creation after verification"}).optional(),updatePhoneNumber:t.z.boolean({description:"Check if there is a session and update the phone number"}).optional()}),metadata:{openapi:{summary:"Verify phone number",description:"Use this endpoint to verify phone number",responses:{200:{description:"Phone number verified successfully",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the verification was successful",enum:[!0]},token:{type:"string",nullable:!0,description:"Session token if session is created, null if disableSession is true or no session is created"},user:{type:"object",nullable:!0,properties:{id:{type:"string",description:"Unique identifier of the user"},email:{type:"string",format:"email",nullable:!0,description:"User's email address"},emailVerified:{type:"boolean",nullable:!0,description:"Whether the email is verified"},name:{type:"string",nullable:!0,description:"User's name"},image:{type:"string",format:"uri",nullable:!0,description:"User's profile image URL"},phoneNumber:{type:"string",description:"User's phone number"},phoneNumberVerified:{type:"boolean",description:"Whether the phone number is verified"},createdAt:{type:"string",format:"date-time",description:"Timestamp when the user was created"},updatedAt:{type:"string",format:"date-time",description:"Timestamp when the user was last updated"}},required:["id","phoneNumber","phoneNumberVerified","createdAt","updatedAt"],description:"User object with phone number details, null if no user is created or found"}},required:["status"]}}}},400:{description:"Invalid OTP"}}}}},(async t=>{const s=await t.context.internalAdapter.findVerificationValue(t.body.phoneNumber);if(!s||s.expiresAt<new Date){if(s&&s.expiresAt<new Date)throw new o.APIError("BAD_REQUEST",{message:"OTP expired"});throw new o.APIError("BAD_REQUEST",{message:c.OTP_NOT_FOUND})}const[u,h]=s.value.split(":"),b=a?.allowedAttempts||3;if(h&&parseInt(h)>=b)throw await t.context.internalAdapter.deleteVerificationValue(s.id),new o.APIError("FORBIDDEN",{message:"Too many attempts"});if(u!==t.body.code)throw await t.context.internalAdapter.updateVerificationValue(s.id,{value:`${u}:${parseInt(h||"0")+1}`}),new o.APIError("BAD_REQUEST",{message:"Invalid OTP"});if(await t.context.internalAdapter.deleteVerificationValue(s.id),t.body.updatePhoneNumber){const s=await(0,n.g)(t);if(!s)throw new o.APIError("UNAUTHORIZED",{message:n.B.USER_NOT_FOUND});if((await t.context.adapter.findMany({model:"user",where:[{field:"phoneNumber",value:t.body.phoneNumber}]})).length)throw t.error("BAD_REQUEST",{message:c.PHONE_NUMBER_EXIST});let a=await t.context.internalAdapter.updateUser(s.user.id,{[l.phoneNumber]:t.body.phoneNumber,[l.phoneNumberVerified]:!0},t);return t.json({status:!0,token:s.session.token,user:{id:a.id,email:a.email,emailVerified:a.emailVerified,name:a.name,image:a.image,phoneNumber:a.phoneNumber,phoneNumberVerified:a.phoneNumberVerified,createdAt:a.createdAt,updatedAt:a.updatedAt}})}let N=await t.context.adapter.findOne({model:"user",where:[{value:t.body.phoneNumber,field:l.phoneNumber}]});if(N)N=await t.context.internalAdapter.updateUser(N.id,{[l.phoneNumberVerified]:!0},t);else if(a?.signUpOnVerification&&(N=await t.context.internalAdapter.createUser({email:a.signUpOnVerification.getTempEmail(t.body.phoneNumber),name:a.signUpOnVerification.getTempName?a.signUpOnVerification.getTempName(t.body.phoneNumber):t.body.phoneNumber,[l.phoneNumber]:t.body.phoneNumber,[l.phoneNumberVerified]:!0},t),!N))throw new o.APIError("INTERNAL_SERVER_ERROR",{message:n.B.FAILED_TO_CREATE_USER});if(!N)return t.json(null);if(await(a?.callbackOnVerification?.({phoneNumber:t.body.phoneNumber,user:N},t.request)),!N)throw new o.APIError("INTERNAL_SERVER_ERROR",{message:n.B.FAILED_TO_UPDATE_USER});if(!t.body.disableSession){const s=await t.context.internalAdapter.createSession(N.id,t.headers);if(!s)throw new o.APIError("INTERNAL_SERVER_ERROR",{message:n.B.FAILED_TO_CREATE_SESSION});return await(0,p.setSessionCookie)(t,{session:s,user:N}),t.json({status:!0,token:s.token,user:{id:N.id,email:N.email,emailVerified:N.emailVerified,name:N.name,image:N.image,phoneNumber:N.phoneNumber,phoneNumberVerified:N.phoneNumberVerified,createdAt:N.createdAt,updatedAt:N.updatedAt}})}return t.json({status:!0,token:null,user:{id:N.id,email:N.email,emailVerified:N.emailVerified,name:N.name,image:N.image,phoneNumber:N.phoneNumber,phoneNumberVerified:N.phoneNumberVerified,createdAt:N.createdAt,updatedAt:N.updatedAt}})})),forgetPasswordPhoneNumber:(0,n.a)("/phone-number/forget-password",{method:"POST",body:t.z.object({phoneNumber:t.z.string()}),metadata:{openapi:{description:"Request OTP for password reset via phone number",responses:{200:{description:"OTP sent successfully for password reset",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the OTP was sent successfully",enum:[!0]}},required:["status"]}}}}}}}},(async t=>{if(!await t.context.adapter.findOne({model:"user",where:[{value:t.body.phoneNumber,field:l.phoneNumber}]}))throw new o.APIError("BAD_REQUEST",{message:"phone number isn't registered"});const n=h(l.otpLength);return await t.context.internalAdapter.createVerificationValue({value:`${n}:0`,identifier:`${t.body.phoneNumber}-forget-password`,expiresAt:(0,u.g)(l.expiresIn,"sec")}),await(a?.sendForgetPasswordOTP?.({phoneNumber:t.body.phoneNumber,code:n},t.request)),t.json({status:!0})})),resetPasswordPhoneNumber:(0,n.a)("/phone-number/reset-password",{method:"POST",body:t.z.object({otp:t.z.string(),phoneNumber:t.z.string(),newPassword:t.z.string()}),metadata:{openapi:{description:"Reset password using phone number OTP",responses:{200:{description:"Password reset successfully",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the password was reset successfully",enum:[!0]}},required:["status"]}}}}}}}},(async t=>{const n=await t.context.internalAdapter.findVerificationValue(`${t.body.phoneNumber}-forget-password`);if(!n)throw new o.APIError("BAD_REQUEST",{message:c.OTP_NOT_FOUND});if(n.expiresAt<new Date)throw new o.APIError("BAD_REQUEST",{message:c.OTP_EXPIRED});const[s,p]=n.value.split(":"),u=a?.allowedAttempts||3;if(p&&parseInt(p)>=u)throw await t.context.internalAdapter.deleteVerificationValue(n.id),new o.APIError("FORBIDDEN",{message:"Too many attempts"});if(t.body.otp!==s)throw await t.context.internalAdapter.updateVerificationValue(n.id,{value:`${s}:${parseInt(p||"0")+1}`}),new o.APIError("BAD_REQUEST",{message:c.INVALID_OTP});const h=await t.context.adapter.findOne({model:"user",where:[{field:"phoneNumber",value:t.body.phoneNumber}]});if(!h)throw new o.APIError("BAD_REQUEST",{message:c.UNEXPECTED_ERROR});const b=await t.context.password.hash(t.body.newPassword);return await t.context.internalAdapter.updatePassword(h.id,b),t.json({status:!0})}))},schema:(0,s.m)(b,a?.schema),rateLimit:[{pathMatcher:t=>t.startsWith("/phone-number"),window:6e4,max:10}],$ERROR_CODES:c}};const b={user:{fields:{phoneNumber:{type:"string",required:!1,unique:!0,sortable:!0,returned:!0},phoneNumberVerified:{type:"boolean",required:!1,returned:!0,input:!1}}}}}),7369,[3739,6980,6977,7096,7091,6981,910,7093,7097,6982,6987,908,6988,7073,7074,6983,7075,7078,7080,7082,7090,6985,7086,911,7092,7094,6986,7095,6984,7098,909,6996,7099]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.anonymous=void 0;var n=r(d[0]),t=r(d[1]);r(d[2]);var s=r(d[3]),o=r(d[4]);r(d[5]),r(d[6]),r(d[7]);var c=r(d[8]);r(d[9]),r(d[10]),r(d[11]),r(d[12]),r(d[13]),r(d[14]),r(d[15]),r(d[16]),r(d[17]),r(d[18]),r(d[19]),r(d[20]),r(d[21]),r(d[22]),r(d[23]),r(d[24]),r(d[25]),r(d[26]),r(d[27]),r(d[28]),r(d[29]),r(d[30]),r(d[31]),r(d[32]);const u={user:{fields:{isAnonymous:{type:"boolean",required:!1}}}};e.anonymous=l=>{const A={FAILED_TO_CREATE_USER:"Failed to create user",COULD_NOT_CREATE_SESSION:"Could not create session",ANONYMOUS_USERS_CANNOT_SIGN_IN_AGAIN_ANONYMOUSLY:"Anonymous users cannot sign in again anonymously"};return{id:"anonymous",endpoints:{signInAnonymous:(0,t.a)("/sign-in/anonymous",{method:"POST",metadata:{openapi:{description:"Sign in anonymously",responses:{200:{description:"Sign in anonymously",content:{"application/json":{schema:{type:"object",properties:{user:{$ref:"#/components/schemas/User"},session:{$ref:"#/components/schemas/Session"}}}}}}}}}},(async n=>{const{emailDomainName:t=(0,c.g)(n.context.baseURL)}=l||{},o=`temp-${n.context.generateId({model:"user"})}@${t}`,u=await n.context.internalAdapter.createUser({email:o,emailVerified:!1,isAnonymous:!0,name:"Anonymous",createdAt:new Date,updatedAt:new Date},n);if(!u)throw n.error("INTERNAL_SERVER_ERROR",{message:A.FAILED_TO_CREATE_USER});const p=await n.context.internalAdapter.createSession(u.id,n.headers);return p?(await(0,s.setSessionCookie)(n,{session:p,user:u}),n.json({token:p.token,user:{id:u.id,email:u.email,emailVerified:u.emailVerified,name:u.name,createdAt:u.createdAt,updatedAt:u.updatedAt}})):n.json(null,{status:400,body:{message:A.COULD_NOT_CREATE_SESSION}})}))},hooks:{after:[{matcher:n=>n.path.startsWith("/sign-in")||n.path.startsWith("/sign-up")||n.path.startsWith("/callback")||n.path.startsWith("/oauth2/callback")||n.path.startsWith("/magic-link/verify")||n.path.startsWith("/email-otp/verify-email"),handler:(0,t.c)((async o=>{const c=o.context.responseHeaders?.get("set-cookie"),u=o.context.authCookies.sessionToken.name,p=(0,s.parseSetCookieHeader)(c||"").get(u)?.value.split(".")[0];if(!p)return;const _=await(0,t.g)(o,{disableRefresh:!0});if(!_||!_.user.isAnonymous)return;if("/sign-in/anonymous"===o.path)throw new n.APIError("BAD_REQUEST",{message:A.ANONYMOUS_USERS_CANNOT_SIGN_IN_AGAIN_ANONYMOUSLY});const S=o.context.newSession;S&&(l?.onLinkAccount&&await(l?.onLinkAccount?.({anonymousUser:_,newUser:S})),l?.disableDeleteAnonymousUser||await o.context.internalAdapter.deleteUser(_.user.id))}))}]},schema:(0,o.m)(u,l?.schema),$ERROR_CODES:A}}}),7370,[6977,6980,3739,6981,7096,910,7093,7097,909,6987,908,6988,7073,6982,7074,6983,7075,7078,7080,7082,7090,6985,7086,7091,7092,911,7094,6986,7095,6984,7098,6996,7099]);
__d((function(g,r,i,a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.a=void 0;var e=r(d[0]),s=r(d[1]),o=r(d[2]),t=r(d[3]),n=r(d[4]);r(d[5]),r(d[6]),r(d[7]);var c=r(d[8]),p=r(d[9]),u=r(d[10]);const l={FAILED_TO_CREATE_USER:"Failed to create user",USER_ALREADY_EXISTS:"User already exists",YOU_CANNOT_BAN_YOURSELF:"You cannot ban yourself",YOU_ARE_NOT_ALLOWED_TO_CHANGE_USERS_ROLE:"You are not allowed to change users role",YOU_ARE_NOT_ALLOWED_TO_CREATE_USERS:"You are not allowed to create users",YOU_ARE_NOT_ALLOWED_TO_LIST_USERS:"You are not allowed to list users",YOU_ARE_NOT_ALLOWED_TO_LIST_USERS_SESSIONS:"You are not allowed to list users sessions",YOU_ARE_NOT_ALLOWED_TO_BAN_USERS:"You are not allowed to ban users",YOU_ARE_NOT_ALLOWED_TO_IMPERSONATE_USERS:"You are not allowed to impersonate users",YOU_ARE_NOT_ALLOWED_TO_REVOKE_USERS_SESSIONS:"You are not allowed to revoke users sessions",YOU_ARE_NOT_ALLOWED_TO_DELETE_USERS:"You are not allowed to delete users",YOU_ARE_NOT_ALLOWED_TO_SET_USERS_PASSWORD:"You are not allowed to set users password",BANNED_USER:"You have been banned from this application"};function E(e){return Array.isArray(e)?e.join(","):e}_e.a=h=>{const y={defaultRole:h?.defaultRole??"user",adminRoles:h?.adminRoles??["admin"],bannedUserMessage:h?.bannedUserMessage??"You have been banned from this application. Please contact support if you believe this is an error.",...h},b=(0,o.c)((async e=>{const t=await(0,o.g)(e);if(!t)throw new s.APIError("UNAUTHORIZED");return{session:t}}));return{id:"admin",init:e=>({options:{databaseHooks:{user:{create:{before:async e=>({data:{role:h?.defaultRole??"user",...e}})}},session:{create:{async before(o){const t=await e.internalAdapter.findUserById(o.userId);if(t.banned){if(t.banExpires&&t.banExpires.getTime()<Date.now())return void await e.internalAdapter.updateUser(o.userId,{banned:!1,banReason:null,banExpires:null});throw new s.APIError("FORBIDDEN",{message:y.bannedUserMessage,code:"BANNED_USER"})}}}}}}}),hooks:{after:[{matcher:e=>"/list-sessions"===e.path,handler:(0,o.c)((async e=>{const s=await(0,p.g)(e);if(!s)return;const o=s.filter((e=>!e.impersonatedBy));return e.json(o)}))}]},endpoints:{setRole:(0,o.a)("/admin/set-role",{method:"POST",body:e.z.object({userId:e.z.coerce.string({description:"The user id"}),role:e.z.union([e.z.string({description:"The role to set. `admin` or `user` by default"}),e.z.array(e.z.string({description:"The roles to set. `admin` or `user` by default"}))])}),use:[b],metadata:{openapi:{operationId:"setRole",summary:"Set the role of a user",description:"Set the role of a user",responses:{200:{description:"User role updated",content:{"application/json":{schema:{type:"object",properties:{user:{$ref:"#/components/schemas/User"}}}}}}}},$Infer:{body:{}}}},(async e=>{if(!(0,u.h)({userId:e.context.session.user.id,role:e.context.session.user.role,options:y,permissions:{user:["set-role"]}}))throw new s.APIError("FORBIDDEN",{message:l.YOU_ARE_NOT_ALLOWED_TO_CHANGE_USERS_ROLE});const o=await e.context.internalAdapter.updateUser(e.body.userId,{role:E(e.body.role)},e);return e.json({user:o})})),createUser:(0,o.a)("/admin/create-user",{method:"POST",body:e.z.object({email:e.z.string({description:"The email of the user"}),password:e.z.string({description:"The password of the user"}),name:e.z.string({description:"The name of the user"}),role:e.z.union([e.z.string({description:"The role of the user"}),e.z.array(e.z.string({description:"The roles of user"}))]).optional(),data:e.z.optional(e.z.record(e.z.any(),{description:"Extra fields for the user. Including custom additional fields."}))}),metadata:{openapi:{operationId:"createUser",summary:"Create a new user",description:"Create a new user",responses:{200:{description:"User created",content:{"application/json":{schema:{type:"object",properties:{user:{$ref:"#/components/schemas/User"}}}}}}}},$Infer:{body:{}}}},(async e=>{const t=await(0,o.g)(e);if(!t&&(e.request||e.headers))throw e.error("UNAUTHORIZED");if(t){if(!(0,u.h)({userId:t.user.id,role:t.user.role,options:y,permissions:{user:["create"]}}))throw new s.APIError("FORBIDDEN",{message:l.YOU_ARE_NOT_ALLOWED_TO_CREATE_USERS})}if(await e.context.internalAdapter.findUserByEmail(e.body.email))throw new s.APIError("BAD_REQUEST",{message:l.USER_ALREADY_EXISTS});const n=await e.context.internalAdapter.createUser({email:e.body.email,name:e.body.name,role:(e.body.role&&E(e.body.role))??h?.defaultRole??"user",...e.body.data});if(!n)throw new s.APIError("INTERNAL_SERVER_ERROR",{message:l.FAILED_TO_CREATE_USER});const c=await e.context.password.hash(e.body.password);return await e.context.internalAdapter.linkAccount({accountId:n.id,providerId:"credential",password:c,userId:n.id},e),e.json({user:n})})),listUsers:(0,o.a)("/admin/list-users",{method:"GET",use:[b],query:e.z.object({searchValue:e.z.string({description:"The value to search for"}).optional(),searchField:e.z.enum(["email","name"],{description:"The field to search in, defaults to email. Can be `email` or `name`"}).optional(),searchOperator:e.z.enum(["contains","starts_with","ends_with"],{description:"The operator to use for the search. Can be `contains`, `starts_with` or `ends_with`"}).optional(),limit:e.z.string({description:"The number of users to return"}).or(e.z.number()).optional(),offset:e.z.string({description:"The offset to start from"}).or(e.z.number()).optional(),sortBy:e.z.string({description:"The field to sort by"}).optional(),sortDirection:e.z.enum(["asc","desc"],{description:"The direction to sort by"}).optional(),filterField:e.z.string({description:"The field to filter by"}).optional(),filterValue:e.z.string({description:"The value to filter by"}).or(e.z.number()).or(e.z.boolean()).optional(),filterOperator:e.z.enum(["eq","ne","lt","lte","gt","gte"],{description:"The operator to use for the filter"}).optional()}),metadata:{openapi:{operationId:"listUsers",summary:"List users",description:"List users",responses:{200:{description:"List of users",content:{"application/json":{schema:{type:"object",properties:{users:{type:"array",items:{$ref:"#/components/schemas/User"}},total:{type:"number"},limit:{type:"number"},offset:{type:"number"}},required:["users","total"]}}}}}}}},(async e=>{const o=e.context.session;if(!(0,u.h)({userId:e.context.session.user.id,role:o.user.role,options:y,permissions:{user:["list"]}}))throw new s.APIError("FORBIDDEN",{message:l.YOU_ARE_NOT_ALLOWED_TO_LIST_USERS});const t=[];e.query?.searchValue&&t.push({field:e.query.searchField||"email",operator:e.query.searchOperator||"contains",value:e.query.searchValue}),e.query?.filterValue&&t.push({field:e.query.filterField||"email",operator:e.query.filterOperator||"eq",value:e.query.filterValue});try{const s=await e.context.internalAdapter.listUsers(Number(e.query?.limit)||void 0,Number(e.query?.offset)||void 0,e.query?.sortBy?{field:e.query.sortBy,direction:e.query.sortDirection||"asc"}:void 0,t.length?t:void 0),o=await e.context.internalAdapter.countTotalUsers(t.length?t:void 0);return e.json({users:s,total:o,limit:Number(e.query?.limit)||void 0,offset:Number(e.query?.offset)||void 0})}catch(s){return e.json({users:[],total:0})}})),listUserSessions:(0,o.a)("/admin/list-user-sessions",{method:"POST",use:[b],body:e.z.object({userId:e.z.coerce.string({description:"The user id"})}),metadata:{openapi:{operationId:"listUserSessions",summary:"List user sessions",description:"List user sessions",responses:{200:{description:"List of user sessions",content:{"application/json":{schema:{type:"object",properties:{sessions:{type:"array",items:{$ref:"#/components/schemas/Session"}}}}}}}}}}},(async e=>{const o=e.context.session;if(!(0,u.h)({userId:e.context.session.user.id,role:o.user.role,options:y,permissions:{session:["list"]}}))throw new s.APIError("FORBIDDEN",{message:l.YOU_ARE_NOT_ALLOWED_TO_LIST_USERS_SESSIONS});return{sessions:await e.context.internalAdapter.listSessions(e.body.userId)}})),unbanUser:(0,o.a)("/admin/unban-user",{method:"POST",body:e.z.object({userId:e.z.coerce.string({description:"The user id"})}),use:[b],metadata:{openapi:{operationId:"unbanUser",summary:"Unban a user",description:"Unban a user",responses:{200:{description:"User unbanned",content:{"application/json":{schema:{type:"object",properties:{user:{$ref:"#/components/schemas/User"}}}}}}}}}},(async e=>{const o=e.context.session;if(!(0,u.h)({userId:e.context.session.user.id,role:o.user.role,options:y,permissions:{user:["ban"]}}))throw new s.APIError("FORBIDDEN",{message:l.YOU_ARE_NOT_ALLOWED_TO_BAN_USERS});const t=await e.context.internalAdapter.updateUser(e.body.userId,{banned:!1,banExpires:null,banReason:null});return e.json({user:t})})),banUser:(0,o.a)("/admin/ban-user",{method:"POST",body:e.z.object({userId:e.z.coerce.string({description:"The user id"}),banReason:e.z.string({description:"The reason for the ban"}).optional(),banExpiresIn:e.z.number({description:"The number of seconds until the ban expires"}).optional()}),use:[b],metadata:{openapi:{operationId:"banUser",summary:"Ban a user",description:"Ban a user",responses:{200:{description:"User banned",content:{"application/json":{schema:{type:"object",properties:{user:{$ref:"#/components/schemas/User"}}}}}}}}}},(async e=>{const o=e.context.session;if(!(0,u.h)({userId:e.context.session.user.id,role:o.user.role,options:y,permissions:{user:["ban"]}}))throw new s.APIError("FORBIDDEN",{message:l.YOU_ARE_NOT_ALLOWED_TO_BAN_USERS});if(e.body.userId===e.context.session.user.id)throw new s.APIError("BAD_REQUEST",{message:l.YOU_CANNOT_BAN_YOURSELF});const t=await e.context.internalAdapter.updateUser(e.body.userId,{banned:!0,banReason:e.body.banReason||h?.defaultBanReason||"No reason",banExpires:e.body.banExpiresIn?(0,c.g)(e.body.banExpiresIn,"sec"):h?.defaultBanExpiresIn?(0,c.g)(h.defaultBanExpiresIn,"sec"):void 0},e);return await e.context.internalAdapter.deleteSessions(e.body.userId),e.json({user:t})})),impersonateUser:(0,o.a)("/admin/impersonate-user",{method:"POST",body:e.z.object({userId:e.z.coerce.string({description:"The user id"})}),use:[b],metadata:{openapi:{operationId:"impersonateUser",summary:"Impersonate a user",description:"Impersonate a user",responses:{200:{description:"Impersonation session created",content:{"application/json":{schema:{type:"object",properties:{session:{$ref:"#/components/schemas/Session"},user:{$ref:"#/components/schemas/User"}}}}}}}}}},(async e=>{if(!(0,u.h)({userId:e.context.session.user.id,role:e.context.session.user.role,options:y,permissions:{user:["impersonate"]}}))throw new s.APIError("FORBIDDEN",{message:l.YOU_ARE_NOT_ALLOWED_TO_IMPERSONATE_USERS});const o=await e.context.internalAdapter.findUserById(e.body.userId);if(!o)throw new s.APIError("NOT_FOUND",{message:"User not found"});const n=await e.context.internalAdapter.createSession(o.id,void 0,!0,{impersonatedBy:e.context.session.user.id,expiresAt:h?.impersonationSessionDuration?(0,c.g)(h.impersonationSessionDuration,"sec"):(0,c.g)(3600,"sec")},e,!0);if(!n)throw new s.APIError("INTERNAL_SERVER_ERROR",{message:l.FAILED_TO_CREATE_USER});const p=e.context.authCookies;(0,t.deleteSessionCookie)(e);const E=await e.getSignedCookie(e.context.authCookies.dontRememberToken.name,e.context.secret);return await e.setSignedCookie("admin_session",`${e.context.session.session.token}:${E||""}`,e.context.secret,p.sessionToken.options),await(0,t.setSessionCookie)(e,{session:n,user:o},!0),e.json({session:n,user:o})})),stopImpersonating:(0,o.a)("/admin/stop-impersonating",{method:"POST"},(async e=>{const n=await(0,o.g)(e);if(!n)throw new s.APIError("UNAUTHORIZED");if(!n.session.impersonatedBy)throw new s.APIError("BAD_REQUEST",{message:"You are not impersonating anyone"});const c=await e.context.internalAdapter.findUserById(n.session.impersonatedBy);if(!c)throw new s.APIError("INTERNAL_SERVER_ERROR",{message:"Failed to find user"});const p=await e.getSignedCookie("admin_session",e.context.secret);if(!p)throw new s.APIError("INTERNAL_SERVER_ERROR",{message:"Failed to find admin session"});const[u,l]=p?.split(":"),E=await e.context.internalAdapter.findSession(u);if(!E||E.session.userId!==c.id)throw new s.APIError("INTERNAL_SERVER_ERROR",{message:"Failed to find admin session"});return await e.context.internalAdapter.deleteSession(n.session.token),await(0,t.setSessionCookie)(e,E,!!l),e.json(E)})),revokeUserSession:(0,o.a)("/admin/revoke-user-session",{method:"POST",body:e.z.object({sessionToken:e.z.string({description:"The session token"})}),use:[b],metadata:{openapi:{operationId:"revokeUserSession",summary:"Revoke a user session",description:"Revoke a user session",responses:{200:{description:"Session revoked",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},(async e=>{const o=e.context.session;if(!(0,u.h)({userId:e.context.session.user.id,role:o.user.role,options:y,permissions:{session:["revoke"]}}))throw new s.APIError("FORBIDDEN",{message:l.YOU_ARE_NOT_ALLOWED_TO_REVOKE_USERS_SESSIONS});return await e.context.internalAdapter.deleteSession(e.body.sessionToken),e.json({success:!0})})),revokeUserSessions:(0,o.a)("/admin/revoke-user-sessions",{method:"POST",body:e.z.object({userId:e.z.coerce.string({description:"The user id"})}),use:[b],metadata:{openapi:{operationId:"revokeUserSessions",summary:"Revoke all user sessions",description:"Revoke all user sessions",responses:{200:{description:"Sessions revoked",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},(async e=>{const o=e.context.session;if(!(0,u.h)({userId:e.context.session.user.id,role:o.user.role,options:y,permissions:{session:["revoke"]}}))throw new s.APIError("FORBIDDEN",{message:l.YOU_ARE_NOT_ALLOWED_TO_REVOKE_USERS_SESSIONS});return await e.context.internalAdapter.deleteSessions(e.body.userId),e.json({success:!0})})),removeUser:(0,o.a)("/admin/remove-user",{method:"POST",body:e.z.object({userId:e.z.coerce.string({description:"The user id"})}),use:[b],metadata:{openapi:{operationId:"removeUser",summary:"Remove a user",description:"Delete a user and all their sessions and accounts. Cannot be undone.",responses:{200:{description:"User removed",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},(async e=>{const o=e.context.session;if(!(0,u.h)({userId:e.context.session.user.id,role:o.user.role,options:y,permissions:{user:["delete"]}}))throw new s.APIError("FORBIDDEN",{message:l.YOU_ARE_NOT_ALLOWED_TO_DELETE_USERS});return await e.context.internalAdapter.deleteUser(e.body.userId),e.json({success:!0})})),setUserPassword:(0,o.a)("/admin/set-user-password",{method:"POST",body:e.z.object({newPassword:e.z.string({description:"The new password"}),userId:e.z.coerce.string({description:"The user id"})}),use:[b],metadata:{openapi:{operationId:"setUserPassword",summary:"Set a user's password",description:"Set a user's password",responses:{200:{description:"Password set",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},(async e=>{if(!(0,u.h)({userId:e.context.session.user.id,role:e.context.session.user.role,options:y,permissions:{user:["set-password"]}}))throw new s.APIError("FORBIDDEN",{message:l.YOU_ARE_NOT_ALLOWED_TO_SET_USERS_PASSWORD});const o=await e.context.password.hash(e.body.newPassword);return await e.context.internalAdapter.updatePassword(e.body.userId,o),e.json({status:!0})})),userHasPermission:(0,o.a)("/admin/has-permission",{method:"POST",body:e.z.object({userId:e.z.coerce.string().optional(),role:e.z.string().optional()}).and(e.z.union([e.z.object({permission:e.z.record(e.z.string(),e.z.array(e.z.string())),permissions:e.z.undefined()}),e.z.object({permission:e.z.undefined(),permissions:e.z.record(e.z.string(),e.z.array(e.z.string()))})])),metadata:{openapi:{description:"Check if the user has permission",requestBody:{content:{"application/json":{schema:{type:"object",properties:{permission:{type:"object",description:"The permission to check",deprecated:!0},permissions:{type:"object",description:"The permission to check"}},required:["permissions"]}}}},responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{error:{type:"string"},success:{type:"boolean"}},required:["success"]}}}}}},$Infer:{body:{}}}},(async e=>{if(!e.body?.permission&&!e.body?.permissions)throw new s.APIError("BAD_REQUEST",{message:"invalid permission check. no permission(s) were passed."});const t=await(0,o.g)(e);if(!t&&(e.request||e.headers)&&!e.body.userId&&!e.body.role)throw new s.APIError("UNAUTHORIZED");const n=t?.user||await e.context.internalAdapter.findUserById(e.body.userId)||(e.body.role?{id:"",role:e.body.role}:null);if(!n)throw new s.APIError("BAD_REQUEST",{message:"user not found"});const c=(0,u.h)({userId:n.id,role:n.role,options:h,permissions:e.body.permissions??e.body.permission});return e.json({error:null,success:c})}))},$ERROR_CODES:l,schema:(0,n.m)(_,y.schema)}};const _={user:{fields:{role:{type:"string",required:!1,input:!1},banned:{type:"boolean",defaultValue:!1,required:!1,input:!1},banReason:{type:"string",required:!1,input:!1},banExpires:{type:"date",required:!1,input:!1}}},session:{fields:{impersonatedBy:{type:"string",required:!1}}}}}),7371,[3739,6977,6980,6981,7096,910,7093,7097,6982,7372,948]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.g=void 0;var n=r(d[0]);e.g=async t=>{const o=t.context.returned;return o?o instanceof Response?200!==o.status?null:await o.clone().json():o instanceof n.APIError?null:o:null}}),7372,[6977]);
__d((function(g,r,i,_a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.genericOAuth=void 0;var e=r(d[0]),t=r(d[1]),o=r(d[2]),n=r(d[3]),a=r(d[4]);r(d[5]),r(d[6]),r(d[7]),r(d[8]);var s=r(d[9]);r(d[10]),r(d[11]);var c=r(d[12]),p=r(d[13]);async function l(t,o){if(t.idToken){const e=(0,p.decodeJwt)(t.idToken);if(e&&e.sub&&e.email)return{id:e.sub,emailVerified:e.email_verified,image:e.picture,...e}}if(!o)return null;const n=await(0,e.betterFetch)(o,{method:"GET",headers:{Authorization:`Bearer ${t.accessToken}`}});return{id:n.data?.sub,emailVerified:n.data?.email_verified,email:n.data?.email,image:n.data?.picture,name:n.data?.name,...n.data}}r(d[14]),r(d[15]),r(d[16]),r(d[17]),r(d[18]),r(d[19]),r(d[20]),r(d[21]),r(d[22]),r(d[23]),r(d[24]),r(d[25]),r(d[26]),r(d[27]),r(d[28]),r(d[29]),r(d[30]),r(d[31]),r(d[32]);_e.genericOAuth=p=>{const u={INVALID_OAUTH_CONFIGURATION:"Invalid OAuth configuration"};return{id:"generic-oauth",init:o=>({context:{socialProviders:p.config.map((n=>{let a=n.userInfoUrl;return{id:n.providerId,name:n.providerId,createAuthorizationURL:e=>(0,s.c)({id:n.providerId,options:{clientId:n.clientId,clientSecret:n.clientSecret,redirectURI:n.redirectURI},authorizationEndpoint:n.authorizationUrl,state:e.state,codeVerifier:n.pkce?e.codeVerifier:void 0,scopes:n.scopes||[],redirectURI:`${o.baseURL}/oauth2/callback/${n.providerId}`}),async validateAuthorizationCode(o){let c=n.tokenUrl;if(n.discoveryUrl){const t=await(0,e.betterFetch)(n.discoveryUrl,{method:"GET",headers:n.discoveryHeaders});t.data&&(c=t.data.token_endpoint,a=t.data.userinfo_endpoint)}if(!c)throw new t.APIError("BAD_REQUEST",{message:"Invalid OAuth configuration. Token URL not found."});return(0,s.v)({code:o.code,codeVerifier:o.codeVerifier,redirectURI:o.redirectURI,options:{clientId:n.clientId,clientSecret:n.clientSecret,redirectURI:n.redirectURI},tokenEndpoint:c})},async refreshAccessToken(o){let a=n.tokenUrl;if(n.discoveryUrl){const t=await(0,e.betterFetch)(n.discoveryUrl,{method:"GET",headers:n.discoveryHeaders});t.data&&(a=t.data.token_endpoint)}if(!a)throw new t.APIError("BAD_REQUEST",{message:"Invalid OAuth configuration. Token URL not found."});return(0,s.r)({refreshToken:o,options:{clientId:n.clientId,clientSecret:n.clientSecret},authentication:n.authentication,tokenEndpoint:a})},async getUserInfo(e){if(!a)return null;const t=n.getUserInfo?await n.getUserInfo(e):await l(e,a);return t?{user:{id:t?.id,email:t?.email,emailVerified:t?.emailVerified,image:t?.image,name:t?.name,...n.mapProfileToUser?.(t)},data:t}:null}}})).concat(o.socialProviders)}}),endpoints:{signInWithOAuth2:(0,n.a)("/sign-in/oauth2",{method:"POST",body:o.z.object({providerId:o.z.string({description:"The provider ID for the OAuth provider"}),callbackURL:o.z.string({description:"The URL to redirect to after sign in"}).optional(),errorCallbackURL:o.z.string({description:"The URL to redirect to if an error occurs"}).optional(),newUserCallbackURL:o.z.string({description:"The URL to redirect to after login if the user is new"}).optional(),disableRedirect:o.z.boolean({description:"Disable redirect"}).optional(),scopes:o.z.array(o.z.string(),{message:"Scopes to be passed to the provider authorization request."}).optional(),requestSignUp:o.z.boolean({description:"Explicitly request sign-up. Useful when disableImplicitSignUp is true for this provider"}).optional()}),metadata:{openapi:{description:"Sign in with OAuth2",responses:{200:{description:"Sign in with OAuth2",content:{"application/json":{schema:{type:"object",properties:{url:{type:"string"},redirect:{type:"boolean"}}}}}}}}}},(async o=>{const{providerId:n}=o.body,a=p.config.find((e=>e.providerId===n));if(!a)throw new t.APIError("BAD_REQUEST",{message:`No config found for provider ${n}`});const{discoveryUrl:l,authorizationUrl:h,tokenUrl:f,clientId:I,clientSecret:U,scopes:A,redirectURI:T,responseType:v,pkce:R,prompt:E,accessType:b,authorizationUrlParams:_,responseMode:k,authentication:w}=a;let y=h,O=f;if(l){const t=await(0,e.betterFetch)(l,{method:"GET",headers:a.discoveryHeaders,onError(e){o.context.logger.error(e.error.message,e.error,{discoveryUrl:l})}});t.data&&(y=t.data.authorization_endpoint,O=t.data.token_endpoint)}if(!y||!O)throw new t.APIError("BAD_REQUEST",{message:u.INVALID_OAUTH_CONFIGURATION});if(_){const e=new URL(y);for(const[t,o]of Object.entries(_))e.searchParams.set(t,o);y=e.toString()}const{state:S,codeVerifier:L}=await(0,c.g)(o),z=await(0,s.c)({id:n,options:{clientId:I,redirectURI:T},authorizationEndpoint:y,state:S,codeVerifier:R?L:void 0,scopes:o.body.scopes?[...o.body.scopes,...A||[]]:A||[],redirectURI:`${o.context.baseURL}/oauth2/callback/${n}`,prompt:E,accessType:b,responseType:v,responseMode:k,additionalParams:_});return o.json({url:z.toString(),redirect:!o.body.disableRedirect})})),oAuth2Callback:(0,n.a)("/oauth2/callback/:providerId",{method:"GET",query:o.z.object({code:o.z.string({description:"The OAuth2 code"}).optional(),error:o.z.string({description:"The error message, if any"}).optional(),error_description:o.z.string({description:"The error description, if any"}).optional(),state:o.z.string({description:"The state parameter from the OAuth2 request"}).optional()}),metadata:{openapi:{description:"OAuth2 callback",responses:{200:{description:"OAuth2 callback",content:{"application/json":{schema:{type:"object",properties:{url:{type:"string"}}}}}}}}}},(async o=>{const u=o.context.options.onAPIError?.errorURL||`${o.context.baseURL}/error`;if(o.query.error||!o.query.code)throw o.redirect(`${u}?error=${o.query.error||"oAuth_code_missing"}&error_description=${o.query.error_description}`);const h=p.config.find((e=>e.providerId===o.params.providerId));if(!h)throw new t.APIError("BAD_REQUEST",{message:`No config found for provider ${o.params.providerId}`});let f;const I=await(0,c.p)(o),{callbackURL:U,codeVerifier:A,errorURL:T,requestSignUp:v,newUserURL:R,link:E}=I,b=o.query.code;function _(e){const t=o.context.options.onAPIError?.errorURL||`${o.context.baseURL}/error`;throw o.redirect(`${T||t}?error=${e}`)}let k=h.tokenUrl,w=h.userInfoUrl;if(h.discoveryUrl){const t=await(0,e.betterFetch)(h.discoveryUrl,{method:"GET",headers:h.discoveryHeaders});t.data&&(k=t.data.token_endpoint,w=t.data.userinfo_endpoint)}try{if(!k)throw new t.APIError("BAD_REQUEST",{message:"Invalid OAuth configuration."});f=await(0,s.v)({code:b,codeVerifier:h.pkce?A:void 0,redirectURI:`${o.context.baseURL}/oauth2/callback/${h.providerId}`,options:{clientId:h.clientId,clientSecret:h.clientSecret,redirectURI:h.redirectURI},tokenEndpoint:k,authentication:h.authentication})}catch(e){throw o.context.logger.error(e&&"object"==typeof e&&"name"in e?e.name:"",e),_("oauth_code_verification_failed")}if(!f)throw new t.APIError("BAD_REQUEST",{message:"Invalid OAuth configuration."});const y=h.getUserInfo?await h.getUserInfo(f):await l(f,w);if(!y)throw _("user_info_is_missing");const O=h.mapProfileToUser?await h.mapProfileToUser(y):y;if(!O?.email)throw o.context.logger.error("Unable to get user info",y),_("email_is_missing");if(E){if(!0!==o.context.options.account?.accountLinking?.allowDifferentEmails&&E.email!==O.email.toLowerCase())return _("email_doesn't_match");const e=await o.context.internalAdapter.findAccount(y.id);if(e){if(e.userId!==E.userId)return _("account_already_linked_to_different_user");const t=Object.fromEntries(Object.entries({accessToken:f.accessToken,idToken:f.idToken,refreshToken:f.refreshToken,accessTokenExpiresAt:f.accessTokenExpiresAt,refreshTokenExpiresAt:f.refreshTokenExpiresAt,scope:f.scopes?.join(",")}).filter((([e,t])=>void 0!==t)));await o.context.internalAdapter.updateAccount(e.id,t)}else{if(!await o.context.internalAdapter.createAccount({userId:E.userId,providerId:h.providerId,accountId:y.id,accessToken:f.accessToken,accessTokenExpiresAt:f.accessTokenExpiresAt,refreshTokenExpiresAt:f.refreshTokenExpiresAt,scope:f.scopes?.join(",")}))return _("unable_to_link_account")}let t;try{t=U.toString()}catch{t=U}throw o.redirect(t)}const S=await(0,n.h)(o,{userInfo:{...y,...O},account:{providerId:h.providerId,accountId:y.id,...f,scope:f.scopes?.join(",")},disableSignUp:h.disableImplicitSignUp&&!v||h.disableSignUp,overrideUserInfo:h.overrideUserInfo});if(S.error)return _(S.error.split(" ").join("_"));const{session:L,user:z}=S.data;let x;await(0,a.setSessionCookie)(o,{session:L,user:z});try{x=(S.isRegister&&R||U).toString()}catch{x=S.isRegister&&R||U}throw o.redirect(x)})),oAuth2LinkAccount:(0,n.a)("/oauth2/link",{method:"POST",body:o.z.object({providerId:o.z.string(),callbackURL:o.z.string()}),use:[n.s],metadata:{openapi:{description:"Link an OAuth2 account to the current user session",responses:{200:{description:"Authorization URL generated successfully for linking an OAuth2 account",content:{"application/json":{schema:{type:"object",properties:{url:{type:"string",format:"uri",description:"The authorization URL to redirect the user to for linking the OAuth2 account"},redirect:{type:"boolean",description:"Indicates that the client should redirect to the provided URL",enum:[!0]}},required:["url","redirect"]}}}}}}}},(async o=>{const a=o.context.session;if((await o.context.internalAdapter.findAccounts(a.user.id)).find((e=>e.providerId===o.body.providerId)))throw new t.APIError("BAD_REQUEST",{message:n.B.SOCIAL_ACCOUNT_ALREADY_LINKED});const l=p.config.find((e=>e.providerId===o.body.providerId));if(!l)throw new t.APIError("NOT_FOUND",{message:n.B.PROVIDER_NOT_FOUND});const{providerId:h,clientId:f,clientSecret:I,redirectURI:U,authorizationUrl:A,discoveryUrl:T,pkce:v,scopes:R,prompt:E,accessType:b,authorizationUrlParams:_}=l;let k=A;if(!k){if(!T)throw new t.APIError("BAD_REQUEST",{message:u.INVALID_OAUTH_CONFIGURATION});const n=await(0,e.betterFetch)(T,{method:"GET",headers:l.discoveryHeaders,onError(e){o.context.logger.error(e.error.message,e.error,{discoveryUrl:T})}});n.data&&(k=n.data.authorization_endpoint)}if(!k)throw new t.APIError("BAD_REQUEST",{message:u.INVALID_OAUTH_CONFIGURATION});const w=await(0,c.g)(o,{userId:a.user.id,email:a.user.email}),y=await(0,s.c)({id:h,options:{clientId:f,redirectURI:U||`${o.context.baseURL}/oauth2/callback/${h}`},authorizationEndpoint:k,state:w.state,codeVerifier:v?w.codeVerifier:void 0,scopes:R||[],redirectURI:`${o.context.baseURL}/oauth2/callback/${h}`,prompt:E,accessType:b,additionalParams:_});return o.json({url:y.toString(),redirect:!0})}))},$ERROR_CODES:u}}}),7373,[908,6977,3739,6980,6981,7096,910,7093,7097,7073,7074,6983,7094,6988,6987,7075,7078,7080,7082,7090,6985,7086,7091,7092,911,6986,6982,7095,6984,7098,909,6996,7099]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getJwtToken=l,e.jwt=void 0;var t=r(d[0]),s=r(d[1]);r(d[2]);var n=r(d[3]);r(d[4]);var o=r(d[5]);r(d[6]),r(d[7]),r(d[8]);var c=r(d[9]);r(d[10]),r(d[11]);var y=r(d[12]);r(d[13]),r(d[14]),r(d[15]),r(d[16]),r(d[17]),r(d[18]),r(d[19]),r(d[20]),r(d[21]),r(d[22]),r(d[23]),r(d[24]),r(d[25]),r(d[26]),r(d[27]),r(d[28]),r(d[29]),r(d[30]),r(d[31]),r(d[32]),r(d[33]),r(d[34]),r(d[35]);const p=t=>({getAllKeys:async()=>await t.findMany({model:"jwks"}),getLatestKey:async()=>(await t.findMany({model:"jwks",sortBy:{field:"createdAt",direction:"desc"},limit:1}))[0],createJwk:async s=>await t.create({model:"jwks",data:{...s,createdAt:new Date}})});async function l(t,n){const c=p(t.context.adapter);let l=await c.getLatestKey();const u=!n?.jwks?.disablePrivateKeyEncryption;if(void 0===l){const{publicKey:o,privateKey:p}=await(0,s.generateKeyPair)(n?.jwks?.keyPairConfig?.alg??"EdDSA",n?.jwks?.keyPairConfig??{crv:"Ed25519",extractable:!0}),w=await(0,s.exportJWK)(o),k=await(0,s.exportJWK)(p),f=JSON.stringify(k);let j={publicKey:JSON.stringify(w),privateKey:u?JSON.stringify(await(0,y.symmetricEncrypt)({key:t.context.secret,data:f})):f,createdAt:new Date};l=await c.createJwk(j)}let w=u?await(0,y.symmetricDecrypt)({key:t.context.secret,data:JSON.parse(l.privateKey)}).catch((()=>{throw new o.B("Failed to decrypt private private key. Make sure the secret currently in use is the same as the one used to encrypt the private key. If you are using a different secret, either cleanup your jwks or disable private key encryption.")})):l.privateKey;const k=await(0,s.importJWK)(JSON.parse(w),n?.jwks?.keyPairConfig?.alg??"EdDSA"),f=n?.jwt?.definePayload?await(n?.jwt.definePayload(t.context.session)):t.context.session.user;return await new s.SignJWT(f).setProtectedHeader({alg:n?.jwks?.keyPairConfig?.alg??"EdDSA",kid:l.id}).setIssuedAt().setIssuer(n?.jwt?.issuer??t.context.options.baseURL).setAudience(n?.jwt?.audience??t.context.options.baseURL).setExpirationTime(n?.jwt?.expirationTime??"15m").setSubject(await(n?.jwt?.getSubject?.(t.context.session))??t.context.session.user.id).sign(k)}e.jwt=o=>({id:"jwt",endpoints:{getJwks:(0,n.a)("/jwks",{method:"GET",metadata:{openapi:{description:"Get the JSON Web Key Set",responses:{200:{description:"JSON Web Key Set retrieved successfully",content:{"application/json":{schema:{type:"object",properties:{keys:{type:"array",description:"Array of public JSON Web Keys",items:{type:"object",properties:{kid:{type:"string",description:"Key ID uniquely identifying the key, corresponds to the 'id' from the stored Jwk"},kty:{type:"string",description:"Key type (e.g., 'RSA', 'EC', 'OKP')"},alg:{type:"string",description:"Algorithm intended for use with the key (e.g., 'EdDSA', 'RS256')"},use:{type:"string",description:"Intended use of the public key (e.g., 'sig' for signature)",enum:["sig"],nullable:!0},n:{type:"string",description:"Modulus for RSA keys (base64url-encoded)",nullable:!0},e:{type:"string",description:"Exponent for RSA keys (base64url-encoded)",nullable:!0},crv:{type:"string",description:"Curve name for elliptic curve keys (e.g., 'Ed25519', 'P-256')",nullable:!0},x:{type:"string",description:"X coordinate for elliptic curve keys (base64url-encoded)",nullable:!0},y:{type:"string",description:"Y coordinate for elliptic curve keys (base64url-encoded)",nullable:!0}},required:["kid","kty","alg"]}}},required:["keys"]}}}}}}}},(async t=>{const n=p(t.context.adapter),c=await n.getAllKeys();if(0===c.length){const c=o?.jwks?.keyPairConfig?.alg??"EdDSA",{publicKey:p,privateKey:l}=await(0,s.generateKeyPair)(c,o?.jwks?.keyPairConfig??{crv:"Ed25519",extractable:!0}),u=await(0,s.exportJWK)(p),w=await(0,s.exportJWK)(l),k=JSON.stringify(w),f=!o?.jwks?.disablePrivateKeyEncryption;let j={publicKey:JSON.stringify({alg:c,...u}),privateKey:f?JSON.stringify(await(0,y.symmetricEncrypt)({key:t.context.secret,data:k})):k,createdAt:new Date};return await n.createJwk(j),t.json({keys:[{...u,alg:c,kid:j.id}]})}return t.json({keys:c.map((t=>({...JSON.parse(t.publicKey),kid:t.id})))})})),getToken:(0,n.a)("/token",{method:"GET",requireHeaders:!0,use:[n.s],metadata:{openapi:{description:"Get a JWT token",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string"}}}}}}}}}},(async t=>{const s=await l(t,o);return t.json({token:s})}))},hooks:{after:[{matcher:t=>"/get-session"===t.path,handler:(0,n.c)((async t=>{const s=t.context.session||t.context.newSession;if(s&&s.session){const s=await l(t,o);t.setHeader("set-auth-jwt",s),t.setHeader("Access-Control-Expose-Headers","set-auth-jwt")}}))}]},schema:(0,c.m)(t.s,o?.schema)})}),7374,[7375,6988,6977,6980,3739,911,910,6983,6984,7096,7093,7097,7363,6981,6982,6986,909,6987,908,7073,7074,7075,7078,7080,7082,7090,6985,7086,7091,7092,7094,7095,7098,6996,7099,7102]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.s=void 0;var t=r(d[0]);e.s={jwks:{fields:{publicKey:{type:"string",required:!0},privateKey:{type:"string",required:!0},createdAt:{type:"date",required:!0}}}};t.z.object({id:t.z.string(),publicKey:t.z.string(),privateKey:t.z.string(),createdAt:t.z.date()})}),7375,[3739]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.multiSession=void 0;var s=r(d[0]),t=r(d[1]),o=r(d[2]),n=r(d[3]);r(d[4]),r(d[5]),r(d[6]),r(d[7]),r(d[8]),r(d[9]),r(d[10]),r(d[11]),r(d[12]),r(d[13]),r(d[14]),r(d[15]),r(d[16]),r(d[17]),r(d[18]),r(d[19]),r(d[20]),r(d[21]),r(d[22]),r(d[23]),r(d[24]),r(d[25]),r(d[26]),r(d[27]),r(d[28]),r(d[29]),r(d[30]),r(d[31]),r(d[32]);e.multiSession=c=>{const l={maximumSessions:5,...c},u=s=>s.includes("_multi-"),k={INVALID_SESSION_TOKEN:"Invalid session token"};return{id:"multi-session",endpoints:{listDeviceSessions:(0,o.a)("/multi-session/list-device-sessions",{method:"GET",requireHeaders:!0},(async s=>{const t=s.headers?.get("cookie");if(!t)return s.json([]);const o=Object.fromEntries((0,n.parseCookies)(t)),c=(await Promise.all(Object.entries(o).filter((([s])=>u(s))).map((async([t])=>await s.getSignedCookie(t,s.context.secret))))).filter((s=>null!==s));if(!c.length)return s.json([]);const l=(await s.context.internalAdapter.findSessions(c)).filter((s=>s&&s.session.expiresAt>new Date)).reduce(((s,t)=>(s.find((s=>s.user.id===t.user.id))||s.push(t),s)),[]);return s.json(l)})),setActiveSession:(0,o.a)("/multi-session/set-active",{method:"POST",body:s.z.object({sessionToken:s.z.string({description:"The session token to set as active"})}),requireHeaders:!0,use:[o.s],metadata:{openapi:{description:"Set the active session",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{session:{$ref:"#/components/schemas/Session"}}}}}}}}}},(async s=>{const o=s.body.sessionToken,c=`${s.context.authCookies.sessionToken.name}_multi-${o.toLowerCase()}`;if(!await s.getSignedCookie(c,s.context.secret))throw new t.APIError("UNAUTHORIZED",{message:k.INVALID_SESSION_TOKEN});const l=await s.context.internalAdapter.findSession(o);if(!l||l.session.expiresAt<new Date)throw s.setCookie(c,"",{...s.context.authCookies.sessionToken.options,maxAge:0}),new t.APIError("UNAUTHORIZED",{message:k.INVALID_SESSION_TOKEN});return await(0,n.setSessionCookie)(s,l),s.json(l)})),revokeDeviceSession:(0,o.a)("/multi-session/revoke",{method:"POST",body:s.z.object({sessionToken:s.z.string({description:"The session token to revoke"})}),requireHeaders:!0,use:[o.s],metadata:{openapi:{description:"Revoke a device session",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean"}}}}}}}}}},(async s=>{const o=s.body.sessionToken,c=`${s.context.authCookies.sessionToken.name}_multi-${o.toLowerCase()}`;if(!await s.getSignedCookie(c,s.context.secret))throw new t.APIError("UNAUTHORIZED",{message:k.INVALID_SESSION_TOKEN});await s.context.internalAdapter.deleteSession(o),s.setCookie(c,"",{...s.context.authCookies.sessionToken.options,maxAge:0});if(!(s.context.session?.session.token===o))return s.json({status:!0});const l=s.headers?.get("cookie");if(l){const t=Object.fromEntries((0,n.parseCookies)(l)),o=(await Promise.all(Object.entries(t).filter((([s])=>u(s))).map((async([t])=>await s.getSignedCookie(t,s.context.secret))))).filter((s=>void 0!==s)),c=s.context.internalAdapter;if(o.length>0){const t=(await c.findSessions(o)).filter((s=>s&&s.session.expiresAt>new Date));if(t.length>0){const o=t[0];await(0,n.setSessionCookie)(s,o)}else(0,n.deleteSessionCookie)(s)}else(0,n.deleteSessionCookie)(s)}else(0,n.deleteSessionCookie)(s);return s.json({status:!0})}))},hooks:{after:[{matcher:()=>!0,handler:(0,o.c)((async s=>{const t=s.context.responseHeaders?.get("set-cookie");if(!t)return;const o=(0,n.parseSetCookieHeader)(t),c=s.context.authCookies.sessionToken,k=s.context.newSession?.session.token;if(!k)return;const p=(0,n.parseCookies)(s.headers?.get("cookie")||""),S=`${c.name}_multi-${k.toLowerCase()}`;if(o.get(S)||p.get(S))return;Object.keys(Object.fromEntries(p)).filter(u).length+(t.includes("session_token")?1:0)>=l.maximumSessions||await s.setSignedCookie(S,k,s.context.secret,c.options)}))},{matcher:s=>"/sign-out"===s.path,handler:(0,o.c)((async s=>{const t=s.headers?.get("cookie");if(!t)return;const o=Object.fromEntries((0,n.parseCookies)(t)),c=Object.keys(o).map((t=>{if(u(t)){s.setCookie(t.toLowerCase(),"",{...s.context.authCookies.sessionToken.options,maxAge:0});return o[t].split(".")[0]}return null})).filter((s=>null!==s));await s.context.internalAdapter.deleteSessions(c)}))}]},$ERROR_CODES:k}}}),7376,[3739,6977,6980,6981,7096,910,7093,7097,6987,908,6988,7073,6982,7074,6983,7075,7078,7080,7082,7090,6985,7086,7091,7092,911,7094,6986,7095,6984,7098,909,6996,7099]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.emailOTP=void 0;var t=r(d[0]),n=r(d[1]),s=r(d[2]),o=r(d[3]);r(d[4]),r(d[5]),r(d[6]),r(d[7]),r(d[8]),r(d[9]),r(d[10]),r(d[11]),r(d[12]),r(d[13]),r(d[14]),r(d[15]),r(d[16]),r(d[17]);var p=r(d[18]),c=r(d[19]),l=r(d[20]);r(d[21]),r(d[22]),r(d[23]),r(d[24]),r(d[25]),r(d[26]),r(d[27]),r(d[28]),r(d[29]),r(d[30]),r(d[31]),r(d[32]),r(d[33]);const u=["email-verification","sign-in","forget-password"];e.emailOTP=f=>{const A={expiresIn:300,generateOTP:()=>(0,p.g)(f.otpLength??6,"0-9"),...f},w={OTP_EXPIRED:"otp expired",INVALID_OTP:"Invalid OTP",INVALID_EMAIL:"Invalid email",USER_NOT_FOUND:"User not found",TOO_MANY_ATTEMPTS:"Too many attempts"};return{id:"email-otp",endpoints:{sendVerificationOTP:(0,s.a)("/email-otp/send-verification-otp",{method:"POST",body:t.z.object({email:t.z.string({description:"Email address to send the OTP"}),type:t.z.enum(u,{description:"Type of the OTP"})}),metadata:{openapi:{description:"Send verification OTP",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},(async t=>{if(!f?.sendVerificationOTP)throw t.context.logger.error("send email verification is not implemented"),new n.APIError("BAD_REQUEST",{message:"send email verification is not implemented"});const s=t.body.email;if(!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(s))throw t.error("BAD_REQUEST",{message:w.INVALID_EMAIL});if("forget-password"===t.body.type||A.disableSignUp){if(!await t.context.internalAdapter.findUserByEmail(s))return t.json({success:!0})}const o=A.generateOTP({email:s,type:t.body.type},t.request);return await t.context.internalAdapter.createVerificationValue({value:`${o}:0`,identifier:`${t.body.type}-otp-${s}`,expiresAt:(0,c.g)(A.expiresIn,"sec")}).catch((async n=>{await t.context.internalAdapter.deleteVerificationByIdentifier(`${t.body.type}-otp-${s}`),await t.context.internalAdapter.createVerificationValue({value:`${o}:0`,identifier:`${t.body.type}-otp-${s}`,expiresAt:(0,c.g)(A.expiresIn,"sec")})})),await f.sendVerificationOTP({email:s,otp:o,type:t.body.type},t.request),t.json({success:!0})})),createVerificationOTP:(0,s.a)("/email-otp/create-verification-otp",{method:"POST",body:t.z.object({email:t.z.string({description:"Email address to send the OTP"}),type:t.z.enum(u,{description:"Type of the OTP"})}),metadata:{SERVER_ONLY:!0,openapi:{description:"Create verification OTP",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"string"}}}}}}}},(async t=>{const n=t.body.email,s=A.generateOTP({email:n,type:t.body.type},t.request);return await t.context.internalAdapter.createVerificationValue({value:`${s}:0`,identifier:`${t.body.type}-otp-${n}`,expiresAt:(0,c.g)(A.expiresIn,"sec")}),s})),getVerificationOTP:(0,s.a)("/email-otp/get-verification-otp",{method:"GET",query:t.z.object({email:t.z.string({description:"Email address to get the OTP"}),type:t.z.enum(u)}),metadata:{SERVER_ONLY:!0,openapi:{description:"Get verification OTP",responses:{200:{description:"OTP retrieved successfully or not found/expired",content:{"application/json":{schema:{type:"object",properties:{otp:{type:"string",nullable:!0,description:"The stored OTP, or null if not found or expired"}},required:["otp"]}}}}}}}},(async t=>{const n=t.query.email,s=await t.context.internalAdapter.findVerificationValue(`${t.query.type}-otp-${n}`);return!s||s.expiresAt<new Date?t.json({otp:null}):t.json({otp:s.value})})),verifyEmailOTP:(0,s.a)("/email-otp/verify-email",{method:"POST",body:t.z.object({email:t.z.string({description:"Email address to verify"}),otp:t.z.string({description:"OTP to verify"})}),metadata:{openapi:{description:"Verify email OTP",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{status:{type:"boolean",description:"Indicates if the verification was successful",enum:[!0]},token:{type:"string",nullable:!0,description:"Session token if autoSignInAfterVerification is enabled, otherwise null"},user:{$ref:"#/components/schemas/User"},required:["status","token","user"]}}}}}}}}},(async t=>{const s=t.body.email;if(!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(s))throw new n.APIError("BAD_REQUEST",{message:w.INVALID_EMAIL});const p=await t.context.internalAdapter.findVerificationValue(`email-verification-otp-${s}`);if(!p)throw new n.APIError("BAD_REQUEST",{message:w.INVALID_OTP});if(p.expiresAt<new Date)throw new n.APIError("BAD_REQUEST",{message:w.OTP_EXPIRED});const[c,l]=p.value.split(":"),u=f?.allowedAttempts||3;if(l&&parseInt(l)>=u)throw await t.context.internalAdapter.deleteVerificationValue(p.id),new n.APIError("FORBIDDEN",{message:w.TOO_MANY_ATTEMPTS});if(t.body.otp!==c)throw await t.context.internalAdapter.updateVerificationValue(p.id,{value:`${c}:${parseInt(l||"0")+1}`}),new n.APIError("BAD_REQUEST",{message:w.INVALID_OTP});await t.context.internalAdapter.deleteVerificationValue(p.id);const A=await t.context.internalAdapter.findUserByEmail(s);if(!A)throw new n.APIError("BAD_REQUEST",{message:w.USER_NOT_FOUND});const T=await t.context.internalAdapter.updateUser(A.user.id,{email:s,emailVerified:!0},t);if(t.context.options.emailVerification?.autoSignInAfterVerification){const n=await t.context.internalAdapter.createSession(T.id,t.headers);return await(0,o.setSessionCookie)(t,{session:n,user:T}),t.json({status:!0,token:n.token,user:{id:T.id,email:T.email,emailVerified:T.emailVerified,name:T.name,image:T.image,createdAt:T.createdAt,updatedAt:T.updatedAt}})}return t.json({status:!0,token:null,user:{id:T.id,email:T.email,emailVerified:T.emailVerified,name:T.name,image:T.image,createdAt:T.createdAt,updatedAt:T.updatedAt}})})),signInEmailOTP:(0,s.a)("/sign-in/email-otp",{method:"POST",body:t.z.object({email:t.z.string({description:"Email address to sign in"}),otp:t.z.string({description:"OTP sent to the email"})}),metadata:{openapi:{description:"Sign in with email OTP",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{token:{type:"string",description:"Session token for the authenticated session"},user:{$ref:"#/components/schemas/User"}},required:["token","user"]}}}}}}}},(async t=>{const s=t.body.email,p=await t.context.internalAdapter.findVerificationValue(`sign-in-otp-${s}`);if(!p)throw new n.APIError("BAD_REQUEST",{message:w.INVALID_OTP});if(p.expiresAt<new Date)throw new n.APIError("BAD_REQUEST",{message:w.OTP_EXPIRED});const[c,l]=p.value.split(":"),u=f?.allowedAttempts||3;if(l&&parseInt(l)>=u)throw await t.context.internalAdapter.deleteVerificationValue(p.id),new n.APIError("FORBIDDEN",{message:w.TOO_MANY_ATTEMPTS});if(t.body.otp!==c)throw await t.context.internalAdapter.updateVerificationValue(p.id,{value:`${c}:${parseInt(l||"0")+1}`}),new n.APIError("BAD_REQUEST",{message:w.INVALID_OTP});await t.context.internalAdapter.deleteVerificationValue(p.id);const T=await t.context.internalAdapter.findUserByEmail(s);if(!T){if(A.disableSignUp)throw new n.APIError("BAD_REQUEST",{message:w.USER_NOT_FOUND});const p=await t.context.internalAdapter.createUser({email:s,emailVerified:!0,name:""},t),c=await t.context.internalAdapter.createSession(p.id,t.headers);return await(0,o.setSessionCookie)(t,{session:c,user:p}),t.json({token:c.token,user:{id:p.id,email:p.email,emailVerified:p.emailVerified,name:p.name,image:p.image,createdAt:p.createdAt,updatedAt:p.updatedAt}})}T.user.emailVerified||await t.context.internalAdapter.updateUser(T.user.id,{emailVerified:!0},t);const E=await t.context.internalAdapter.createSession(T.user.id,t.headers);return await(0,o.setSessionCookie)(t,{session:E,user:T.user}),t.json({token:E.token,user:{id:T.user.id,email:T.user.email,emailVerified:T.user.emailVerified,name:T.user.name,image:T.user.image,createdAt:T.user.createdAt,updatedAt:T.user.updatedAt}})})),forgetPasswordEmailOTP:(0,s.a)("/forget-password/email-otp",{method:"POST",body:t.z.object({email:t.z.string({description:"Email address to send the OTP"})}),metadata:{openapi:{description:"Forget password with email OTP",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean",description:"Indicates if the OTP was sent successfully"}}}}}}}}}},(async t=>{const s=t.body.email;if(!await t.context.internalAdapter.findUserByEmail(s))throw new n.APIError("BAD_REQUEST",{message:w.USER_NOT_FOUND});const o=A.generateOTP({email:s,type:"forget-password"},t.request);return await t.context.internalAdapter.createVerificationValue({value:`${o}:0`,identifier:`forget-password-otp-${s}`,expiresAt:(0,c.g)(A.expiresIn,"sec")}),await f.sendVerificationOTP({email:s,otp:o,type:"forget-password"},t.request),t.json({success:!0})})),resetPasswordEmailOTP:(0,s.a)("/email-otp/reset-password",{method:"POST",body:t.z.object({email:t.z.string({description:"Email address to reset the password"}),otp:t.z.string({description:"OTP sent to the email"}),password:t.z.string({description:"New password"})}),metadata:{openapi:{description:"Reset password with email OTP",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"object",properties:{success:{type:"boolean"}}}}}}}}}},(async t=>{const s=t.body.email,o=await t.context.internalAdapter.findUserByEmail(s,{includeAccounts:!0});if(!o)throw new n.APIError("BAD_REQUEST",{message:w.USER_NOT_FOUND});const p=await t.context.internalAdapter.findVerificationValue(`forget-password-otp-${s}`);if(!p)throw new n.APIError("BAD_REQUEST",{message:w.INVALID_OTP});if(p.expiresAt<new Date)throw await t.context.internalAdapter.deleteVerificationValue(p.id),new n.APIError("BAD_REQUEST",{message:w.OTP_EXPIRED});const[c,l]=p.value.split(":"),u=f?.allowedAttempts||3;if(l&&parseInt(l)>=u)throw await t.context.internalAdapter.deleteVerificationValue(p.id),new n.APIError("FORBIDDEN",{message:w.TOO_MANY_ATTEMPTS});if(t.body.otp!==c)throw await t.context.internalAdapter.updateVerificationValue(p.id,{value:`${c}:${parseInt(l||"0")+1}`}),new n.APIError("BAD_REQUEST",{message:w.INVALID_OTP});await t.context.internalAdapter.deleteVerificationValue(p.id);const A=await t.context.password.hash(t.body.password);return o.accounts.find((t=>"credential"===t.providerId))?await t.context.internalAdapter.updatePassword(o.user.id,A,t):await t.context.internalAdapter.createAccount({userId:o.user.id,providerId:"credential",accountId:o.user.id,password:A},t),t.json({success:!0})}))},hooks:{after:[{matcher:t=>!(!t.path?.startsWith("/sign-up")||!A.sendVerificationOnSignUp),handler:(0,s.c)((async t=>{const n=await(0,l.g)(t),s=n?.user.email;if(s){const n=A.generateOTP({email:s,type:t.body.type},t.request);await t.context.internalAdapter.createVerificationValue({value:`${n}:0`,identifier:`email-verification-otp-${s}`,expiresAt:(0,c.g)(A.expiresIn,"sec")}),await f.sendVerificationOTP({email:s,otp:n,type:"email-verification"},t.request)}}))}]},$ERROR_CODES:w,rateLimit:[{pathMatcher:t=>"/email-otp/send-verification-otp"===t,window:60,max:3},{pathMatcher:t=>"/email-otp/verify-email"===t,window:60,max:3},{pathMatcher:t=>"/sign-in/email-otp"===t,window:60,max:3}]}}}),7377,[3739,6977,6980,6981,7096,910,7093,7097,7074,7075,7078,7080,6983,6988,7082,7090,6985,7086,7091,6982,7372,6987,908,7073,911,7092,7094,6986,7095,6984,7098,909,6996,7099]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.oneTap=void 0;var t=r(d[0]),o=r(d[1]),n=r(d[2]),s=r(d[3]);r(d[4]),r(d[5]),r(d[6]),r(d[7]);var c=r(d[8]);r(d[9]),r(d[10]),r(d[11]),r(d[12]),r(d[13]),r(d[14]),r(d[15]),r(d[16]),r(d[17]),r(d[18]),r(d[19]),r(d[20]),r(d[21]),r(d[22]),r(d[23]),r(d[24]),r(d[25]),r(d[26]),r(d[27]),r(d[28]),r(d[29]),r(d[30]),r(d[31]),r(d[32]);e.oneTap=u=>({id:"one-tap",endpoints:{oneTapCallback:(0,n.a)("/one-tap/callback",{method:"POST",body:t.z.object({idToken:t.z.string({description:"Google ID token, which the client obtains from the One Tap API"})}),metadata:{openapi:{summary:"One tap callback",description:"Use this endpoint to authenticate with Google One Tap",responses:{200:{description:"Successful response",content:{"application/json":{schema:{type:"object",properties:{session:{$ref:"#/components/schemas/Session"},user:{$ref:"#/components/schemas/User"}}}}}},400:{description:"Invalid token"}}}}},(async t=>{const{idToken:n}=t.body;let l;try{const o=(0,c.createRemoteJWKSet)(new URL("https://www.googleapis.com/oauth2/v3/certs")),{payload:s}=await(0,c.jwtVerify)(n,o,{issuer:["https://accounts.google.com","accounts.google.com"],audience:u?.clientId||t.context.options.socialProviders?.google?.clientId});l=s}catch(t){throw new o.APIError("BAD_REQUEST",{message:"invalid id token"})}const{email:p,email_verified:A,name:f,picture:w,sub:h}=l;if(!p)return t.json({error:"Email not available in token"});const k=await t.context.internalAdapter.findUserByEmail(p);if(!k){if(u?.disableSignup)throw new o.APIError("BAD_GATEWAY",{message:"User not found"});const n=await t.context.internalAdapter.createOAuthUser({email:p,emailVerified:"boolean"==typeof A?A:(I=A,"true"===I||!0===I),name:f,image:w},{providerId:"google",accountId:h},t);if(!n)throw new o.APIError("INTERNAL_SERVER_ERROR",{message:"Could not create user"});const c=await t.context.internalAdapter.createSession(n.user.id,t.headers);return await(0,s.setSessionCookie)(t,{user:n.user,session:c}),t.json({token:c.token,user:{id:n.user.id,email:n.user.email,emailVerified:n.user.emailVerified,name:n.user.name,image:n.user.image,createdAt:n.user.createdAt,updatedAt:n.user.updatedAt}})}var I;if(!await t.context.internalAdapter.findAccount(h)){const s=t.context.options.account?.accountLinking;if(!(s?.enabled&&(s.trustedProviders?.includes("google")||A)))throw new o.APIError("UNAUTHORIZED",{message:"Google sub doesn't match"});await t.context.internalAdapter.linkAccount({userId:k.user.id,providerId:"google",accountId:h,scope:"openid,profile,email",idToken:n})}const b=await t.context.internalAdapter.createSession(k.user.id,t.headers);return await(0,s.setSessionCookie)(t,{user:k.user,session:b}),t.json({token:b.token,user:{id:k.user.id,email:k.user.email,emailVerified:k.user.emailVerified,name:k.user.name,image:k.user.image,createdAt:k.user.createdAt,updatedAt:k.user.updatedAt}})}))}})}),7378,[3739,6977,6980,6981,7096,910,7093,7097,6988,6987,908,7073,6982,7074,6983,7075,7078,7080,7082,7090,6985,7086,7091,7092,911,7094,6986,7095,6984,7098,909,6996,7099]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.oAuthProxy=void 0;var t=r(d[0]);r(d[1]);var o=r(d[2]),c=r(d[3]);r(d[4]),r(d[5]);var n=r(d[6]);r(d[7]),r(d[8]),r(d[9]);var s=r(d[10]);function h(){const t=c.e.VERCEL_URL,o=c.e.NETLIFY_URL,n=c.e.RENDER_URL,s=c.e.AWS_LAMBDA_FUNCTION_NAME,h=c.e.GOOGLE_CLOUD_FUNCTION_NAME,l=c.e.AZURE_FUNCTION_NAME;return t||o||n||s||h||l}r(d[11]),r(d[12]),r(d[13]),r(d[14]),r(d[15]),r(d[16]),r(d[17]),r(d[18]),r(d[19]),r(d[20]),r(d[21]),r(d[22]),r(d[23]),r(d[24]),r(d[25]),r(d[26]),r(d[27]),r(d[28]),r(d[29]),r(d[30]),r(d[31]),r(d[32]),r(d[33]),r(d[34]);e.oAuthProxy=l=>({id:"oauth-proxy",endpoints:{oAuthProxy:(0,o.a)("/oauth-proxy-callback",{method:"GET",query:t.z.object({callbackURL:t.z.string({description:"The URL to redirect to after the proxy"}),cookies:t.z.string({description:"The cookies to set after the proxy"})}),use:[(0,o.o)((t=>t.query.callbackURL))],metadata:{openapi:{description:"OAuth Proxy Callback",parameters:[{in:"query",name:"callbackURL",required:!0,description:"The URL to redirect to after the proxy"},{in:"query",name:"cookies",required:!0,description:"The cookies to set after the proxy"}],responses:{302:{description:"Redirect",headers:{Location:{description:"The URL to redirect to",schema:{type:"string"}}}}}}}},(async t=>{const o=t.query.cookies,c=await(0,s.symmetricDecrypt)({key:t.context.secret,data:o});throw t.setHeader("set-cookie",c),t.redirect(t.query.callbackURL)}))},hooks:{after:[{matcher:t=>t.path?.startsWith("/callback")||t.path?.startsWith("/oauth2/callback"),handler:(0,o.c)((async t=>{const o=t.context.responseHeaders,c=o?.get("location");if(c?.includes("/oauth-proxy-callback?callbackURL")){if(!c.startsWith("http"))return;const h=new URL(c);if(h.origin===(0,n.g)(t.context.baseURL)){const o=h.searchParams.get("callbackURL");if(!o)return;return void t.setHeader("location",o)}const l=o?.get("set-cookie");if(!l)return;const p=await(0,s.symmetricEncrypt)({key:t.context.secret,data:l}),u=`${c}&cookies=${encodeURIComponent(p)}`;t.setHeader("location",u)}}))}],before:[{matcher:t=>t.path?.startsWith("/sign-in/social")||t.path?.startsWith("/sign-in/oauth2"),handler:(0,o.c)((async t=>{const o=new URL(l?.currentURL||t.request?.url||h()||t.context.baseURL);if((l?.productionURL||c.e.BETTER_AUTH_URL)!==t.context.options.baseURL)return t.body.callbackURL=`${o.origin}${t.context.options.basePath||"/api/auth"}/oauth-proxy-callback?callbackURL=${encodeURIComponent(t.body.callbackURL||t.context.baseURL)}`,{context:t}}))}]}})}),7379,[3739,6977,6980,910,6983,6984,909,7096,7093,7097,7363,6981,911,6982,6986,6987,908,6988,7073,7074,7075,7078,7080,7082,7090,6985,7086,7091,7092,7094,7095,7098,6996,7099,7102]);
__d((function(g,r,i,a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.customSession=void 0;var e=r(d[0]);r(d[1]);var s=r(d[2]);r(d[3]),r(d[4]),r(d[5]),r(d[6]),r(d[7]),r(d[8]),r(d[9]),r(d[10]),r(d[11]),r(d[12]),r(d[13]),r(d[14]),r(d[15]),r(d[16]),r(d[17]),r(d[18]),r(d[19]),r(d[20]),r(d[21]),r(d[22]),r(d[23]),r(d[24]),r(d[25]),r(d[26]),r(d[27]),r(d[28]),r(d[29]),r(d[30]),r(d[31]),r(d[32]);_e.customSession=(o,n)=>({id:"custom-session",endpoints:{getSession:(0,s.a)("/get-session",{method:"GET",query:e.z.optional(e.z.object({disableCookieCache:e.z.boolean({description:"Disable cookie cache and fetch session from database"}).or(e.z.string().transform((e=>"true"===e))).optional(),disableRefresh:e.z.boolean({description:"Disable session refresh. Useful for checking session status, without updating the session"}).optional()})),metadata:{CUSTOM_SESSION:!0,openapi:{description:"Get custom session data",responses:{200:{description:"Success",content:{"application/json":{schema:{type:"array",nullable:!0,items:{$ref:"#/components/schemas/Session"}}}}}}}},requireHeaders:!0},(async e=>{const n=await(0,s.b)()({...e,asResponse:!1,headers:e.headers,returnHeaders:!0}).catch((e=>null));if(!n?.response)return e.json(null);const t=await o(n.response);return n.headers.forEach(((s,o)=>{e.setHeader(o,s)})),e.json(t)}))}})}),7380,[3739,6977,6980,910,6983,6984,7096,7093,7097,6981,911,6982,6986,909,6987,908,6988,7073,7074,7075,7078,7080,7082,7090,6985,7086,7091,7092,7094,7095,7098,6996,7099]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.openAPI=void 0;var o=r(d[0]),K=r(d[1]);r(d[2]),r(d[3]),r(d[4]);var A=r(d[5]);r(d[6]),r(d[7]),r(d[8]),r(d[9]),r(d[10]),r(d[11]),r(d[12]),r(d[13]),r(d[14]),r(d[15]),r(d[16]),r(d[17]);var C=r(d[18]);r(d[19]);var t=r(d[20]);r(d[21]),r(d[22]),r(d[23]),r(d[24]),r(d[25]),r(d[26]),r(d[27]),r(d[28]),r(d[29]),r(d[30]),r(d[31]),r(d[32]),r(d[33]),r(d[34]),r(d[35]),r(d[36]);const n={};function f(o){switch(o.constructor.name){case"ZodString":default:return"string";case"ZodNumber":return"number";case"ZodBoolean":return"boolean";case"ZodObject":return"object";case"ZodArray":return"array"}}function s(K){const A=[];return K.metadata?.openapi?.parameters?(A.push(...K.metadata.openapi.parameters),A):(K.query instanceof o.ZodObject&&Object.entries(K.query.shape).forEach((([K,C])=>{C instanceof o.ZodSchema&&A.push({name:K,in:"query",schema:{type:f(C),..."minLength"in C&&C.minLength?{minLength:C.minLength}:{},description:C.description}})})),A)}function p(K){if(K.metadata?.openapi?.requestBody)return K.metadata.openapi.requestBody;if(K.body&&(K.body instanceof o.ZodObject||K.body instanceof o.ZodOptional)){const A=K.body.shape;if(!A)return;const C={},t=[];return Object.entries(A).forEach((([K,A])=>{A instanceof o.ZodSchema&&(C[K]={type:f(A),description:A.description},A instanceof o.ZodOptional||t.push(K))})),{required:!(K.body instanceof o.ZodOptional)&&!!K.body,content:{"application/json":{schema:{type:"object",properties:C,required:t}}}}}}function c(o){return{400:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Bad Request. Usually due to missing parameters, or invalid parameters."},401:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}},required:["message"]}}},description:"Unauthorized. Due to missing or invalid authentication."},403:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Forbidden. You do not have permission to access this resource or to perform this action."},404:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Not Found. The requested resource was not found."},429:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Too Many Requests. You have exceeded the rate limit. Try again later."},500:{content:{"application/json":{schema:{type:"object",properties:{message:{type:"string"}}}}},description:"Internal Server Error. This is a problem with the server that you cannot fix."},...o}}function v(o){return o.split("/").map((o=>o.startsWith(":")?`{${o.slice(1)}}`:o)).join("/")}async function P(o,A){const t=(0,K.getEndpoints)(o,{...A,plugins:[]}),f=(0,C.g)(A),P={schemas:{...Object.entries(f).reduce(((o,[K,A])=>(o[K.charAt(0).toUpperCase()+K.slice(1)]={type:"object",properties:Object.entries(A.fields).reduce(((o,[K,A])=>(o[K]={type:A.type},o)),{id:{type:"string"}})},o)),{})}};Object.entries(t.api).forEach((([K,A])=>{if(o.options.disabledPaths?.includes(A.path))return;const C=A.options;if(C.metadata?.SERVER_ONLY)return;const t=v(A.path);if("GET"===C.method&&(n[t]={get:{tags:["Default",...C.metadata?.openapi?.tags||[]],description:C.metadata?.openapi?.description,operationId:C.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:s(C),responses:c(C.metadata?.openapi?.responses)}}),"POST"===C.method){const o=p(C);n[t]={post:{tags:["Default",...C.metadata?.openapi?.tags||[]],description:C.metadata?.openapi?.description,operationId:C.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:s(C),...o?{requestBody:o}:{requestBody:{content:{"application/json":{schema:{type:"object",properties:{}}}}}},responses:c(C.metadata?.openapi?.responses)}}}}));for(const C of A.plugins||[]){if("open-api"===C.id)continue;const f=(0,K.getEndpoints)(o,{...A,plugins:[C]}),P=Object.keys(f.api).map((o=>void 0===t.api[o]?f.api[o]:null)).filter((o=>null!==o));Object.entries(P).forEach((([K,A])=>{if(o.options.disabledPaths?.includes(A.path))return;const t=A.options;if(t.metadata?.SERVER_ONLY)return;const f=v(A.path);"GET"===t.method&&(n[f]={get:{tags:t.metadata?.openapi?.tags||[C.id.charAt(0).toUpperCase()+C.id.slice(1)],description:t.metadata?.openapi?.description,operationId:t.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:s(t),responses:c(t.metadata?.openapi?.responses)}}),"POST"===t.method&&(n[f]={post:{tags:t.metadata?.openapi?.tags||[C.id.charAt(0).toUpperCase()+C.id.slice(1)],description:t.metadata?.openapi?.description,operationId:t.metadata?.openapi?.operationId,security:[{bearerAuth:[]}],parameters:s(t),requestBody:p(t),responses:c(t.metadata?.openapi?.responses)}})}))}return{openapi:"3.1.1",info:{title:"Better Auth",description:"API Reference for your Better Auth Instance",version:"1.1.0"},components:{...P,securitySchemes:{apiKeyCookie:{type:"apiKey",in:"cookie",name:"apiKeyCookie",description:"API Key authentication via cookie"},bearerAuth:{type:"http",scheme:"bearer",description:"Bearer token authentication"}}},security:[{apiKeyCookie:[],bearerAuth:[]}],servers:[{url:o.baseURL}],tags:[{name:"Default",description:"Default endpoints that are included with Better Auth by default. These endpoints are not part of any plugin."}],paths:n}}e.openAPI=o=>{const K=o?.path??"/reference";return{id:"open-api",endpoints:{generateOpenAPISchema:(0,t.a)("/open-api/generate-schema",{method:"GET"},(async o=>{const K=await P(o.context,o.context.options);return o.json(K)})),openAPIReference:(0,t.a)(K,{method:"GET",metadata:{isAction:!1}},(async K=>{if(o?.disableDefaultReference)throw new A.APIError("NOT_FOUND");const C=await P(K.context,K.context.options);return new Response((t=C,`<!doctype html>\n<html>\n  <head>\n    <title>Scalar API Reference</title>\n    <meta charset="utf-8" />\n    <meta\n      name="viewport"\n      content="width=device-width, initial-scale=1" />\n  </head>\n  <body>\n    <script\n      id="api-reference"\n      type="application/json">\n    ${JSON.stringify(t)}\n    <\/script>\n\t <script>\n      var configuration = {\n\t  \tfavicon: "data:image/svg+xml;utf8,${encodeURIComponent("<svg width=\"75\" height=\"75\" viewBox=\"0 0 75 75\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\">\n<rect width=\"75\" height=\"75\" fill=\"url(#pattern0_21_12)\"/>\n<defs>\n<pattern id=\"pattern0_21_12\" patternContentUnits=\"objectBoundingBox\" width=\"1\" height=\"1\">\n<use xlink:href=\"#image0_21_12\" transform=\"scale(0.00094697)\"/>\n</pattern>\n<image id=\"image0_21_12\" width=\"1056\" height=\"1056\" xlink:href=\"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAASABIAAD/4QBARXhpZgAATU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAEIKADAAQAAAABAAAEIAAAAAD/7QA4UGhvdG9zaG9wIDMuMAA4QklNBAQAAAAAAAA4QklNBCUAAAAAABDUHYzZjwCyBOmACZjs+EJ+/+ICKElDQ19QUk9GSUxFAAEBAAACGGFwcGwEAAAAbW50clJHQiBYWVogB+YAAQABAAAAAAAAYWNzcEFQUEwAAAAAQVBQTAAAAAAAAAAAAAAAAAAAAAAAAPbWAAEAAAAA0y1hcHBs7P2jjjiFR8NttL1PetoYLwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAKZGVzYwAAAPwAAAAwY3BydAAAASwAAABQd3RwdAAAAXwAAAAUclhZWgAAAZAAAAAUZ1hZWgAAAaQAAAAUYlhZWgAAAbgAAAAUclRSQwAAAcwAAAAgY2hhZAAAAewAAAAsYlRSQwAAAcwAAAAgZ1RSQwAAAcwAAAAgbWx1YwAAAAAAAAABAAAADGVuVVMAAAAUAAAAHABEAGkAcwBwAGwAYQB5ACAAUAAzbWx1YwAAAAAAAAABAAAADGVuVVMAAAA0AAAAHABDAG8AcAB5AHIAaQBnAGgAdAAgAEEAcABwAGwAZQAgAEkAbgBjAC4ALAAgADIAMAAyADJYWVogAAAAAAAA9tUAAQAAAADTLFhZWiAAAAAAAACD3wAAPb////+7WFlaIAAAAAAAAEq/AACxNwAACrlYWVogAAAAAAAAKDgAABELAADIuXBhcmEAAAAAAAMAAAACZmYAAPKnAAANWQAAE9AAAApbc2YzMgAAAAAAAQxCAAAF3v//8yYAAAeTAAD9kP//+6L///2jAAAD3AAAwG7/wAARCAQgBCADASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9sAQwACAgICAgIDAgIDBAMDAwQFBAQEBAUHBQUFBQUHCAcHBwcHBwgICAgICAgICgoKCgoKCwsLCwsNDQ0NDQ0NDQ0N/9sAQwECAgIDAwMGAwMGDQkHCQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0N/90ABABC/9oADAMBAAIRAxEAPwD9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//Q/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0f38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9L9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//T/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1P38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9X9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//W/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1/38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9D9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//R/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0v38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9P9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//U/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1f38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9b9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//X/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0P38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9H9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//S/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0/38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9T9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//V/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1v38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK/Ln/gq38a/in8Dvgp4T8R/CfxFdeG9SvvFMdlcXFoELyW5srqQxnzEcY3op4Gciv1Gr8Z/+C2X/JvXgj/sc4v/AE33lAH4z/8ADwv9tD/oq2tf9823/wAZo/4eF/tof9FW1r/vm2/+M18Z0UAfZn/Dwv8AbQ/6KtrX/fNt/wDGaP8Ah4X+2h/0VbWv++bb/wCM18Z0UAfZn/Dwv9tD/oq2tf8AfNt/8Zo/4eF/tof9FW1r/vm2/wDjNfGdFAH2Z/w8L/bQ/wCira1/3zbf/GaP+Hhf7aH/AEVbWv8Avm2/+M18Z0UAfZn/AA8L/bQ/6KtrX/fNt/8AGaP+Hhf7aH/RVta/75tv/jNfGdFAH2Z/w8L/AG0P+ira1/3zbf8Axmj/AIeF/tof9FW1r/vm2/8AjNfGdFAH63/sVftq/tTfEb9qb4deCfG3xF1TVtD1bVGgvbKdYBHPGIJW2ttiVsblB4I6V/UbX8Z//BPT/k9D4U/9hpv/AEmmr+zCgAooooAKKKKACiiigAooooAKKKKACiiigD+M/wD4eF/tof8ARVta/wC+bb/4zR/w8L/bQ/6KtrX/AHzbf/Ga+M6KAPsz/h4X+2h/0VbWv++bb/4zR/w8L/bQ/wCira1/3zbf/Ga+M6KAPsz/AIeF/tof9FW1r/vm2/8AjNH/AA8L/bQ/6KtrX/fNt/8AGa+M6KAPsz/h4X+2h/0VbWv++bb/AOM0f8PC/wBtD/oq2tf9823/AMZr4zooA+zP+Hhf7aH/AEVbWv8Avm2/+M0f8PC/20P+ira1/wB823/xmvjOigD7M/4eF/tof9FW1r/vm2/+M0f8PC/20P8Aoq2tf9823/xmvjOigD7M/wCHhf7aH/RVta/75tv/AIzR/wAPC/20P+ira1/3zbf/ABmvjOigD7M/4eF/tof9FW1r/vm2/wDjNH/Dwv8AbQ/6KtrX/fNt/wDGa+M6KAPsz/h4X+2h/wBFW1r/AL5tv/jNH/Dwv9tD/oq2tf8AfNt/8Zr4zooA+zP+Hhf7aH/RVta/75tv/jNH/Dwv9tD/AKKtrX/fNt/8Zr4zooA+zP8Ah4X+2h/0VbWv++bb/wCM0f8ADwv9tD/oq2tf9823/wAZr4zooA+zP+Hhf7aH/RVta/75tv8A4zR/w8L/AG0P+ira1/3zbf8AxmvjOigD7M/4eF/tof8ARVta/wC+bb/4zR/w8L/bQ/6KtrX/AHzbf/Ga+M6KAP6tv+CUnxr+Kfxx+CnizxH8WPEV14k1Kx8UyWVvcXYQPHbiytZBGPLRBje7HkZya/Uavxn/AOCJv/JvXjf/ALHOX/032dfsxQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAf//X/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAr8Z/+C2X/JvXgj/sc4v/AE33lfsxX4z/APBbL/k3rwR/2OcX/pvvKAP5m6KKKACiiigAooooAKKKKACiiigAooooA+zP+Cen/J6Hwp/7DTf+k01f2YV/Gf8A8E9P+T0PhT/2Gm/9Jpq/swoAKKKKACiiigAooooAKKKKACiiigAooooA/gDooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/pk/4Im/8m9eN/8Asc5f/TfZ1+zFfjP/AMETf+TevG//AGOcv/pvs6/ZigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9D9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvxn/4LZf8m9eCP+xzi/8ATfeV+zFfjP8A8Fsv+TevBH/Y5xf+m+8oA/mbooooAKKKKACiiigAooooAKKKKACiiigD7M/4J6f8nofCn/sNN/6TTV/ZhX8Z/wDwT0/5PQ+FP/Yab/0mmr+zCgAooooAKKKKACiiigAooooAKKKKACiiigD+AOiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD+mT/gib/yb143/wCxzl/9N9nX7MV+M/8AwRN/5N68b/8AY5y/+m+zr9mKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/0f38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK/Gf/gtl/yb14I/7HOL/wBN95X7MV+M/wDwWy/5N68Ef9jnF/6b7ygD+ZuiiigAooooAKKKKACiiigAooooAKKKKAPsz/gnp/yeh8Kf+w03/pNNX9mFfxn/APBPT/k9D4U/9hpv/Saav7MKACiiigAooooAKKKKACiiigAooooAKKKKAP4A6KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP6ZP+CJv/JvXjf/ALHOX/032dfsxX4z/wDBE3/k3rxv/wBjnL/6b7Ov2YoAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/S/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAr8Z/+C2X/JvXgj/sc4v/AE33lfsxX4z/APBbL/k3rwR/2OcX/pvvKAP5m6KKKACiiigAooooAKKKKACiiigAooooA+zP+Cen/J6Hwp/7DTf+k01f2YV/Gf8A8E9P+T0PhT/2Gm/9Jpq/swoAKKKKACiiigAooooAKKKKACiiigAooooA/gDooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/pk/4Im/8m9eN/8Asc5f/TfZ1+zFfjP/AMETf+TevG//AGOcv/pvs6/ZigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9P9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvxn/4LZf8m9eCP+xzi/8ATfeV+zFfjP8A8Fsv+TevBH/Y5xf+m+8oA/mbooooAKKKKACiiigAooooAKKKKACiiigD7M/4J6f8nofCn/sNN/6TTV/ZhX8Z/wDwT0/5PQ+FP/Yab/0mmr+zCgAooooAKKKKACiiigAooooAKKKKACiiigD+AOiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD+mT/gib/yb143/wCxzl/9N9nX7MV+M/8AwRN/5N68b/8AY5y/+m+zr9mKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/1P38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK/Gf/gtl/yb14I/7HOL/wBN95X7MV+M/wDwWy/5N68Ef9jnF/6b7ygD+ZuiiigAooooAKKKKACiiigAooooAKKKKAPsz/gnp/yeh8Kf+w03/pNNX9mFfwq/BT4r638Dvin4d+LHhy0tb7UvDd0bu3t70ObeRzG0eJBGyPjDnowOa/Ub/h9l+0L/ANCR4M/79ah/8m0Af0yUV/M3/wAPsv2hf+hI8Gf9+tQ/+TaP+H2X7Qv/AEJHgz/v1qH/AMm0Af0yUV/M3/w+y/aF/wChI8Gf9+tQ/wDk2j/h9l+0L/0JHgz/AL9ah/8AJtAH9MlFfzN/8Psv2hf+hI8Gf9+tQ/8Ak2j/AIfZftC/9CR4M/79ah/8m0Af0yUV/M3/AMPsv2hf+hI8Gf8AfrUP/k2j/h9l+0L/ANCR4M/79ah/8m0Af0yUV/M3/wAPsv2hf+hI8Gf9+tQ/+TaP+H2X7Qv/AEJHgz/v1qH/AMm0Af0yUV/M3/w+y/aF/wChI8Gf9+tQ/wDk2j/h9l+0L/0JHgz/AL9ah/8AJtAH4z0V/TJ/w5N/Z6/6Hfxn/wB/dP8A/kKj/hyb+z1/0O/jP/v7p/8A8hUAfzN0V/TJ/wAOTf2ev+h38Z/9/dP/APkKj/hyb+z1/wBDv4z/AO/un/8AyFQB/M3RX9Mn/Dk39nr/AKHfxn/390//AOQqP+HJv7PX/Q7+M/8Av7p//wAhUAfzN0V/TJ/w5N/Z6/6Hfxn/AN/dP/8AkKj/AIcm/s9f9Dv4z/7+6f8A/IVAH8zdFf0yf8OTf2ev+h38Z/8Af3T/AP5Co/4cm/s9f9Dv4z/7+6f/APIVAH8zdFf0yf8ADk39nr/od/Gf/f3T/wD5Co/4cm/s9f8AQ7+M/wDv7p//AMhUAfzN0V/TJ/w5N/Z6/wCh38Z/9/dP/wDkKvwV/ag+FGifA74++M/hP4cu7q+03w3fi0t7i9KG4kQxRyZkMaomcueigYoA8FooooAKKKKACiiigAooooAKKKKACiiigD+mT/gib/yb143/AOxzl/8ATfZ1+zFfjP8A8ETf+TevG/8A2Ocv/pvs6/ZigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//9X9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvxn/4LZf8m9eCP+xzi/8ATfeV+zFfjP8A8Fsv+TevBH/Y5xf+m+8oA/mbooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/v8ooooAKKKKACiiigAooooAKKKKACiiigAr+M//goX/wAnofFb/sNL/wCk0Nf2YV/Gf/wUL/5PQ+K3/YaX/wBJoaAPjOiiigAooooAKKKKACiiigAooooAKKKKAP6ZP+CJv/JvXjf/ALHOX/032dfsxX4z/wDBE3/k3rxv/wBjnL/6b7Ov2YoAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/W/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAr8Z/+C2X/JvXgj/sc4v/AE33lfsxX4z/APBbL/k3rwR/2OcX/pvvKAP5m6KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP7/KKKKACiiigAooooAKKKKACiiigAooooAK/jP/4KF/8AJ6HxW/7DS/8ApNDX9mFfxn/8FC/+T0Pit/2Gl/8ASaGgD4zooooAKKKKACiiigAooooAKKKKACiiigD+mT/gib/yb143/wCxzl/9N9nX7MV+M/8AwRN/5N68b/8AY5y/+m+zr9mKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/1/38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK/Gf/gtl/yb14I/7HOL/wBN95X7MV+M/wDwWy/5N68Ef9jnF/6b7ygD+ZuiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD+/yiiigAooooAKKKKACiiigAooooAKKKKACv4z/+Chf/ACeh8Vv+w0v/AKTQ1/ZhX8Z//BQv/k9D4rf9hpf/AEmhoA+M6KKKACiiigAooooAKKKKACiiigAooooA/pk/4Im/8m9eN/8Asc5f/TfZ1+zFfjP/AMETf+TevG//AGOcv/pvs6/ZigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9D9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvxn/4LZf8m9eCP+xzi/8ATfeV+zFfjP8A8Fsv+TevBH/Y5xf+m+8oA/mbooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/v8ooooAKKKKACiiigAooooAKKKKACiiigAr+M//goX/wAnofFb/sNL/wCk0Nf2YV/Gf/wUL/5PQ+K3/YaX/wBJoaAPjOiiigAooooAKKKKACiiigAooooAKKKKAP6ZP+CJv/JvXjf/ALHOX/032dfsxX4z/wDBE3/k3rxv/wBjnL/6b7Ov2YoAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/R/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAr8Z/+C2X/JvXgj/sc4v/AE33lfsxX4z/APBbL/k3rwR/2OcX/pvvKAP5m6KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP7/KKKKACiiigAooooAKKKKACiiigAooooAK/jP/4KF/8AJ6HxW/7DS/8ApNDX9mFfxn/8FC/+T0Pit/2Gl/8ASaGgD4zooooAKKKKACiiigAooooAKKKKACiiigD+mT/gib/yb143/wCxzl/9N9nX7MV+M/8AwRN/5N68b/8AY5y/+m+zr9mKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/0v38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK/Gf/gtl/yb14I/7HOL/wBN95X7MV+M/wDwWy/5N68Ef9jnF/6b7ygD+ZuiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD+/yiiigAooooAKKKKACiiigAooooAKKKKACv4z/+Chf/ACeh8Vv+w0v/AKTQ1/ZhX8Z//BQv/k9D4rf9hpf/AEmhoA+M6KKKACiiigAooooAKKKKACiiigAooooA/pk/4Im/8m9eN/8Asc5f/TfZ1+zFfjP/AMETf+TevG//AGOcv/pvs6/ZigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9P9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvxn/4LZf8m9eCP+xzi/8ATfeV+zFfjP8A8Fsv+TevBH/Y5xf+m+8oA/mbooooAKKKKACiiigAooooAKKKKACiiigD1L4KfCjW/jj8U/Dvwn8OXdrY6l4kujaW9xelxbxuI2kzIY1d8YQ9FJzX6jf8OTf2hf8Aod/Bn/f3UP8A5Cr4z/4J6f8AJ6Hwp/7DTf8ApNNX9mFAH8zf/Dk39oX/AKHfwZ/391D/AOQqP+HJv7Qv/Q7+DP8Av7qH/wAhV/TJRQB/M3/w5N/aF/6HfwZ/391D/wCQqP8Ahyb+0L/0O/gz/v7qH/yFX9MlFAH8zf8Aw5N/aF/6HfwZ/wB/dQ/+QqP+HJv7Qv8A0O/gz/v7qH/yFX9MlFAH8zf/AA5N/aF/6HfwZ/391D/5Co/4cm/tC/8AQ7+DP+/uof8AyFX9MlFAH8zf/Dk39oX/AKHfwZ/391D/AOQqP+HJv7Qv/Q7+DP8Av7qH/wAhV/TJRQB/M3/w5N/aF/6HfwZ/391D/wCQqP8Ahyb+0L/0O/gz/v7qH/yFX9MlFAH4z/8AD7L9nr/oSPGf/frT/wD5No/4fZfs9f8AQkeM/wDv1p//AMm1/M3RQB/TJ/w+y/Z6/wChI8Z/9+tP/wDk2j/h9l+z1/0JHjP/AL9af/8AJtfzN0UAf0yf8Psv2ev+hI8Z/wDfrT//AJNo/wCH2X7PX/QkeM/+/Wn/APybX8zdFAH9Mn/D7L9nr/oSPGf/AH60/wD+TaP+H2X7PX/QkeM/+/Wn/wDybX8zdFAH9Mn/AA+y/Z6/6Ejxn/360/8A+TaP+H2X7PX/AEJHjP8A79af/wDJtfzN0UAf0yf8Psv2ev8AoSPGf/frT/8A5No/4fZfs9f9CR4z/wC/Wn//ACbX8zdFAH9Mn/D7L9nr/oSPGf8A360//wCTa/BX9qD4r6J8cfj74z+LHhy0urHTfEl+Lu3t70ILiNBFHHiQRs6Zyh6MRivBaKACiiigAooooAKKKKACiiigAooooAKKKKAP6ZP+CJv/ACb143/7HOX/ANN9nX7MV+M//BE3/k3rxv8A9jnL/wCm+zr9mKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD//U/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAr8Z/+C2X/JvXgj/sc4v/AE33lfsxX4z/APBbL/k3rwR/2OcX/pvvKAP5m6KKKACiiigAooooAKKKKACiiigAooooA+zP+Cen/J6Hwp/7DTf+k01f2YV/Gf8A8E9P+T0PhT/2Gm/9Jpq/swoAKKKKACiiigAooooAKKKKACiiigAooooA/gDooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/pk/4Im/8m9eN/8Asc5f/TfZ1+zFfjP/AMETf+TevG//AGOcv/pvs6/ZigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9X9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvxn/4LZf8m9eCP+xzi/8ATfeV+zFfjP8A8Fsv+TevBH/Y5xf+m+8oA/mbooooAKKKKACiiigAooooAKKKKACiiigD7M/4J6f8nofCn/sNN/6TTV/ZhX8Z/wDwT0/5PQ+FP/Yab/0mmr+zCgAooooAKKKKACiiigAooooAKKKKACiiigD+AOiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD+mT/gib/yb143/wCxzl/9N9nX7MV+M/8AwRN/5N68b/8AY5y/+m+zr9mKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/1v38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK/Gf/gtl/yb14I/7HOL/wBN95X7MV+M/wDwWy/5N68Ef9jnF/6b7ygD+ZuiiigAooooAKKKKACiiigAooooAKKKKAPsz/gnp/yeh8Kf+w03/pNNX9mFfxn/APBPT/k9D4U/9hpv/Saav7MKACiiigAooooAKKKKACiiigAooooAKKKKAP4A6KKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP6ZP+CJv/JvXjf/ALHOX/032dfsxX4z/wDBE3/k3rxv/wBjnL/6b7Ov2YoAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/X/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAr8Z/+C2X/JvXgj/sc4v/AE33lfsxX4z/APBbL/k3rwR/2OcX/pvvKAP5m6KKKACiiigAooooAKKKKACiiigAooooA+zP+Cen/J6Hwp/7DTf+k01f2YV/Gf8A8E9P+T0PhT/2Gm/9Jpq/swoAKKKKACiiigAooooAKKKKACiiigAooooA/gDooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/pk/4Im/8m9eN/8Asc5f/TfZ1+zFfjP/AMETf+TevG//AGOcv/pvs6/ZigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA/9D9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACvxn/4LZf8m9eCP+xzi/8ATfeV+zFfjP8A8Fsv+TevBH/Y5xf+m+8oA/mbooooAKKKKACiiigAooooAKKKKACiiigD7M/4J6f8nofCn/sNN/6TTV/ZhX8Z/wDwT0/5PQ+FP/Yab/0mmr+zCgAooooAKKKKACiiigAooooAKKKKACiiigD+AOiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD+mT/gib/yb143/wCxzl/9N9nX7MV+M/8AwRN/5N68b/8AY5y/+m+zr9mKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/0f38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK/Gf/gtl/yb14I/7HOL/wBN95X7MV+XP/BVv4KfFP44/BTwn4c+E/h268SalY+KY724t7QoHjtxZXUZkPmOgxvdRwc5NAH8pNFfZn/DvT9tD/olOtf99W3/AMeo/wCHen7aH/RKda/76tv/AI9QB8Z0V9mf8O9P20P+iU61/wB9W3/x6j/h3p+2h/0SnWv++rb/AOPUAfGdFfZn/DvT9tD/AKJTrX/fVt/8eo/4d6ftof8ARKda/wC+rb/49QB8Z0V9mf8ADvT9tD/olOtf99W3/wAeo/4d6ftof9Ep1r/vq2/+PUAfGdFfZn/DvT9tD/olOtf99W3/AMeo/wCHen7aH/RKda/76tv/AI9QB8Z0V9mf8O9P20P+iU61/wB9W3/x6j/h3p+2h/0SnWv++rb/AOPUAH/BPT/k9D4U/wDYab/0mmr+zCv5cv2Kv2Kv2pvhz+1N8OvG3jb4dappOh6TqjT3t7O0BjgjMEq7m2ys2NzAcA9a/qNoAKKKKACiiigAooooAKKKKACiiigAooooA/gDor7M/wCHen7aH/RKda/76tv/AI9R/wAO9P20P+iU61/31bf/AB6gD4zor7M/4d6ftof9Ep1r/vq2/wDj1H/DvT9tD/olOtf99W3/AMeoA+M6K+zP+Hen7aH/AESnWv8Avq2/+PUf8O9P20P+iU61/wB9W3/x6gD4zor7M/4d6ftof9Ep1r/vq2/+PUf8O9P20P8AolOtf99W3/x6gD4zor7M/wCHen7aH/RKda/76tv/AI9R/wAO9P20P+iU61/31bf/AB6gD4zor7M/4d6ftof9Ep1r/vq2/wDj1H/DvT9tD/olOtf99W3/AMeoA+M6K+zP+Hen7aH/AESnWv8Avq2/+PUf8O9P20P+iU61/wB9W3/x6gD4zor7M/4d6ftof9Ep1r/vq2/+PUf8O9P20P8AolOtf99W3/x6gD4zor7M/wCHen7aH/RKda/76tv/AI9R/wAO9P20P+iU61/31bf/AB6gD4zor7M/4d6ftof9Ep1r/vq2/wDj1H/DvT9tD/olOtf99W3/AMeoA+M6K+zP+Hen7aH/AESnWv8Avq2/+PUf8O9P20P+iU61/wB9W3/x6gD4zor7M/4d6ftof9Ep1r/vq2/+PUf8O9P20P8AolOtf99W3/x6gD4zor7M/wCHen7aH/RKda/76tv/AI9R/wAO9P20P+iU61/31bf/AB6gD9mP+CJv/JvXjf8A7HOX/wBN9nX7MV+XP/BKT4KfFP4HfBTxZ4c+LHh268N6lfeKZL23t7soXktzZWsYkHlu4xvRhyc5FfqNQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAf/9L9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//T/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1P38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9X9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//W/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1/38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9D9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//R/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0v38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9P9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//U/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1f38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9b9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//X/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0P38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9H9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//S/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/0/38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9T9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//V/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/1v38ooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigD/9f9/KKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooA//Q/fyiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAP/2Q==\"/>\n</defs>\n</svg>\n")}",\n\t   \ttheme: "saturn",\n        metaData: {\n\t\t\ttitle: "Better Auth API",\n\t\t\tdescription: "API Reference for your Better Auth Instance",\n\t\t}\n      }\n\n      document.getElementById('api-reference').dataset.configuration =\n        JSON.stringify(configuration)\n    <\/script>\n\t  <script src="https://cdn.jsdelivr.net/npm/@scalar/api-reference"><\/script>\n  </body>\n</html>`),{headers:{"Content-Type":"text/html"}});var t}))}}}}),7381,[3739,6976,7096,910,7092,6977,7074,7075,7078,7080,6983,6988,7082,7090,6985,7086,7091,7093,7104,7106,6980,6984,7097,6981,911,6982,6986,909,7100,6987,908,7073,7094,7095,7098,6996,7099]);
__d((function(g,r,i,a,m,_e,d){Object.defineProperty(_e,"__esModule",{value:!0}),_e.oidcProvider=void 0;var e=r(d[0]),t=r(d[1]),n=r(d[2]),o=r(d[3]);r(d[4]);var s=r(d[5]);r(d[6]);var c=r(d[7]);r(d[8]),r(d[9]),r(d[10]);var l=r(d[11]);r(d[12]),r(d[13]),r(d[14]),r(d[15]);var p=r(d[16]);r(d[17]),r(d[18]);var u=r(d[19]);r(d[20]),r(d[21]),r(d[22]),r(d[23]),r(d[24]),r(d[25]),r(d[26]),r(d[27]),r(d[28]),r(d[29]),r(d[30]),r(d[31]),r(d[32]);const _={oauthApplication:{modelName:"oauthApplication",fields:{name:{type:"string"},icon:{type:"string",required:!1},metadata:{type:"string",required:!1},clientId:{type:"string",unique:!0},clientSecret:{type:"string"},redirectURLs:{type:"string"},type:{type:"string"},disabled:{type:"boolean",required:!1,defaultValue:!1},userId:{type:"string",required:!1},createdAt:{type:"date"},updatedAt:{type:"date"}}},oauthAccessToken:{modelName:"oauthAccessToken",fields:{accessToken:{type:"string",unique:!0},refreshToken:{type:"string",unique:!0},accessTokenExpiresAt:{type:"date"},refreshTokenExpiresAt:{type:"date"},clientId:{type:"string"},userId:{type:"string",required:!1},scopes:{type:"string"},createdAt:{type:"date"},updatedAt:{type:"date"}}},oauthConsent:{modelName:"oauthConsent",fields:{clientId:{type:"string"},userId:{type:"string"},scopes:{type:"string"},createdAt:{type:"date"},updatedAt:{type:"date"},consentGiven:{type:"boolean"}}}};function h(e,t,n){return`${e.includes("?")?"&":"?"}error=${t}&error_description=${n}`}async function f(e,t){const s={codeExpiresIn:600,defaultScope:"openid",...t,scopes:["openid","profile","email","offline_access",...t?.scopes||[]]};if(!e.request)throw new n.APIError("UNAUTHORIZED",{error_description:"request not found",error:"invalid_request"});const c=await(0,o.g)(e);if(!c){await e.setSignedCookie("oidc_login_prompt",JSON.stringify(e.query),e.context.secret,{maxAge:600,path:"/",sameSite:"lax"});const n=e.request.url?.split("?")[1];throw e.redirect(`${t.loginPage}?${n}`)}const l=e.query;if(!l.client_id)throw e.redirect(`${e.context.baseURL}/error?error=invalid_client`);if(!l.response_type)throw e.redirect(h(`${e.context.baseURL}/error`,"invalid_request","response_type is required"));const p=await e.context.adapter.findOne({model:"oauthApplication",where:[{field:"clientId",value:e.query.client_id}]}).then((e=>e?{...e,redirectURLs:e.redirectURLs.split(","),metadata:e.metadata?JSON.parse(e.metadata):{}}:null));if(!p)throw e.redirect(`${e.context.baseURL}/error?error=invalid_client`);const _=p.redirectURLs.find((t=>t===e.query.redirect_uri));if(!_||!l.redirect_uri)throw new n.APIError("BAD_REQUEST",{message:"Invalid redirect URI"});if(p.disabled)throw e.redirect(`${e.context.baseURL}/error?error=client_disabled`);if("code"!==l.response_type)throw e.redirect(`${e.context.baseURL}/error?error=unsupported_response_type`);const f=l.scope?.split(" ").filter((e=>e))||s.defaultScope.split(" "),w=f.filter((e=>!s.scopes.includes(e)||"offline_access"===e&&"consent"!==l.prompt));if(w.length)throw e.redirect(h(l.redirect_uri,"invalid_scope",`The following scopes are invalid: ${w.join(", ")}`));if((!l.code_challenge||!l.code_challenge_method)&&t.requirePKCE)throw e.redirect(h(l.redirect_uri,"invalid_request","pkce is required"));if(l.code_challenge_method||(l.code_challenge_method="plain"),!["s256",t.allowPlainCodeChallengeMethod?"plain":"s256"].includes(l.code_challenge_method?.toLowerCase()||""))throw e.redirect(h(l.redirect_uri,"invalid_request","invalid code_challenge method"));const A=(0,u.g)(32,"a-z","A-Z","0-9"),y=1e3*s.codeExpiresIn,I=new Date(Date.now()+y);try{await e.context.internalAdapter.createVerificationValue({value:JSON.stringify({clientId:p.clientId,redirectURI:l.redirect_uri,scope:f,userId:c.user.id,authTime:c.session.createdAt.getTime(),requireConsent:"consent"===l.prompt,state:"consent"===l.prompt?l.state:null,codeChallenge:l.code_challenge,codeChallengeMethod:l.code_challenge_method,nonce:l.nonce}),identifier:A,expiresAt:I})}catch(t){throw e.redirect(h(l.redirect_uri,"server_error","An error occurred while processing the request"))}const E=new URL(_);if(E.searchParams.set("code",A),E.searchParams.set("state",e.query.state),"consent"!==l.prompt)throw e.redirect(E.toString());if(await e.context.adapter.findOne({model:"oauthConsent",where:[{field:"clientId",value:p.clientId},{field:"userId",value:c.user.id}]}).then((e=>!!e?.consentGiven)))throw e.redirect(E.toString());if(t?.consentPage){await e.setSignedCookie("oidc_consent_prompt",A,e.context.secret,{maxAge:600,path:"/",sameSite:"lax"});const n=`${t.consentPage}?client_id=${p.clientId}&scope=${f.join(" ")}`;throw e.redirect(n)}const v=t?.getConsentHTML;if(!v)throw new n.APIError("INTERNAL_SERVER_ERROR",{message:"No consent page provided"});return new Response(v({scopes:f,clientMetadata:p.metadata,clientIcon:p?.icon,clientId:p.clientId,clientName:p.name,code:A}),{headers:{"content-type":"text/html"}})}const w=(e,t)=>{const n=e.context.options.baseURL,o=e.context.baseURL;return{issuer:n,authorization_endpoint:`${o}/oauth2/authorize`,token_endpoint:`${o}/oauth2/token`,userinfo_endpoint:`${o}/oauth2/userinfo`,jwks_uri:`${o}/jwks`,registration_endpoint:`${o}/oauth2/register`,scopes_supported:["openid","profile","email","offline_access"],response_types_supported:["code"],response_modes_supported:["query"],grant_types_supported:["authorization_code"],acr_values_supported:["urn:mace:incommon:iap:silver","urn:mace:incommon:iap:bronze"],subject_types_supported:["public"],id_token_signing_alg_values_supported:["RS256","none"],token_endpoint_auth_methods_supported:["client_secret_basic","client_secret_post"],claims_supported:["sub","iss","aud","exp","nbf","iat","jti","email","email_verified","name"],...t?.metadata}};_e.oidcProvider=h=>{const A="oauthApplication",y="oauthAccessToken",I="oauthConsent",E={codeExpiresIn:600,defaultScope:"openid",accessTokenExpiresIn:3600,refreshTokenExpiresIn:604800,allowPlainCodeChallengeMethod:!0,...h,scopes:["openid","profile","email","offline_access",...h?.scopes||[]]};return{id:"oidc",hooks:{after:[{matcher:()=>!0,handler:(0,o.c)((async e=>{const t=await e.getSignedCookie("oidc_login_prompt",e.context.secret),n=e.context.authCookies.sessionToken.name,o=(0,c.parseSetCookieHeader)(e.context.responseHeaders?.get("set-cookie")||""),s=o.has(n);if(!t||!s)return;e.setCookie("oidc_login_prompt","",{maxAge:0});const l=o.get(n)?.value,p=l?.split(".")[0];if(!p)return;const u=await e.context.internalAdapter.findSession(p);if(!u)return;e.query=JSON.parse(t),e.query.prompt="consent",e.context.session=u;return await f(e,E)}))}]},endpoints:{getOpenIdConfig:(0,o.a)("/.well-known/openid-configuration",{method:"GET",metadata:{isAction:!1}},(async e=>{const t=w(e,h);return e.json(t)})),oAuth2authorize:(0,o.a)("/oauth2/authorize",{method:"GET",query:t.z.record(t.z.string(),t.z.any()),metadata:{openapi:{description:"Authorize an OAuth2 request",responses:{200:{description:"Authorization response generated successfully",content:{"application/json":{schema:{type:"object",additionalProperties:!0,description:"Authorization response, contents depend on the authorize function implementation"}}}}}}}},(async e=>f(e,E))),oAuthConsent:(0,o.a)("/oauth2/consent",{method:"POST",body:t.z.object({accept:t.z.boolean()}),use:[o.s],metadata:{openapi:{description:"Handle OAuth2 consent",responses:{200:{description:"Consent processed successfully",content:{"application/json":{schema:{type:"object",properties:{redirectURI:{type:"string",format:"uri",description:"The URI to redirect to, either with an authorization code or an error"}},required:["redirectURI"]}}}}}}}},(async e=>{const t=await e.getSignedCookie("oidc_consent_prompt",e.context.secret);if(!t)throw new n.APIError("UNAUTHORIZED",{error_description:"No consent prompt found",error:"invalid_request"});const o=await e.context.internalAdapter.findVerificationValue(t);if(!o)throw new n.APIError("UNAUTHORIZED",{error_description:"Invalid code",error:"invalid_request"});if(o.expiresAt<new Date)throw new n.APIError("UNAUTHORIZED",{error_description:"Code expired",error:"invalid_request"});const s=JSON.parse(o.value);if(!s.requireConsent||!s.state)throw new n.APIError("UNAUTHORIZED",{error_description:"Consent not required",error:"invalid_request"});if(!e.body.accept)return await e.context.internalAdapter.deleteVerificationValue(o.id),e.json({redirectURI:`${s.redirectURI}?error=access_denied&error_description=User denied access`});const c=(0,u.g)(32,"a-z","A-Z","0-9"),l=1e3*E.codeExpiresIn,p=new Date(Date.now()+l);await e.context.internalAdapter.updateVerificationValue(o.id,{value:JSON.stringify({...s,requireConsent:!1}),identifier:c,expiresAt:p}),await e.context.adapter.create({model:I,data:{clientId:s.clientId,userId:s.userId,scopes:s.scope.join(" "),consentGiven:!0,createdAt:new Date,updatedAt:new Date}});const _=new URL(s.redirectURI);return _.searchParams.set("code",c),_.searchParams.set("state",s.state),e.json({redirectURI:_.toString()})})),oAuth2token:(0,o.a)("/oauth2/token",{method:"POST",body:t.z.record(t.z.any()),metadata:{isAction:!1}},(async t=>{let{body:o}=t;if(!o)throw new n.APIError("BAD_REQUEST",{error_description:"request body not found",error:"invalid_request"});if(o instanceof FormData&&(o=Object.fromEntries(o.entries())),!(o instanceof Object))throw new n.APIError("BAD_REQUEST",{error_description:"request body is not an object",error:"invalid_request"});let{client_id:c,client_secret:_}=o;const f=t.request?.headers.get("authorization")||null;if(f&&!c&&!_&&f.startsWith("Basic "))try{const e=f.replace("Basic ",""),t=(new TextDecoder).decode(s.base64.decode(e));if(!t.includes(":"))throw new n.APIError("UNAUTHORIZED",{error_description:"invalid authorization header format",error:"invalid_client"});const[o,l]=t.split(":");if(!o||!l)throw new n.APIError("UNAUTHORIZED",{error_description:"invalid authorization header format",error:"invalid_client"});c=o,_=l}catch(e){throw new n.APIError("UNAUTHORIZED",{error_description:"invalid authorization header format",error:"invalid_client"})}const{grant_type:w,code:I,redirect_uri:v,refresh_token:U,code_verifier:T}=o;if("refresh_token"===w){if(!U)throw new n.APIError("BAD_REQUEST",{error_description:"refresh_token is required",error:"invalid_request"});const e=await t.context.adapter.findOne({model:y,where:[{field:"refreshToken",value:U.toString()}]});if(!e)throw new n.APIError("UNAUTHORIZED",{error_description:"invalid refresh token",error:"invalid_grant"});if(e.clientId!==c?.toString())throw new n.APIError("UNAUTHORIZED",{error_description:"invalid client_id",error:"invalid_client"});if(e.refreshTokenExpiresAt<new Date)throw new n.APIError("UNAUTHORIZED",{error_description:"refresh token expired",error:"invalid_grant"});const o=(0,u.g)(32,"a-z","A-Z"),s=(0,u.g)(32,"a-z","A-Z"),l=new Date(Date.now()+1e3*E.accessTokenExpiresIn),p=new Date(Date.now()+1e3*E.refreshTokenExpiresIn);return await t.context.adapter.create({model:y,data:{accessToken:o,refreshToken:s,accessTokenExpiresAt:l,refreshTokenExpiresAt:p,clientId:c.toString(),userId:e.userId,scopes:e.scopes,createdAt:new Date,updatedAt:new Date}}),t.json({access_token:o,token_type:"bearer",expires_in:E.accessTokenExpiresIn,refresh_token:s,scope:e.scopes})}if(!I)throw new n.APIError("BAD_REQUEST",{error_description:"code is required",error:"invalid_request"});if(h.requirePKCE&&!T)throw new n.APIError("BAD_REQUEST",{error_description:"code verifier is missing",error:"invalid_request"});const R=await t.context.internalAdapter.findVerificationValue(I.toString());if(!R)throw new n.APIError("UNAUTHORIZED",{error_description:"invalid code",error:"invalid_grant"});if(R.expiresAt<new Date)throw new n.APIError("UNAUTHORIZED",{error_description:"code expired",error:"invalid_grant"});if(await t.context.internalAdapter.deleteVerificationValue(R.id),!c||!_)throw new n.APIError("UNAUTHORIZED",{error_description:"client_id and client_secret are required",error:"invalid_client"});if(!w)throw new n.APIError("BAD_REQUEST",{error_description:"grant_type is required",error:"invalid_request"});if("authorization_code"!==w)throw new n.APIError("BAD_REQUEST",{error_description:"grant_type must be 'authorization_code'",error:"unsupported_grant_type"});if(!v)throw new n.APIError("BAD_REQUEST",{error_description:"redirect_uri is required",error:"invalid_request"});const k=await t.context.adapter.findOne({model:A,where:[{field:"clientId",value:c.toString()}]}).then((e=>e?{...e,redirectURLs:e.redirectURLs.split(","),metadata:e.metadata?JSON.parse(e.metadata):{}}:null));if(!k)throw new n.APIError("UNAUTHORIZED",{error_description:"invalid client_id",error:"invalid_client"});if(k.disabled)throw new n.APIError("UNAUTHORIZED",{error_description:"client is disabled",error:"invalid_client"});if(!(k.clientSecret===_.toString()))throw new n.APIError("UNAUTHORIZED",{error_description:"invalid client_secret",error:"invalid_client"});const b=JSON.parse(R.value);if(b.clientId!==c.toString())throw new n.APIError("UNAUTHORIZED",{error_description:"invalid client_id",error:"invalid_client"});if(b.redirectURI!==v.toString())throw new n.APIError("UNAUTHORIZED",{error_description:"invalid redirect_uri",error:"invalid_client"});if(b.codeChallenge&&!T)throw new n.APIError("BAD_REQUEST",{error_description:"code verifier is missing",error:"invalid_request"});if(("plain"===b.codeChallengeMethod?T:await(0,l.createHash)("SHA-256","base64urlnopad").digest(T))!==b.codeChallenge)throw new n.APIError("UNAUTHORIZED",{error_description:"code verification failed",error:"invalid_request"});const x=b.scope;await t.context.internalAdapter.deleteVerificationValue(R.id);const D=(0,u.g)(32,"a-z","A-Z"),q=(0,u.g)(32,"A-Z","a-z"),S=new Date(Date.now()+1e3*E.accessTokenExpiresIn),z=new Date(Date.now()+1e3*E.refreshTokenExpiresIn);await t.context.adapter.create({model:y,data:{accessToken:D,refreshToken:q,accessTokenExpiresAt:S,refreshTokenExpiresAt:z,clientId:c.toString(),userId:b.userId,scopes:x.join(" "),createdAt:new Date,updatedAt:new Date}});const O=await t.context.internalAdapter.findUserById(b.userId);if(!O)throw new n.APIError("UNAUTHORIZED",{error_description:"user not found",error:"invalid_grant"});let P={alg:"HS256",key:await p.subtle.generateKey({name:"HMAC",hash:"SHA-256"},!0,["sign","verify"])};const N={given_name:O.name.split(" ")[0],family_name:O.name.split(" ")[1],name:O.name,profile:O.image,updated_at:O.updatedAt.toISOString()},C={email:O.email,email_verified:O.emailVerified},j={...x.includes("profile")?N:{},...x.includes("email")?C:{}},H=h.getAdditionalUserInfoClaim?h.getAdditionalUserInfoClaim(O,x):{},Z=await new e.SignJWT({sub:O.id,aud:c.toString(),iat:Date.now(),auth_time:t.context.session?.session.createdAt.getTime(),nonce:b.nonce,acr:"urn:mace:incommon:iap:silver",...j,...H}).setProtectedHeader({alg:P.alg}).setIssuedAt().setExpirationTime(Math.floor(Date.now()/1e3)+E.accessTokenExpiresIn).sign(P.key);return t.json({access_token:D,token_type:"Bearer",expires_in:E.accessTokenExpiresIn,refresh_token:x.includes("offline_access")?q:void 0,scope:x.join(" "),id_token:x.includes("openid")?Z:void 0},{headers:{"Cache-Control":"no-store",Pragma:"no-cache"}})})),oAuth2userInfo:(0,o.a)("/oauth2/userinfo",{method:"GET",metadata:{isAction:!1,openapi:{description:"Get OAuth2 user information",responses:{200:{description:"User information retrieved successfully",content:{"application/json":{schema:{type:"object",properties:{sub:{type:"string",description:"Subject identifier (user ID)"},email:{type:"string",format:"email",nullable:!0,description:"User's email address, included if 'email' scope is granted"},name:{type:"string",nullable:!0,description:"User's full name, included if 'profile' scope is granted"},picture:{type:"string",format:"uri",nullable:!0,description:"User's profile picture URL, included if 'profile' scope is granted"},given_name:{type:"string",nullable:!0,description:"User's given name, included if 'profile' scope is granted"},family_name:{type:"string",nullable:!0,description:"User's family name, included if 'profile' scope is granted"},email_verified:{type:"boolean",nullable:!0,description:"Whether the email is verified, included if 'email' scope is granted"}},required:["sub"]}}}}}}}},(async e=>{if(!e.request)throw new n.APIError("UNAUTHORIZED",{error_description:"request not found",error:"invalid_request"});const t=e.request.headers.get("authorization");if(!t)throw new n.APIError("UNAUTHORIZED",{error_description:"authorization header not found",error:"invalid_request"});const o=t.replace("Bearer ",""),s=await e.context.adapter.findOne({model:y,where:[{field:"accessToken",value:o}]});if(!s)throw new n.APIError("UNAUTHORIZED",{error_description:"invalid access token",error:"invalid_token"});if(s.accessTokenExpiresAt<new Date)throw new n.APIError("UNAUTHORIZED",{error_description:"The Access Token expired",error:"invalid_token"});const c=await e.context.internalAdapter.findUserById(s.userId);if(!c)throw new n.APIError("UNAUTHORIZED",{error_description:"user not found",error:"invalid_token"});const l=s.scopes.split(" "),p={sub:c.id,email:l.includes("email")?c.email:void 0,name:l.includes("profile")?c.name:void 0,picture:l.includes("profile")?c.image:void 0,given_name:l.includes("profile")?c.name.split(" ")[0]:void 0,family_name:l.includes("profile")?c.name.split(" ")[1]:void 0,email_verified:l.includes("email")?c.emailVerified:void 0},u=h.getAdditionalUserInfoClaim?h.getAdditionalUserInfoClaim(c,l):p;return e.json({...p,...u})})),registerOAuthApplication:(0,o.a)("/oauth2/register",{method:"POST",body:t.z.object({redirect_uris:t.z.array(t.z.string()),token_endpoint_auth_method:t.z.enum(["none","client_secret_basic","client_secret_post"]).default("client_secret_basic").optional(),grant_types:t.z.array(t.z.enum(["authorization_code","implicit","password","client_credentials","refresh_token","urn:ietf:params:oauth:grant-type:jwt-bearer","urn:ietf:params:oauth:grant-type:saml2-bearer"])).default(["authorization_code"]).optional(),response_types:t.z.array(t.z.enum(["code","token"])).default(["code"]).optional(),client_name:t.z.string().optional(),client_uri:t.z.string().optional(),logo_uri:t.z.string().optional(),scope:t.z.string().optional(),contacts:t.z.array(t.z.string()).optional(),tos_uri:t.z.string().optional(),policy_uri:t.z.string().optional(),jwks_uri:t.z.string().optional(),jwks:t.z.record(t.z.any()).optional(),metadata:t.z.record(t.z.any()).optional(),software_id:t.z.string().optional(),software_version:t.z.string().optional(),software_statement:t.z.string().optional()}),metadata:{openapi:{description:"Register an OAuth2 application",responses:{200:{description:"OAuth2 application registered successfully",content:{"application/json":{schema:{type:"object",properties:{name:{type:"string",description:"Name of the OAuth2 application"},icon:{type:"string",nullable:!0,description:"Icon URL for the application"},metadata:{type:"object",additionalProperties:!0,nullable:!0,description:"Additional metadata for the application"},clientId:{type:"string",description:"Unique identifier for the client"},clientSecret:{type:"string",description:"Secret key for the client"},redirectURLs:{type:"array",items:{type:"string",format:"uri"},description:"List of allowed redirect URLs"},type:{type:"string",description:"Type of the client",enum:["web"]},authenticationScheme:{type:"string",description:"Authentication scheme used by the client",enum:["client_secret"]},disabled:{type:"boolean",description:"Whether the client is disabled",enum:[!1]},userId:{type:"string",nullable:!0,description:"ID of the user who registered the client, null if registered anonymously"},createdAt:{type:"string",format:"date-time",description:"Creation timestamp"},updatedAt:{type:"string",format:"date-time",description:"Last update timestamp"}},required:["name","clientId","clientSecret","redirectURLs","type","authenticationScheme","disabled","createdAt","updatedAt"]}}}}}}}},(async e=>{const t=e.body,s=await(0,o.g)(e);if(!s&&!h.allowDynamicClientRegistration)throw new n.APIError("UNAUTHORIZED",{error:"invalid_token",error_description:"Authentication required for client registration"});if((!t.grant_types||t.grant_types.includes("authorization_code")||t.grant_types.includes("implicit"))&&(!t.redirect_uris||0===t.redirect_uris.length))throw new n.APIError("BAD_REQUEST",{error:"invalid_redirect_uri",error_description:"Redirect URIs are required for authorization_code and implicit grant types"});if(t.grant_types&&t.response_types){if(t.grant_types.includes("authorization_code")&&!t.response_types.includes("code"))throw new n.APIError("BAD_REQUEST",{error:"invalid_client_metadata",error_description:"When 'authorization_code' grant type is used, 'code' response type must be included"});if(t.grant_types.includes("implicit")&&!t.response_types.includes("token"))throw new n.APIError("BAD_REQUEST",{error:"invalid_client_metadata",error_description:"When 'implicit' grant type is used, 'token' response type must be included"})}const c=h.generateClientId?.()||(0,u.g)(32,"a-z","A-Z"),l=h.generateClientSecret?.()||(0,u.g)(32,"a-z","A-Z");return await e.context.adapter.create({model:A,data:{name:t.client_name,icon:t.logo_uri,metadata:t.metadata?JSON.stringify(t.metadata):null,clientId:c,clientSecret:l,redirectURLs:t.redirect_uris.join(","),type:"web",authenticationScheme:t.token_endpoint_auth_method||"client_secret_basic",disabled:!1,userId:s?.session.userId,createdAt:new Date,updatedAt:new Date}}),e.json({client_id:c,client_secret:l,client_id_issued_at:Math.floor(Date.now()/1e3),client_secret_expires_at:0,redirect_uris:t.redirect_uris,token_endpoint_auth_method:t.token_endpoint_auth_method||"client_secret_basic",grant_types:t.grant_types||["authorization_code"],response_types:t.response_types||["code"],client_name:t.client_name,client_uri:t.client_uri,logo_uri:t.logo_uri,scope:t.scope,contacts:t.contacts,tos_uri:t.tos_uri,policy_uri:t.policy_uri,jwks_uri:t.jwks_uri,jwks:t.jwks,software_id:t.software_id,software_version:t.software_version,software_statement:t.software_statement,metadata:t.metadata},{status:201,headers:{"Cache-Control":"no-store",Pragma:"no-cache"}})})),getOAuthClient:(0,o.a)("/oauth2/client/:id",{method:"GET",use:[o.s],metadata:{openapi:{description:"Get OAuth2 client details",responses:{200:{description:"OAuth2 client retrieved successfully",content:{"application/json":{schema:{type:"object",properties:{clientId:{type:"string",description:"Unique identifier for the client"},name:{type:"string",description:"Name of the OAuth2 application"},icon:{type:"string",nullable:!0,description:"Icon URL for the application"}},required:["clientId","name"]}}}}}}}},(async e=>{const t=await e.context.adapter.findOne({model:A,where:[{field:"clientId",value:e.params.id}]});if(!t)throw new n.APIError("NOT_FOUND",{error_description:"client not found",error:"not_found"});return e.json({clientId:t.clientId,name:t.name,icon:t.icon})}))},schema:_}}}),7382,[6988,3739,6977,6980,910,6983,6984,6981,7096,7093,7097,7074,7075,7078,7080,7082,7090,6985,7086,7091,6987,908,7073,6982,911,7092,7094,6986,7095,7098,909,6996,7099]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.captcha=void 0;var t=r(d[0]);const s=["/sign-up/email","/sign-in/email","/forget-password"],o="cloudflare-turnstile",n="google-recaptcha",c="hcaptcha",p={[o]:"https://challenges.cloudflare.com/turnstile/v0/siteverify",[n]:"https://www.google.com/recaptcha/api/siteverify",[c]:"https://api.hcaptcha.com/siteverify"},u="Captcha verification failed",h="Missing CAPTCHA response",f="Something went wrong",y="Missing secret key",l="CAPTCHA service unavailable",w=({message:t,status:s})=>({response:new Response(JSON.stringify({message:t}),{status:s})}),v=async({siteVerifyURL:s,captchaResponse:o,secretKey:n,remoteIP:c})=>{const p=await(0,t.betterFetch)(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({secret:n,response:o,...c&&{remoteip:c}})});if(!p.data||p.error)throw new Error(l);if(!p.data.success)return w({message:u,status:403})},b=t=>{if("object"!=typeof t||null===t||Array.isArray(t))throw new Error("Input must be a non-null object.");const s=new URLSearchParams;for(const[o,n]of Object.entries(t))null!=n&&s.append(o,String(n));return s.toString()},R=t=>"score"in t&&"number"==typeof t.score,S=async({siteVerifyURL:s,captchaResponse:o,secretKey:n,minScore:c=.5,remoteIP:p})=>{const h=await(0,t.betterFetch)(s,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:b({secret:n,response:o,...p&&{remoteip:p}})});if(!h.data||h.error)throw new Error(l);if(!h.data.success||R(h.data)&&h.data.score<c)return w({message:u,status:403})},P=async({siteVerifyURL:s,captchaResponse:o,secretKey:n,siteKey:c,remoteIP:p})=>{const h=await(0,t.betterFetch)(s,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:b({secret:n,response:o,...c&&{sitekey:c},...p&&{remoteip:p}})});if(!h.data||h.error)throw new Error(l);if(!h.data.success)return w({message:u,status:403})};e.captcha=t=>({id:"captcha",onRequest:async(u,l)=>{try{if(!(t.endpoints?.length?t.endpoints:s).some((t=>u.url.includes(t))))return;if(!t.secretKey)throw new Error(y);const f=u.headers.get("x-captcha-response"),l=u.headers.get("x-captcha-user-remote-ip")??void 0;if(!f)return w({message:h,status:400});const b={siteVerifyURL:t.siteVerifyURLOverride||p[t.provider],captchaResponse:f,secretKey:t.secretKey,remoteIP:l};if(t.provider===o)return await v(b);if(t.provider===n)return await S({...b,minScore:t.minScore});if(t.provider===c)return await P({...b,siteKey:t.siteKey})}catch(t){const s=t instanceof Error?t.message:void 0;return l.logger.error(s??"Unknown error",{endpoint:u.url,message:t}),w({message:f,status:500})}}})}),7383,[908]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.haveIBeenPwned=void 0;var s=r(d[0]);r(d[1]),r(d[2]),r(d[3]),r(d[4]),r(d[5]),r(d[6]),r(d[7]),r(d[8]);var t=r(d[9]),o=r(d[10]);r(d[11]),r(d[12]),r(d[13]),r(d[14]),r(d[15]),r(d[16]),r(d[17]),r(d[18]),r(d[19]),r(d[20]),r(d[21]),r(d[22]),r(d[23]),r(d[24]),r(d[25]),r(d[26]),r(d[27]),r(d[28]),r(d[29]),r(d[30]),r(d[31]),r(d[32]);const n={PASSWORD_COMPROMISED:"The password you entered has been compromised. Please choose a different password."};async function c(c,h){if(!c)return;const w=(await(0,t.createHash)("SHA-1","hex").digest(c)).toUpperCase(),p=w.substring(0,5),R=w.substring(5);try{const{data:t,error:c}=await(0,o.betterFetch)(`https://api.pwnedpasswords.com/range/${p}`,{headers:{"Add-Padding":"true","User-Agent":"BetterAuth Password Checker"}});if(c)throw new s.APIError("INTERNAL_SERVER_ERROR",{message:`Failed to check password. Status: ${c.status}`});const w=t.split("\n");if(w.some((s=>s.split(":")[0].toUpperCase()===R.toUpperCase())))throw new s.APIError("BAD_REQUEST",{message:h||n.PASSWORD_COMPROMISED,code:"PASSWORD_COMPROMISED"})}catch(t){if(t instanceof s.APIError)throw t;throw new s.APIError("INTERNAL_SERVER_ERROR",{message:"Failed to check password. Please try again later."})}}e.haveIBeenPwned=s=>({id:"haveIBeenPwned",init:t=>({context:{password:{...t.password,hash:async o=>(await c(o,s?.customPasswordCompromisedMessage),t.password.hash(o))}}}),$ERROR_CODES:n})}),7384,[6977,6980,3739,910,6983,6984,7096,7093,7097,7074,908,6981,911,6982,6986,909,6987,6988,7073,7075,7078,7080,7082,7090,6985,7086,7091,7092,7094,7095,7098,6996,7099]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.oneTimeToken=void 0;var t=r(d[0]);r(d[1]);var n=r(d[2]);r(d[3]),r(d[4]),r(d[5]),r(d[6]),r(d[7]),r(d[8]);var o=r(d[9]);r(d[10]),r(d[11]),r(d[12]),r(d[13]),r(d[14]),r(d[15]),r(d[16]),r(d[17]),r(d[18]),r(d[19]),r(d[20]),r(d[21]),r(d[22]),r(d[23]),r(d[24]),r(d[25]),r(d[26]),r(d[27]),r(d[28]),r(d[29]),r(d[30]),r(d[31]),r(d[32]),r(d[33]),r(d[34]),r(d[35]),r(d[36]),r(d[37]),r(d[38]),r(d[39]),r(d[40]),r(d[41]);e.oneTimeToken=s=>({id:"one-time-token",endpoints:{generateOneTimeToken:(0,n.a)("/one-time-token/generate",{method:"GET",use:[n.s]},(async t=>{if(s?.disableClientRequest&&t.request)throw t.error("BAD_REQUEST",{message:"Client requests are disabled"});const n=t.context.session,l=(0,o.g)(32),c=new Date(Date.now()+60*(s?.expiresIn??3)*1e3);return await t.context.internalAdapter.createVerificationValue({value:n.session.token,identifier:`one-time-token:${l}`,expiresAt:c}),t.json({token:l})})),verifyOneTimeToken:(0,n.a)("/one-time-token/verify",{method:"POST",body:t.z.object({token:t.z.string()})},(async t=>{const{token:n}=t.body,o=await t.context.internalAdapter.findVerificationValue(`one-time-token:${n}`);if(!o)throw t.error("BAD_REQUEST",{message:"Invalid token"});if(o.expiresAt<new Date)throw await t.context.internalAdapter.deleteVerificationValue(o.id),t.error("BAD_REQUEST",{message:"Token expired"});await t.context.internalAdapter.deleteVerificationValue(o.id);const s=await t.context.internalAdapter.findSession(o.value);if(!s)throw t.error("BAD_REQUEST",{message:"Session not found"});return t.json(s)}))}})}),7385,[3739,6977,6980,910,6983,6984,7096,7361,927,7091,7093,7097,7074,7075,7078,7080,6988,7082,7090,6985,7086,7364,947,908,7092,7375,7106,6981,911,6982,6986,909,6987,7073,7094,7095,7098,6996,7099,925,929,928]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.linkAccount=void 0;var o=r(d[0]),n=r(d[1]),u=r(d[2]);e.linkAccount=async s=>{const{anonymousUser:c,newUser:t}=s;console.log('\ud83d\udd25 [linkAccount] updating group membership'),await o.db.update(n.groupMember).set({userId:t.user.id}).where((0,u.eq)(n.groupMember.userId,c.user.id)),console.log('[linkAccount] from',c.user.id,'to',t.user.id)}}),7386,[6923,3810,3740]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.expenseRouter=void 0;var t=r(d[0]),n=r(d[1]),s=r(d[2]),o=r(d[3]),u=r(d[4]),p=r(d[5]),c=r(d[6]);e.expenseRouter={getByGroupId:u.protectedProcedure.input(o.groupIdWithPaginationSchema).query((async({ctx:t,input:s})=>{const o=t.session.user.id,u=s.limit??20,{cursor:c,groupId:w,searchTerm:l}=s;if(!await t.db.query.groupMember.findFirst({where:(0,n.and)((0,n.eq)(p.groupMember.groupId,w),(0,n.eq)(p.groupMember.userId,o))}))throw new Error("You don't have access to this group's expenses");const h=l?(0,n.or)((0,n.ilike)(p.expense.title,`%${l}%`),(0,n.ilike)(p.expense.description,`%${l}%`)):void 0,x=await t.db.query.expense.findMany({where:(t,{and:s})=>s((0,n.eq)(t.groupId,w),h,c?(0,n.or)((0,n.lt)(t.date,c.date),(0,n.and)((0,n.eq)(t.date,c.date),(0,n.lt)(t.id,c.id))):void 0),orderBy:[(0,n.desc)(p.expense.date),(0,n.desc)(p.expense.id)],limit:u+1,with:{splits:{with:{user:!0}},paidBy:!0}});let y;if(x.length>u){const t=x.pop();t&&(y={date:t.date,id:t.id})}return{items:x,nextCursor:y}})),getById:u.protectedProcedure.input(s.z.object({id:s.z.string().uuid()})).query((async({ctx:t,input:s})=>{const o=t.session.user.id,u=await t.db.query.expense.findFirst({where:(0,n.eq)(p.expense.id,s.id),with:{group:!0}});if(!u)throw new Error('Expense not found');if(!await t.db.query.groupMember.findFirst({where:(0,n.and)((0,n.eq)(p.groupMember.groupId,u.groupId),(0,n.eq)(p.groupMember.userId,o))}))throw new Error("You don't have access to this expense");return t.db.query.expense.findFirst({where:(0,n.eq)(p.expense.id,s.id),with:{splits:{with:{user:!0}},paidBy:!0,group:!0}})})),initialize:u.protectedProcedure.input(s.z.void()).mutation((async({ctx:t})=>{const s=t.session.user.id,o='Default Group';let u=await t.db.query.group.findFirst({where:(0,n.eq)(p.group.name,o)});if(!u){const[n]=await t.db.insert(p.group).values({name:o,createdById:s,description:`${o} for expenses`}).returning();await t.db.insert(p.groupMember).values({userId:s,role:'owner',groupId:n.id}),u=n}const[c]=await t.db.insert(p.expense).values({title:'New Expense',amount:0,groupId:u.id,paidById:s}).returning();return c})),create:u.protectedProcedure.input(o.createExpenseSchema).mutation((async({ctx:s,input:o})=>{const u=s.session.user.id,{splits:c,groupId:w,...l}=o;if(!w)throw new t.TRPCError({code:'BAD_REQUEST',message:'Group ID is required'});if(!u)throw new t.TRPCError({code:'UNAUTHORIZED',message:'User not found'});return await s.db.transaction((async s=>{const[u]=await s.insert(p.expense).values({groupId:w,...l}).returning({id:p.expense.id,paidById:p.expense.paidById,amount:p.expense.amount});if(!u)throw new t.TRPCError({code:'NOT_FOUND',message:'Error creating expense'});if(console.log('\ud83d\udd25 Expense created',u),c&&c.length>0){const n=c.reduce(((t,n)=>t+(n?.amount??0)),0);if(Math.abs(n-(o.amount||u.amount))>.01)throw new t.TRPCError({code:'BAD_REQUEST',message:'The sum of splits must equal the total expense amount'});console.log('\ud83d\udd25 Creating splits');const w=c.map((t=>({expenseId:u.id,userId:t.userId,amount:t.amount,percentage:t.percentage})));console.log('\ud83d\udd25 New splits',w),w.length>0&&await s.insert(p.expenseSplit).values(w)}return await s.update(p.group).set({updatedAt:new Date}).where((0,n.eq)(p.group.id,o.groupId)),u}))})),update:u.protectedProcedure.input(o.updateExpenseSchema).mutation((async({ctx:s,input:o})=>{const u=s.session.user.id,c=await s.db.query.expense.findFirst({where:(0,n.eq)(p.expense.id,o.id)});if(!c)throw new t.TRPCError({code:'NOT_FOUND',message:'Expense not found'});if(c.paidById!==u)throw new t.TRPCError({code:'FORBIDDEN',message:'You are not allowed to update this expense'});const[w]=await s.db.update(p.expense).set({...o,updatedAt:new Date}).where((0,n.eq)(p.expense.id,o.id)).returning();return w})),delete:u.protectedProcedure.input(s.z.object({id:s.z.string().uuid()})).mutation((async({ctx:t,input:s})=>{const o=t.session.user.id,u=await t.db.query.expense.findFirst({where:(0,n.eq)(p.expense.id,s.id)});if(!u)throw new Error('Expense not found');if(u.paidById!==o)throw new Error('Only the expense creator can delete it');return await t.db.delete(p.expense).where((0,n.eq)(p.expense.id,s.id)),{success:!0}})),getSummaryByCategory:u.protectedProcedure.input(o.groupIdWithTimeframeSchema).query((async({ctx:t,input:s})=>{const o=t.session.user.id;if(!await t.db.query.groupMember.findFirst({where:(0,n.and)((0,n.eq)(p.groupMember.groupId,s.groupId),(0,n.eq)(p.groupMember.userId,o))}))throw new Error("You don't have access to this group");let u=n.sql`TRUE`;const c=new Date;if('week'===s.timeframe){const t=new Date(c);t.setDate(t.getDate()-7),u=n.sql`${p.expense.date} >= ${t}`}else if('month'===s.timeframe){const t=new Date(c);t.setMonth(t.getMonth()-1),u=n.sql`${p.expense.date} >= ${t}`}else if('year'===s.timeframe){const t=new Date(c);t.setFullYear(t.getFullYear()-1),u=n.sql`${p.expense.date} >= ${t}`}return await t.db.select({category:p.expense.category,total:n.sql`sum(${p.expense.amount})`.as('total'),count:n.sql`count(*)`.as('count')}).from(p.expense).where((0,n.and)((0,n.eq)(p.expense.groupId,s.groupId),u)).groupBy(p.expense.category)})),getGroupBalances:u.protectedProcedure.input(o.groupIdWithPaginationSchema).query((async({ctx:t,input:n})=>(0,c.getGroupBalancesByMember)(t,n))),getSummaryByMember:u.protectedProcedure.input(o.groupIdWithTimeframeSchema).query((async({ctx:t,input:s})=>{const o=t.session.user.id;if(!await t.db.query.groupMember.findFirst({where:(0,n.and)((0,n.eq)(p.groupMember.groupId,s.groupId),(0,n.eq)(p.groupMember.userId,o))}))throw new Error("You don't have access to this group");let u=n.sql`TRUE`;const c=new Date;if('week'===s.timeframe){const t=new Date(c);t.setDate(t.getDate()-7),u=n.sql`${p.expense.date} >= ${t}`}else if('month'===s.timeframe){const t=new Date(c);t.setMonth(t.getMonth()-1),u=n.sql`${p.expense.date} >= ${t}`}else if('year'===s.timeframe){const t=new Date(c);t.setFullYear(t.getFullYear()-1),u=n.sql`${p.expense.date} >= ${t}`}const w=await t.db.query.groupMember.findMany({where:(0,n.eq)(p.groupMember.groupId,s.groupId),with:{user:{columns:{id:!0,name:!0}}}}),l=await t.db.select({userId:p.expense.paidById,total:n.sql`sum(${p.expense.amount})`.as('total'),count:n.sql`count(*)`.as('count')}).from(p.expense).where((0,n.and)((0,n.eq)(p.expense.groupId,s.groupId),u)).groupBy(p.expense.paidById);return w.map((t=>{const n=l.find((n=>n.userId===t.userId));return{userId:t.userId,name:t.user?.name||'Unknown User',total:n?.total||0,count:n?.count||0}}))})),settleSplit:u.protectedProcedure.input(s.z.object({splitId:s.z.string().uuid()})).mutation((async({ctx:t,input:s})=>{const o=t.session.user.id,u=await t.db.query.expenseSplit.findFirst({where:(0,n.eq)(p.expenseSplit.id,s.splitId),with:{expense:{columns:{id:!0,paidById:!0}}}});if(!u)throw new Error('Split not found');if(u.expense&&u.expense.paidById!==o&&u.userId!==o)throw new Error("You don't have permission to settle this split");const[c]=await t.db.update(p.expenseSplit).set({settled:!0,updatedAt:new Date}).where((0,n.eq)(p.expenseSplit.id,s.splitId)).returning();return c}))}}),7387,[3387,3740,3739,3737,6922,3810,7388]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getGroupBalancesByMember=void 0;var o=r(d[0]),s=r(d[1]),n=r(d[2]);e.getGroupBalancesByMember=async(t,u)=>{const p=t.session?.user.id;if(!p)throw new n.TRPCError({code:'UNAUTHORIZED',message:'User not found'});if(!await t.db.query.groupMember.findFirst({where:(0,s.and)((0,s.eq)(o.groupMember.groupId,u.groupId),(0,s.eq)(o.groupMember.userId,p))}))throw new n.TRPCError({code:'UNAUTHORIZED',message:"You don't have access to this group"});const c=await t.db.query.groupMember.findMany({where:(0,s.eq)(o.groupMember.groupId,u.groupId),with:{user:{columns:{id:!0,name:!0}}}}),f={};for(const o of c)f[o.userId]=0;const I=await t.db.query.expense.findMany({where:(0,s.eq)(o.expense.groupId,u.groupId),with:{splits:!0}});for(const o of I)if(f[o.paidById]+=o.amount,o.splits)for(const s of o.splits)f[s.userId]-=s.amount;console.log('\ud83d\udd25 balances',f);const l=await t.db.query.settlement.findMany({where:(0,s.eq)(o.settlement.groupId,u.groupId)});console.log('\ud83d\udd25 settlements',l);for(const o of l)f[o.fromUserId]-=o.amount,f[o.toUserId]+=o.amount;return c.map((o=>({userId:o.userId,name:o.user?.name||'Unknown User',balance:f[o.userId]})))}}),7388,[3810,3740,3387]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.groupRouter=void 0;var t=r(d[0]),o=r(d[1]),u=r(d[2]),n=r(d[3]),s=r(d[4]),p=r(d[5]),c=r(d[6]),I=r(d[7]);e.groupRouter={all:s.protectedProcedure.input(u.z.object({limit:u.z.number().min(1).max(50).nullish(),cursor:u.z.object({createdAt:u.z.date(),id:u.z.string()}).nullish(),searchTerm:u.z.string().nullish()})).query((async({ctx:t,input:u})=>{const n=t.session.user.id,s=u.limit??15,{cursor:c,searchTerm:w}=u,b=w?(0,o.or)((0,o.ilike)(p.group.name,`%${w}%`),(0,o.ilike)(p.group.description,`%${w}%`)):void 0,h=await t.db.query.group.findMany({where:(u,{exists:s,and:I})=>I(s(t.db.select({gId:p.groupMember.groupId}).from(p.groupMember).where((0,o.and)((0,o.eq)(p.groupMember.groupId,u.id),(0,o.eq)(p.groupMember.userId,n)))),b,c?(0,o.or)((0,o.lt)(u.createdAt,c.createdAt),(0,o.and)((0,o.eq)(u.createdAt,c.createdAt),(0,o.lt)(u.id,c.id))):void 0),orderBy:[(0,o.desc)(p.group.createdAt),(0,o.desc)(p.group.id)],limit:s+1,with:{members:{columns:{userId:!0,role:!0}}}}),l=await Promise.all(h?.map((async o=>({groupId:o.id,balance:await(0,I.getGroupBalancesTotal)(t,{groupId:o.id,limit:100})})))),q=h.map((t=>({...t,balance:l.find((o=>o.groupId===t.id))?.balance||0})));let y;if(h.length>s){const t=h.pop();t&&(y={createdAt:t.createdAt,id:t.id})}return{items:q,nextCursor:y}})),getById:s.protectedProcedure.input(n.groupIdInputSchema).query((async({ctx:t,input:u})=>{const n=t.session.user.id;if(!await t.db.query.groupMember.findFirst({where:(0,o.and)((0,o.eq)(p.groupMember.groupId,u.groupId),(0,o.eq)(p.groupMember.userId,n))}))throw new Error("You don't have access to this group");return t.db.query.group.findFirst({where:(0,o.eq)(p.group.id,u.groupId),with:{members:{with:{user:!0},orderBy:(0,o.asc)(p.groupMember.joinedAt)}}})})),getMostRecentGroup:s.protectedProcedure.query((async({ctx:t})=>{const u=t.session.user.id;return await t.db.query.group.findFirst({where:(0,o.eq)(p.group.createdById,u),orderBy:(0,o.desc)(p.group.createdAt),with:{members:{with:{user:!0}}}})??null})),initialize:s.protectedProcedure.mutation((async({ctx:t})=>{const u=t.session.user.id,[n]=await t.db.insert(p.group).values({name:'New Group',description:null,createdById:u}).returning({id:p.group.id});await t.db.insert(p.groupMember).values({groupId:n.id,userId:u,role:'owner'});return await t.db.query.group.findFirst({where:(0,o.eq)(p.group.id,n.id),with:{members:{with:{user:!0}}}})})),create:s.protectedProcedure.input(n.createGroupSchema).mutation((async({ctx:t,input:o})=>{const u=t.session.user.id,[n]=await t.db.insert(p.group).values({...o,createdById:u}).returning({id:p.group.id,name:p.group.name});return await t.db.insert(p.groupMember).values({groupId:n.id,userId:u,role:'owner'}),n})),update:s.protectedProcedure.input(n.updateGroupSchema).mutation((async({ctx:u,input:n})=>{let s=n.id;if(!s)throw new t.TRPCError({code:'BAD_REQUEST',message:'Group ID is required'});const c={};void 0!==n.name&&(c.name=n.name),void 0!==n.description&&(c.description=n.description),c.updatedAt=new Date;const[I]=await u.db.update(p.group).set(c).where((0,o.eq)(p.group.id,s)).returning({id:p.group.id});return I})),delete:s.protectedProcedure.input(n.groupIdInputSchema).mutation((async({ctx:u,input:n})=>{const s=u.session.user.id;if(!await u.db.query.groupMember.findFirst({where:(0,o.and)((0,o.eq)(p.groupMember.groupId,n.groupId),(0,o.eq)(p.groupMember.userId,s),(0,o.eq)(p.groupMember.role,'owner'))}))throw new t.TRPCError({code:'FORBIDDEN',message:'Only group owners can delete groups'});return await u.db.delete(p.group).where((0,o.eq)(p.group.id,n.groupId)),{success:!0}})),getInviteLink:s.protectedProcedure.input(n.groupIdInputSchema).query((async({ctx:t,input:u})=>{const n=t.session.user.id;if(!await t.db.query.groupMember.findFirst({where:(0,o.and)((0,o.eq)(p.groupMember.groupId,u.groupId),(0,o.eq)(p.groupMember.userId,n))}))throw new Error("You don't have access to this group");return await t.db.query.groupInvite.findFirst({where:(0,o.and)((0,o.eq)(p.groupInvite.groupId,u.groupId),(0,o.gt)(p.groupInvite.expiresAt,new Date))})||null})),generateInviteLink:s.protectedProcedure.input(n.groupIdInputSchema).mutation((async({ctx:t,input:u})=>{const n=t.session.user.id;if(!await t.db.query.groupMember.findFirst({where:(0,o.and)((0,o.eq)(p.groupMember.groupId,u.groupId),(0,o.eq)(p.groupMember.userId,n))}))throw new Error("You don't have access to this group");const s=await t.db.query.groupInvite.findFirst({where:(0,o.eq)(p.groupInvite.groupId,u.groupId)});if(s){const[u]=await t.db.update(p.groupInvite).set({expiresAt:(0,c.addDays)(new Date,7)}).where((0,o.eq)(p.groupInvite.id,s.id)).returning();return u}const[I]=await t.db.insert(p.groupInvite).values({groupId:u.groupId}).returning();return I})),deactivateInviteLink:s.protectedProcedure.input(n.groupIdInputSchema).mutation((async({ctx:t,input:u})=>{const n=t.session.user.id;if(!await t.db.query.groupMember.findFirst({where:(0,o.and)((0,o.eq)(p.groupMember.groupId,u.groupId),(0,o.eq)(p.groupMember.userId,n))}))throw new Error("You don't have access to this group");return await t.db.delete(p.groupInvite).where((0,o.eq)(p.groupInvite.groupId,u.groupId)),{success:!0}})),addMember:s.protectedProcedure.input(n.addMemberSchema).mutation((async({ctx:t,input:u})=>{const n=t.session.user.id;if(!await t.db.query.groupMember.findFirst({where:(0,o.and)((0,o.eq)(p.groupMember.groupId,u.groupId),(0,o.eq)(p.groupMember.userId,n))}))throw new Error("You don't have access to this group");const[s]=await t.db.insert(p.groupMember).values(u).returning();return s})),removeMember:s.protectedProcedure.input(u.z.object({groupId:u.z.string().uuid(),userId:u.z.string()})).mutation((async({ctx:t,input:u})=>{const n=t.session.user.id,s=await t.db.query.groupMember.findFirst({where:(0,o.and)((0,o.eq)(p.groupMember.groupId,u.groupId),(0,o.eq)(p.groupMember.userId,n),(0,o.eq)(p.groupMember.role,'owner'))}),c=n===u.userId;if(!s&&!c)throw new Error('Only group owners can remove members');return await t.db.delete(p.groupMember).where((0,o.and)((0,o.eq)(p.groupMember.groupId,u.groupId),(0,o.eq)(p.groupMember.userId,u.userId))),{success:!0}})),getByInviteToken:s.protectedProcedure.input(u.z.object({token:u.z.string()})).query((async({ctx:u,input:n})=>{const s=await u.db.query.groupInvite.findFirst({where:(0,o.and)((0,o.eq)(p.groupInvite.token,n.token),(0,o.gt)(p.groupInvite.expiresAt,new Date))});if(!s)throw new t.TRPCError({code:'NOT_FOUND',message:'Invalid or expired invite link'});return u.db.query.group.findFirst({where:(0,o.eq)(p.group.id,s.groupId),columns:{name:!0,description:!0,id:!0}})})),joinByInvite:s.protectedProcedure.input(u.z.object({token:u.z.string()})).mutation((async({ctx:u,input:n})=>{const s=u.session.user.id,c=await u.db.query.groupInvite.findFirst({where:(0,o.and)((0,o.eq)(p.groupInvite.token,n.token),(0,o.gt)(p.groupInvite.expiresAt,new Date))});if(!c)throw new t.TRPCError({code:'NOT_FOUND',message:'Invalid or expired invite link'});if(await u.db.query.groupMember.findFirst({where:(0,o.and)((0,o.eq)(p.groupMember.groupId,c.groupId),(0,o.eq)(p.groupMember.userId,s))}))throw new t.TRPCError({code:'CONFLICT',message:'You are already a member of this group'});const[I]=await u.db.insert(p.groupMember).values({groupId:c.groupId,userId:s,role:'member'}).returning();return I}))}}),7389,[3387,3740,3739,3737,6922,3810,3420,7390]);
__d((function(g,r,i,a,m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.getGroupBalancesTotal=void 0;var n=r(d[0]),o=r(d[1]),s=r(d[2]);e.getGroupBalancesTotal=async(u,t)=>{const c=u.session?.user.id;if(!c)throw new s.TRPCError({code:'UNAUTHORIZED',message:'User not found'});return(await u.db.query.expense.findMany({where:(0,o.and)((0,o.eq)(n.expense.groupId,t.groupId)),columns:{amount:!0}})).reduce(((n,o)=>n+o.amount),0)}}),7390,[3810,3740,3387]);
__d((function(g,r,i,a,_m,e,d){Object.defineProperty(e,"__esModule",{value:!0}),e.settlementRouter=void 0;var t=r(d[0]),s=r(d[1]),n=r(d[2]),o=r(d[3]),u=r(d[4]);e.settlementRouter={getByGroupId:o.protectedProcedure.input(u.groupIdInputSchema).query((async({ctx:t,input:o})=>{const u=t.session.user.id;if(!await t.db.query.groupMember.findFirst({where:(0,s.and)((0,s.eq)(n.groupMember.groupId,o.groupId),(0,s.eq)(n.groupMember.userId,u))}))throw new Error("You don't have access to this group");return t.db.query.settlement.findMany({where:(0,s.eq)(n.settlement.groupId,o.groupId),orderBy:[(0,s.desc)(n.settlement.createdAt)],with:{fromUser:!0,toUser:!0}})})),getMySettlements:o.protectedProcedure.input(t.z.object({groupId:t.z.string().uuid(),status:t.z.enum(u.settlementStatusValues).optional()})).query((async({ctx:t,input:o})=>{const u=t.session.user.id;if(!await t.db.query.groupMember.findFirst({where:(0,s.and)((0,s.eq)(n.groupMember.groupId,o.groupId),(0,s.eq)(n.groupMember.userId,u))}))throw new Error("You don't have access to this group");let m=(0,s.and)((0,s.eq)(n.settlement.groupId,o.groupId),(0,s.or)((0,s.eq)(n.settlement.fromUserId,u),(0,s.eq)(n.settlement.toUserId,u)));return o.status&&(m=(0,s.and)(m,(0,s.eq)(n.settlement.status,o.status))),t.db.query.settlement.findMany({where:m,orderBy:[(0,s.desc)(n.settlement.createdAt)],with:{fromUser:!0,toUser:!0}})})),create:o.protectedProcedure.input(u.createSettlementSchema).mutation((async({ctx:t,input:o})=>{const u=await t.db.query.groupMember.findMany({where:(0,s.and)((0,s.eq)(n.groupMember.groupId,o.groupId),(0,s.or)((0,s.eq)(n.groupMember.userId,o.fromUserId),(0,s.eq)(n.groupMember.userId,o.toUserId)))});if(2!==new Set(u.map((t=>t.userId))).size)throw new Error('Both users must be members of the group');const[m]=await t.db.insert(n.settlement).values({...o,status:'pending'}).returning();return m})),markAsCompleted:o.protectedProcedure.input(t.z.object({id:t.z.string().uuid()})).mutation((async({ctx:t,input:o})=>{const u=t.session.user.id,m=await t.db.query.settlement.findFirst({where:(0,s.eq)(n.settlement.id,o.id)});if(!m)throw new Error('Settlement not found');if(m.fromUserId!==u)throw new Error('Only the user who owes can mark the settlement as completed');const[p]=await t.db.update(n.settlement).set({status:'completed',settledAt:new Date,updatedAt:new Date}).where((0,s.eq)(n.settlement.id,o.id)).returning();return p})),delete:o.protectedProcedure.input(t.z.object({id:t.z.string().uuid()})).mutation((async({ctx:t,input:o})=>{const u=t.session.user.id,m=await t.db.query.settlement.findFirst({where:(0,s.eq)(n.settlement.id,o.id)});if(!m)throw new Error('Settlement not found');if(m.fromUserId!==u&&m.toUserId!==u)throw new Error("You don't have permission to delete this settlement");if('completed'===m.status)throw new Error('Cannot delete a completed settlement');return await t.db.delete(n.settlement).where((0,s.eq)(n.settlement.id,o.id)),{success:!0}}))}}),7391,[3739,3740,3810,6922,3737]);
module.exports = __r(6917);